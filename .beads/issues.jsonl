{"id":"aura-plugins-1bm","title":"PROPOSAL-2: bin/aura-release — revised after review","description":"---\nreferences:\n  request: aura-plugins-j2k\n  urd: aura-plugins-99q\n  proposal_1: aura-plugins-wux\n  review_1: aura-plugins-1ey\n---\n\n# PROPOSAL-2: bin/aura-release (revised)\n\nAll BLOCKER and IMPORTANT findings from PROPOSAL-1-REVIEW addressed.\n\n## Changes from PROPOSAL-1\n\n### BLOCKER fixes\n1. **Plugin selection by name**: marketplace.json plugins selected by name==\"aura\" predicate, not array index\n2. **Section-anchored TOML parsing**: Regex anchored to [project] section. Match version= only between [project] header and next [...] header. Alternatively use tomllib (3.11+) for reading with regex replacement for writing (avoids reordering keys)\n3. **--check mode fully defined**:\n   - Standalone: `aura-release --check` (no bump argument required)\n   - Exit 0: all versions consistent\n   - Exit 1: drift detected (prints table of file → version)\n   - --check --sync is invalid (mutual exclusion enforced)\n\n### IMPORTANT fixes\n4. **Pre-defined rollback list**: Before any writes, capture the 3 target files + CHANGELOG.md path in a rollback set. On any failure, git checkout all of them unconditionally\n5. **No prior tag fallback**: If no vX.Y.Z tag exists, changelog includes all commits since initial commit (git rev-list --max-parents=0 HEAD)\n6. **Source of truth explicit**: --sync reads pyproject.toml as canonical version, overwrites plugin.json and marketplace.json to match\n7. **Explicit git add whitelist**: Commit stages exactly: pyproject.toml, .claude-plugin/plugin.json, .claude-plugin/marketplace.json, CHANGELOG.md. Never uses git commit -a or git add .\n\n### MINOR acknowledgments\n8. **Double-bump warning**: If current version != last tag version AND no --sync, warn user and require --force or abort\n9. **UTF-8 encoding**: subprocess.run with encoding=\"utf-8\" for all git log calls\n\n## Architecture\n\n### File: bin/aura-release\n\nSingle Python 3.10+ script, stdlib only.\n\n### Version parsing strategy\n\n```python\n# Read: section-anchored regex\ndef read_pyproject_version(path: Path) -\u003e str:\n    text = path.read_text(encoding=\"utf-8\")\n    # Match version= only within [project] section\n    m = re.search(\n        r\"^\\[project\\]\\s*\\n(?:(?!\\[).*\\n)*?version\\s*=\\s*\\\"(\\d+\\.\\d+\\.\\d+)\\\"\",\n        text, re.MULTILINE\n    )\n    ...\n\n# Write: targeted line replacement within [project] section\ndef write_pyproject_version(path: Path, old: str, new: str) -\u003e None:\n    text = path.read_text(encoding=\"utf-8\")\n    # Replace only the first occurrence after [project]\n    text = text.replace(f'version = \"{old}\"', f'version = \"{new}\"', 1)\n    path.write_text(text, encoding=\"utf-8\")\n```\n\n### marketplace.json plugin selection\n\n```python\ndef update_marketplace(path: Path, new_version: str) -\u003e None:\n    data = json.loads(path.read_text(encoding=\"utf-8\"))\n    data[\"metadata\"][\"version\"] = new_version\n    for plugin in data[\"plugins\"]:\n        if plugin[\"name\"] == \"aura\":\n            plugin[\"version\"] = new_version\n            break\n    path.write_text(json.dumps(data, indent=2) + \"\\n\", encoding=\"utf-8\")\n```\n\n### CLI interface\n\n```\n# Bump version\naura-release \u003cmajor|minor|patch\u003e [--dry-run] [--sync] [--no-changelog] [--no-commit] [--no-tag]\n\n# Check consistency only\naura-release --check\n```\n\nExit codes:\n- 0: success (or --check with consistent versions)\n- 1: --check found drift (prints version table)\n- 2: pre-flight failure (dirty tree, detached HEAD, etc.)\n\n### Workflow\n\n1. Parse args\n2. If --check: read all 3 files, compare versions, exit 0/1\n3. Pre-flight checks:\n   a. Not detached HEAD\n   b. Working tree clean (git status --porcelain, ignore .beads/)\n   c. Read versions from all 3 files\n   d. If versions differ AND --sync not given: exit 2 with error\n   e. If --sync: overwrite plugin.json + marketplace.json to match pyproject.toml\n4. Compute new version from current + bump type\n5. Define rollback set: [pyproject.toml, plugin.json, marketplace.json, CHANGELOG.md]\n6. try:\n   a. Update pyproject.toml (section-anchored replace)\n   b. Update plugin.json (json.load/dump)\n   c. Update marketplace.json (select by name==\"aura\")\n   d. Generate CHANGELOG entry (git log since last vX.Y.Z tag, or since root)\n   e. Prepend to CHANGELOG.md (create if missing)\n   f. If not --no-commit: git add \u003cwhitelist\u003e \u0026\u0026 git commit -m \"chore: release vX.Y.Z\"\n   g. If not --no-tag: git tag -a vX.Y.Z -m \"Release vX.Y.Z\"\n7. except: rollback all files in rollback set via git checkout\n8. Print summary\n\n### CHANGELOG format (Keep a Changelog)\n\n```markdown\n# Changelog\n\n## [0.3.0] - 2026-02-21\n\n### Added\n- feat: some new feature (#commit-short)\n\n### Fixed\n- fix: some bug fix (#commit-short)\n\n### Changed\n- refactor: some refactoring (#commit-short)\n\n### Other\n- chore: some chore (#commit-short)\n```\n\nCommit prefix → section mapping:\n- feat → Added\n- fix → Fixed\n- refactor, perf → Changed\n- docs → Documentation\n- everything else → Other\n\n## Nix integration\n- flake.nix packages auto-wrap bin/* → aura-release included automatically\n- No flake.nix changes needed\n\n## Files\n- bin/aura-release (NEW)\n- CHANGELOG.md (created on first release)","status":"open","priority":2,"issue_type":"feature","assignee":"architect","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:14:01Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:14:01Z","labels":["aura:p3-plan:s3-propose"],"dependencies":[{"issue_id":"aura-plugins-1bm","depends_on_id":"aura-plugins-5sn","type":"blocks","created_at":"2026-02-21T12:19:14Z","created_by":"David Huu Pham","metadata":"{}"}]}
{"id":"aura-plugins-1ey","title":"PROPOSAL-1-REVIEW: Design review findings","description":"---\nreferences:\n  proposal: aura-plugins-wux\n---\n\n## Review Verdict: REVISE (3 BLOCKERs)\n\n### BLOCKERs\n1. marketplace.json plugins must be selected by name==\"aura\", not array index\n2. TOML regex must be section-anchored to [project] block, or use tomllib (3.11+) with fallback\n3. --check mode is undefined (exit codes, interaction with --sync)\n\n### IMPORTANTs\n1. Rollback list must be pre-defined covering all 3 files regardless of write order\n2. \"No prior tag\" fallback for changelog is unspecified\n3. --sync source-of-truth (pyproject.toml) must be explicitly stated\n4. Dirty-tree exception: commit must use explicit git add (whitelist), not git commit -a\n\n### MINORs\n1. --no-commit --no-tag double-bump footgun\n2. Non-ASCII git log needs explicit UTF-8 handling","status":"open","priority":2,"issue_type":"task","assignee":"architect","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:13:25Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:13:25Z","labels":["aura:p4-plan:s4-review"],"dependencies":[{"issue_id":"aura-plugins-1ey","depends_on_id":"aura-plugins-1bm","type":"blocks","created_at":"2026-02-21T12:14:05Z","created_by":"David Huu Pham","metadata":"{}"}]}
{"id":"aura-plugins-5sn","title":"UAT-1: Plan acceptance for release automation PROPOSAL-2","description":"---\nreferences:\n  proposal: aura-plugins-1bm\n---\n\n## UAT Result: ACCEPT\n\nUser accepted PROPOSAL-2 design for bin/aura-release.\nNo revision feedback provided.","status":"open","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:19:14Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:19:14Z","labels":["aura:p5-user:s5-uat"],"dependencies":[{"issue_id":"aura-plugins-5sn","depends_on_id":"aura-plugins-bch","type":"blocks","created_at":"2026-02-21T12:19:27Z","created_by":"David Huu Pham","metadata":"{}"}]}
{"id":"aura-plugins-6yr","title":"SLICE-2: Fix CLI UX error messages in bin/aura-release","description":"---\nreferences:\n  uat: aura-plugins-nfr\n  impl_plan: aura-plugins-bch\n---\n\n## Specification\n\nFix 4 UX issues identified during UAT-2 in bin/aura-release error messages.\n\n## Files Owned\n- bin/aura-release (lines ~430-465: CLI/main, lines ~305-341: cmd_release pre-flight, lines ~286-302: cmd_check)\n\n## Issues to Fix\n\n### Issue 1: No-args error message needs actionable examples\n**Current (line 459):**\n  bump type required (major, minor, or patch). Use --check for consistency validation.\n**Required:** Show example commands:\n  aura-release patch           # bump patch version\n  aura-release minor           # bump minor version\n  aura-release --check         # check version consistency\n  aura-release patch --dry-run # preview changes\n\n### Issue 2: Drift error needs to suggest exact fix command\n**Current (lines 337-340):**\n  Error: version drift detected:\n    pyproject.toml: 0.2.2\n    ...\n  Use --sync to align before bumping.\n**Required:** Show the exact command the user should run, e.g.:\n  Try: aura-release \u003cbump\u003e --sync\n  (where \u003cbump\u003e is the bump_kind the user already passed)\n\n### Issue 3: --sync should explain what needs to be clean\n**Current (lines 321-324):**\n  Error: working tree has uncommitted changes (outside .beads/).\n  Commit or stash them first.\n**Required:** Briefly explain WHAT needs to be clean: tracked files outside .beads/ must have no uncommitted changes. The .beads/ directory is always excluded from the clean-tree check.\n\n### Issue 4: Overall — all error paths should guide user to next action\nEvery error exit should end with a concrete \"Try: ...\" or \"Next: ...\" suggestion.\n\n## Acceptance Criteria\nGiven a user runs aura-release with no args, when they see the error, then the message shows example commands they can copy-paste.\nGiven a user runs aura-release patch and versions are drifted, when they see the drift error, then the message shows the exact command with --sync to fix it.\nGiven a user runs aura-release and the working tree is dirty, when they see the error, then the message explains what files need to be clean.","status":"open","priority":2,"issue_type":"task","assignee":"worker-1","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:31:06Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:31:06Z","labels":["aura:p9-impl:s9-slice"],"comments":[{"id":1,"issue_id":"aura-plugins-6yr","author":"David Huu Pham","text":"SLICE-2 complete. All 4 UX error message fixes verified: (1) no-args shows usage examples, (2) drift error shows exact command with --sync, (3) dirty tree explains what needs to be clean, (4) detached HEAD shows git checkout suggestion.","created_at":"2026-02-21T20:32:40Z"}]}
{"id":"aura-plugins-99q","title":"URD: Release automation requirements document","description":"---\nreferences:\n  request: aura-plugins-j2k\n  elicit: aura-plugins-wqw\n---\n\n# URD: Automated Release Tagging and Version Bumping\n\n## 1. Purpose\nA CLI tool (bin/aura-release) that automates version bumping, CHANGELOG generation, git commit, and annotated tagging for the aura-plugins repository.\n\n## 2. Scope\n- Single Python 3.10+ script, stdlib only (zero external dependencies)\n- Follows existing bin/ tool conventions (argparse, same shebang pattern)\n- Operates on the local git repository only (no push)\n\n## 3. Functional Requirements\n\n### FR-1: Version Bump\n- Accept bump type: major | minor | patch\n- Parse current version from pyproject.toml (source of truth)\n- Compute new version per semver rules\n- Update version in exactly 3 files:\n  - pyproject.toml: project.version field\n  - .claude-plugin/plugin.json: top-level version field\n  - .claude-plugin/marketplace.json: metadata.version AND plugins[0].version\n- Must NOT modify plugins[1].version (agentfilter, external)\n\n### FR-2: Version Consistency Check\n- Before bumping, validate all 3 files have the same version\n- If versions are inconsistent, offer a --sync flag to align them to pyproject.toml's version before bumping\n- On first run with existing drift, --sync aligns marketplace.json to current 0.2.2\n\n### FR-3: CHANGELOG Generation\n- Auto-generate CHANGELOG.md entries from git log between tags\n- Use \"Keep a Changelog\" format (https://keepachangelog.com)\n- Group commits by type using conventional commit prefixes (feat, fix, chore, etc.)\n- If no prior tag exists, include all commits since initial commit\n\n### FR-4: Git Commit\n- Stage the 3 version files + CHANGELOG.md\n- Create commit with message: \"chore: release vX.Y.Z\"\n\n### FR-5: Git Tag\n- Create annotated tag: vX.Y.Z\n- Tag message: \"Release vX.Y.Z\"\n\n## 4. Non-Functional Requirements\n\n### NFR-1: Pre-flight Checks\n- Working tree must be clean (no uncommitted changes beyond .beads/)\n- Must be on a branch (not detached HEAD)\n- Current version must parse as valid semver\n\n### NFR-2: Dry Run\n- Support --dry-run flag showing what would happen without making changes\n\n### NFR-3: Error Handling\n- Atomic: if any step fails, roll back file changes (git checkout the files)\n- Clear error messages for each failure mode\n\n### NFR-4: Idempotency\n- Running with --sync when versions already match is a no-op\n\n## 5. CLI Interface\n\n```\naura-release \u003cmajor|minor|patch\u003e [--dry-run] [--sync] [--no-changelog] [--no-commit] [--no-tag]\naura-release --check  # just validate version consistency\n```\n\n## 6. Files Affected\n- bin/aura-release (NEW — the tool itself)\n- pyproject.toml (version field)\n- .claude-plugin/plugin.json (version field)\n- .claude-plugin/marketplace.json (2 version fields)\n- CHANGELOG.md (created/appended)","status":"open","priority":2,"issue_type":"task","assignee":"architect","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:10:46Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:10:46Z","labels":["aura:p2-user:s2_2-urd"],"dependencies":[{"issue_id":"aura-plugins-99q","depends_on_id":"aura-plugins-wux","type":"blocks","created_at":"2026-02-21T12:11:27Z","created_by":"David Huu Pham","metadata":"{}"}]}
{"id":"aura-plugins-bch","title":"IMPL_PLAN: bin/aura-release implementation","description":"---\nreferences:\n  proposal: aura-plugins-1bm\n---\n\nSingle slice: implement bin/aura-release per PROPOSAL-2.\nOne file to create, no files to modify (version files modified by the tool at runtime, not at build time).","status":"open","priority":2,"issue_type":"epic","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:19:22Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:19:22Z","labels":["aura:p8-impl:s8-plan"],"dependencies":[{"issue_id":"aura-plugins-bch","depends_on_id":"aura-plugins-6yr","type":"blocks","created_at":"2026-02-21T12:31:09Z","created_by":"David Huu Pham","metadata":"{}"},{"issue_id":"aura-plugins-bch","depends_on_id":"aura-plugins-e19","type":"blocks","created_at":"2026-02-21T12:19:31Z","created_by":"David Huu Pham","metadata":"{}"}]}
{"id":"aura-plugins-e19","title":"SLICE-1: Implement bin/aura-release","description":"---\nreferences:\n  impl_plan: aura-plugins-bch\n  proposal: aura-plugins-1bm\n---\n\nImplement bin/aura-release per PROPOSAL-2.\nSingle file: bin/aura-release","status":"open","priority":2,"issue_type":"task","assignee":"worker","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:19:28Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:19:28Z","labels":["aura:p9-impl:s9-slice"],"dependencies":[{"issue_id":"aura-plugins-e19","depends_on_id":"aura-plugins-jjo","type":"blocks","created_at":"2026-02-21T12:23:45Z","created_by":"David Huu Pham","metadata":"{}"}]}
{"id":"aura-plugins-j2k","title":"REQUEST: Automated release tagging and version bumping for aura-plugins","description":"---\nverbatim_request: \"I need automated release tagging and version bumping for the Claude Code plugin.\"\nclassification:\n  scope: medium\n  complexity: medium\n  risk: low\n  domain_novelty: low\n---\n\n## User Request (Verbatim)\n\n\"I need automated release tagging and version bumping for the Claude Code plugin.\"\n\n## Phase 1 Findings\n\n### s1_1-classify\nScope: medium | Complexity: medium | Risk: low | Domain Novelty: low\n\n### s1_2-research\n- Git tag convention: vX.Y.Z (annotated tags) is industry standard\n- Semver: major, minor, patch\n- Pre-release checks: clean working tree, version consistency across files\n- Single Python script with argparse is sufficient for small projects\n- CHANGELOG: Keep a Changelog format\n- Post-release: push tag, optionally gh release create\n\n### s1_3-explore\n- 3 files need version updates: pyproject.toml, plugin.json, marketplace.json\n- marketplace.json has 2 version fields (metadata.version + plugins[0].version)\n- plugins[1].version (agentfilter) is external, must NOT be bumped\n- Currently out of sync: marketplace.json at 0.2.1, others at 0.2.2\n- No git tags exist\n- bin/ tools, flake.nix, README.md have no hardcoded versions","status":"open","priority":2,"issue_type":"task","assignee":"architect","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:10:12Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:10:12Z","labels":["aura:p1-user:s1_1-classify","aura:p1-user:s1_2-research","aura:p1-user:s1_3-explore"],"dependencies":[{"issue_id":"aura-plugins-j2k","depends_on_id":"aura-plugins-wqw","type":"blocks","created_at":"2026-02-21T12:10:26Z","created_by":"David Huu Pham","metadata":"{}"}]}
{"id":"aura-plugins-jjo","title":"SLICE-1-REVIEW: Code review for bin/aura-release","description":"---\nreferences:\n  slice: aura-plugins-e19\n---\n\n## Review Findings (all resolved)\n\n### BLOCKER (fixed)\n1. rollback() had `or True` guard causing git checkout on non-existent files → removed\n\n### IMPORTANT (fixed)\n2. --sync + --no-commit leaves files dirty → added warning message\n3. cmd_check drift marker compared to first dict value → now uses pyproject.toml as canonical reference\n4. write_pyproject_version raised false RuntimeError on re-run → switched to pre-check regex match\n\n### MINOR (acknowledged)\n5. commits_since drops commit bodies/trailers → documented limitation, spec does not require trailers\n6. working_tree_dirty drops old rename path → extremely unlikely scenario\n\nAll BLOCKER and IMPORTANT findings resolved in the implementation.","status":"open","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:23:41Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:23:41Z","labels":["aura:p10-impl:s10-review"]}
{"id":"aura-plugins-nfr","title":"UAT-2: Implementation testing — UX issues found","description":"---\nreferences:\n  slice: aura-plugins-e19\n  review: aura-plugins-jjo\n---\n\n## UAT Result: ACCEPT with UX fixes needed\n\n### User Testing Logs (Verbatim)\n\nUser ran the following commands and found UX confusion:\n\n1. `python3 bin/aura-release` (no args) → error message says \"bump type required\" but doesn't show example usage\n2. `python3 bin/aura-release --dry-run` → confusing: fails asking for bump type, user expected it to show what current state is\n3. `python3 bin/aura-release --dry-run --sync` → same, fails asking for bump type\n4. `python3 bin/aura-release patch --dry-run` → fails with drift error, user didn't know --sync was needed alongside patch\n\n### User Feedback (Verbatim)\n- \"This was confusing: what does the program do when no subcommands or flags are given? How come the --dry-run kept failing? Error message is un-informative.\"\n- \"--check flag has good output and actionable output message.\"\n- \"--sync was confusing: only seasoned CLI users would know how to parse the message and know what was missing.\"\n- \"Good so far: should also have a message about what needs to be clean in the git worktree when syncing.\"\n\n### Issues to Fix\n1. No-args and missing-bump-type error messages need actionable examples\n2. Drift error needs to show the exact command to run (e.g., \"Try: aura-release patch --sync\")\n3. --sync should explain what needs to be clean in the git worktree\n4. Overall: error messages should guide the user to the next action","status":"open","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:30:17Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:30:17Z","labels":["aura:p11-user:s11-uat"]}
{"id":"aura-plugins-wqw","title":"ELICIT: Release automation requirements","description":"---\nreferences:\n  request: aura-plugins-j2k\n---\n\n## URE Survey Results (Verbatim)\n\n### Q1: What semver bump types should the tool support?\n**Answer:** major, minor, patch (Recommended)\n\u003e Standard 3-level semver bumps (e.g., 0.2.2 → 0.3.0, 0.2.3, 1.0.0)\n\n### Q2: Should the tool also fix the current version drift (marketplace.json at 0.2.1)?\n**Answer:** Yes, fix as part of this feature (Recommended)\n\u003e The release tool's first run will sync all 3 files to the same version\n\n### Q3: What post-bump actions should the tool perform?\n**Answer:** Commit + tag (Recommended)\n\u003e Auto-commit the version files and create an annotated git tag (vX.Y.Z)\n\n### Q4: Should the tool include CHANGELOG generation?\n**Answer:** Yes, auto-generate\n\u003e Generate CHANGELOG.md from git log between tags (Keep a Changelog format)","status":"open","priority":2,"issue_type":"task","assignee":"architect","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:10:23Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:10:23Z","labels":["aura:p2-user:s2_1-elicit"],"dependencies":[{"issue_id":"aura-plugins-wqw","depends_on_id":"aura-plugins-99q","type":"blocks","created_at":"2026-02-21T12:10:49Z","created_by":"David Huu Pham","metadata":"{}"}]}
{"id":"aura-plugins-wux","title":"PROPOSAL-1: bin/aura-release — version bump, changelog, and tag tool","description":"---\nreferences:\n  request: aura-plugins-j2k\n  elicit: aura-plugins-wqw\n  urd: aura-plugins-99q\n---\n\n# PROPOSAL-1: bin/aura-release\n\n## Summary\n\nA single Python 3.10+ script (stdlib only) at bin/aura-release that:\n1. Bumps version across 3 manifest files\n2. Auto-generates CHANGELOG.md from git log\n3. Creates a commit and annotated git tag\n\n## Architecture\n\n### Single-file design\nFollowing the bin/aura-swarm and bin/aura-parallel convention:\n- Shebang: #!/usr/bin/env python3\n- argparse CLI, no external dependencies\n- ~300-400 lines estimated\n\n### Version file map\n\n| File | Field(s) | Parse method |\n|------|----------|-------------|\n| pyproject.toml | project.version (line ~3) | Regex on `version = \"X.Y.Z\"` |\n| .claude-plugin/plugin.json | .version | json.load/dump |\n| .claude-plugin/marketplace.json | .metadata.version + .plugins[0].version | json.load/dump |\n\nNote: plugins[1] (agentfilter) is never touched.\n\n### CLI interface\n\n```\nbin/aura-release \u003cmajor|minor|patch\u003e [options]\nbin/aura-release --check\n```\n\nOptions:\n- --dry-run: Show what would happen, change nothing\n- --sync: Align all files to pyproject.toml version before bumping\n- --no-changelog: Skip CHANGELOG generation\n- --no-commit: Skip git commit\n- --no-tag: Skip git tag creation\n\n### Workflow (happy path)\n\n1. Pre-flight checks:\n   - Not detached HEAD\n   - Working tree clean (allow .beads/ changes)\n   - All 3 version files have same version (or --sync used)\n2. Parse current version from pyproject.toml\n3. Compute new version (semver bump)\n4. Update 3 files (4 version fields total)\n5. Generate CHANGELOG.md entry:\n   - Find previous tag (or use root commit if none)\n   - Collect commits since last tag\n   - Group by conventional commit prefix (feat, fix, chore, refactor, etc.)\n   - Prepend new section to CHANGELOG.md (create if missing)\n   - Format: Keep a Changelog (https://keepachangelog.com)\n6. Stage files: pyproject.toml, plugin.json, marketplace.json, CHANGELOG.md\n7. Commit: \"chore: release vX.Y.Z\"\n8. Tag: annotated vX.Y.Z with message \"Release vX.Y.Z\"\n9. Print summary and remind user to push\n\n### Error recovery\n- If any step fails after file modification, restore files via git checkout\n- JSON files written with indent=2 to preserve formatting\n- TOML updated via regex to avoid adding a TOML library dependency\n\n### --check mode\nJust validates version consistency across all 3 files and exits with code 0 (consistent) or 1 (drift detected), printing the versions found.\n\n## Nix integration\n- flake.nix already wraps bin/* scripts → aura-release will auto-package\n- No version field in flake.nix → no changes needed there\n\n## Files to create/modify\n- bin/aura-release (NEW)\n- CHANGELOG.md (created on first release)\n\n## What this does NOT do\n- Push to remote (user does this manually)\n- Create GitHub releases (can be done later via gh release create)\n- Modify flake.nix or nix/hm-module.nix","status":"open","priority":2,"issue_type":"feature","assignee":"architect","owner":"dayvidpham@gmail.com","created_at":"2026-02-21T20:11:23Z","created_by":"David Huu Pham","updated_at":"2026-02-21T20:11:23Z","labels":["aura:p3-plan:s3-propose"],"dependencies":[{"issue_id":"aura-plugins-wux","depends_on_id":"aura-plugins-1ey","type":"blocks","created_at":"2026-02-21T12:13:28Z","created_by":"David Huu Pham","metadata":"{}"}]}
