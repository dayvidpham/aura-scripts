{"id":"aura-scripts-0g8","title":"IMPL-REVIEW-C-1: Code review (Reviewer C: Elegance)","description":"---\nreferences:\n  impl_plan: aura-scripts-xky\n  urd: aura-scripts-9d9\n  proposal: aura-scripts-5eh\n  request: aura-scripts-82j\n---\n## Axis C: Elegance and complexity matching\n\nReview all 40 changed files for organization and proportional complexity.\n\nKey questions:\n- Is information well-organized across files (minimal duplication)?\n- Are cross-references between docs correct and navigable?\n- Is the protocol/README.md a good entry point?\n- Does protocol/AGENTS.md avoid duplicating PROCESS.md content?\n- Does protocol/SKILLS.md accurately map commands to phases?\n- Is complexity proportional (not over-documented or under-documented)?\n- Are naming conventions consistent and memorable?\n\n## Files to Review\n40 files: git diff --name-only main...HEAD\n\n## Vote\nBinary: ACCEPT or REVISE","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:13:45.939316217-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:51.186939913-08:00","closed_at":"2026-02-20T02:22:51.186939913-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review"],"comments":[{"id":43,"issue_id":"aura-scripts-0g8","author":"David Huu Pham","text":"## Vote: ACCEPT\n\n## Findings\n\n### BLOCKER\n- None\n\n### IMPORTANT\n- **I1: Broken PROCESS.md links from 30 of 33 command files.** Most command files in `commands/` link to PROCESS.md via bare `(PROCESS.md#phase-...)` — a path that does not resolve from their location (`commands/`). Only 3 files (`aura:epoch.md`, `aura:user:request.md`, `aura:user:elicit.md`) correctly use `(../../protocol/PROCESS.md#...)`. Since these files are deployed to `~/.claude/commands/`, neither path resolves at runtime — agents would need to use Beads or grep to find the right doc. However, this inconsistency is confusing: the 3 correct files set a pattern that the other 30 do not follow. All 33 should use the same path convention. Suggestion: choose one convention (e.g., always `../../protocol/PROCESS.md#...`) and apply uniformly.\n\n- **I2: UAT_EXAMPLE.md not updated but referenced by 4 files.** `protocol/UAT_EXAMPLE.md` is referenced from `protocol/README.md` (line 24), `protocol/UAT_TEMPLATE.md` (line 142), and `README.md` (lines 513, 620), and is listed in the README's project structure. However, it was NOT included in the 40 changed files. The example still uses v1 labels (`aura:user:uat`, `aura:plan:ratify`) and the deprecated `bd dep relate` command (line 14). This means the only worked UAT example contradicts the v2 protocol. Suggestion: update UAT_EXAMPLE.md to v2 conventions, or add a note that it predates v2.\n\n### MINOR\n- **M1: Handoff table duplicated across 4 files.** The 5-transition handoff matrix appears in nearly identical form in `protocol/CLAUDE.md` (line 340), `protocol/PROCESS.md` (line 345), `protocol/AGENTS.md` (line 161), and `protocol/HANDOFF_TEMPLATE.md` (line 9). CLAUDE.md and PROCESS.md are the worst offenders — both carry the full table plus same-actor exemption note. AGENTS.md at least adds file path details. Could simplify CLAUDE.md and PROCESS.md to reference HANDOFF_TEMPLATE.md for the canonical table.\n\n- **M2: Label schema explanation repeated 5 times.** The full 12-phase label mapping is reproduced in `protocol/CLAUDE.md`, `protocol/README.md`, `protocol/CONSTRAINTS.md`, `protocol/PROCESS.md`, and `commands/aura:epoch.md`. While some repetition aids discoverability, 5 full copies create a maintenance burden. The README and CLAUDE.md could reference CONSTRAINTS.md as the canonical source and show only a few examples.\n\n- **M3: `aura:test.md` still uses npm-specific commands.** `commands/aura:test.md` references `npm run typecheck`, `npm run test:unit`, etc. The protocol is intended to be language-agnostic (the URD explicitly says \"not specific to a golang codebase\"). Since this is a protocol toolkit, the test skill should either use generic placeholder commands or note that these are project-specific. This is pre-existing but worth noting since SKILLS.md describes it generically as \"Run tests using BDD patterns.\"\n\n- **M4: PROCESS.md anchor mismatches for command links.** Several PROCESS.md cross-references use anchor names that do not match the actual headings. For example, `#phase-5-plan-uat` (used by `aura:user:uat.md`) does not match the actual heading \"Phase 5: Plan UAT (`aura:p5-user`)\" which would generate anchor `#phase-5-plan-uat-aurap5-user`. Similarly `#phase-4-plan-review`, `#phase-8-implementation-plan`, `#phase-9-worker-slices`, `#phase-10-code-review`, `#phase-12-landing` all omit the label-in-parens suffix. Whether this breaks depends on the renderer, but it is inconsistent with how the headings are actually written.\n\n- **M5: Minor naming inconsistency in `aura:supervisor.md`.** Line 41 references `aura:p9-impl:slice-complete` as a label, but this label is not part of the v2 label schema defined in CONSTRAINTS.md or CLAUDE.md. It appears to be a convention from the `aura:impl:slice.md` file (line 87) but is not in the official special labels list. Should either be added to the schema or replaced with a standard status update pattern.","created_at":"2026-02-20T10:17:13Z"},{"id":51,"issue_id":"aura-scripts-0g8","author":"David Huu Pham","text":"Vote: ACCEPT. 0 BLOCKERs, 2 IMPORTANT, 5 MINOR.","created_at":"2026-02-20T10:22:51Z"}]}
{"id":"aura-scripts-0kh","title":"EPIC: Package aura-scripts as Claude Code / OpenCode plugin","description":"Convert aura-scripts from ~/.claude/commands/ layout to a proper plugin with skills/*/SKILL.md format. Own marketplace repo at dayvidpham/aura-scripts.\n\nKey decisions:\n- All commands become skills (skills/\u003cname\u003e/SKILL.md)\n- Protocol docs bundled in skills/protocol/ as supporting files\n- Scripts (aura-swarm, aura-parallel) on PATH, referenced by bare name\n- No plugin agents (roles are skills only)\n- Dual-platform: Claude Code (.claude-plugin/) + OpenCode (native .claude/skills/ discovery)\n- Colon names become hyphens (aura:user:request → user-request, invoked as /aura:user-request)","status":"open","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T05:53:53.089129678-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T05:53:53.089129678-08:00","comments":[{"id":54,"issue_id":"aura-scripts-0kh","author":"David Huu Pham","text":"URE: Plugin Packaging Requirements Elicitation\n\nQ1: What's the distribution target for the aura-scripts plugin?\nOptions: Own marketplace repo / Official Anthropic directory / Both\nA1: Own marketplace repo\n(Create a marketplace at dayvidpham/aura-scripts. Users run /plugin marketplace add dayvidpham/aura-scripts to install.)\n\nQ2: How should the protocol reference docs (PROCESS.md, CONSTRAINTS.md, HANDOFF_TEMPLATE.md, schema.xml, etc.) be made available to agents using the plugin?\nOptions: Bundled as skill supporting files / Injected via CLAUDE.md include / Keep as-is at repo root\nA2: Bundled as skill supporting files\n(Put protocol/ docs inside a skill folder e.g. skills/aura-protocol/SKILL.md + supporting files. Agents read them via ${CLAUDE_PLUGIN_ROOT}.)\n\nQ3: Should the 34 command files remain as commands/ (user-invoked via /aura:*), or should some become skills/ (auto-invocable by Claude based on context)?\nOptions: All stay as commands / Orchestrators as skills, rest as commands / Phase-entry skills + leaf commands\nA3: Everything as skill (user's own words, not a listed option)\n\nQ4: Should role agents (architect, supervisor, worker, reviewer) be defined as plugin agents/ (spawnable subagents with tool restrictions and model selection)?\nOptions: Yes, define plugin agents / No, keep roles as skills only\nA4: No, keep roles as skills only\n\nQ5: For the scripts (aura-swarm, launch-parallel.py), how should they be discoverable across Claude Code and OpenCode?\nOptions: PATH-based (Recommended) / Relative from SKILL.md / Env var with fallback\nA5: PATH-based (Recommended)\n\nAdditional user directives (verbatim):\n- 'I thought Claude Code could auto-invoke commands/ too? I thought they were merged to be the same thing?' — confirmed both commands/ and skills/ are auto-invocable, but skills/ is recommended format\n- 'Looks right, but this should be compatible as an OpenCode plugin too.' — dual-platform requirement added\n- 'This is incorrect. The github.com/anomalyco/opencode is extremely popular.' — corrected: OpenCode has 107k stars, actively maintained, v1.2.10\n- 'https://opencode.ai/docs/plugins/ is the source of truth: those marketplaces are bogus, almost entirely unused, less than 10 stars each.' — corrected marketplace info\n- 'Should create an aura:parallel and aura:swarm command to automate usage of the aura-swarm and launch-parallel.py.' — two new skills added\n- 'In that case, should rename launch-parallel.py to aura-parallel. Should have proper shebang.' — rename confirmed\n- 'Should update the internal cross-references via sed. Then make the folder structure, move the files.' — implementation approach","created_at":"2026-02-20T14:00:03Z"},{"id":55,"issue_id":"aura-scripts-0kh","author":"David Huu Pham","text":"Plugin migration complete (commit caf3bb2): 35 commands → 38 skills, protocol → skills/protocol/, scripts moved, .claude-plugin manifests created, all cross-references updated.","created_at":"2026-02-20T14:13:11Z"}]}
{"id":"aura-scripts-0m8","title":"SLICE-4: Phase 8-12 skills (supervisor + worker + impl)","description":"## References\n- IMPL_PLAN: aura-scripts-xky\n- PROPOSAL-2: aura-scripts-5eh\n- URD: aura-scripts-9d9\n\n## Blocked by SLICE-1 (protocol core must be done first)\n\n## Files (12)\n- commands/aura:supervisor.md (FULL — follow-up epic owner)\n- commands/aura:supervisor:plan-tasks.md (MODERATE)\n- commands/aura:supervisor:track-progress.md (MODERATE)\n- commands/aura:supervisor:spawn-worker.md (MODERATE — handoff template)\n- commands/aura:supervisor:commit.md (MINIMAL)\n- commands/aura:impl:review.md (FULL — severity tree + handoff)\n- commands/aura:impl:slice.md (MODERATE)\n- commands/aura:worker.md (MODERATE)\n- commands/aura:worker:implement.md (MODERATE)\n- commands/aura:worker:complete.md (MODERATE — handoff template)\n- commands/aura:worker:blocked.md (MINIMAL)\n- commands/aura:user:uat.md (MODERATE)\n\n## Key Changes\n1. Supervisor owns EPIC_FOLLOWUP creation (trigger: review completion + IMPORTANT/MINOR exist)\n2. impl:review.md: eager severity tree, SLICE-N-REVIEW naming, handoff\n3. Handoff templates in spawn-worker.md and worker:complete.md\n4. SLICE-N naming in plan-tasks.md\n5. New labels throughout\n6. Replace bd dep relate with frontmatter references\n\n## Quality Gates\n- grep these 12 files for old labels → 0 hits\n- grep for bd dep relate → 0 hits\n- grep for positional bd dep add → 0 hits","status":"closed","priority":2,"issue_type":"task","assignee":"worker-slice-4","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T00:15:14.406901625-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T01:00:39.88668453-08:00","closed_at":"2026-02-20T01:00:39.88668453-08:00","close_reason":"Closed","labels":["aura:p9-impl:s4-slice"],"dependencies":[{"issue_id":"aura-scripts-0m8","depends_on_id":"aura-scripts-4s1","type":"blocks","created_at":"2026-02-20T00:15:21.379424269-08:00","created_by":"David Huu Pham"}],"comments":[{"id":29,"issue_id":"aura-scripts-0m8","author":"David Huu Pham","text":"Implementation complete. All 12 phase 8-12 skill files updated to v2 protocol. Commit: 77a8c1c. Quality gates pass: no old labels (4 false-positive skill name/file reference matches), no bd dep relate, no old vocabulary, no positional bd dep add.","created_at":"2026-02-20T08:59:05Z"},{"id":30,"issue_id":"aura-scripts-0m8","author":"David Huu Pham","text":"SLICE-4 complete. Commit 77a8c1c.","created_at":"2026-02-20T09:00:39Z"}]}
{"id":"aura-scripts-0xu","title":"PROPOSAL-1-REVIEW-A-1: Plan review (Reviewer A: Correctness)","description":"Vote: ACCEPT\n\nIMPORTANT findings:\n1. Old vote/severity tables in CONSTRAINTS.md conflict with new BLOCKER/IMPORTANT/MINOR taxonomy\n2. No skill file defines who creates EPIC_FOLLOWUP\n3. {epic-id} in handoff path is ambiguous\n\nMINOR findings:\n4. Add old-to-new phase mapping table in migration doc\n5. BDD missing empty severity group edge case\n6. aura:plan.md listed but no checklist item\n7. aura:reviewer:review-code.md has deprecated RFC content","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T19:08:43.333955762-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:14:45.313058642-08:00","closed_at":"2026-02-20T02:14:45.313058642-08:00","close_reason":"Closed","labels":["aura:p4-plan:s1-review"],"comments":[{"id":32,"issue_id":"aura-scripts-0xu","author":"David Huu Pham","text":"ACCEPT: Review completed in previous session.","created_at":"2026-02-20T10:14:45Z"}]}
{"id":"aura-scripts-1vo","title":"FOLLOWUP: Non-blocking improvements from code review (aura-scripts-xky)","description":"---\nreferences:\n  request: aura-scripts-82j\n  impl_plan: aura-scripts-xky\n  review_A: aura-scripts-hl2\n  review_B: aura-scripts-du8\n  review_C: aura-scripts-0g8\n---\n## IMPORTANT Findings\n\n### I-A1 (Reviewer A): UAT_EXAMPLE.md not updated to v2\n- protocol/UAT_EXAMPLE.md still uses old labels (aura:user:uat, aura:plan:ratify) and bd dep relate\n- Pre-existing file, not in scope of this epic's 40 changed files\n- Should be updated to v2 labels and frontmatter references\n\n### I-B1 (Reviewer B): aura:test.md uses npm commands\n- commands/aura:test.md uses npm-specific commands (npm run typecheck, npm run test:unit)\n- Should be language-agnostic or use Go examples to match rest of protocol\n\n### I-B2 (Reviewer B): Go test patterns incomplete\n- No mention of table-driven tests (t.Run with subtests), t.Parallel(), t.Helper()\n- Acceptable for language-agnostic MVP but worth adding\n\n### I-B3 (Reviewer B): L2 failure semantics\n- \"Tests will FAIL\" at L2 is misleading for compiled languages like Go\n- Importing a non-existent function causes compilation error, not test failure\n- Add clarifying note about build errors vs test failures\n\n### I-C1 (Reviewer C): PROCESS.md link paths inconsistent\n- 30 of 33 command files use bare (PROCESS.md#...) links\n- 3 files correctly use (../../protocol/PROCESS.md#...)\n- Should standardize to one convention\n\n### I-C2 (Reviewer C): UAT_EXAMPLE.md not updated (same as I-A1)\n- Duplicate of I-A1, confirms the finding\n\n## MINOR Findings\n\n### M-A1: aura:test.md npm commands (same as I-B1)\n### M-A2: user-request-revamp-v2.md retains old labels (historical, no action needed)\n### M-A3: PROPOSAL-2 source text has bd dep relate (implemented docs correct, source is historical)\n### M-B4: Fixture/constant rules not cross-referenced from worker.md or test.md\n### M-C1: Handoff transition table duplicated across 4 files\n### M-C2: Full label schema repeated in 5 files\n### M-C3: aura:test.md npm commands (same as I-B1)\n### M-C4: PROCESS.md section anchors may not match rendered anchor names\n### M-C5: aura:p9-impl:slice-complete label used but not in official label schema","status":"open","priority":2,"issue_type":"epic","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:22:41.342531189-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:41.342531189-08:00","labels":["aura:epic-followup"],"dependencies":[{"issue_id":"aura-scripts-1vo","depends_on_id":"aura-scripts-ci6","type":"blocks","created_at":"2026-02-20T05:17:00.608770707-08:00","created_by":"David Huu Pham"}],"comments":[{"id":53,"issue_id":"aura-scripts-1vo","author":"David Huu Pham","text":"IMPORTANT: Gap 3 — Finesse planner reference not captured in protocol docs. The URD mentions a 'Finesse planner' concept that should be referenced in the planning phases. Gap 4 — get-shit-done (GSD) reference not captured. The URD mentions a GSD research depth/mode that should inform the research skill's quick-scan depth.","created_at":"2026-02-20T13:16:51Z"}]}
{"id":"aura-scripts-35o","title":"REVIEW_2: Plan review for aura-scripts Nix flake","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-18T05:56:14.630953166-08:00","created_by":"David Huu Pham","updated_at":"2026-02-18T06:09:11.326708867-08:00","closed_at":"2026-02-18T06:09:11.326708867-08:00","close_reason":"Closed","labels":["aura:plan:review"],"dependencies":[{"issue_id":"aura-scripts-35o","depends_on_id":"aura-scripts-5fk","type":"blocks","created_at":"2026-02-18T05:56:19.909059205-08:00","created_by":"David Huu Pham"}],"comments":[{"id":5,"issue_id":"aura-scripts-35o","author":"David Huu Pham","text":"VOTE: REVISE — Proposal direction is correct but out of sync with existing implementation. Key gaps: phases 1-3 already implemented but presented as future work, agents section undocumented, runtime dep wrapping missing for packages, validation checklist incomplete. See REVIEW_2 comment on aura-scripts-5fk for full details.","created_at":"2026-02-18T14:07:36Z"}]}
{"id":"aura-scripts-40x","title":"IMPL-REVIEW-A-1 MINOR","description":"Minor findings from Reviewer A (Correctness)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:13:57.39109725-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:51.517727705-08:00","closed_at":"2026-02-20T02:22:51.517727705-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review","aura:severity:minor"],"comments":[{"id":48,"issue_id":"aura-scripts-40x","author":"David Huu Pham","text":"M1: aura:test.md uses npm-specific commands (pre-existing, not introduced). M2: user-request-revamp-v2.md retains old label aura:plan:ratify (historical record). M3: Ratified PROPOSAL-2 source text contains bd dep relate in follow-up example (not in implemented docs).","created_at":"2026-02-20T10:17:54Z"}]}
{"id":"aura-scripts-4ed","title":"ELICIT: Aura protocol architectural redesign","description":"## URE Survey — Full Verbatim Q\u0026A Record\n\nRequest task: aura-scripts-82j\n\n---\n\n### Component 1: Label Format \u0026 Enforcement\n\n**Q1a: What label format should Aura use for structured task taxonomy?**\n\nOptions presented:\n- (1) Hierarchical with phase number: `aura:p{N}-{phase}:s{M}-{type}` — Machine-parseable, encodes phase + step. Example: `aura:p3-plan:s1-propose`\n- (2) Flat descriptive: `aura:plan:propose`, `aura:impl:slice-1` — Human-readable, no phase numbers. Relies on convention.\n- (3) Domain:action:target: `aura:review:proposal-1`, `aura:impl:slice:auth-module` — Most readable but hardest to validate programmatically.\n- (4) Numeric-only prefix: `aura:3.1:propose`, `aura:9.2:slice` — Most compact but least self-documenting.\n\n**User response (verbatim):** \"Similar to (1): aura:p{phase-number}-{phase}:s{step-number}-{type}. phase-number refers to which phase in the overall process, and step-number exists because each phase usually has an enumerated workflow, some order of operations. This would look like aura:p2-user:s2-elicit (s1 is 1_1-classify, 1_2-research). 1_1 is classifying the user request along some taxonomy (similar to the https://github.com/jonathanung/finesse planner plugin.) 1_2-research is similar to the research step at https://github.com/gsd-build/get-shit-done/, finding what standards exist in this domain, and if a new feature proposal or entire application proposal---trying to find out what other well-regarded projects have been created to address similar issues. Then 1_3-explore is codebase exploration, to see what is currently implemented. Happens in parallel with 1_2-research.\"\n\n**Q1b: How should labels be enforced?**\n\nOptions presented:\n- (1) Required + validated: Every bd create must include a label matching the schema. A validation step checks after creation.\n- (2) Required + auto-applied: Skills auto-apply labels in their bd create templates. No manual labeling needed.\n- (3) Optional but audited: Labels are recommended. A periodic audit flags unlabeled tasks.\n- (4) Schema-only (documentation): Labels are documented but not enforced. Agents self-apply.\n\n**User response (verbatim):** \"(1) and (2). You can now continue with the user's answers in mind.\"\n\n---\n\n### Component 2: Classification, Research, Phase 2 Shape\n\n**Q2a: For the s1_1-classify step, which classification axes should be used?**\n\nOptions presented:\n- By scope: single-file fix, multi-file feature, cross-cutting refactor, new subsystem\n- By complexity: trivial, moderate, complex, research-required\n- By risk: low (internal only), medium (affects existing behavior), high (breaking changes), critical (security/data)\n- By domain novelty: known pattern, adaptation of known, novel design required, research-first\n\n**User response (verbatim):** \"By scope, By complexity, By risk, By domain novelty\" (selected all four)\n\n**Q2b: For s1_2-research, how deep should research go?**\n\nOptions presented:\n- Always web + local: Every request gets both codebase exploration and web research for prior art. Thorough but slow.\n- Local only by default: Codebase exploration always happens. Web research only when classify step flags \"novel\" or \"research-required\".\n- Configurable per-request: Classify step determines depth. User confirms before web research. Most flexible.\n- Skip for known patterns: If classify says \"known pattern\", skip research entirely. Only research for novel/complex.\n\n**User response (verbatim):** \"Configurable per-request. Determine depth required from classify step, then ask user if it matches their expectations. Local is generally always allowed and some degree of local exploration and research is going to happen. Web for deeper research requirements. A good example of this flow is at the @protocol/RESEARCH_EXAMPLE-nix-openclaw-req-ure-proposal.md file, but this repo has incorrect backwards direction dependencies, so ignore those.\"\n\n**Q2c: Phase 2 currently creates an ELICIT task then separately a URD. Should they merge?**\n\nOptions presented:\n- Keep separate (URD as Phase 2.5): ELICIT captures Q\u0026A, URD is created after as a separate synthesis step. Clear separation of raw data vs. requirements.\n- Merge URD into Phase 2: ELICIT step creates the URD directly as s2_2. URD is the structured output of elicitation. Fewer tasks.\n- URD replaces ELICIT: No separate ELICIT task. The URD IS the elicitation record. Simplest but loses raw Q\u0026A.\n- ELICIT is a comment on URD: URD is the primary task. The raw Q\u0026A is stored as a comment. One task, full history.\n\n**User response (verbatim):** \"Merge URD into Phase 2\"\n\n---\n\n### Component 3: Dependency Tree \u0026 Naming Conventions\n\n**Q3a: How should superseded proposals be marked?**\n\nOptions presented:\n- Label: aura:superseded — Add a label to the old proposal. Simple, queryable via `bd list --label aura:superseded`\n- Comment with link — Add comment to old proposal: 'SUPERSEDED by PROPOSAL-2 (task-id)'. Preserves audit trail.\n- Both label + comment — Label for querying, comment for context. Belt and suspenders.\n- Status field only — Use bd's native status/close mechanism if available, no custom label needed\n\n**User response (verbatim):** \"Both label + comment, Label: aura:superseded, Comment with link\"\n\n**Q3b: For task title naming, should the N in PROPOSAL-N and M in REVIEW-M be prefix, suffix, or request-ID prefix?**\n\nOptions presented:\n- Prefix with N (Option A): PROPOSAL-N as title prefix. Clear, grep-able, sequencing visible at a glance.\n- Suffix with rev/round (Option B): More readable titles, sequencing in parenthetical. Harder to grep consistently.\n- Request-ID prefix (Option C): Includes parent request ID for cross-referencing across epochs. Longest but most traceable.\n- Labels carry sequence, titles stay clean: Title is just descriptive text, all sequencing lives in labels.\n\n**User response (verbatim):** \"Prefix with N (Option A)\"\n\n**Q3c: Should code review tasks block the slice or IMPL_PLAN directly?**\n\nOptions presented:\n- Reviews block slice (Option A): Natural: slice can't close until its reviews pass. Keeps review context grouped with the work they review.\n- Reviews block IMPL_PLAN (Option B): Flatter tree. IMPL_PLAN directly sees all outstanding reviews. But loses the slice-review grouping.\n- Reviews block a REVIEW-ROUND parent: Add a REVIEW-ROUND-N task that groups all 3 reviewers. Extra layer but clean grouping.\n\n**User response (verbatim):** \"Okay. I got it. The following schema and process will allow the original REQUEST and IMPL_PLAN epics to close once their implementation is complete, and the blocking issues produced by the reviewers are fixed. This will also allow the reviews to not get lost, and it produces a structured schema for the reviews to live inside a follow up epic. This schema should map cleanly into a sensible database design. As part of your output, include what that database design would look like and request feedback on it.\n\n## The original EPIC\n\nFor each slice, a review round produces a SLICE-1-REVIEW-{A,B,C,...}-{1,2,...} tracking issue. This tracking issue in turn creates children tracking issues, grouped uniquely by severity. The leaf tasks produced by the review will have two parents: one being the review severity tracker, and the other, explained in the next section, will be the vertical slices created afterwards during the EPIC_FOLLOWUP_IMPL_PLAN.\n\nThis REVIEW-{A,B,C,...}-{1,2,...} tracking issue will have several children tracking issues, grouped by {BLOCKER,IMPORTANT,MINOR} severity. These children can also be empty and have no children if no review leaf tasks are produced at that severity. In that case, the severity tracking issue should be closed.\n\nSLICE-1-REVIEW-{A,B,C,...}-{1,2,...}\n  ├── blocked by SLICE-1-REVIEW-{A,B,C,...}-{1,2,...}-BLOCKER\n  ├      ├── blocked by review-blocker-leaf-task-1\n  ├      ├── blocked by review-blocker-leaf-task-...\n  ├      └── blocked by review-blocker-leaf-task-{k}\n  ├── blocked by SLICE-1-REVIEW-{A,B,C,...}-{1,2,...}-IMPORTANT\n  ├     ├── blocked by review-important-leaf-task-1\n  ├     ├── blocked by review-important-leaf-task-...\n  ├     └── blocked by review-important-leaf-task-{k}\n  └── blocked by SLICE-1-REVIEW-{A,B,C,...}-{1,2,...}-MINOR\n        ├── blocked by review-minor-leaf-task-1\n        ├── blocked by review-minor-leaf-task-...\n        └── blocked by review-minor-leaf-task-{k}\n\nThe child blocker tracking issue will ALSO be a child of the slice it belongs to, so it has two parents:\n\nSLICE-1\n  ├── blocked by leaf-task-1\n  ├── blocked by leaf-task-2\n  └── blocked by SLICE-1-REVIEW-{A,B,C,...}-{1,2,...}-BLOCKERS\n        ├── blocked by review-blocker-leaf-task-1\n        ├── blocked by review-blocker-leaf-task-...\n        └── blocked by review-blocker-leaf-task-{k}\n\n## The EPIC_FOLLOWUP\n\nAnd a new followup epic tracking issue would be created. When the EPIC_FOLLOWUP_IMPL_PLAN is sliced up by a supervisor, the review leaf tasks will gain a new parent: the vertical slices for the followup implementation.\n\nEPIC_FOLLOWUP:\n  ├── URD (from the parent REQUEST epic)\n  ├── REVIEW-A-{1,2,...} (reviews on the slices from the original IMPL_PLAN)\n  ├── REVIEW-B-{1,2,...}\n  ├── REVIEW-C-{1,2,...}\n  ├── FOLLOWUP_URE (new URE phase to determine the scope of the followup that should be handled)\n      ├── FOLLOWUP_URD (new tracking URD to document requirements for the followup work)\n      ├── FOLLOWUP_PROPOSAL (taking into account the totality of the outstanding follow-up work, the original URD, and the new FOLLOWUP_URD)\n          ├── EPIC_FOLLOWUP_IMPL_PLAN:\n              ├── blocked by FOLLOWUP-SLICE-1\n              ├    ├── blocked by review-important-leaf-task-...\n              ├    └── blocked by review-minor-leaf-task-{k} (assorted leftover IMPORTANT,MINOR tasks belonging to the independent followup slice)\n              ├── blocked by FOLLOWUP-SLICE-2\n                   ├── blocked by review-important-leaf-task-...\n                   └── blocked by review-minor-leaf-task-{k} (assorted leftover IMPORTANT,MINOR tasks belonging to the independent followup slice)\"\n\n---\n\n### Component 4: Database Design\n\n**Q4a: Does the database design correctly capture the dual-parent relationship and follow-up epic migration?**\n\nOptions presented:\n- Correct as shown: The tables, constraints, and dual-parent pattern match the intended schema.\n- Separate severity from kind: severity should be an independent dimension, not coupled to kind. Any task type could potentially have a severity.\n- Add epic_ref as FK chain: epic_ref should be a chain (FOLLOWUP_SLICE → FOLLOWUP_IMPL_PLAN → EPIC_FOLLOWUP → original EPIC) rather than a flat reference to the top-level epic.\n- Missing fields/tables: Need additional columns (e.g., assignee, reviewer_id, round_number) or tables (e.g., review_rounds, epics)\n\n**User response (verbatim):** \"Separate severity from kind, Correct as shown, Missing fields/tables\"\n**User notes (verbatim):** \"During your thoughts, you say 'a review leaf task could be blocked by both a severity tracker and a follow-up slice—and each task needs a type field to distinguish between all these different task categories.' But this is incorrect, the directions are reversed. The review leaf task is the LEAF. it is not blocked by anything. it is the blocker for its two parents\"\n\n**Q4b: Should FOLLOWUP variants be separate enum values, boolean flag, or generation counter?**\n\nOptions presented:\n- Separate enum values (A): Simple, explicit, no ambiguity. But enum grows if followup-of-followup happens.\n- Boolean flag (B): Keeps kind enum small, followup is orthogonal. But only handles one level of followup.\n- Generation counter (C): Handles arbitrary depth of followup chains. Most flexible but adds complexity.\n- Derive from epic_ref: Don't store followup status on the task. Infer it by walking epic_ref chain.\n\n**User response (verbatim):** \"(A) Separate enum values. Don't need to add followup-of-followup enum: simple single parent relationship.\"\n\n---\n\n### Component 5: Handoff Documents\n\n**Q5a: Should handoff templates be at every transition or only critical ones?**\n\nOptions presented:\n- All phase transitions: Every transition gets a structured handoff document. Maximum context preservation but high overhead.\n- Architect+Supervisor and Reviewer+Followup only: The two transitions where the most context is lost.\n- Architect-to-Supervisor only: This is the critical handoff. Everything else flows through beads tasks.\n- Configurable per-epic: The classify step determines how many handoff documents are needed.\n\n**User response (verbatim):** \"All phase transitions\"\n**User notes (verbatim):** \"There is a Supervisor to Reviewer handoff too. Would WOULD need to put the standardized handoff template in each skill though.\"\n\n**Q5b: Where should handoff documents be stored?**\n\nOptions presented:\n- Markdown file in repo: Git-tracked, reviewable in PRs, survives beads DB issues. But adds file bloat.\n- Beads task description: Queryable via bd, lives with the task it describes. But limited by description field size.\n- Beads task + file reference: Create a Beads task that references a markdown file path. Best of both.\n- Just the Beads task description: Keep it simple.\n\n**User response (verbatim):** \"Can put the handoff docs in the repo's .git/.aura/handoff/{something}.md . Should not actually be pushed up to the git repo unless the user decides they manually want to do that.\"\n\n**Q5c: Should handoff docs include full provenance or summary + IDs?**\n\nOptions presented:\n- Full provenance inline: Self-contained: new agent can understand everything without bd lookups.\n- Summary + beads IDs: Lean: 1-paragraph summary of each phase, with bd IDs for deep-dive.\n- Depends on transition type: Architect-to-Supervisor gets full provenance. Worker-to-Reviewer gets summary + IDs.\n\n**User response (verbatim):** \"Depends on transition type\"\n\n---\n\n### Component 6: Validation Pipeline\n\n**Q6a: How should validation rules be defined and enforced?**\n\nOptions presented:\n- Shell wrapper around bd: A bd-validate or bd-check command that shells out to bd and validates.\n- Beads hook/plugin: If beads supports hooks, register validation that runs automatically.\n- YAML/TOML config + validation command: Define rules declaratively in a config file.\n- Given/When/Then constraints only: No automated enforcement. Rules exist as human-readable constraints.\n\n**User response (verbatim):** \"Shell wrapper around bd, YAML/TOML config + validation command\"\n**User notes (verbatim):** \"Should be some Python script that can be run as a Claude Code or OpenCode plugin. Define our requirements as an XML schema.\"\n\n**Later correction (verbatim):** \"YAML rules should probably just be XML schema\" and \"YAML rules, strange to have both yaml and XML. should just be XML then.\"\n\n**Q6b: When validation fails, what should happen?**\n\nOptions presented:\n- Hard block: refuse to proceed\n- Warn + require explicit override\n- Warn only (log and continue)\n- Configurable per-rule severity\n\n**User response (verbatim):** \"Hard block: refuse to proceed\"\n\n**Q6c: Should rules query the task graph or only check structural fields?**\n\nOptions presented:\n- Graph-aware rules (query task relationships)\n- Structural rules only (label/title/field checks)\n- Both tiers: structural + graph-aware\n- Start structural, add graph later\n\n**User response (verbatim):** \"Start structural, add graph later\"\n\n---\n\n### Component 7: Process Guardrails\n\n**Q7a: Should there be a periodic audit command for lost work?**\n\nOptions presented:\n- Yes, periodic audit command\n- Built into phase transitions\n- Both: transitions + periodic\n- Not needed yet\n\n**User response (verbatim):** \"Built into phase transitions\"\n\n**Q7b: How should agents be notified of stale/orphaned work?**\n\nOptions presented:\n- Beads comment on parent task\n- Dedicated AUDIT beads task\n- File at .git/.aura/audit/latest.md\n- All of the above, tiered by severity\n\n**User response (verbatim):** \"File at .git/.aura/audit/latest.md\"\n\n**Q7c: Catch-all — anything else not covered?**\n\nOptions presented:\n- Nothing else\n- Agent session management\n- Testing strategy for the protocol itself\n- Migration path from current protocol\n\n**User response (verbatim):** \"Nothing else, Testing strategy for the protocol itself, Migration path from current protocol\"\n**User notes (verbatim):** \"YAML rules should probably just be XML schema\"\n\n---\n\n### Post-survey user feedback (verbatim)\n\"lots of requirements gathered at this point. Strict validations and auditting can be for a v2. Need a thinner MVP v1.\"","status":"open","priority":2,"issue_type":"task","assignee":"architect","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T19:02:58.764111984-08:00","created_by":"David Huu Pham","updated_at":"2026-02-19T19:02:58.764111984-08:00","labels":["aura:user:elicit"],"dependencies":[{"issue_id":"aura-scripts-4ed","depends_on_id":"aura-scripts-9d9","type":"relates-to","created_at":"2026-02-19T19:03:42.252980482-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-4ed","depends_on_id":"aura-scripts-9hn","type":"blocks","created_at":"2026-02-19T19:05:09.110542827-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-4ed","depends_on_id":"aura-scripts-5eh","type":"blocks","created_at":"2026-02-19T19:11:09.814121893-08:00","created_by":"David Huu Pham"}]}
{"id":"aura-scripts-4s1","title":"SLICE-1: Protocol core + label schema","description":"## References\n- IMPL_PLAN: aura-scripts-xky\n- PROPOSAL-2: aura-scripts-5eh\n- URD: aura-scripts-9d9\n\n## Files (6)\n- protocol/CLAUDE.md (FULL)\n- protocol/PROCESS.md (FULL)\n- protocol/CONSTRAINTS.md (FULL)\n- protocol/UAT_TEMPLATE.md (MODERATE)\n- protocol/HANDOFF_TEMPLATE.md (CREATE)\n- protocol/MIGRATION_v1_to_v2.md (CREATE)\n\n## PREREQUISITE: Slices 2-5 depend on this slice.\n\n## Key Changes\n1. New label format aura:p{N}-{domain}:s{M}-{type} throughout\n2. Review severity tree: EAGER creation (always 3 groups), dual-parent BLOCKER\n3. Follow-up epic: trigger = review completion + IMPORTANT/MINOR exist. Owner = Supervisor.\n4. Vocabulary: ACCEPT/REVISE + BLOCKER/IMPORTANT/MINOR\n5. Replace ALL bd dep relate with frontmatter references\n6. Dependency examples use bd dep add \u003cparent\u003e --blocked-by \u003cchild\u003e\n7. Expanded Phase 1 (s1_1-classify, s1_2-research, s1_3-explore)\n8. Handoff template (CREATE) with 5 actor-change transitions\n9. Migration procedure (CREATE) with label + title mapping, additive approach\n10. Reconcile old vote/severity tables in CONSTRAINTS.md\n\n## Quality Gates\n- grep protocol/ for old labels → 0 hits\n- grep protocol/ for BLOCKING, MAJOR, APPROVE_WITH_COMMENTS, REQUEST_CHANGES, REJECT → 0 hits\n- grep protocol/ for 'bd dep relate' → 0 hits\n- grep protocol/ for positional bd dep add (without --blocked-by) → 0 hits","status":"closed","priority":2,"issue_type":"task","assignee":"worker-slice-1","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T00:14:53.246090362-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T00:47:25.880219541-08:00","closed_at":"2026-02-20T00:47:25.880219541-08:00","close_reason":"Closed","labels":["aura:p9-impl:s1-slice"],"comments":[{"id":22,"issue_id":"aura-scripts-4s1","author":"David Huu Pham","text":"SLICE-1 complete. Commit 866c8b7. All 6 protocol files updated. Quality gates pass.","created_at":"2026-02-20T08:47:22Z"}]}
{"id":"aura-scripts-51s","title":"PROPOSAL-1-REVIEW-C-1: Plan review (Reviewer C: Elegance)","description":"Vote: REVISE\n\nBLOCKER findings:\n1. Migration path is a placeholder — needs documented procedure for existing in-flight epics\n2. 12-phase numbering is cognitively heavy — p1-user/p2-user/p5-user/p11-user all say \"user\" but mean different things\n\nIMPORTANT findings:\n3. 25 files with no consistency mechanism — need grep-based verification step\n4. Review severity tree creates ~48+ tasks per implementation — consider lazy severity group creation\n5. Follow-up epic trigger/owner is ambiguous\n6. Handoff at every transition excessive for MVP — some are same-actor\n\nMINOR findings:\n7. Phase mapping table for migration\n8. s1_1 vs s1 step numbering inconsistency\n9. Four slices correct but Slice 1 is prerequisite for 2-4 (not explicit)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T19:08:43.404243503-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:14:45.569766022-08:00","closed_at":"2026-02-20T02:14:45.569766022-08:00","close_reason":"Closed","labels":["aura:p4-plan:s3-review"],"comments":[{"id":34,"issue_id":"aura-scripts-51s","author":"David Huu Pham","text":"ACCEPT: Review completed in previous session.","created_at":"2026-02-20T10:14:45Z"}]}
{"id":"aura-scripts-5eh","title":"PROPOSAL-2: Aura protocol v2 — MVP skill \u0026 process updates","description":"## Requirements Traceability\n- **URD:** aura-scripts-9d9\n- **ELICIT:** aura-scripts-4ed\n- **REQUEST:** aura-scripts-82j\n- **Supersedes:** PROPOSAL-1 (aura-scripts-9hn)\n\n## Changes from PROPOSAL-1\n\nAddresses 4 BLOCKERs from review round 1:\n\n**B1 (Reviewer B):** Added all 15 missing skill files to Files Affected (33 total skills + 5 protocol + 2 new = 40 files). Each file categorized by change depth: FULL (substantial rewrite), MODERATE (label + convention updates), or MINIMAL (label-only swap).\n\n**B2 (Reviewer B):** Added \"Reviewer Severity Tree Creation\" section with concrete bd dep add command sequences for dual-parent BLOCKER relationship.\n\n**C1 (Reviewer C):** Added \"Migration Procedure\" section with documented steps for in-flight epics, old labels, old titles.\n\n**C2 (Reviewer C):** Justified 12-phase numbering. The step-type suffix (-request, -elicit, -uat) disambiguates repeated domains. Phase numbers exist for ordering/querying, not human memorization. User explicitly chose this format in URE Q1.\n\nAlso addresses IMPORTANT findings:\n- Follow-up epic owner: Supervisor creates EPIC_FOLLOWUP after Phase 10 review completes and all BLOCKERs resolved\n- Empty severity group BDD criterion added\n- All 5 handoff transitions explicitly assigned to skills\n- Old vote/severity vocabulary (APPROVE/REJECT, BLOCKING/MAJOR) reconciled to ACCEPT/REVISE + BLOCKER/IMPORTANT/MINOR\n- Lazy severity group creation: groups only created when findings exist at that severity\n- Grep-based consistency verification step added to each slice\n- Slice 1 is explicit prerequisite for Slices 2-5\n- Plan reviews use ACCEPT/REVISE only, no severity tree (severity tree is code review Phase 10 only)\n\n---\n\n## Problem Space\n\n(Unchanged from PROPOSAL-1)\n\n**Axes:**\n- Parallelism: HIGH — skill files are independent, can be updated in parallel\n- Distribution: Single repo, all files in commands/ and protocol/\n- Scale: 40 files (33 skills + 5 protocol + 2 new)\n- Frequency: One-time migration, then maintained per-epoch\n\n---\n\n## MVP v1 Scope\n\nProtocol and skill file updates ONLY. No runtime tooling.\n\n### In scope:\n1. Label taxonomy in ALL 33 skill files\n2. Expanded Phase 1 sub-steps (classify, research, explore)\n3. URD merged into Phase 2 as s2_2\n4. Task naming (PROPOSAL-N, REVIEW-M)\n5. Review severity tree with dual-parent BLOCKER (code reviews only)\n6. Follow-up epic workflow with explicit trigger/owner\n7. Handoff template for all 5 actor-change transitions\n8. Superseded marking (label + comment)\n9. Migration procedure\n10. Old vocabulary reconciliation (APPROVE/REJECT → ACCEPT/REVISE, BLOCKING/MAJOR → BLOCKER/IMPORTANT)\n\n### Out of scope (v2):\n- Python validation plugin / XML schema enforcement\n- Graph-aware validation rules\n- Automated audit commands\n- Testing strategy for the protocol\n- Database table implementation\n\n---\n\n## Label Schema\n\n\\`\\`\\`\nFormat: aura:p{phase}-{domain}:s{step}-{type}\n\nPhase-domain pairs (12 phases):\n  p1-user    — Request + classify + research + explore\n  p2-user    — Elicit + URD\n  p3-plan    — Propose\n  p4-plan    — Plan review\n  p5-user    — Plan UAT\n  p6-plan    — Ratify\n  p7-plan    — Handoff\n  p8-impl    — Impl plan\n  p9-impl    — Worker slices\n  p10-impl   — Code review\n  p11-user   — Impl UAT\n  p12-impl   — Landing\n\nNote: \"user\" domain repeats at p1/p2/p5/p11 but is always\ndisambiguated by the step-type suffix:\n  p1-user:s1_1-classify  vs  p5-user:s1-uat  vs  p11-user:s1-uat\n\nSub-step notation (s{N}_{M}) is used within Phase 1 and Phase 2\nwhere multiple sub-steps exist. Other phases use simple s{M}.\n\nSpecial labels:\n  aura:urd                  — User Requirements Document\n  aura:superseded           — Superseded proposal/plan\n  aura:severity:blocker     — Blocker severity group\n  aura:severity:important   — Important severity group\n  aura:severity:minor       — Minor severity group\n\\`\\`\\`\n\n---\n\n## Reviewer Severity Tree Creation (NEW — addresses B2)\n\nThis is the concrete operational procedure for code reviewers (Phase 10).\nAssigned to: aura:reviewer:review-code.md and aura:impl:review.md\n\n### Step 1: After review, create severity groups (lazy — only if findings exist)\n\n\\`\\`\\`bash\n# Only create groups that have findings. Skip empty groups entirely.\n# Example: Reviewer A, Round 1 on SLICE-1, has 2 blockers and 1 important, 0 minor\n\n# Create the review round task\nbd create --labels \"aura:p10-impl:s1-review,aura:severity:blocker,aura:severity:important\" \\\n  --title \"SLICE-1-REVIEW-A-1: Code review\" \\\n  --description \"...\" \n# Returns: \u003creview-round-id\u003e\n\n# Create BLOCKER severity group (has findings)\nbd create --labels \"aura:severity:blocker\" \\\n  --title \"SLICE-1-REVIEW-A-1-BLOCKER: Blocker findings\" \\\n  --description \"...\"\n# Returns: \u003cblocker-group-id\u003e\n\n# Create IMPORTANT severity group (has findings)\nbd create --labels \"aura:severity:important\" \\\n  --title \"SLICE-1-REVIEW-A-1-IMPORTANT: Important findings\" \\\n  --description \"...\"\n# Returns: \u003cimportant-group-id\u003e\n\n# NO MINOR group created — reviewer found 0 minor issues\n\\`\\`\\`\n\n### Step 2: Create leaf tasks under severity groups\n\n\\`\\`\\`bash\nbd create --title \"Fix null check in auth handler\" --description \"...\"\n# Returns: \u003cblocker-leaf-1\u003e\n\nbd create --title \"Add input validation on email field\" --description \"...\"\n# Returns: \u003cblocker-leaf-2\u003e\n\nbd create --title \"Rename ambiguous variable\" --description \"...\"\n# Returns: \u003cimportant-leaf-1\u003e\n\\`\\`\\`\n\n### Step 3: Wire dependencies — DUAL-PARENT for BLOCKER group\n\n\\`\\`\\`bash\n# Review round blocked by its severity groups\nbd dep add \u003creview-round-id\u003e --blocked-by \u003cblocker-group-id\u003e\nbd dep add \u003creview-round-id\u003e --blocked-by \u003cimportant-group-id\u003e\n\n# Severity groups blocked by their leaf tasks\nbd dep add \u003cblocker-group-id\u003e --blocked-by \u003cblocker-leaf-1\u003e\nbd dep add \u003cblocker-group-id\u003e --blocked-by \u003cblocker-leaf-2\u003e\nbd dep add \u003cimportant-group-id\u003e --blocked-by \u003cimportant-leaf-1\u003e\n\n# DUAL-PARENT: BLOCKER group ALSO blocks the SLICE\n# This prevents the slice from closing until blockers are resolved\nbd dep add \u003cslice-id\u003e --blocked-by \u003cblocker-group-id\u003e\n\n# IMPORTANT/MINOR groups do NOT block the slice — they go to EPIC_FOLLOWUP\n\\`\\`\\`\n\n### Step 4: Resulting tree\n\n\\`\\`\\`\nSLICE-1 (cannot close until blocker group resolves)\n  ├── blocked by leaf-task-a (impl work)\n  ├── blocked by leaf-task-b (impl work)\n  └── blocked by SLICE-1-REVIEW-A-1-BLOCKER (dual-parent)\n        ├── blocked by blocker-leaf-1\n        └── blocked by blocker-leaf-2\n\nSLICE-1-REVIEW-A-1 (review round)\n  ├── blocked by SLICE-1-REVIEW-A-1-BLOCKER (also blocks slice above)\n  │     ├── blocked by blocker-leaf-1\n  │     └── blocked by blocker-leaf-2\n  └── blocked by SLICE-1-REVIEW-A-1-IMPORTANT (does NOT block slice)\n        └── blocked by important-leaf-1\n\\`\\`\\`\n\n---\n\n## Follow-up Epic Creation (NEW — addresses I3)\n\n**Owner:** Supervisor (aura:supervisor.md)\n**Trigger:** After Phase 10 review completes AND all BLOCKER groups are resolved.\n\n\\`\\`\\`bash\n# Check: any unresolved IMPORTANT/MINOR severity groups?\n# If yes, create EPIC_FOLLOWUP\n\nbd create --labels \"aura:epic-followup\" \\\n  --title \"EPIC_FOLLOWUP: {feature} follow-up\" \\\n  --description \"Follow-up epic for IMPORTANT/MINOR findings from {original-epic-id}\"\n# Returns: \u003cfollowup-id\u003e\n\n# Link to original URD (relates_to, not blocked-by)\nbd dep relate \u003cfollowup-id\u003e \u003curd-id\u003e\n\n# The followup epic then goes through its own phases:\n# FOLLOWUP_URE → FOLLOWUP_URD → FOLLOWUP_PROPOSAL → FOLLOWUP_IMPL_PLAN\n# During FOLLOWUP_IMPL_PLAN slicing, existing IMPORTANT/MINOR leaf tasks\n# gain a new parent (the followup slice):\nbd dep add \u003cfollowup-slice-id\u003e --blocked-by \u003cimportant-leaf-1\u003e\n\\`\\`\\`\n\n---\n\n## Migration Procedure (NEW — addresses C1)\n\n### For in-flight epics (existing beads tasks using old schema):\n\n1. **Old labels are NOT removed.** New labels are ADDED alongside old ones.\n   - Example: a task with `aura:plan:propose` also gets `aura:p3-plan:s1-propose`\n   - This allows old and new skills to coexist during transition\n\n2. **Old title conventions still recognized.** Agents reading tasks check both:\n   - Old: `REQUEST_PLAN:`, `PROPOSE_PLAN:`, `RATIFIED_PLAN:`\n   - New: `REQUEST:`, `PROPOSAL-N:`, `IMPL_PLAN:`\n\n3. **No retroactive restructuring.** Existing dependency trees are not modified.\n   New conventions apply only to newly created tasks.\n\n4. **Transition complete when:** No tasks with ONLY old-format labels remain open.\n   At that point, old label patterns can be documented as deprecated.\n\n### Label mapping table:\n\n\\`\\`\\`\nOld label              → New label\naura:user:request      → aura:p1-user:s1-request\naura:user:elicit       → aura:p2-user:s1-elicit\naura:urd               → aura:urd (unchanged)\naura:propose-plan      → aura:p3-plan:s1-propose\naura:plan:review       → aura:p4-plan:s{M}-review\naura:user:uat          → aura:p5-user:s1-uat (plan) / aura:p11-user:s1-uat (impl)\naura:plan:ratify       → aura:p6-plan:s1-ratify\naura:plan:handoff      → aura:p7-plan:s1-handoff\naura:impl:plan         → aura:p8-impl:s1-plan\naura:impl:slice        → aura:p9-impl:s{M}-slice\naura:impl:review       → aura:p10-impl:s{M}-review\naura:impl:uat          → aura:p11-user:s1-uat\n\\`\\`\\`\n\n### Title mapping:\n\n\\`\\`\\`\nOld title prefix       → New title prefix\nREQUEST_PLAN:          → REQUEST:\nELICIT:                → ELICIT: (unchanged)\nPROPOSE_PLAN:          → PROPOSAL-{N}:\nREVIEW:                → PROPOSAL-{N}-REVIEW-{M}:\nRATIFIED_PLAN:         → (add aura:p6-plan:s1-ratify label to PROPOSAL-N)\nIMPLEMENTATION_PLAN:   → IMPL_PLAN:\n\\`\\`\\`\n\n---\n\n## Handoff Transitions (NEW — addresses I5)\n\nFive transitions where actor changes require handoff documents:\n\n| Transition | Source Skill | Target Skill | Provenance |\n|------------|-------------|--------------|------------|\n| Architect → Supervisor | aura:architect:handoff.md | aura:supervisor.md | Full inline |\n| Supervisor → Worker | aura:supervisor:spawn-worker.md | aura:worker.md | Summary + IDs |\n| Supervisor → Reviewer | aura:impl:review.md | aura:reviewer:review-code.md | Summary + IDs |\n| Worker → Reviewer | aura:worker:complete.md | aura:reviewer:review-code.md | Summary + IDs |\n| Reviewer → Followup | aura:impl:review.md | aura:supervisor.md (followup) | Summary + IDs |\n\nSame-actor transitions (NO handoff doc needed):\n- UAT → Ratify (same architect)\n- Ratify → Handoff (same architect)\n\nStorage: .git/.aura/handoff/{request-task-id}/{source}-to-{target}.md\nFor follow-up epics: .git/.aura/handoff/{followup-task-id}/{source}-to-{target}.md\n\n---\n\n## Vocabulary Reconciliation (NEW — addresses I6)\n\nOld (deprecated) → New:\n\n\\`\\`\\`\nVotes:\n  APPROVE                → ACCEPT\n  APPROVE_WITH_COMMENTS  → ACCEPT (findings tracked as IMPORTANT/MINOR)\n  REQUEST_CHANGES        → REVISE\n  REJECT                 → REVISE (with BLOCKER findings)\n\nSeverity:\n  BLOCKING → BLOCKER\n  MAJOR    → IMPORTANT\n  MINOR    → MINOR (unchanged)\n\\`\\`\\`\n\nThe old 4-level vote system collapses to binary ACCEPT/REVISE because:\n- APPROVE_WITH_COMMENTS = ACCEPT + the severity tree captures the comments\n- REQUEST_CHANGES vs REJECT = both are REVISE, severity of findings determines urgency\n\n---\n\n## BDD Acceptance Criteria\n\n(Includes new criteria addressing review findings)\n\n**Given** an agent runs /aura:epoch\n**When** it reaches Phase 1\n**Then** it performs classify (s1_1), research (s1_2 parallel), explore (s1_3 parallel)\n**Should Not** skip classification or proceed without user confirmation of research depth\n\n**Given** a code review round completes with findings\n**When** findings are recorded\n**Then** severity groups are created ONLY for severities that have findings (lazy creation)\n**Should Not** create empty severity groups\n\n**Given** a code review round completes with BLOCKER findings\n**When** severity groups are wired\n**Then** the BLOCKER group gets dual-parent: blocks both review-round AND slice via two bd dep add calls\n**Should Not** only block the review-round (would allow slice to close with unresolved blockers)\n\n**Given** a slice has an unresolved BLOCKER severity group\n**When** the slice attempts to close\n**Then** the BLOCKER group prevents closure (it is a blocking dependency)\n**Should Not** close a slice with unresolved BLOCKER findings\n\n**Given** all BLOCKERs are resolved and IMPORTANT/MINOR findings remain\n**When** the supervisor checks review status after Phase 10\n**Then** the supervisor creates EPIC_FOLLOWUP and IMPORTANT/MINOR leaf tasks gain followup-slice as new parent\n**Should Not** lose IMPORTANT/MINOR findings when the original epic closes\n\n**Given** a phase transition between different actors\n**When** handing off\n**Then** a handoff document is written to .git/.aura/handoff/{request-id}/\n**Should Not** transition without creating the handoff document\n\n**Given** a proposal is superseded\n**When** PROPOSAL-N+1 is created\n**Then** PROPOSAL-N gets aura:superseded label AND a comment linking to N+1\n**Should Not** leave the old proposal unmarked\n\n**Given** a plan review (Phase 4)\n**When** reviewer votes\n**Then** vote is binary ACCEPT/REVISE with structured comments (no severity tree)\n**Should Not** apply the BLOCKER/IMPORTANT/MINOR severity tree to plan reviews\n\n---\n\n## Validation Checklist\n\n### Slice 1: Protocol core + label schema (PREREQUISITE for all other slices)\n- [ ] protocol/CLAUDE.md: new label format, review severity tree, dual-parent, follow-up epic, vocabulary reconciliation\n- [ ] protocol/PROCESS.md: expanded Phase 1, review severity, follow-up epic, migration mapping, handoff transitions\n- [ ] protocol/CONSTRAINTS.md: replace old vote/severity tables with ACCEPT/REVISE + BLOCKER/IMPORTANT/MINOR\n- [ ] protocol/UAT_TEMPLATE.md: update label references\n- [ ] protocol/HANDOFF_TEMPLATE.md (CREATE): standardized handoff template\n- [ ] protocol/MIGRATION_v1_to_v2.md (CREATE): full migration procedure with label + title mapping\n- [ ] **Consistency check:** grep all protocol/ for old labels (aura:plan:propose, aura:impl, etc.)\n\n### Slice 2: Phase 1-2 skills (blocked by Slice 1)\n- [ ] aura:epoch.md: expanded Phase 1, follow-up epic, new labels, 12-phase with step suffixes\n- [ ] aura:user:request.md: s1_1-classify, s1_2-research, s1_3-explore sub-steps, new labels\n- [ ] aura:user:elicit.md: URD creation as s2_2, new labels\n- [ ] **Consistency check:** grep commands/aura:epoch.md commands/aura:user:*.md for old labels\n\n### Slice 3: Phase 3-7 skills — architect, reviewer, plan (blocked by Slice 1)\n- [ ] aura:plan.md: new labels, URD reference\n- [ ] aura:architect.md: new labels, follow-up epic awareness, vocabulary reconciliation\n- [ ] aura:architect:propose-plan.md: PROPOSAL-N naming, new labels\n- [ ] aura:architect:request-review.md: REVIEW-M naming, severity tree instructions for code review\n- [ ] aura:architect:ratify.md: superseded marking, new labels\n- [ ] aura:architect:handoff.md: handoff template, .git/.aura/handoff/ storage, new labels\n- [ ] aura:reviewer.md: ACCEPT/REVISE vocabulary, severity tree for code review, no severity tree for plan review\n- [ ] aura:reviewer:review-plan.md: ACCEPT/REVISE only, structured comments, new labels\n- [ ] aura:reviewer:review-code.md: full severity tree procedure with dual-parent bd commands, remove RFC content\n- [ ] aura:reviewer:comment.md: BLOCKER/IMPORTANT/MINOR vocabulary, remove old BLOCKING/MAJOR\n- [ ] aura:reviewer:vote.md: ACCEPT/REVISE only, severity tree awareness\n- [ ] aura:feedback.md: reconcile to ACCEPT/REVISE + BLOCKER/IMPORTANT/MINOR, deprecate old vocabulary\n- [ ] **Consistency check:** grep commands/aura:architect*.md commands/aura:reviewer*.md commands/aura:feedback.md for old labels/vocabulary\n\n### Slice 4: Phase 8-12 skills — supervisor, worker, impl (blocked by Slice 1)\n- [ ] aura:supervisor.md: follow-up epic creation (trigger + owner), new labels\n- [ ] aura:supervisor:plan-tasks.md: SLICE-N naming, new labels\n- [ ] aura:supervisor:track-progress.md: severity tree awareness, new labels\n- [ ] aura:supervisor:spawn-worker.md: new labels, handoff template for Supervisor→Worker\n- [ ] aura:supervisor:commit.md: new labels\n- [ ] aura:impl:review.md: full severity tree procedure, SLICE-N-REVIEW naming, handoff for Supervisor→Reviewer and Reviewer→Followup\n- [ ] aura:impl:slice.md: new labels\n- [ ] aura:worker.md: new labels\n- [ ] aura:worker:implement.md: new labels\n- [ ] aura:worker:complete.md: handoff template for Worker→Reviewer, new labels\n- [ ] aura:worker:blocked.md: new labels\n- [ ] aura:user:uat.md: new labels (p5 for plan UAT, p11 for impl UAT)\n- [ ] **Consistency check:** grep commands/aura:supervisor*.md commands/aura:worker*.md commands/aura:impl*.md for old labels\n\n### Slice 5: Utility + messaging skills (blocked by Slice 1)\n- [ ] aura:status.md: update all label references to new format\n- [ ] aura:test.md: minimal — update any label references\n- [ ] aura:msg:send.md: update examples to new naming\n- [ ] aura:msg:broadcast.md: update examples to new naming\n- [ ] aura:msg:receive.md: update examples to new naming\n- [ ] aura:msg:ack.md: update examples to new naming\n- [ ] **Consistency check:** grep commands/aura:status.md commands/aura:test.md commands/aura:msg*.md for old labels\n\n## Files Affected (40 total)\n\n### Protocol (modify: 4, create: 2)\n- protocol/CLAUDE.md (FULL)\n- protocol/PROCESS.md (FULL)\n- protocol/CONSTRAINTS.md (FULL)\n- protocol/UAT_TEMPLATE.md (MODERATE)\n- protocol/HANDOFF_TEMPLATE.md (CREATE)\n- protocol/MIGRATION_v1_to_v2.md (CREATE)\n\n### Phase 1-2 skills (modify: 3, change depth: FULL)\n- commands/aura:epoch.md\n- commands/aura:user:request.md\n- commands/aura:user:elicit.md\n\n### Phase 3-7 skills (modify: 12, change depth varies)\n- commands/aura:plan.md (MODERATE)\n- commands/aura:architect.md (FULL)\n- commands/aura:architect:propose-plan.md (MODERATE)\n- commands/aura:architect:request-review.md (MODERATE)\n- commands/aura:architect:ratify.md (MODERATE)\n- commands/aura:architect:handoff.md (FULL — handoff template)\n- commands/aura:reviewer.md (FULL — severity tree + vocabulary)\n- commands/aura:reviewer:review-plan.md (MODERATE)\n- commands/aura:reviewer:review-code.md (FULL — severity tree procedure)\n- commands/aura:reviewer:comment.md (FULL — vocabulary reconciliation)\n- commands/aura:reviewer:vote.md (MODERATE)\n- commands/aura:feedback.md (FULL — vocabulary reconciliation or deprecation)\n\n### Phase 8-12 skills (modify: 12, change depth varies)\n- commands/aura:supervisor.md (FULL — follow-up epic owner)\n- commands/aura:supervisor:plan-tasks.md (MODERATE)\n- commands/aura:supervisor:track-progress.md (MODERATE)\n- commands/aura:supervisor:spawn-worker.md (MODERATE — handoff template)\n- commands/aura:supervisor:commit.md (MINIMAL)\n- commands/aura:impl:review.md (FULL — severity tree + handoff)\n- commands/aura:impl:slice.md (MODERATE)\n- commands/aura:worker.md (MODERATE)\n- commands/aura:worker:implement.md (MODERATE)\n- commands/aura:worker:complete.md (MODERATE — handoff template)\n- commands/aura:worker:blocked.md (MINIMAL)\n- commands/aura:user:uat.md (MODERATE)\n\n### Utility + messaging (modify: 6, change depth: MINIMAL)\n- commands/aura:status.md (MODERATE — many label references)\n- commands/aura:test.md (MINIMAL)\n- commands/aura:msg:send.md (MINIMAL)\n- commands/aura:msg:broadcast.md (MINIMAL)\n- commands/aura:msg:receive.md (MINIMAL)\n- commands/aura:msg:ack.md (MINIMAL)","status":"open","priority":2,"issue_type":"task","assignee":"architect","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T19:11:05.548758942-08:00","created_by":"David Huu Pham","updated_at":"2026-02-19T19:11:05.548758942-08:00","labels":["aura:p3-plan:s1-propose"],"dependencies":[{"issue_id":"aura-scripts-5eh","depends_on_id":"aura-scripts-9d9","type":"relates-to","created_at":"2026-02-19T19:11:09.852769298-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-5eh","depends_on_id":"aura-scripts-aua","type":"blocks","created_at":"2026-02-19T19:13:48.066315326-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-5eh","depends_on_id":"aura-scripts-n58","type":"blocks","created_at":"2026-02-19T19:13:48.094288452-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-5eh","depends_on_id":"aura-scripts-7fs","type":"blocks","created_at":"2026-02-19T19:13:48.121911047-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-5eh","depends_on_id":"aura-scripts-w8w","type":"blocks","created_at":"2026-02-19T23:37:47.02305789-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-5eh","depends_on_id":"aura-scripts-xky","type":"blocks","created_at":"2026-02-20T00:14:42.678754891-08:00","created_by":"David Huu Pham"}],"comments":[{"id":17,"issue_id":"aura-scripts-5eh","author":"David Huu Pham","text":"REVIEWER C — ROUND 2 — VOTE: ACCEPT\n\n## C1 (Migration) — RESOLVED\nThe Migration Procedure is sufficient for in-flight epics. Old labels kept alongside new, old titles dual-recognized, no retroactive restructuring, clear completion criterion (no tasks with ONLY old labels remain open). Label and title mapping tables verified against current codebase.\n\n## C2 (Phase numbering) — RESOLVED\n12-phase numbering justified: step-type suffixes disambiguate repeated domains, phase numbers serve machine ordering not human memorization, and user explicitly chose this format.\n\n## Round 1 IMPORTANT findings — ALL RESOLVED\n- Consistency mechanism: grep-based check at end of each slice\n- Lazy severity groups: only created when findings exist + BDD criterion\n- Follow-up trigger: Supervisor after Phase 10, when all BLOCKERs resolved\n- Handoff MVP scope: exactly 5 transitions listed\n- Slice 1 prerequisite: explicitly stated\n\n## New findings:\n[MINOR] Label mapping table lists old label 'aura:impl:uat' but codebase uses both 'aura:user:uat' and 'aura:impl:uat' inconsistently. Mapping should note both old forms.\n[MINOR] File count says 40 total but breakdown sums to 39 (33 skills + 4 existing protocol + 2 new protocol = 39).","created_at":"2026-02-20T03:13:14Z"},{"id":19,"issue_id":"aura-scripts-5eh","author":"David Huu Pham","text":"RATIFIED: All 3 reviewers ACCEPT (Round 2), UAT passed (aura-scripts-w8w). Two UAT revisions to incorporate: (1) eager severity groups, (2) followup epic trigger on review completion.","created_at":"2026-02-20T07:37:47Z"}]}
{"id":"aura-scripts-5fk","title":"PROPOSE_PLAN: aura-scripts Nix flake with HM modules for unified agent config","description":"Phase 3 proposal — see beads comments for full plan","status":"open","priority":2,"issue_type":"feature","owner":"dayvidpham@gmail.com","created_at":"2026-02-18T05:50:38.560687051-08:00","created_by":"David Huu Pham","updated_at":"2026-02-18T05:50:38.560687051-08:00","labels":["aura:plan:proposal"],"dependencies":[{"issue_id":"aura-scripts-5fk","depends_on_id":"aura-scripts-ztn","type":"blocks","created_at":"2026-02-18T05:50:42.807367606-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-5fk","depends_on_id":"aura-scripts-82l","type":"relates-to","created_at":"2026-02-18T06:15:34.683514665-08:00","created_by":"David Huu Pham"}],"comments":[{"id":2,"issue_id":"aura-scripts-5fk","author":"David Huu Pham","text":"PROPOSE_PLAN: aura-scripts Nix Flake with Home-Manager Modules\n\n## Problem Space\n\nCurrently, agent configuration is scattered across 4+ locations:\n- ~/.claude/ (settings.json, 33 command files, hooks, agents)\n- ~/codebases/dayvidpham/aura-scripts/protocol/ (CLAUDE.md, CONSTRAINTS.md, PROCESS.md)\n- ~/codebases/dayvidpham/opencode-security/ (security filter for OpenCode)\n- ~/codebases/agentconfig/ (reference only — TypeScript config tool)\n\nChanges to one tool's config must be manually replicated. The dotfiles flake already manages Claude Code and OpenCode as packages (modules/home-manager/programs/claude-code/ and opencode/), but only enables the binaries — no config management.\n\n## Proposed Solution\n\nTurn aura-scripts into a Nix flake that exports:\n1. homeManagerModules — declarative options for agent config generation\n2. packages — launch-parallel.py, aura-swarm as proper Nix derivations\n\nThe dotfiles flake imports aura-scripts as a flake input and uses its HM modules.\n\n## Architecture\n\n### Flake Outputs (from aura-scripts/flake.nix)\n\n```\n{\n  packages.x86_64-linux = {\n    launch-parallel    # Wrapped Python script\n    aura-swarm         # Go binary\n  };\n\n  homeManagerModules = {\n    aura-protocol      # Protocol docs (CLAUDE.md, CONSTRAINTS.md, PROCESS.md)\n    aura-commands      # Slash command .md files\n    aura-agent-config  # Settings/permissions generation for Claude Code + OpenCode\n  };\n}\n```\n\n### HM Module: aura-protocol\n\n```nix\noptions.aura.protocol = {\n  enable = mkEnableOption \"Aura protocol docs\";\n  target = mkOption {\n    type = types.enum [ \"claude\" \"opencode\" \"both\" ];\n    default = \"both\";\n    description = \"Which tools get protocol docs installed\";\n  };\n  constraints = mkOption {\n    type = types.path;\n    default = ./protocol/CONSTRAINTS.md;\n    description = \"Path to constraints file (override for project-specific)\";\n  };\n};\n```\n\nEffect: Generates ~/.claude/CLAUDE.md (and OpenCode equivalent) from protocol/ sources.\n\n### HM Module: aura-commands\n\n```nix\noptions.aura.commands = {\n  enable = mkEnableOption \"Aura slash commands\";\n  roles = mkOption {\n    type = types.listOf (types.enum [ \"architect\" \"supervisor\" \"worker\" \"reviewer\" \"epoch\" \"all\" ]);\n    default = [ \"all\" ];\n    description = \"Which role commands to install\";\n  };\n  extraCommands = mkOption {\n    type = types.attrsOf types.path;\n    default = {};\n    description = \"Additional command files to install\";\n  };\n};\n```\n\nEffect: Symlinks or copies command .md files into ~/.claude/commands/.\n\n### HM Module: aura-agent-config\n\n```nix\noptions.aura.agentConfig = {\n  enable = mkEnableOption \"Unified agent settings generation\";\n\n  claude = {\n    enable = mkOption { type = types.bool; default = true; };\n    permissions = {\n      allow = mkOption { type = types.listOf types.str; default = []; };\n      deny = mkOption { type = types.listOf types.str; default = []; };\n    };\n    hooks = mkOption { type = types.attrsOf (types.listOf types.attrs); default = {}; };\n    # ... more Claude-specific options\n  };\n\n  opencode = {\n    enable = mkOption { type = types.bool; default = false; };\n    security = {\n      trustedPaths = mkOption { type = types.listOf types.str; default = []; };\n      blockedPatterns = mkOption { type = types.listOf types.str; default = []; };\n    };\n    # ... OpenCode-specific options\n  };\n\n  # Shared options that translate to both\n  shared = {\n    model = mkOption { type = types.str; default = \"opus\"; };\n    sandbox = mkOption { type = types.bool; default = true; };\n  };\n};\n```\n\nEffect: Generates ~/.claude/settings.json AND OpenCode config from one option set.\nInspired by agentconfig's adapter/migration pattern but as pure Nix functions.\n\n## Integration with Dotfiles\n\nIn ~/dotfiles/flake.nix:\n```nix\ninputs.aura-scripts = {\n  url = \"github:dayvidpham/aura-scripts\";\n  inputs.nixpkgs.follows = \"nixpkgs\";\n};\n```\n\nIn homeConfigurations:\n```nix\nmodules = [\n  aura-scripts.homeManagerModules.aura-protocol\n  aura-scripts.homeManagerModules.aura-commands\n  aura-scripts.homeManagerModules.aura-agent-config\n  # ...\n];\n```\n\nIn user's home.nix:\n```nix\n{\n  aura.protocol.enable = true;\n  aura.commands.enable = true;\n  aura.commands.roles = [ \"all\" ];\n  aura.agentConfig = {\n    enable = true;\n    claude.enable = true;\n    opencode.enable = true;\n    shared.model = \"opus\";\n  };\n}\n```\n\n## Packages\n\n### launch-parallel\nWrap the Python script as a Nix derivation with proper dependency closure (python3, tmux).\n\n### aura-swarm\nPackage the Go binary. If source is available, build from source. If only binary, wrap it.\n\n## Tradeoffs\n\n| Decision | Chosen | Alternative | Rationale |\n|----------|--------|-------------|-----------|\n| Config generation | Pure Nix functions | Runtime Go/TS daemon | Simpler, reproducible, no state. Go sync is future work. |\n| Module granularity | 3 separate modules | 1 monolithic module | Composable — enable only what you need |\n| Command installation | File copy via HM | Symlinks into repo | HM manages the files; no dangling symlinks if repo moves |\n| Protocol doc location | Stay in aura-scripts | Move to dotfiles | Protocol is reusable across users/projects; dotfiles is personal |\n\n## Priority / Phases\n\n1. **Flake skeleton + packages** — Make flake.nix export launch-parallel and aura-swarm as packages\n2. **aura-protocol HM module** — Install CLAUDE.md/CONSTRAINTS.md/PROCESS.md\n3. **aura-commands HM module** — Install slash commands to ~/.claude/commands/\n4. **aura-agent-config HM module** — Generate settings.json from Nix options (Claude first, then OpenCode)\n5. **Integration test** — Wire into dotfiles, verify `home-manager switch` produces correct output\n\n## Validation Checklist\n\n- [ ] `nix flake check` passes on aura-scripts\n- [ ] `home-manager switch` produces correct ~/.claude/settings.json\n- [ ] Slash commands appear in ~/.claude/commands/\n- [ ] Protocol docs appear as CLAUDE.md in correct locations\n- [ ] launch-parallel and aura-swarm are in $PATH after switch\n- [ ] OpenCode config generated when opencode.enable = true\n- [ ] Existing dotfiles flake can import aura-scripts without conflicts","created_at":"2026-02-18T13:52:00Z"},{"id":3,"issue_id":"aura-scripts-5fk","author":"David Huu Pham","text":"REVISION-1: Revised based on user feedback\n\nKEY CHANGES:\n1. Single module: homeManagerModules.aura-config-sync (not 3 separate modules)\n2. Role selection via individual enables with enableAll default:\n\n```nix\noptions.CUSTOM.programs.aura-config-sync = {\n  enable = mkEnableOption \"Aura protocol config sync\";\n\n  commands = {\n    enable = mkOption { type = bool; default = true; };\n    roles = {\n      enableAll = mkOption { type = bool; default = true; };\n      architect.enable = mkOption { type = bool; default = cfg.commands.roles.enableAll; };\n      supervisor.enable = mkOption { type = bool; default = cfg.commands.roles.enableAll; };\n      worker.enable = mkOption { type = bool; default = cfg.commands.roles.enableAll; };\n      reviewer.enable = mkOption { type = bool; default = cfg.commands.roles.enableAll; };\n      epoch.enable = mkOption { type = bool; default = cfg.commands.roles.enableAll; };\n    };\n    extraCommands = mkOption { type = attrsOf path; default = {}; };\n  };\n\n  protocol = {\n    enable = mkOption { type = bool; default = true; };\n    target = mkOption { type = enum [ \"claude\" \"opencode\" \"both\" ]; default = \"both\"; };\n  };\n\n  agentConfig = {\n    enable = mkOption { type = bool; default = true; };\n    claude = { ... };\n    opencode = { ... };\n    shared = { ... };\n  };\n\n  security = {\n    enable = mkOption { type = bool; default = false; };\n  };\n\n  hooks = { ... };\n};\n```\n\n3. agentconfig (~/codebases/agentconfig) is reference/inspiration only — not a dependency\n4. Protocol docs stay in aura-scripts as canonical source","created_at":"2026-02-18T13:56:04Z"},{"id":4,"issue_id":"aura-scripts-5fk","author":"David Huu Pham","text":"REVIEW_2: REVISE\n\n## Summary\nThe proposal is solid in direction and the REVISION-1 correctly addressed user feedback (single module, CUSTOM.programs namespace, enableAll pattern). However, the proposal is out of sync with the actual implementation in several ways, and there are implementation gaps and missed tradeoffs that should be documented before ratification.\n\n## 1. Who are the end-users and what do they want?\nWell-captured. The user wants a single source of truth for agent configs managed via Nix/Home Manager, with composable role selection. The URE verbatim captures are thorough. No issues here.\n\n## 2. How does this impact end-users?\nPositive: atomic config application via home-manager switch, declarative role management.\n\nRisk: Protocol docs writing to ~/.claude/CLAUDE.md could conflict with the user's personal CLAUDE.md. The implementation wisely defaults protocol.enable=false, but the proposal doesn't discuss the conflict scenario or a merge strategy.\n\n## 3. Are there implementation gaps?\n\n**Proposal vs. actual code discrepancies — the plan should be updated to reflect reality:**\n\na) The implementation (nix/hm-module.nix) ALREADY covers Phases 1-3 of the proposal (flake skeleton, packages, protocol, commands). The plan should acknowledge this existing work rather than presenting it as future work.\n\nb) The implementation has an `agents` section (agents/ directory → ~/.claude/agents/) that the proposal never mentions. This should be documented.\n\nc) The implementation has a `packages` section that the proposal only mentions as a flake output, not as a toggleable HM option.\n\nd) protocol.target uses `enum [ \"global\" \"xdg\" ]` in the implementation vs `enum [ \"claude\" \"opencode\" \"both\" ]` in the proposal. The implementation is more accurate — it's about filesystem location, not tool targeting. The plan should be updated.\n\n**Genuinely missing from implementation (future phases):**\n\ne) agentConfig section (settings.json generation, permissions, shared options) — entirely absent from HM module. This is the most complex part and should be its own clearly-scoped phase.\n\nf) security section — mentioned in REVISION-1 options block but no implementation or specification.\n\ng) hooks section — mentioned in REVISION-1 but no implementation or specification.\n\nh) OpenCode config generation — no implementation at all.\n\n## 4. Is the MVP scope right?\n\nThe phased approach is reasonable, but the phases are misaligned with reality:\n- Phases 1-3 are ALREADY DONE. The MVP should acknowledge this.\n- The actual remaining MVP work is: verify integration with dotfiles flake (Phase 5), then optionally agentConfig (Phase 4).\n- Recommend reframing phases as: Phase 1 = Integration test (wire into dotfiles, verify switch), Phase 2 = agentConfig/settings.json for Claude, Phase 3 = OpenCode support, Phase 4 = security + hooks.\n\n## 5. Is the validation checklist complete?\n\nMissing items:\n- `nix flake show` produces expected outputs\n- Verify launch-parallel runtime deps work (tmux in PATH — see tradeoffs)\n- Test enableAll=false with individual role enables\n- Test extraCommands/extraAgents\n- Test protocol with xdg target\n- Test no home.file attr collisions across sections\n\n## 6. What tradeoffs were missed?\n\na) **Runtime dependency closure for packages**: launch-parallel.py needs tmux at runtime. Current writeScriptBin only patches the shebang — tmux is NOT in PATH. Should use wrapProgram/makeWrapper. aura-swarm likely needs git, claude, etc.\n\nb) **home.file conflict with personal CLAUDE.md**: No merge/override strategy documented for protocol docs.\n\nc) **No lib export from flake**: Dotfiles flake cannot reuse helpers like listMdFiles or roleNames. Minor, but a composability gap.\n\nd) **OpenCode phasing is vague**: User's #1 priority is the Nix module, then config translation, but the proposal buries OpenCode in a Phase 4 parenthetical. Needs its own phase.\n\ne) **No schema evolution story**: User asked about versioned schemas (Q4). As Claude Code/OpenCode config formats evolve, the module options will need to track changes. Should be noted as a known future concern.\n\n## Verdict\nREVISE — update the proposal to:\n1. Acknowledge existing implementation (Phases 1-3 are done)\n2. Reframe remaining phases to match actual work needed\n3. Add agents section to the spec\n4. Fix protocol.target to match implementation (global|xdg)\n5. Address runtime dependency wrapping for packages\n6. Add missing validation checklist items","created_at":"2026-02-18T14:07:33Z"},{"id":6,"issue_id":"aura-scripts-5fk","author":"David Huu Pham","text":"REVIEW_1: ACCEPT — with implementation notes\n\n## Review Summary\n\nThe REVISION-1 proposal is well-structured and the implementation (flake.nix + nix/hm-module.nix) is already ahead of the plan, covering Phases 1-3 plus an agents subsection not in the original proposal. The single-module design under CUSTOM.programs.aura-config-sync correctly matches user requirements and the existing dotfiles namespace convention.\n\n## Review Against 6 Questions\n\n### 1. End-users and what they want\nClearly identified: David wants a single source of truth for agent config (Claude Code + OpenCode) managed declaratively via Nix/home-manager. The URE captures comprehensive Q\u0026A. PASS.\n\n### 2. End-user impact\nPositive: single `home-manager switch` deploys all agent config. Composable role selection with enableAll default + individual overrides. Packages properly Nix-wrapped. PASS.\n\n### 3. Implementation gaps (4 items)\n\n**G1: Package runtime deps not wrapped (medium risk).** flake.nix uses `writeScriptBin` with `builtins.replaceStrings` for shebang swapping. This does NOT add runtime dependencies (tmux, git, claude CLI) to PATH. launch-parallel.py calls `subprocess` to launch tmux sessions — tmux won't be found unless separately in PATH. Fix: use `writeShellApplication` or `makeWrapper` to wrap runtime deps.\n\n**G2: `lib ? config.lib` is non-standard.** hm-module.nix line 6: `lib ? config.lib`. HM modules receive `lib` from the module system directly. The fallback to `config.lib` is unusual and could cause subtle issues. Should just use `lib` from the module args.\n\n**G3: agentConfig section (settings.json generation) proposed but unimplemented.** This is the most complex part and is Phase 4. Acceptable as future work, but the REVISION-1 text presents it alongside implemented features without clearly marking it as \"not yet implemented.\" Should add explicit phase annotations.\n\n**G4: The `agents` subsection is implemented but NOT mentioned in the proposal or validation checklist.** This is a good addition but should be documented in the plan.\n\n### 4. MVP scope\nCorrect for phases 1-3 + agents. The phased approach is sound: packages → protocol → commands → agentConfig → integration test. The validation checklist mixes MVP items with Phase 4 items (e.g., \"home-manager switch produces correct ~/.claude/settings.json\" and \"OpenCode config generated when opencode.enable = true\" are Phase 4, not MVP). Should distinguish.\n\n### 5. Validation checklist completeness\nMissing items:\n- No validation that writeScriptBin packages work with runtime deps\n- No test for role filtering (enableAll=false + individual enables)\n- No test for extraCommands/extraAgents extension points\n- No mention of agents subsection in checklist\n- No check for home.file conflicts with existing dotfiles entries\n- `nix flake check` is listed but flake defines no `checks` output — would only verify evaluation\n\n### 6. Missed tradeoffs\n\n**T1: home.file immutability.** `source = storePath` creates /nix/store symlinks (read-only). Fine for commands and protocol docs, but will be a BLOCKER for Phase 4 settings.json if Claude Code needs to write back to it. Phase 4 design must address this — likely needs `home.file.*.text` with `mkForce` or a different approach entirely.\n\n**T2: No nixosModules output.** User mentioned in Q6 \"Flake should provide nixosModules and/or hmModules.\" Only homeManagerModules is provided. Fine for current use case but noted.\n\n**T3: Flake input naming.** Proposal shows `inputs.nixpkgs.follows = \"nixpkgs\"` for dotfiles integration, but aura-scripts flake uses `nixpkgs-stable`/`nixpkgs-unstable` with `nixpkgs = nixpkgs-stable` (via rec). The `follows` directive needs to match: `inputs.aura-scripts.inputs.nixpkgs-stable.follows = \"nixpkgs\"`.\n\n## Verdict\nACCEPT — the core architecture is sound, implementation is ahead of plan, and all gaps are addressable without architectural changes. G1 (runtime deps) is the most actionable fix for immediate correctness.","created_at":"2026-02-18T14:07:38Z"},{"id":8,"issue_id":"aura-scripts-5fk","author":"David Huu Pham","text":"REVIEW_3: ACCEPT — with minor notes\n\n## Review Against 6 Questions\n\n### 1. End-users \u0026 wants\nWell identified. David is the sole end-user, managing agent configs across Claude Code and OpenCode. The URE captures verbatim Q\u0026A thoroughly. The pain point (scattered config across 4+ locations) is real and clearly articulated.\n\n### 2. End-user impact\nPositive: `home-manager switch` deploys all agent configs atomically. No more manual file copying. The implementation correctly uses the existing `CUSTOM.programs.*` namespace from the dotfiles flake — confirmed by reading the dotfiles structure (claude-code and opencode modules currently only enable packages, zero config management).\n\nRisk noted: HM-managed files are declarative — manual edits to ~/.claude/commands/ get overwritten on next switch. The proposal doesn't discuss this, but this is standard HM behavior and the user is experienced with it.\n\n### 3. Implementation gaps\nThe implementation (hm-module.nix) is AHEAD of the proposal in some areas:\n- **Agents section**: Implemented (agents/ → ~/.claude/agents/) but not mentioned in the proposal at all. Should be documented.\n- **Protocol target divergence**: Proposal says `target = enum [\"claude\" \"opencode\" \"both\"]`, implementation has `target = enum [\"global\" \"xdg\"]`. The implementation choice is actually better (avoids premature OpenCode coupling) but should be reflected in the proposal.\n- **agentConfig not implemented**: Proposal's Phase 4 (settings.json generation, hooks, security) is not in the current code. This is fine for a phased approach but the validation checklist incorrectly includes Phase 4 items as if they're MVP.\n- **Minor: `lib ? config.lib` fallback**: The module uses `lib ? config.lib` — these are different things (nixpkgs lib vs HM config.lib). Harmless since `lib` is always provided by the module system, but the fallback is semantically wrong.\n- **`nix flake check` warns**: `homeManagerModules` is flagged as \"unknown flake output\" — this is a common convention but not in the official flake schema. Harmless warning, widely accepted pattern.\n\n### 4. MVP scope\nThe current implementation (commands + agents + protocol + packages) is the RIGHT MVP. It solves the primary pain point without over-reaching into settings.json generation. The phasing (packages → protocol → commands → agentConfig → integration test) is sound.\n\nHowever, the proposal's phases should explicitly mention agents (currently implemented but unlisted).\n\n### 5. Validation checklist completeness\nThe checklist mixes MVP and future items:\n- MVP items (should pass now): `nix flake check`, commands in ~/.claude/commands/, protocol docs, packages in $PATH\n- Future items (Phase 4): settings.json generation, OpenCode config — these should be labeled as Phase 4 validation\n\nMissing checklist items:\n- [ ] `enableAll = false` correctly excludes role commands\n- [ ] `extraCommands` and `extraAgents` merge works\n- [ ] Agent .md files appear in ~/.claude/agents/\n- [ ] Disabling the module removes managed files (HM rollback)\n\n### 6. Missed tradeoffs\n- **Epoch as a \"role\"**: `roleNames` includes \"epoch\" but epoch is more of a workflow orchestrator than an agent role. With `enableAll = false`, you'd need to explicitly enable `epoch` even though it's not really a selectable \"role\" like architect/worker. Consider whether epoch, or even user/msg/impl commands, should always be installed as core commands.\n- **No integration test output**: The flake defines no `checks` output — `nix flake check` only validates derivations build, not that the HM module produces correct file layouts. A VM test or `runCommand`-based check would strengthen validation.\n- **Single aarch64 system untested**: `supportedSystems` includes `aarch64-linux` but `--all-systems` is needed to verify. Minor since packages are just wrapped scripts.\n\n## Verdict\nThe architecture is sound. The single-module design under `CUSTOM.programs.aura-config-sync` matches the dotfiles convention. The implementation is already functional and ahead of the proposal. Phased approach is appropriate. Accept with the understanding that the proposal should be updated to reflect the agents section and the protocol.target divergence.","created_at":"2026-02-18T14:08:44Z"},{"id":12,"issue_id":"aura-scripts-5fk","author":"David Huu Pham","text":"REVIEW_2 (REVISION-2): ACCEPT — All original REVISE concerns addressed in aura-scripts-82l. One non-blocking note: aura-swarm also needs bd (beads CLI) as runtime dep. See full review on aura-scripts-82l.","created_at":"2026-02-18T14:16:39Z"}]}
{"id":"aura-scripts-5x1","title":"IMPL-REVIEW-A-1 IMPORTANT","description":"Important findings from Reviewer A (Correctness)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:13:57.318721146-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:51.453215661-08:00","closed_at":"2026-02-20T02:22:51.453215661-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review","aura:severity:important"],"comments":[{"id":47,"issue_id":"aura-scripts-5x1","author":"David Huu Pham","text":"I1: UAT_EXAMPLE.md not updated — uses old label aura:user:uat (line 9), old label aura:plan:ratify (line 20), and deprecated bd dep relate (line 14). Not in scope for this epic (file was not in the 40 changed files), but should be tracked as follow-up.","created_at":"2026-02-20T10:17:53Z"}]}
{"id":"aura-scripts-60r","title":"IMPL-REVIEW-A-1 BLOCKER","description":"Blocker findings from Reviewer A (Correctness)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:13:57.246080754-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:51.25156537-08:00","closed_at":"2026-02-20T02:22:51.25156537-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review","aura:severity:blocker"]}
{"id":"aura-scripts-6om","title":"PROPOSAL-1-REVIEW-B-1: Plan review (Reviewer B: Test quality)","description":"Vote: REVISE\n\nBLOCKER findings:\n1. 13 skill files missing from Files Affected (worker:*, supervisor:spawn-worker, supervisor:commit, feedback, status, reviewer:comment, reviewer:vote, msg:*)\n2. Dual-parent BLOCKER relationship not operationalized — needs concrete bd dep add command sequences in reviewer skills\n\nIMPORTANT findings:\n3. Follow-up epic creation trigger ambiguous — no skill assigned as owner\n4. Empty severity group closure not in BDD criteria\n5. Worker-to-Reviewer and Reviewer-to-Followup handoff transitions not assigned to skills\n6. aura:feedback.md and aura:reviewer:comment.md use conflicting old vote/severity vocabulary\n\nMINOR findings:\n7. Label step numbering inconsistent (s1_1 vs s1)\n8. Plan review vs code review severity scope not clarified\n9. protocol/user-request-revamp-v2.md not addressed","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T19:08:43.377182788-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:14:45.443552903-08:00","closed_at":"2026-02-20T02:14:45.443552903-08:00","close_reason":"Closed","labels":["aura:p4-plan:s2-review"],"comments":[{"id":33,"issue_id":"aura-scripts-6om","author":"David Huu Pham","text":"ACCEPT: Review completed in previous session.","created_at":"2026-02-20T10:14:45Z"}]}
{"id":"aura-scripts-7ea","title":"IMPL-REVIEW-C-1 IMPORTANT","description":"Important findings from Reviewer C (Elegance)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:14:00.386785433-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:51.716918739-08:00","closed_at":"2026-02-20T02:22:51.716918739-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review","aura:severity:important"],"comments":[{"id":44,"issue_id":"aura-scripts-7ea","author":"David Huu Pham","text":"IMPORTANT findings from Reviewer C (Elegance): I1 - Broken PROCESS.md links from 30 of 33 command files (inconsistent path convention). I2 - UAT_EXAMPLE.md not updated to v2 but referenced by 4 files (contradicts v2 protocol with old labels and deprecated bd dep relate).","created_at":"2026-02-20T10:17:23Z"}]}
{"id":"aura-scripts-7fs","title":"PROPOSAL-2-REVIEW-C-1: Plan review (Reviewer C: Elegance)","description":"Vote: ACCEPT\n\nBoth Round 1 BLOCKERs RESOLVED:\n- C1: Migration procedure complete with additive labels, dual-recognition, no retroactive restructuring\n- C2: 12-phase numbering justified by step-type suffixes and user choice in URE Q1\n\nMINOR:\n1. Label mapping has aura:impl:uat as old form but codebase uses both aura:user:uat and aura:impl:uat — note both\n2. File count off-by-one (40 vs 39)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T19:13:44.245407556-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:14:45.947690391-08:00","closed_at":"2026-02-20T02:14:45.947690391-08:00","close_reason":"Closed","labels":["aura:p4-plan:s3-review"],"comments":[{"id":37,"issue_id":"aura-scripts-7fs","author":"David Huu Pham","text":"ACCEPT: Review completed in previous session.","created_at":"2026-02-20T10:14:46Z"}]}
{"id":"aura-scripts-7o2","title":"EPIC: Unified agent config — aura-scripts as Nix flake with HM modules","description":"Turn aura-scripts into a consumable Nix flake that exports homeManagerModules and packages for declarative management of Claude Code and OpenCode configuration.\n\nEnd-user: The developer (minttea) who maintains agent configs across Claude Code and OpenCode.\nEnd-goal: One Nix option set generates all agent config files. No manual syncing.","status":"closed","priority":1,"issue_type":"feature","owner":"dayvidpham@gmail.com","created_at":"2026-02-18T06:02:31.115295592-08:00","created_by":"David Huu Pham","updated_at":"2026-02-18T06:04:55.578982453-08:00","closed_at":"2026-02-18T06:04:55.578982453-08:00","close_reason":"Unnecessary separate epic — REQUEST task (ght) is the epic","labels":["epic"]}
{"id":"aura-scripts-82j","title":"REQUEST: Redesign Aura protocol architecture — standardized Beads schema, label taxonomy, follow-up epic workflow, and improved handoff","description":"Should devise a new architectural approach to the commands, process, and constraints that make it harder for work to get lost or forgotten about, for certain recurring issues to be addressed via improved validation pipelines, and for better process management and handoff. Improved human handoff would look something like the @protocol/HANDOFF_EXAMPLE-*.md files. Want to also define an explicit Beads schema and taxonomy with with labels that apply to each phase, task, review, UAT, URE, URD, IMPL_PLAN. Labels are being applied non-uniformly, often forgotten about and in a non-standardized manner.\n\nShould look something like this:\n\nThe PROPOSAL-1 and PROPOSAL-2 should be a child of the URE.\n\nWhat we want:\n```\nREQUEST\n  └── blocked by URE\n        └── blocked by PROPOSAL-1 (closed, superseded)\n              └── blocked by PROPOSAL-1-REVIEW-1 (closed)\n              └── blocked by PROPOSAL-1-REVIEW-2 (closed)\n              └── blocked by PROPOSAL-1-REVIEW-3 (closed)\n        └── blocked by PROPOSAL-{2,3,...,N-1} (closed, superseded)\n              └── blocked by PROPOSAL-{K, for proposal number K}-REVIEW-1 (closed)\n              └── blocked by PROPOSAL-{K, for proposal number K}-REVIEW-2 (closed)\n              └── blocked by PROPOSAL-{K, for proposal number K}-REVIEW-3 (closed)\n        └── blocked by PROPOSAL-N (open, aura:plan:ratify)\n              └── blocked by PROPOSAL-N-REVIEW-1 (closed)\n              └── blocked by PROPOSAL-N-REVIEW-2 (closed)\n              └── blocked by PROPOSAL-N-REVIEW-3 (closed)\n              └── blocked by IMPL_PLAN\n                    ├── blocked by slice-1\n                    │     ├── blocked by leaf-task-a\n                    │     └── blocked by leaf-task-b\n                    └── blocked by slice-2\n                          ├── blocked by leaf-task-c\n                          └── blocked by leaf-task-d\n```\n\nHere is an actual example:\n```\nunified-schema-t9d: REQUEST: Aura ingest CLI command - data ingestion pipeline for Claude and OpenCode transcripts [P1] (open) [READY]\n    └── unified-schema-m3l: URE: Aura ingest pipeline requirements elicitation [P1] (open)\n    │   ├── unified-schema-apj: PROPOSAL-1: RFC v0.1.0 Aura ingest pipeline [P1] (closed)\n        └── unified-schema-hjy: PROPOSAL-2: RFC v0.2.0 Aura ingest pipeline (revised) [P1] (open)\n        │   ├── unified-schema-fuf: IMPL_PLAN: Aura ingest pipeline — 10 vertical slices (S1-S10) [P1] (open)\n        │   │   ├── unified-schema-bq9: IMPL-UAT-1: Group A implementation acceptance (S2, S4, S5) [P2] (closed)\n        │   │   ├── unified-schema-er6: Review Round 2: blocking fix verification [P2] (closed)\n        │   │   ├── unified-schema-i80: Code Review: Adapter Slices S6-S8 [P2] (closed)\n        │   │   ├── unified-schema-n6c: Code Review: Pipeline + CLI (S9-S10) [P2] (closed)\n        │       └── unified-schema-o20: Code Review: Foundation Slices S1-S5 [P2] (closed)\n            └── unified-schema-zj9: UAT-1: Plan acceptance for aura ingest pipeline RFC v0.2.0 [P2] (closed)\n```\n\nReviews rounds on the completed vertical slices in the IMPL_PLAN tend to create tasks that get lost. Unsure how to best account for them at the moment. Currently have this other FOLLOW_UP epic issue tracker that takes the Review Rounds / Code Reviews (these names need to be standardized) on the IMPL_PLAN, then takes the tasks generated from them, and then proposes architecture and designs that will resolve the issues the reviewers had.\n\nIdeally, there would be a follow-up epoch where: architect should propose new architecture, should also plan architectural changes or make a design that understands and prevents these issues, how they arise, and prevent them from arising in the future. Could be architecture, design, or just new, better validation rules via `go fmt` or `go vet` or ast-grep rules. launch the supervisor using the `@~/codebases/dayvidpham/aura-scripts/aura-swarm` command once the architecture is proposed to resolve all these issues, and the tasks are topologically sorted and placed into vertical slices.\n\nThis would be generic though, not specific to a golang codebase---just using these command as an example. This would produce a followup-epic with structure like so:\n\n```\nunified-schema-ldl: EPIC: Ingest Pipeline Follow-Up Work (post-implementation) [P2] (closed)\n    ├── unified-schema-f6f: F1: HostSlug \u0026 Project Identity Refactoring [P2] (closed)\n    │   ├── unified-schema-af6: R3: Adapters populate HostSlug, pipeline reads it [P2] (closed)\n    │   ├── unified-schema-da3: R2: Extract shared DeriveProjectIdentifiers into hostslug.go [P2] (closed)\n    │   ├── unified-schema-xvo: R1: Add HostSlug field to UnifiedMetadata [P2] (closed)\n        └── unified-schema-kip: M5: DeriveHostSlug doesn't handle git:// or file:// remotes [P3] (closed)\n    ├── unified-schema-02c: F7: Documentation [P3] (closed)\n    │   ├── unified-schema-z6u: ARCH: Preventive Architecture for Ingest Pipeline Follow-Up [P2] (open)\n    │   ├── ... (many more follow-up tasks organized by feature area)\n    └── unified-schema-qeb: F4: Pipeline Error Handling \u0026 Test Coverage [P3] (closed)\n        ├── ... (leaf tasks)\n```\n\nKey problems to solve:\n1. Work gets lost or forgotten — need harder guardrails\n2. Labels applied non-uniformly — need explicit schema/taxonomy\n3. Review round tasks get lost under IMPL_PLAN — need standardized naming and structure\n4. No formal follow-up epic workflow — need architecture for post-impl review → follow-up epoch\n5. Handoff quality inconsistent — need standardized handoff documents like HANDOFF_EXAMPLE-*.md\n6. Validation pipelines missing — need language-agnostic validation rule system (like go vet, ast-grep)\n7. Process management gaps — recurring issues not systematically prevented","status":"open","priority":2,"issue_type":"epic","assignee":"architect","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T15:33:41.892437571-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T00:31:15.420217306-08:00","labels":["aura:user:request"],"dependencies":[{"issue_id":"aura-scripts-82j","depends_on_id":"aura-scripts-4ed","type":"blocks","created_at":"2026-02-19T19:03:03.105173865-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-82j","depends_on_id":"aura-scripts-9d9","type":"relates-to","created_at":"2026-02-19T19:03:42.217264586-08:00","created_by":"David Huu Pham"}]}
{"id":"aura-scripts-82l","title":"PROPOSE_PLAN: REVISION-2 — aura-scripts Nix flake with HM modules","description":"REVISION-2: Addressing review findings from REVIEW_1 (ACCEPT), REVIEW_2 (REVISE), REVIEW_3 (ACCEPT).\n\n## What Changed from REVISION-1\n\n### 1. Acknowledged existing implementation (Phases 1-3 DONE)\n\nThe HM module (`nix/hm-module.nix`) and flake already implement:\n- Flake skeleton with `packages` output (launch-parallel, aura-swarm)\n- `aura-protocol` — protocol docs install to `~/.claude/` or `~/.config/aura/protocol/`\n- `aura-commands` — slash command `.md` files with role filtering and `enableAll` pattern\n- `aura-agents` — agent `.md` files into `~/.claude/agents/` (was undocumented in REVISION-1)\n- `packages` toggle — installable via `home.packages` when `packages.enable = true`\n\n### 2. Added `agents` section to spec\n\n```nix\nagents = {\n  enable = mkOption { type = bool; default = true; };\n  extraAgents = mkOption { type = attrsOf path; default = {}; };\n};\n```\nEffect: Installs all `.md` files from `agents/` into `~/.claude/agents/`, plus any user-supplied extras.\n\n### 3. Fixed `protocol.target` to match implementation\n\nProposal REVISION-1 said `enum [\"claude\" \"opencode\" \"both\"]`.\nImplementation correctly uses `enum [\"global\" \"xdg\"]`:\n- `\"global\"` → `~/.claude/`\n- `\"xdg\"` → `~/.config/aura/protocol/`\n\nThis avoids premature OpenCode coupling. OpenCode support is its own phase.\n\n### 4. Reframed phases to reflect actual remaining work\n\nOLD phases (REVISION-1):\n1. Flake skeleton + packages ← ALREADY DONE\n2. aura-protocol HM module ← ALREADY DONE\n3. aura-commands HM module ← ALREADY DONE\n4. aura-agent-config HM module\n5. Integration test\n\nNEW phases:\n1. **Fix package wrapping** — Replace `writeScriptBin` with `writeShellApplication` or `makeWrapper` so runtime deps (tmux, git, claude) are in PATH\n2. **Fix `lib ? config.lib`** — Remove non-standard fallback, use `lib` from module args directly\n3. **Integration test** — Wire into dotfiles flake, verify `home-manager switch` produces correct output\n4. **agentConfig HM module** — Generate `~/.claude/settings.json` from Nix options (Claude Code first). Must address `home.file` read-only symlink constraint — settings.json needs writeback, so use `home.file.*.text` with `home.activation` script or `xdg.configFile` with mutable copy\n5. **OpenCode config generation** — Translate shared options to OpenCode config format (own phase, not a parenthetical)\n\n### 5. Runtime dependency wrapping (G1 — all reviewers flagged)\n\nCurrent `writeScriptBin` only patches the shebang. `launch-parallel.py` calls `subprocess` to launch tmux sessions — tmux won't be found unless separately in PATH. `aura-swarm` likely needs git and claude CLI.\n\nFix: Use `writeShellApplication` which supports `runtimeInputs`:\n```nix\nlaunch-parallel = pkgs.writeShellApplication {\n  name = \"launch-parallel\";\n  runtimeInputs = [ pkgs.python3 pkgs.tmux pkgs.git ];\n  text = ''exec python3 ${./launch-parallel.py} \"$@\"'';\n};\n```\n\nOr use `makeWrapper`/`wrapProgram` on the existing derivation.\n\n### 6. `home.file` immutability and Phase 4 design (T1)\n\n`home.file.*.source = storePath` creates read-only `/nix/store` symlinks. Fine for commands, agents, protocol docs. **Blocker for Phase 4**: Claude Code writes to `settings.json` at runtime.\n\nOptions for Phase 4:\n- **A) `home.activation` script**: Generate settings.json to a temp location, copy (not symlink) on activation. User edits persist until next `home-manager switch`.\n- **B) Nix-managed read-only + runtime overlay**: Generate base config from Nix, Claude Code reads base + writes overrides to a separate file, merge at startup.\n- **C) `home.file.*.text` + `home.file.*.force`**: Overwrite on each switch. Simplest but loses runtime changes.\n\nRecommend **Option A** for Phase 4 — defer detailed design to that phase.\n\n### 7. Updated validation checklist (separated by phase)\n\n**Phase 1 (package wrapping):**\n- [ ] `launch-parallel` finds tmux at runtime without tmux in user PATH\n- [ ] `aura-swarm` finds git and claude at runtime\n- [ ] `nix flake show` produces expected outputs\n- [ ] `nix flake check` passes\n\n**Phase 2 (lib fix):**\n- [ ] Remove `lib ? config.lib`, verify module still evaluates correctly\n\n**Phase 3 (integration test):**\n- [ ] Dotfiles flake imports aura-scripts without conflicts\n- [ ] `home-manager switch` completes successfully\n- [ ] Slash commands appear in `~/.claude/commands/`\n- [ ] Agent files appear in `~/.claude/agents/`\n- [ ] Protocol docs appear when `protocol.enable = true`\n- [ ] `enableAll=false` with individual role enables works\n- [ ] `extraCommands` and `extraAgents` extension points work\n- [ ] `protocol.target = \"xdg\"` installs to correct location\n- [ ] No `home.file` attr collisions across sections\n\n**Phase 4 (agentConfig — future):**\n- [ ] `home-manager switch` produces correct `~/.claude/settings.json`\n- [ ] Settings.json writeback strategy works at runtime\n\n**Phase 5 (OpenCode — future):**\n- [ ] OpenCode config generated when `opencode.enable = true`\n\n## Architecture (unchanged from REVISION-1)\n\nSingle module at `CUSTOM.programs.aura-config-sync` with subsections: `packages`, `commands`, `agents`, `protocol`, and future `agentConfig`, `security`, `hooks`.\n\n## Tradeoffs (updated)\n\n| Decision | Chosen | Alternative | Rationale |\n|----------|--------|-------------|-----------|\n| Config generation | Pure Nix functions | Runtime Go/TS daemon | Simpler, reproducible, no state |\n| Module granularity | 1 module, N subsections | N separate modules | Single import, composable via enables |\n| Command installation | File copy via HM | Symlinks into repo | HM manages files; no dangling symlinks |\n| Protocol doc location | Stay in aura-scripts | Move to dotfiles | Protocol is reusable across users/projects |\n| Package wrapping | writeShellApplication | writeScriptBin | Proper runtime dep closure |\n| protocol.target | global/xdg enum | claude/opencode/both | Filesystem location, not tool targeting |\n| settings.json strategy | home.activation copy (Phase 4) | home.file symlink | Allows runtime writeback |\n| No lib export from flake | Keep internal | Export listMdFiles etc. | YAGNI — export when needed |\n| Schema evolution | Noted as future concern | Version tracking now | Premature until config formats stabilize |","status":"open","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-18T06:11:04.780815709-08:00","created_by":"David Huu Pham","updated_at":"2026-02-18T06:11:04.780815709-08:00","labels":["aura:plan:proposal","proposal-2"],"dependencies":[{"issue_id":"aura-scripts-82l","depends_on_id":"aura-scripts-5fk","type":"relates-to","created_at":"2026-02-18T06:15:34.682583961-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-82l","depends_on_id":"aura-scripts-ci4","type":"relates-to","created_at":"2026-02-18T06:47:54.159050888-08:00","created_by":"David Huu Pham"}],"comments":[{"id":10,"issue_id":"aura-scripts-82l","author":"David Huu Pham","text":"REVIEW_1 follow-up: ACCEPT\n\n## REVISION-2 Assessment\n\nREVISION-2 addresses the critical findings from all three reviews:\n\n**Resolved (all reviewers):**\n- G1 runtime deps: Concrete writeShellApplication example with runtimeInputs ✓\n- G2 lib fallback: Explicitly called out as Phase 2 fix ✓\n- G3/G4 agents + phase clarity: Agents added to spec, phases reframed to reflect actual state ✓\n- T1 settings.json writeback: Three options enumerated, Option A (home.activation) recommended ✓\n- Protocol.target corrected to global/xdg ✓\n- Validation checklist separated by phase ✓\n\n**Unresolved (minor, non-blocking):**\n1. **T3 flake input naming** — The dotfiles integration example should note that `follows` needs `inputs.aura-scripts.inputs.nixpkgs-stable.follows = \"nixpkgs\"` (not just `inputs.nixpkgs.follows`). Phase 3 integration will surface this — acceptable to catch then.\n2. **Epoch role classification** (REVIEW_3) — `roleNames` treats epoch as a role equal to architect/worker/etc, but it's a workflow orchestrator. Similarly, user/msg/impl commands are always-needed infrastructure. The `coreCommands` filter catches non-role-prefixed commands, but `aura:epoch.*` IS role-prefixed. With `enableAll=false` + `epoch.enable=false`, epoch commands vanish — probably unintended. Suggest either: (a) move epoch out of roleNames into coreCommands, or (b) document that epoch should always be enabled. Non-blocking for current work since enableAll defaults to true.\n3. **No `checks` output** (REVIEW_3) — `nix flake check` in the checklist only validates evaluation, not file layout correctness. A `runCommand`-based check would be stronger. Fine to defer — Phase 3 integration test is the real validation.\n\n## Verdict\nACCEPT — REVISION-2 is ready for ratification. All critical and medium-risk findings are addressed. The three unresolved items are minor and can be handled during implementation without architectural changes.","created_at":"2026-02-18T14:16:21Z"},{"id":11,"issue_id":"aura-scripts-82l","author":"David Huu Pham","text":"REVIEW_2: ACCEPT\n\n## Findings Checklist (vs. my original REVISE vote on REVISION-1)\n\n1. ✅ Acknowledged existing implementation — Phases 1-3 clearly marked as DONE\n2. ✅ Added agents section to spec — documented with options\n3. ✅ Fixed protocol.target — now global/xdg matching implementation\n4. ✅ Reframed phases — 5 new phases starting from actual remaining work\n5. ✅ Runtime dep wrapping — writeShellApplication with runtimeInputs proposed\n6. ✅ Validation checklist — separated by phase, includes all previously missing items\n7. ✅ OpenCode — now its own Phase 5\n\n## New Observations (non-blocking)\n\n**a) aura-swarm also needs `bd` (beads CLI)**: Verified by grepping subprocess calls — aura-swarm calls `bd show`, `bd create` at runtime. Phase 1 runtimeInputs for aura-swarm should be: python3, tmux, git, and bd (if available as Nix pkg, otherwise document as user-PATH dependency).\n\n**b) Phase 2 (lib fix) is correct**: Verified line 5 of hm-module.nix has `lib ? config.lib`. Standard HM modules receive `lib` directly from module args — the fallback to config.lib is non-standard and could mask evaluation errors.\n\n**c) Phase 4 Option A is sound**: home.activation copy is the standard Nix pattern for mutable config files. The tradeoff (switch overwrites runtime edits) is acceptable and well-documented.\n\n## Verdict\nAll original REVISE concerns addressed. Phases are realistic, validation is thorough, forward-looking design for Phase 4 is well-reasoned. ACCEPT.","created_at":"2026-02-18T14:16:36Z"},{"id":13,"issue_id":"aura-scripts-82l","author":"David Huu Pham","text":"REVIEW_3 (re-review): ACCEPT\n\n## Systematic check: all review findings vs REVISION-2\n\n### REVIEW_1 findings (ACCEPT):\n- G1 runtime deps: ADDRESSED (§5 — writeShellApplication with runtimeInputs)\n- G2 lib fallback: ADDRESSED (Phase 2 — remove it)\n- G3 agentConfig annotation: ADDRESSED (§4 — clearly Phase 4)\n- G4 agents undocumented: ADDRESSED (§2 — added to spec)\n- T1 home.file immutability: ADDRESSED (§6 — three options, recommends activation script)\n- T2 nixosModules: NOT ADDRESSED — user mentioned in URE Q6 \"Flake should provide nixosModules and/or hmModules.\" Minor — HM is the current use case, can add later.\n- T3 flake input follows: NOT ADDRESSED — dotfiles integration example says `inputs.aura-scripts.inputs.nixpkgs.follows = \"nixpkgs\"` but the actual aura-scripts flake uses `nixpkgs = nixpkgs-stable` (via rec). The correct follows directive in dotfiles would need to be `inputs.aura-scripts.inputs.nixpkgs-stable.follows = \"nixpkgs\"`. This is a correctness issue in the integration instructions but can be caught during Phase 3 integration testing.\n\n### REVIEW_2 findings (REVISE — the critical one):\n- Acknowledge existing impl: ADDRESSED (§1)\n- Reframe phases: ADDRESSED (§4 — 5 new phases reflecting actual remaining work)\n- Add agents: ADDRESSED (§2)\n- Fix protocol.target: ADDRESSED (§3)\n- Runtime dep wrapping: ADDRESSED (§5)\n- Protocol CLAUDE.md conflict/merge: NOT ADDRESSED — no discussion of what happens if user has personal CLAUDE.md and enables protocol docs. Low risk since protocol.enable defaults to false. Documenting the overwrite behavior would be sufficient.\n- No lib export: ADDRESSED (tradeoffs table — YAGNI)\n- OpenCode phasing: ADDRESSED (Phase 5 — its own clearly-scoped phase)\n- Schema evolution: ADDRESSED (tradeoffs table — noted as future concern)\n\n### REVIEW_3 findings (mine):\n- Implementation ahead of proposal: ADDRESSED (§1)\n- Protocol target divergence: ADDRESSED (§3)\n- Validation checklist mixed: ADDRESSED (§7 — separated by phase, thorough)\n- lib fallback: ADDRESSED (Phase 2)\n- Epoch role classification: NOT ADDRESSED — \"epoch\" in roleNames is debatable since it's a workflow orchestrator, not an agent role. But this is a naming/classification nit, not an architectural issue.\n- No flake checks output: NOT ADDRESSED — `nix flake check` validates evaluation only; no actual `checks` output in the flake for testing file layout. Can be added as part of Phase 3 but doesn't block ratification.\n\n## Remaining unaddressed items (all minor):\n1. Flake input follows directive (T3) — integration instructions need correction for nixpkgs-stable. Phase 3 integration testing will catch this.\n2. Protocol CLAUDE.md overwrite behavior — needs a one-line note: \"protocol.enable replaces existing CLAUDE.md; defaults to false for this reason.\"\n3. Epoch role classification — naming nit, no architectural impact.\n4. nixosModules output — YAGNI for now.\n5. No checks flake output — can be Phase 3 scope.\n\n## Verdict\nACCEPT. All major findings from the REVISE vote (REVIEW_2) are addressed. The remaining items are minor and can be handled during implementation phases rather than blocking ratification. The phasing is now realistic, the validation checklist is thorough and phase-separated, and the settings.json writeback strategy is properly scoped as a design decision for Phase 4.","created_at":"2026-02-18T14:16:39Z"},{"id":15,"issue_id":"aura-scripts-82l","author":"David Huu Pham","text":"RATIFIED: All 3 reviewers ACCEPT on REVISION-2, UAT passed (aura-scripts-ci4). Plan approved with design changes captured in UAT.","created_at":"2026-02-18T14:53:08Z"}]}
{"id":"aura-scripts-981","title":"Revert REQUEST→EPIC renaming: epics are a task type, not a replacement for REQUEST","description":"REQUEST was incorrectly renamed to EPIC in the Beads system. Epics are just a task type within Beads (like task, bug, feature), not a replacement for the REQUEST concept. The REQUEST type should be restored as its own distinct concept, and epic should remain only as a --type value for bd create.","status":"open","priority":2,"issue_type":"bug","owner":"dayvidpham@gmail.com","created_at":"2026-02-18T06:07:44.377640159-08:00","created_by":"David Huu Pham","updated_at":"2026-02-18T06:07:48.912745406-08:00"}
{"id":"aura-scripts-9d9","title":"URD: Aura protocol v2 architectural redesign","description":"## User Requirements Document — Aura Protocol v2\n\nSource: ELICIT aura-scripts-4ed | REQUEST aura-scripts-82j\n\n---\n\n### MVP v1 Scope (user directive: \"thinner MVP v1\")\n\nThe following are MVP. Strict validation/auditing deferred to v2.\n\n---\n\n## R1: Label Taxonomy\n**Format:** `aura:p{phase-number}-{phase}:s{step-number}-{type}`\n**Example:** `aura:p2-user:s2-elicit`, `aura:p3-plan:s1-propose`\n**Enforcement (MVP):** Auto-applied in skill templates. Validated post-creation.\n**Enforcement (v2):** Python plugin with XML schema for hard-block validation.\n\n## R2: Expanded Phase 1\nPhase 1 expands from a single REQUEST step to three sub-steps:\n- **s1_1-classify**: Classify request along 4 axes (scope, complexity, risk, domain novelty). Inspired by Finesse planner (github.com/jonathanung/finesse).\n- **s1_2-research**: Find domain standards, prior art, well-regarded projects. Depth configurable per-request based on classify output. Local always allowed; web for deeper needs. User confirms depth. See protocol/RESEARCH_EXAMPLE-nix-openclaw-req-ure-proposal.md. Inspired by get-shit-done (github.com/gsd-build/get-shit-done/).\n- **s1_3-explore**: Codebase exploration. Runs IN PARALLEL with s1_2-research.\n\n## R3: URD Merged into Phase 2\nURD creation is step s2_2 within Phase 2 (after s2_1-elicit survey). The URD is the single source of truth for requirements. Linked to all phases via `bd dep relate` (peer reference, not blocked-by). Updated via `bd comments add` as requirements evolve.\n\n## R4: Dependency Tree \u0026 Naming\n- **Title format:** Prefix with N — `PROPOSAL-1: ...`, `PROPOSAL-1-REVIEW-2: ...`\n- **Superseded proposals:** Both `aura:superseded` label AND comment linking to successor.\n- **Dependency direction:** `bd dep add \u003cparent\u003e --blocked-by \u003cchild\u003e`. Parent stays open until child finishes. Work bottom-up, closure top-down.\n\n## R5: Review Severity Tree\nEach review round produces: `SLICE-{N}-REVIEW-{reviewer}-{round}`\nChildren grouped by severity:\n- `...-BLOCKER` (severity group) → blocker leaf tasks\n- `...-IMPORTANT` (severity group) → important leaf tasks\n- `...-MINOR` (severity group) → minor leaf tasks\nEmpty severity groups → closed immediately.\n**Dual-parent:** BLOCKER severity tracker is child of BOTH the review round AND the slice.\n**Direction:** Leaf tasks are always children (they block parents). Leaf tasks are never blocked by anything.\n\n## R6: Follow-up Epic\nPost-review, create EPIC_FOLLOWUP containing:\n- URD from parent epic (via relates_to)\n- Review tracking issues from original IMPL_PLAN\n- FOLLOWUP_URE → FOLLOWUP_URD → FOLLOWUP_PROPOSAL → FOLLOWUP_IMPL_PLAN\n- Follow-up slices adopt IMPORTANT/MINOR leaf tasks as new children (dual-parent: leaf blocks both severity group and followup slice)\n- Followup kind: Separate enum values (FOLLOWUP_URE, FOLLOWUP_SLICE, etc.). Simple single-parent epic relationship — no followup-of-followup enum needed.\n\n## R7: Database Design\n- `tasks` table: id, title, description, status (open|closed|superseded), kind (enum), severity (independent dimension, nullable), epic_ref, plus missing fields (assignee, round_number, etc.)\n- `blocked_by` table: many-to-many (parent_id, child_id). Enables dual-parent.\n- `relates_to` table: symmetric with canonical ordering (task_a_id \u003c task_b_id). For URD links.\n- `labels` table: task_id + label string.\n- `comments` table: append-only audit trail.\n\n## R8: Handoff Documents\n- **Scope:** All phase transitions (Architect→Supervisor, Supervisor→Worker, Supervisor→Reviewer, Worker→Reviewer, Reviewer→Followup).\n- **Storage:** `.git/.aura/handoff/{something}.md` — local, NOT pushed to remote unless user explicitly wants.\n- **Provenance:** Depends on transition type. Architect→Supervisor = full inline. Others = summary + bd IDs.\n- **Template:** Embedded in each skill.\n\n## R9: Validation Pipeline (v2)\n- Python script wrapper, Claude Code / OpenCode plugin.\n- Rules defined as XML schema.\n- Hard block on failure.\n- MVP: structural checks only (label/title format). v2: graph-aware rules.\n\n## R10: Process Guardrails\n- Validation built into phase transitions (not a separate periodic command).\n- Notification via `.git/.aura/audit/latest.md`.\n- v2: testing strategy for the protocol itself.\n\n## R11: Migration Path\nNeed migration path from current protocol to new schema without breaking in-progress work. Deferred to detailed proposal.\n\n---\n\n## Design Decisions Log\n(Updated via bd comments add as UAT/review feedback arrives)","status":"open","priority":2,"issue_type":"task","assignee":"architect","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T19:03:37.614300472-08:00","created_by":"David Huu Pham","updated_at":"2026-02-19T19:03:37.614300472-08:00","labels":["aura:urd"],"dependencies":[{"issue_id":"aura-scripts-9d9","depends_on_id":"aura-scripts-82j","type":"relates-to","created_at":"2026-02-19T19:03:42.215097321-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-9d9","depends_on_id":"aura-scripts-4ed","type":"relates-to","created_at":"2026-02-19T19:03:42.250858903-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-9d9","depends_on_id":"aura-scripts-9hn","type":"relates-to","created_at":"2026-02-19T19:05:09.144305392-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-9d9","depends_on_id":"aura-scripts-5eh","type":"relates-to","created_at":"2026-02-19T19:11:09.850391806-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-9d9","depends_on_id":"aura-scripts-w8w","type":"relates-to","created_at":"2026-02-19T23:37:47.05865966-08:00","created_by":"David Huu Pham"}],"comments":[{"id":18,"issue_id":"aura-scripts-9d9","author":"David Huu Pham","text":"Plan UAT (aura-scripts-w8w): ACCEPT with 2 revisions: (1) Eager severity group creation (always 3 groups per review round, empty = no children), (2) Follow-up epic created upon review completion if ANY IMPORTANT/MINOR exist, not gated on BLOCKER resolution.","created_at":"2026-02-20T07:37:47Z"},{"id":20,"issue_id":"aura-scripts-9d9","author":"David Huu Pham","text":"CONSTRAINT CHANGE: bd dep relate is buggy. Do NOT use it. For URD and other 'related' references, include the task ID in the description frontmatter of the referencing task. All proposal references to bd dep relate must be replaced with frontmatter references.","created_at":"2026-02-20T08:14:03Z"}]}
{"id":"aura-scripts-9hn","title":"PROPOSAL-1: Aura protocol v2 — MVP skill \u0026 process updates","description":"## Requirements Traceability\n- **URD:** aura-scripts-9d9\n- **ELICIT:** aura-scripts-4ed\n- **REQUEST:** aura-scripts-82j\n\n## Problem Space\n\n**Axes:**\n- Parallelism: HIGH — skill files are independent, can be updated in parallel\n- Distribution: Single repo (aura-scripts), all files in commands/ and protocol/\n- Scale: ~25 files (20 skills + 5 protocol docs)\n- Frequency: One-time migration, then maintained per-epoch\n\n**Has-a / Is-a:**\n- EPIC HAS-A dependency tree (REQUEST → URE → PROPOSAL → IMPL_PLAN → slices)\n- REVIEW_ROUND HAS-A severity groups (BLOCKER, IMPORTANT, MINOR)\n- SEVERITY_GROUP HAS-A leaf tasks (dual-parent: also child of slice or followup-slice)\n- EPIC_FOLLOWUP IS-A EPIC (same phase structure, different kind enum)\n- URD IS-A Beads task (peer-linked via relates_to, not blocked-by)\n\n## Engineering Tradeoffs\n\n| Option | Pros | Cons | Decision |\n|--------|------|------|----------|\n| Full validation pipeline (v2) | Hard-block enforcement, XML schema | High implementation cost, blocks MVP | **Deferred** |\n| Skills-only update (v1) | Fast, low-risk, immediately usable | Relies on agent self-enforcement | **Selected** |\n| Database implementation | Enables graph queries | Beads is the DB; no custom DB needed | **Deferred** |\n| Handoff as repo files | Git-tracked, PR-reviewable | File bloat in main repo | Rejected — use .git/.aura/handoff/ |\n\n## MVP v1 Scope\n\nProtocol and skill file updates ONLY. No runtime tooling, no validation scripts, no DB changes.\n\n### In scope:\n1. **Label taxonomy** — Update all skills to use `aura:p{N}-{phase}:s{M}-{type}` format\n2. **Expanded Phase 1** — Add s1_1-classify, s1_2-research, s1_3-explore sub-steps\n3. **URD in Phase 2** — Merge URD creation into elicit skill as s2_2\n4. **Task naming** — Standardize PROPOSAL-N, REVIEW-M title prefixes\n5. **Review severity tree** — Document BLOCKER/IMPORTANT/MINOR structure in reviewer skills\n6. **Follow-up epic** — Add EPIC_FOLLOWUP workflow to epoch and supervisor skills\n7. **Handoff template** — Add template to each transition skill, storage at .git/.aura/handoff/\n8. **Superseded marking** — Add aura:superseded label + comment convention\n9. **Migration notes** — Document how to transition existing beads tasks\n\n### Out of scope (v2):\n- Python validation plugin / XML schema enforcement\n- Graph-aware validation rules\n- Automated audit/sweep commands\n- Testing strategy for the protocol itself\n- Database table implementation (beads IS the task store)\n\n## Public Interfaces\n\n### Label Schema (human convention, not code)\n\\`\\`\\`\naura:p{phase}-{domain}:s{step}-{type}\n\nPhases:\n  p1-user    — Phase 1: Request + classify + research + explore\n  p2-user    — Phase 2: Elicit + URD\n  p3-plan    — Phase 3: Propose\n  p4-plan    — Phase 4: Review\n  p5-user    — Phase 5: Plan UAT\n  p6-plan    — Phase 6: Ratify\n  p7-plan    — Phase 7: Handoff\n  p8-impl    — Phase 8: Impl plan\n  p9-impl    — Phase 9: Worker slices\n  p10-impl   — Phase 10: Code review\n  p11-user   — Phase 11: Impl UAT\n  p12-impl   — Phase 12: Landing\n\nSpecial labels:\n  aura:urd              — User Requirements Document\n  aura:superseded       — Superseded proposal/plan\n  aura:severity:blocker — Blocker severity group\n  aura:severity:important — Important severity group\n  aura:severity:minor   — Minor severity group\n\\`\\`\\`\n\n### Task Title Convention\n\\`\\`\\`\nREQUEST: {feature}\nELICIT: {feature}\nURD: {feature}\nPROPOSAL-{N}: {feature}\nPROPOSAL-{N}-REVIEW-{M}: Plan review\nUAT-{M}: Plan acceptance for {feature}\nIMPL_PLAN: {feature}\nSLICE-{N}: {slice description}\nSLICE-{N}-REVIEW-{reviewer}-{round}: Code review\nSLICE-{N}-REVIEW-{reviewer}-{round}-BLOCKER: Blocker findings\nSLICE-{N}-REVIEW-{reviewer}-{round}-IMPORTANT: Important findings\nSLICE-{N}-REVIEW-{reviewer}-{round}-MINOR: Minor findings\nEPIC_FOLLOWUP: {feature} follow-up\nFOLLOWUP_URE: {feature} follow-up requirements\nFOLLOWUP_URD: {feature} follow-up requirements document\nFOLLOWUP_PROPOSAL: {feature} follow-up proposal\nFOLLOWUP_IMPL_PLAN: {feature} follow-up implementation\nFOLLOWUP_SLICE-{N}: {slice description}\n\\`\\`\\`\n\n### Canonical Dependency Tree\n\\`\\`\\`\nREQUEST\n  └── blocked by ELICIT (URE survey)\n        └── blocked by PROPOSAL-1 (superseded)\n        │     └── blocked by PROPOSAL-1-REVIEW-1\n        │     └── blocked by PROPOSAL-1-REVIEW-2\n        │     └── blocked by PROPOSAL-1-REVIEW-3\n        └── blocked by PROPOSAL-N (ratified)\n              └── blocked by PROPOSAL-N-REVIEW-1\n              └── blocked by PROPOSAL-N-REVIEW-2\n              └── blocked by PROPOSAL-N-REVIEW-3\n              └── blocked by UAT-PLAN\n              └── blocked by IMPL_PLAN\n                    ├── blocked by SLICE-1\n                    │     ├── blocked by leaf-task-a\n                    │     ├── blocked by leaf-task-b\n                    │     └── blocked by SLICE-1-REVIEW-A-1-BLOCKER\n                    │           ├── blocked by blocker-leaf-1\n                    │           └── blocked by blocker-leaf-2\n                    └── blocked by SLICE-2\n                          └── ...\n\nURD ←──── bd dep relate ────→ (REQUEST, ELICIT, PROPOSAL, IMPL_PLAN, UAT)\n\nSLICE-1-REVIEW-A-1 (review round)\n  ├── blocked by SLICE-1-REVIEW-A-1-BLOCKER\n  │     └── blocked by blocker-leaf-1 (dual-parent: also blocks SLICE-1)\n  ├── blocked by SLICE-1-REVIEW-A-1-IMPORTANT\n  │     └── blocked by important-leaf-1 (dual-parent: also blocks FOLLOWUP-SLICE)\n  └── blocked by SLICE-1-REVIEW-A-1-MINOR\n        └── blocked by minor-leaf-1 (dual-parent: also blocks FOLLOWUP-SLICE)\n\nEPIC_FOLLOWUP\n  ├── relates_to URD (from parent epic)\n  └── blocked by FOLLOWUP_URE\n        └── blocked by FOLLOWUP_URD\n              └── blocked by FOLLOWUP_PROPOSAL\n                    └── blocked by FOLLOWUP_IMPL_PLAN\n                          ├── blocked by FOLLOWUP-SLICE-1\n                          │     ├── blocked by important-leaf-1 (from original review)\n                          │     └── blocked by minor-leaf-3 (from original review)\n                          └── blocked by FOLLOWUP-SLICE-2\n                                └── ...\n\\`\\`\\`\n\n### Handoff Document Location\n\\`\\`\\`\n.git/.aura/handoff/\n  {epic-id}/\n    {source-phase}-to-{target-phase}.md\n\\`\\`\\`\n\nExample: .git/.aura/handoff/aura-scripts-82j/architect-to-supervisor.md\n\n### Expanded Phase 1 Sub-steps\n\\`\\`\\`\nPhase 1: User Request\n  s1_1-classify:  Classify along 4 axes (scope, complexity, risk, domain novelty)\n  s1_2-research:  Domain research (local always, web configurable). PARALLEL.\n  s1_3-explore:   Codebase exploration. PARALLEL with s1_2.\n\\`\\`\\`\n\n## Types \u0026 Enums\n\n### Task Kind (informational, shapes beads task conventions)\n\\`\\`\\`\nREQUEST, ELICIT, URD, PROPOSAL, REVIEW_ROUND, REVIEW,\nIMPL_PLAN, SLICE, SEVERITY_GROUP, LEAF_TASK, UAT, RATIFIED_PLAN,\nEPIC_FOLLOWUP, FOLLOWUP_URE, FOLLOWUP_URD,\nFOLLOWUP_PROPOSAL, FOLLOWUP_IMPL_PLAN, FOLLOWUP_SLICE\n\\`\\`\\`\n\n### Severity (independent dimension, nullable)\n\\`\\`\\`\nBLOCKER | IMPORTANT | MINOR\n\\`\\`\\`\n\n### Classification Axes (Phase 1 s1_1)\n\\`\\`\\`\nScope:     single-file | multi-file | cross-cutting | new-subsystem\nComplexity: trivial | moderate | complex | research-required\nRisk:      low | medium | high | critical\nNovelty:   known-pattern | adaptation | novel | research-first\n\\`\\`\\`\n\n## Validation Checklist\n\n### Slice 1: Protocol core + label schema\n- [ ] protocol/CLAUDE.md updated with new label format and review severity tree\n- [ ] protocol/PROCESS.md updated with expanded Phase 1, review severity, follow-up epic\n- [ ] protocol/CONSTRAINTS.md updated with label schema and naming conventions\n\n### Slice 2: Phase 1-2 skills (request, elicit, epoch)\n- [ ] aura:epoch.md reflects expanded Phase 1 and follow-up epic\n- [ ] aura:user:request.md includes s1_1-classify, s1_2-research, s1_3-explore\n- [ ] aura:user:elicit.md merges URD creation as s2_2\n- [ ] Labels use aura:p{N}-{phase}:s{M}-{type} format\n\n### Slice 3: Phase 3-6 skills (architect, reviewer, ratify)\n- [ ] aura:architect.md references new label schema\n- [ ] aura:architect:propose-plan.md uses PROPOSAL-N naming\n- [ ] aura:architect:request-review.md spawns reviewers with severity tree instructions\n- [ ] aura:architect:ratify.md marks superseded proposals\n- [ ] aura:reviewer.md and review-plan.md produce severity-grouped findings\n- [ ] Handoff template embedded in aura:architect:handoff.md\n\n### Slice 4: Phase 7-11 skills (supervisor, worker, impl review, UAT)\n- [ ] aura:supervisor.md creates severity groups during review\n- [ ] aura:supervisor:plan-tasks.md references follow-up epic workflow\n- [ ] aura:impl:review.md produces SLICE-N-REVIEW-{reviewer}-{round} structure\n- [ ] aura:user:uat.md updated with new labels\n- [ ] Handoff templates in supervisor and impl:review skills\n\n### Cross-cutting\n- [ ] All bd dep add use --blocked-by (no positional format)\n- [ ] All skills reference URD via bd dep relate\n- [ ] Handoff template present in every phase-transition skill\n- [ ] Migration notes document in protocol/\n\n## BDD Acceptance Criteria\n\n**Given** an agent runs /aura:epoch\n**When** it reaches Phase 1\n**Then** it performs classify (s1_1), research (s1_2 parallel), explore (s1_3 parallel)\n**Should Not** skip classification or proceed without user confirmation of research depth\n\n**Given** a review round completes\n**When** findings are recorded\n**Then** each finding is a leaf task under a severity group (BLOCKER/IMPORTANT/MINOR) under a review round\n**Should Not** create flat review findings without severity grouping\n\n**Given** BLOCKER findings exist for a slice\n**When** the slice attempts to close\n**Then** the BLOCKER severity group must be resolved first (all blocker leaf tasks closed)\n**Should Not** close a slice with unresolved BLOCKER findings\n\n**Given** IMPORTANT/MINOR findings remain after BLOCKER resolution\n**When** the original epic closes\n**Then** an EPIC_FOLLOWUP is created with those findings as children of followup slices\n**Should Not** lose IMPORTANT/MINOR findings when the original epic closes\n\n**Given** a phase transition occurs\n**When** handing off to the next phase\n**Then** a handoff document is written to .git/.aura/handoff/{epic-id}/\n**Should Not** transition without creating the handoff document\n\n**Given** a proposal is superseded\n**When** PROPOSAL-N+1 is created\n**Then** PROPOSAL-N gets aura:superseded label AND a comment linking to N+1\n**Should Not** leave the old proposal unmarked\n\n## Files Affected\n\n### Protocol core (modify)\n- protocol/CLAUDE.md\n- protocol/PROCESS.md\n- protocol/CONSTRAINTS.md\n\n### Phase 1-2 skills (modify)\n- commands/aura:epoch.md\n- commands/aura:user:request.md\n- commands/aura:user:elicit.md\n\n### Phase 3-6 skills (modify)\n- commands/aura:plan.md\n- commands/aura:architect.md\n- commands/aura:architect:propose-plan.md\n- commands/aura:architect:request-review.md\n- commands/aura:architect:ratify.md\n- commands/aura:architect:handoff.md\n\n### Phase 7-11 skills (modify)\n- commands/aura:supervisor.md\n- commands/aura:supervisor:plan-tasks.md\n- commands/aura:supervisor:track-progress.md\n- commands/aura:impl:review.md\n- commands/aura:impl:slice.md\n- commands/aura:user:uat.md\n\n### Review skills (modify)\n- commands/aura:reviewer.md\n- commands/aura:reviewer:review-plan.md\n- commands/aura:reviewer:review-code.md\n\n### Protocol templates (modify)\n- protocol/UAT_TEMPLATE.md\n\n### New files (create)\n- protocol/HANDOFF_TEMPLATE.md\n- protocol/MIGRATION_v1_to_v2.md","status":"closed","priority":2,"issue_type":"task","assignee":"architect","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T19:05:04.809113638-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:14:47.120845036-08:00","closed_at":"2026-02-20T02:14:47.120845036-08:00","close_reason":"Closed","labels":["aura:p3-plan:s1-propose","aura:superseded"],"dependencies":[{"issue_id":"aura-scripts-9hn","depends_on_id":"aura-scripts-9d9","type":"relates-to","created_at":"2026-02-19T19:05:09.146703722-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-9hn","depends_on_id":"aura-scripts-0xu","type":"blocks","created_at":"2026-02-19T19:08:48.153736838-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-9hn","depends_on_id":"aura-scripts-6om","type":"blocks","created_at":"2026-02-19T19:08:48.181976806-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-9hn","depends_on_id":"aura-scripts-51s","type":"blocks","created_at":"2026-02-19T19:08:48.209754392-08:00","created_by":"David Huu Pham"}],"comments":[{"id":16,"issue_id":"aura-scripts-9hn","author":"David Huu Pham","text":"SUPERSEDED by PROPOSAL-2. Review round: 1 ACCEPT (A), 2 REVISE (B, C). BLOCKERs: (B1) 13 missing skill files, (B2) dual-parent not operationalized, (C1) migration placeholder, (C2) 12-phase numbering cognitive overhead.","created_at":"2026-02-20T03:08:53Z"},{"id":38,"issue_id":"aura-scripts-9hn","author":"David Huu Pham","text":"Superseded by PROPOSAL-2 (aura-scripts-5eh).","created_at":"2026-02-20T10:14:47Z"}]}
{"id":"aura-scripts-aua","title":"PROPOSAL-2-REVIEW-A-1: Plan review (Reviewer A: Correctness)","description":"Vote: ACCEPT\n\nIMPORTANT:\n1. protocol/user-request-revamp-v2.md disposition unaddressed — stale artifact after migration\n2. UAT_TEMPLATE.md still uses ACCEPT_WITH_COMMENTS in decision field — needs vocabulary reconciliation\n\nMINOR:\n3. BDD missing \"no IMPORTANT/MINOR remain\" happy path (no followup needed)\n4. Migration label mapping omits Phase 12 (landing) — is it new or existing?\n5. Handoff storage split between request-id and followup-id dirs — document in template","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T19:13:44.191077931-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:14:45.697077673-08:00","closed_at":"2026-02-20T02:14:45.697077673-08:00","close_reason":"Closed","labels":["aura:p4-plan:s1-review"],"comments":[{"id":35,"issue_id":"aura-scripts-aua","author":"David Huu Pham","text":"ACCEPT: Review completed in previous session.","created_at":"2026-02-20T10:14:45Z"}]}
{"id":"aura-scripts-bqu","title":"SLICE-3: Phase 3-7 skills (architect + reviewer)","description":"## References\n- IMPL_PLAN: aura-scripts-xky\n- PROPOSAL-2: aura-scripts-5eh\n- URD: aura-scripts-9d9\n\n## Blocked by SLICE-1 (protocol core must be done first)\n\n## Files (12)\n- commands/aura:plan.md (MODERATE)\n- commands/aura:architect.md (FULL)\n- commands/aura:architect:propose-plan.md (MODERATE)\n- commands/aura:architect:request-review.md (MODERATE)\n- commands/aura:architect:ratify.md (MODERATE)\n- commands/aura:architect:handoff.md (FULL — handoff template)\n- commands/aura:reviewer.md (FULL — severity tree + vocabulary)\n- commands/aura:reviewer:review-plan.md (MODERATE)\n- commands/aura:reviewer:review-code.md (FULL — severity tree procedure)\n- commands/aura:reviewer:comment.md (FULL — vocabulary reconciliation)\n- commands/aura:reviewer:vote.md (MODERATE)\n- commands/aura:feedback.md (FULL — vocabulary reconciliation or deprecation)\n\n## Key Changes\n1. PROPOSAL-N / REVIEW-M naming in architect skills\n2. Superseded marking (aura:superseded + comment)\n3. Full severity tree procedure in review-code.md: EAGER creation, dual-parent bd dep add\n4. ACCEPT/REVISE vocabulary everywhere\n5. BLOCKER/IMPORTANT/MINOR replacing BLOCKING/MAJOR/MINOR\n6. Plan review = ACCEPT/REVISE only (no severity tree)\n7. Code review = full severity tree\n8. Handoff template in architect:handoff.md\n9. Remove RFC content from review-code.md and comment.md\n10. Replace bd dep relate with frontmatter references\n\n## Quality Gates\n- grep these 12 files for old labels → 0 hits\n- grep for BLOCKING, MAJOR, APPROVE_WITH_COMMENTS, REQUEST_CHANGES, REJECT → 0 hits\n- grep for bd dep relate → 0 hits\n- grep for positional bd dep add → 0 hits\n- grep for rfc, RFC → 0 hits in review-code.md and comment.md","status":"closed","priority":2,"issue_type":"task","assignee":"worker-slice-3","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T00:15:14.379331514-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T00:56:20.571019077-08:00","closed_at":"2026-02-20T00:56:20.571019077-08:00","close_reason":"Closed","labels":["aura:p9-impl:s3-slice"],"dependencies":[{"issue_id":"aura-scripts-bqu","depends_on_id":"aura-scripts-4s1","type":"blocks","created_at":"2026-02-20T00:15:21.352447838-08:00","created_by":"David Huu Pham"}],"comments":[{"id":26,"issue_id":"aura-scripts-bqu","author":"David Huu Pham","text":"SLICE-3 implementation complete. All 12 files updated to v2 protocol. Quality gates passed: no old labels, no old vocabulary, no bd dep relate, no positional bd dep add, no RFC references. Commit: a089722","created_at":"2026-02-20T08:55:56Z"},{"id":28,"issue_id":"aura-scripts-bqu","author":"David Huu Pham","text":"SLICE-3 complete. Commit a089722.","created_at":"2026-02-20T08:56:20Z"}]}
{"id":"aura-scripts-cgv","title":"UAT: Impl UAT Phase 11 — aura-scripts-xky","description":"Implementation UAT for IMPL_PLAN epic aura-scripts-xky (Aura protocol v2 — MVP skill \u0026 process updates).\n\n6 UAT Components presented, all ACCEPTED:\n\nComponent 1 (Label Schema): ACCEPT\nComponent 2 (Phase Flow): ACCEPT\nComponent 3 (Review Axes): ACCEPT\nComponent 4 (Severity Tree): ACCEPT\nComponent 5 (Handoff Documents): ACCEPT\nComponent 6 (Follow-up Lifecycle): Initially REVISE — user wanted full FOLLOWUP_* lifecycle with h6 handoff. Fixed via 3 parallel workers (~45 gaps across ~30 files). Re-presented and ACCEPTED.\n  - User note on recursion: 'Recursion can be allowed: would create a FOLLOWUP_URE-2 and FOLLOWUP_URD-2, FOLLOWUP_PROPOSAL-2-1...'\n\nPost-UAT audit (user-initiated):\n- Phase 1 substep audit: 4 Haiku explorers found 8 gaps. User designated 6 as BLOCKERs (fixed): expanded s1_2/s1_3 procedures, added schema enums, added Phase 1 output refs to elicit/propose-plan, created deferred v2 tracking task (aura-scripts-w0d).\n- Gaps 3 (Finesse ref) and 4 (GSD ref) deferred to follow-up (aura-scripts-ci6).\n- User requested dedicated /aura:research and /aura:explore skills extracted as general-purpose commands. Created both + updated SKILLS.md and AGENTS.md.\n\nParent tasks: REQUEST aura-scripts-82j, URD aura-scripts-9d9, IMPL_PLAN aura-scripts-xky","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T05:17:16.868603616-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T05:17:21.352381522-08:00","closed_at":"2026-02-20T05:17:21.352383155-08:00","labels":["aura:p11-user:s11-uat"]}
{"id":"aura-scripts-ci4","title":"UAT-1: Plan acceptance for aura-scripts Nix flake REVISION-2","description":"## Components Reviewed\n\n### Component 1: Module Structure\n**Definition shown:**\n```nix\nCUSTOM.programs.aura-config-sync = {\n  enable = true;\n  packages.enable = true;\n  commands.enable = true;\n  agents.enable = true;\n  protocol.enable = false;\n};\n```\n**Motivating example:** Minimal setup enabling only commands (packages/agents disabled).\n\n**Q1: The module uses CUSTOM.programs.aura-config-sync as the namespace. This matches your dotfiles convention (CUSTOM.programs.*). The alternative would be programs.aura-config-sync (standard HM namespace) or services.aura-config-sync. Which namespace is correct?**\nOptions:\n- CUSTOM.programs (current) — Matches your dotfiles convention for custom HM modules — keeps it separate from upstream programs.*\n- programs.aura-config-sync — Standard HM namespace — discoverable but risks collision with future upstream modules\n- aura.config-sync — Custom top-level namespace — clearly non-standard, no collision risk\n**User response:** \"The CUSTOM namespace is for the modules defined in the @~/dotfiles repo. Since this is external, should go into aura.config-sync\"\n\n**Q2: Protocol docs default to enable = false because installing to ~/.claude/CLAUDE.md would overwrite any personal CLAUDE.md you have there. The alternative is default true with a merge strategy. Is default-off the right call?**\nOptions:\n- Default off (current) — User must opt-in. Safest — never overwrites personal CLAUDE.md. But easy to forget to enable.\n- Default on, xdg target — Default to ~/.config/aura/protocol/ instead of ~/.claude/ — always installs but never conflicts with personal CLAUDE.md\n- Default on, global target — Installs to ~/.claude/ — convenient but WILL overwrite personal CLAUDE.md on every home-manager switch\n**User response:** \"Default on, xdg target\"\n\n**Decision:** ACCEPT\n\n---\n\n### Component 2: Commands with Role Filtering\n**Definition shown:**\n```nix\naura.config-sync.commands = {\n  enable = true;\n  roles = { enableAll = true; architect.enable = ...; supervisor.enable = ...; worker.enable = ...; reviewer.enable = ...; epoch.enable = ...; };\n  extraCommands = { \"my-custom:command.md\" = ./my-command.md; };\n};\n```\n**Motivating example:** Worker-only machine with enableAll=false, worker.enable=true.\n\n**Q1: Currently epoch is classified as a role alongside architect/supervisor/worker/reviewer. But epoch orchestrates ALL roles — setting enableAll=false would hide it, which breaks orchestration. Should epoch be reclassified?**\nCore commands (always installed): aura:plan, aura:status, aura:test, aura:feedback, aura:msg:*, aura:impl:*, aura:user:*\nRole commands (togglable): aura:architect:*, aura:supervisor:*, aura:worker:*, aura:reviewer:*\nOptions:\n- Move epoch to core commands — Always installed regardless of enableAll. Epoch orchestrates all roles so it should always be available.\n- Keep epoch as a role — A machine running only workers doesn't need epoch. User can explicitly enable epoch alongside their chosen roles.\n- Separate orchestration tier — Three tiers: core (always), orchestration (epoch), roles (architect/supervisor/worker/reviewer). Adds complexity but models the hierarchy accurately.\n**User response:** \"Move epoch to core commands\"\n\n**Q2: The extraCommands extension point uses attrsOf path — keys are filenames, values are file paths. This means you can add project-specific commands. Is this the right extension mechanism, or should it support inline text too?**\nOptions:\n- Path only (current) — Simple — just point to .md files. Consistent with how all other commands work.\n- Path or text — attrsOf (either path or str) — allows inline command definitions in Nix config. More flexible but mixed types add complexity.\n- Path only + extraCommandDirs — Add a second option to include entire directories of commands. Useful if you have many project-specific commands.\n**User response:** \"Path only + extraCommandDirs\"\n\n**Q3 (user-initiated comment, verbatim):** \"installation should rely mostly on creating mkOutOfStoreSymlink paths, similar to some other existing configs in ~/dotfiles that require more responsiveness and live updating, and don't require an entire build/recompilation step.\"\n\n**Decision:** ACCEPT with comments (mkOutOfStoreSymlink)\n\n---\n\n### Component 3: Package Wrapping\n**Definition shown:**\n```nix\n# Current (broken): writeScriptBin with shebang replace only\n# Proposed: writeShellApplication with runtimeInputs = [ python3 tmux git ]\n```\n**Motivating example:** launch-parallel fails at runtime because tmux not in PATH.\n\n**Q1: launch-parallel.py needs tmux and git at runtime. aura-swarm needs git, bd (beads CLI), and claude. Should ALL runtime deps be baked into the Nix wrapper, or should some be expected from the user's PATH?**\nOptions:\n- Bake all in (hermetic) — writeShellApplication with all runtimeInputs. launch-parallel gets python3+tmux+git. aura-swarm gets python3+git+bd+claude. Fully reproducible.\n- Bake tmux+python, expect claude+bd from PATH — claude and bd are user-managed tools (not in nixpkgs or custom). Wrap what Nix can provide, leave the rest to PATH.\n- Expect all from PATH — Only patch the shebang. User is responsible for having tmux, git, claude, bd available. Lightest wrapper.\n**User response:** \"Bake all in (hermetic)\"\n\n**Decision:** ACCEPT\n\n---\n\n### Component 4: settings.json Writeback Strategy (Phase 4)\n**Definition shown:** Three options: A) activation copy, B) base+overlay merge, C) nix-only read-only\n**Motivating example:** Claude Code writes permissions to settings.json at runtime; home.file symlinks are read-only.\n\n**Q1: Claude Code writes to ~/.claude/settings.json at runtime (e.g., when you grant permissions). Nix home.file creates read-only symlinks. How should Phase 4 handle this conflict?**\nOptions:\n- Activation copy (Option A) — Nix generates file, copies on switch. Runtime edits persist between switches but get overwritten on next rebuild. Simplest to implement.\n- Base + overlay (Option B) — Nix writes settings.base.json (immutable), runtime writes to settings.local.json, merged at startup. Never loses runtime changes. But requires custom merge logic and Claude Code doesn't support split configs.\n- Nix-only, no runtime writes (Option C) — All settings managed in Nix. home.file symlink, read-only. If Claude Code tries to write, it fails. You manage ALL permissions/settings in your Nix config.\n- Defer to Phase 4 — Don't decide now. Phase 4 design will have more context about what Claude Code actually needs at runtime. Just note it as an open question.\n**User response:** \"Defer to Phase 4\" with note: \"Can do Option B with some custom script for merging a user's config with the into the final\"\n\n**Decision:** ACCEPT\n\n---\n\n### Component 5: mkOutOfStoreSymlink for Live Updates\n**Definition shown:**\n```nix\n# Store symlink (current): source = \"${self}/commands/file.md\" → /nix/store/...\n# Out-of-store (proposed): source = config.lib.file.mkOutOfStoreSymlink \"/home/.../aura-scripts/commands/file.md\"\n```\n**Motivating example:** Edits to command files in repo immediately visible without home-manager switch.\n\n**Q1: mkOutOfStoreSymlink needs the absolute path to the aura-scripts repo checkout. How should this be configured?**\nOptions:\n- Explicit repoPath option (required) — User sets the path in their config. Clear, no magic. Fails with assertion if not set.\n- Explicit repoPath with default — Default to a conventional path like ~/codebases/dayvidpham/aura-scripts. User can override. Convenient but assumes directory structure.\n- Detect from flake input — Use self.outPath or builtins.toString self to derive the path. Works when flake is a local path input, not when fetched from GitHub.\n**User response:** \"Explicit repoPath option (required)\"\n\n**Q2: Should ALL file types use mkOutOfStoreSymlink (commands, agents, protocol docs), or only some?**\nOptions:\n- All files use mkOutOfStoreSymlink — Commands, agents, and protocol docs all live-update. Consistent behavior. All require repoPath.\n- Commands + agents live, protocol via store — Commands/agents change often during development. Protocol docs are more stable — store path is fine.\n- Make it configurable per section — Add a liveUpdate = true/false toggle per section. Maximum flexibility, more options to manage.\n**User response:** \"All files use mkOutOfStoreSymlink\"\n\n**User comment (verbatim):** \"Wondering how this will work with cross-config compilation. Should we adopt a yaml file based approach, some base json schema, or Nix-native? I think the agentconfig repo adopts a yaml file based approach?\"\n\n**Decision:** ACCEPT with comments\n\n---\n\n## Final Decision\n**ACCEPT** — All 5 components accepted. Key design changes from REVISION-2:\n1. Namespace: aura.config-sync (not CUSTOM.programs)\n2. Protocol: default on, xdg target\n3. Epoch: core command, not a role\n4. Extra commands: path + extraCommandDirs\n5. Installation: mkOutOfStoreSymlink with required repoPath\n6. Package wrapping: hermetic (all deps baked in)\n7. settings.json: deferred to Phase 4, Option B likely direction\n8. Open question: cross-config compilation strategy (yaml/json/nix-native) for Phase 4","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-18T06:47:50.616746754-08:00","created_by":"David Huu Pham","updated_at":"2026-02-18T06:55:49.823134533-08:00","closed_at":"2026-02-18T06:55:49.823134533-08:00","close_reason":"UAT passed, all 5 components ACCEPTED. Plan ratified.","labels":["aura:user:uat","proposal-2:uat-1"],"dependencies":[{"issue_id":"aura-scripts-ci4","depends_on_id":"aura-scripts-82l","type":"relates-to","created_at":"2026-02-18T06:47:54.158209461-08:00","created_by":"David Huu Pham"}],"comments":[{"id":14,"issue_id":"aura-scripts-ci4","author":"David Huu Pham","text":"UAT ADDENDUM (user-initiated, verbatim):\n\n\"I think we should have the cross-config compilation step PRODUCE a set of configs at pre-determined locations INSIDE the config-sync repo, then we can use mkOutOfStoreSymlink on the build artifacts of the compilation step.\"\n\nDesign implication for Phase 4+:\n- Cross-config compilation (yaml/json/nix → tool-specific configs) writes output to e.g. aura-scripts/build/ or aura-scripts/.out/\n- mkOutOfStoreSymlink points ~/.claude/settings.json → aura-scripts/.out/claude/settings.json\n- Nix HM module doesn't generate configs itself — it symlinks to the compilation output\n- This cleanly separates: (1) config compilation (build step, can be any toolchain), (2) config installation (Nix HM symlinks)\n- Solves the settings.json writeback problem: compilation output is a regular file, not a /nix/store symlink","created_at":"2026-02-18T14:49:36Z"}]}
{"id":"aura-scripts-ci6","title":"FOLLOWUP: Capture Finesse planner + GSD references in protocol","description":"Two deferred gaps from impl UAT Phase 11 audit:\n\nGap 3 (IMPORTANT): Finesse planner reference — URD mentions a 'Finesse planner' concept that should be referenced in planning phase docs (architect:propose-plan, supervisor:plan-tasks). Currently not mentioned anywhere in protocol.\n\nGap 4 (IMPORTANT): get-shit-done (GSD) reference — URD mentions a GSD research depth/mode. Should inform the research skill's quick-scan depth level and be documented as an alias or shortcut mode.\n\nSource: Phase 11 UAT audit of Phase 1 substep implementation (4 Haiku explorers).","status":"open","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T05:16:56.836352963-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T05:16:56.836352963-08:00","labels":["aura:severity:important"]}
{"id":"aura-scripts-du8","title":"IMPL-REVIEW-B-1: Code review (Reviewer B: Test quality)","description":"---\nreferences:\n  impl_plan: aura-scripts-xky\n  urd: aura-scripts-9d9\n  proposal: aura-scripts-5eh\n  request: aura-scripts-82j\n---\n## Axis B: Test quality\n\nReview all 40 changed files for quality of examples and testability patterns.\n\nKey questions:\n- Do code examples show correct Go test patterns (testing package, _test.go conventions)?\n- Are anti-patterns clearly marked and correct patterns clearly shown?\n- Do L2 test examples import actual production code (not mock implementations)?\n- Are DI patterns correct (mock deps, not SUT)?\n- Are validation checklists complete and actionable?\n- Do BDD acceptance criteria use Given/When/Then/Should format correctly?\n\n## Files to Review\n40 files: git diff --name-only main...HEAD\n\n## Vote\nBinary: ACCEPT or REVISE","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:13:41.741866538-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:51.057727851-08:00","closed_at":"2026-02-20T02:22:51.057727851-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review"],"comments":[{"id":40,"issue_id":"aura-scripts-du8","author":"David Huu Pham","text":"## Vote: ACCEPT\n\n## Findings\n\n### BLOCKER\n- None\n\n### IMPORTANT\n- I-1: `commands/aura:test.md` (lines 8-14) uses npm-based test commands (`npm run typecheck`, `npm run test:unit`, etc.) which are JavaScript/Node.js specific. The rest of the protocol is language-agnostic or uses Go examples as canonical illustrations. Since the Aura Protocol is designed to be reusable across projects, this file should either (a) use placeholder comments like \"Run your project's quality gates\" (as other files do, e.g., `aura:worker:implement.md` line 84), or (b) explicitly note these are example commands to be adapted per project. This creates a mismatch where a worker reading `aura:test.md` sees `npm run typecheck` but all code examples elsewhere show Go patterns (`testing.T`, `_test.go`, `cobra.Command`). While this is not a blocking inconsistency, it reduces the signal-to-noise for agents following the protocol on Go projects.\n\n- I-2: `commands/aura:worker.md` (lines 80-155) and `commands/aura:supervisor:plan-tasks.md` (lines 33-46) provide excellent Go test examples with correct `testing` package usage, `_test.go` naming, `func TestFeatureList(t *testing.T)`, and proper package naming (`package feature_test`). However, no file in the protocol mentions table-driven tests (`t.Run` with subtests), `t.Parallel()`, or `t.Helper()` — which are Go community best practices. Given that the protocol is explicitly language-agnostic (with Go as a demonstration language), this is acceptable for MVP, but the absence of subtests/table-driven patterns in the Go examples means agents generating Go tests from these examples will produce simpler test structures. Recommend tracking this as a follow-up improvement.\n\n- I-3: The TDD layer approach (L1 types -\u003e L2 tests that fail -\u003e L3 impl that makes tests pass) is explained well in `commands/aura:worker.md` (lines 79-175), `commands/aura:supervisor.md` (lines 211-264), and `protocol/PROCESS.md` (lines 458-511). The explanation is correct and clear. However, none of these files show an explicit example of what a Layer 2 test failure *output* looks like (e.g., compilation error vs runtime test failure). For Go specifically, an L2 test that imports a function that does not yet exist will fail at compilation, not at test runtime. The distinction matters for agents: a compilation error is not a test failure, and the messaging \"tests will FAIL\" could lead agents to think they wrote the test incorrectly. Consider adding a brief note that in compiled languages (Go, Rust), L2 \"failure\" manifests as a build error, which is the expected and correct signal.\n\n### MINOR\n- M-1: `commands/aura:reviewer:review-code.md` (lines 149-182) shows an excellent anti-pattern/correct-pattern pair for the dual-export problem using Go code. The Go code examples use correct conventions: `func HandleCommand(...)` as WRONG, `var commandCmd = \u0026cobra.Command{...}` as CORRECT. Both use `// WRONG:` and `// CORRECT:` comments inside the code block. This is well done.\n\n- M-2: `protocol/CONSTRAINTS.md` (lines 148-175) has a canonical design field schema with `acceptance_criteria` using `given/when/then/should_not` — the BDD format is correctly structured with `should_not` (not `shouldNot` or `should not`) as the JSON key name. This is consistent throughout all files. Well done.\n\n- M-3: DI patterns are correctly documented: `commands/aura:worker.md` (lines 114-155) shows constructor injection via a `FeatureServiceDeps` struct, which is the idiomatic Go pattern. The instruction \"mock dependencies only, MUST NOT mock the system under test\" appears in `protocol/CLAUDE.md` (line 122), `commands/aura:reviewer.md` (line 68), and `AGENTS.md` (line 199). This is consistent and correct.\n\n- M-4: Fixture/constant patterns are mentioned in `protocol/CLAUDE.md` (lines 115-122) with a 7-step priority list for test values. This is comprehensive. However, the fixture rules are not repeated or cross-referenced in the worker or test skill files (`commands/aura:worker.md`, `commands/aura:test.md`). Workers are the agents most likely to write tests, so a cross-reference to the fixture rules in `protocol/CLAUDE.md` from `commands/aura:worker.md` would improve discoverability. Low priority since workers are instructed to read CLAUDE.md.\n\n- M-5: `commands/aura:reviewer:review-code.md` (lines 184-196) correctly includes a checklist for verifying production code paths (no TODOs, real deps wired, tests import production code). The items in this checklist are actionable and verifiable. The `grep -r \"TODO\" src/` example on line 185 is a concrete verification step, which is good. The `src/` path is a generic placeholder, which is appropriate for a language-agnostic protocol.\n\n## Assessment Summary\n\nThe test quality across the 40 changed files is strong. The key strengths are:\n\n1. **Go test patterns are correctly demonstrated** in worker, supervisor, and reviewer files with proper `testing` package usage, `_test.go` conventions, and `func TestXxx(t *testing.T)` signatures.\n\n2. **Anti-patterns are clearly marked** throughout using \"WRONG\"/\"CORRECT\" labels, checkmarks/X-marks, and inline comments. The dual-export anti-pattern is the most thoroughly documented, appearing in at least 8 files with consistent messaging.\n\n3. **DI patterns are correct** — all examples mock dependencies (not the SUT), and the constructor injection pattern is used consistently.\n\n4. **Validation checklists are complete and actionable** — every checklist item can be independently verified with a specific command or code inspection step.\n\n5. **BDD acceptance criteria consistently use Given/When/Then/Should Not format** across all files that reference them (CONSTRAINTS.md, PROCESS.md, worker.md, supervisor:plan-tasks.md).\n\n6. **The TDD layer approach is clearly explained** in multiple files with correct emphasis that L2 test failures are expected and not a bug.\n\n7. **Test file naming conventions** (`*_test.go`, `pkg/` vs `cmd/` layout) are consistent throughout the Go examples.\n\nThe three IMPORTANT findings are improvements that would strengthen test quality guidance but do not represent correctness issues in the current documentation.","created_at":"2026-02-20T10:16:36Z"},{"id":50,"issue_id":"aura-scripts-du8","author":"David Huu Pham","text":"Vote: ACCEPT. 0 BLOCKERs, 3 IMPORTANT, 5 MINOR.","created_at":"2026-02-20T10:22:50Z"}]}
{"id":"aura-scripts-eiq","title":"REVIEW_1: Plan review for aura-scripts Nix flake","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-18T05:56:14.605386475-08:00","created_by":"David Huu Pham","updated_at":"2026-02-18T06:07:49.177812248-08:00","closed_at":"2026-02-18T06:07:49.177812248-08:00","close_reason":"Closed","labels":["aura:plan:review"],"dependencies":[{"issue_id":"aura-scripts-eiq","depends_on_id":"aura-scripts-5fk","type":"blocks","created_at":"2026-02-18T05:56:19.886599733-08:00","created_by":"David Huu Pham"}],"comments":[{"id":7,"issue_id":"aura-scripts-eiq","author":"David Huu Pham","text":"VOTE: ACCEPT — Proposal is architecturally sound with implementation already ahead of plan. Key notes: (1) Package wrapping needs runtime deps via makeWrapper, (2) Validation checklist should separate MVP from Phase 4 items, (3) agents subsection is implemented but undocumented in proposal, (4) home.file immutability will need Phase 4 design consideration for settings.json writeback. All gaps are addressable without architectural changes.","created_at":"2026-02-18T14:07:43Z"}]}
{"id":"aura-scripts-ght","title":"EPIC: Unified agent config — aura-scripts as Nix flake with HM modules","description":"VERBATIM USER REQUEST:\n\nShould look into @~/codebases/agentconfig to create a single source of truth for our ~/.claude/commands, hooks, configs, and settings/permissions. The burden is increasing to try and get a single common config for both Claude Code and OpenCode; a more recent version of some commands and CLAUDE.md files exist at @~/codebases/dayvidpham/aura-scripts/protocol/ .\n\n---\n\nCONTEXT:\n- ~/codebases/agentconfig is an existing TypeScript project (has package.json, tsconfig, src/, test/)\n- ~/.claude/commands/ contains aura slash commands\n- ~/codebases/dayvidpham/aura-scripts/protocol/ has newer versions of CLAUDE.md, CONSTRAINTS.md, PROCESS.md\n- User wants unified config management across Claude Code and OpenCode\n- Current pain: maintaining duplicate/divergent configs across tools","status":"open","priority":2,"issue_type":"feature","owner":"dayvidpham@gmail.com","created_at":"2026-02-17T23:42:08.038271796-08:00","created_by":"David Huu Pham","updated_at":"2026-02-18T06:04:41.498825719-08:00","labels":["aura:user:request"],"dependencies":[{"issue_id":"aura-scripts-ght","depends_on_id":"aura-scripts-7o2","type":"blocks","created_at":"2026-02-18T06:02:36.850277223-08:00","created_by":"David Huu Pham"}],"comments":[{"id":1,"issue_id":"aura-scripts-ght","author":"David Huu Pham","text":"USER ADDENDUM: An immediate translation and integration point to set up soon is ~/codebases/dayvidpham/opencode-security","created_at":"2026-02-18T07:42:16Z"}]}
{"id":"aura-scripts-hl2","title":"IMPL-REVIEW-A-1: Code review (Reviewer A: Correctness)","description":"---\nreferences:\n  impl_plan: aura-scripts-xky\n  urd: aura-scripts-9d9\n  proposal: aura-scripts-5eh\n  request: aura-scripts-82j\n---\n## Axis A: Correctness (spirit and technicality)\n\nReview all 40 changed files against the ratified plan and URD.\n\nKey questions:\n- Do the docs accurately describe the v2 12-phase protocol?\n- Are all labels consistent with the schema aura:p{N}-{domain}:s{M}-{type}?\n- Are examples correct (Go code, correct bd commands, correct dependency direction)?\n- Are reviewer naming conventions (PROPOSAL-N-REVIEW-{axis}-{round}) consistent everywhere?\n- Do handoff procedures match the HANDOFF_TEMPLATE?\n- Are frontmatter references used correctly (not bd dep relate)?\n\n## Files to Review\n40 files: git diff --name-only main...HEAD\n\n## Vote\nBinary: ACCEPT or REVISE","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:13:37.163408596-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:50.930639414-08:00","closed_at":"2026-02-20T02:22:50.930639414-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review"],"comments":[{"id":46,"issue_id":"aura-scripts-hl2","author":"David Huu Pham","text":"## Vote: ACCEPT\n\n## Findings\n\n### BLOCKER\n- None\n\n### IMPORTANT\n- **I1: UAT_EXAMPLE.md not updated (pre-existing, not introduced by this epic).** The file `protocol/UAT_EXAMPLE.md` uses old label `aura:user:uat` (line 9, should be `aura:p5-user:s5-uat`), old label `aura:plan:ratify` (line 20, should be `aura:p6-plan:s6-ratify`), and deprecated command `bd dep relate` (line 14, should use frontmatter references). However, UAT_EXAMPLE.md was NOT in the 40 changed files and was not in scope for this epic. This should be tracked as follow-up work.\n\n### MINOR\n- **M1: aura:test.md uses npm-specific commands.** The file `commands/aura:test.md` references `npm run typecheck`, `npm run test:unit`, etc. The protocol is meant to be language-agnostic. This is pre-existing and not introduced by this epic.\n- **M2: user-request-revamp-v2.md retains old label `aura:plan:ratify` on line 19.** This is the original user request document (source material), so the old label is part of the historical record — it does not describe the new protocol. Not actionable.\n- **M3: PROPOSAL-2 uses `bd dep relate` in follow-up epic example (ratified plan source text).** The ratified PROPOSAL-2 contains `bd dep relate \u003cfollowup-id\u003e \u003curd-id\u003e` in its Follow-up Epic Creation section. This is the source text of the ratified plan, not the implemented docs. The actual implemented docs in protocol/ and commands/ correctly use frontmatter references instead. No action needed on the ratified plan text itself.\n\n## Detailed Review\n\n### Criterion 1: 12-phase protocol accuracy\nPASS. All 12 phases are correctly documented across CLAUDE.md, PROCESS.md, CONSTRAINTS.md, AGENTS.md, SKILLS.md, and README.md. The phase descriptions, labels, and step suffixes are consistent with the URD and ratified PROPOSAL-2. The expanded Phase 1 (classify, research, explore) and Phase 2 (elicit, URD) are correctly documented.\n\n### Criterion 2: Label schema consistency\nPASS. All labels follow `aura:p{N}-{domain}:s{M}-{type}` consistently. Phase 1 sub-steps use underscore notation (s1_1, s1_2, s1_3). Phase 2 sub-steps use s2_1, s2_2. All other phases use simple step numbers matching the phase number (s3, s4, ..., s12). Special labels (aura:urd, aura:superseded, aura:severity:*, aura:epic-followup) are documented consistently. No old-format labels remain in the 40 changed files.\n\n### Criterion 3: Review axes naming\nPASS. All files consistently use A=Correctness, B=Test quality, C=Elegance. Found in: CONSTRAINTS.md line 124, AGENTS.md lines 75-77, SKILLS.md lines 76-80, reviewer.md lines 62-68, architect:request-review.md lines 27-30.\n\n### Criterion 4: Reviewer naming conventions\nPASS. Plan reviews: `PROPOSAL-N-REVIEW-{axis}-{round}` (consistent across 12 files, 18 occurrences). Code reviews: `SLICE-N-REVIEW-{axis}-{round}` (consistent across 5 files). The ratified plan used `{axis}` (not `{reviewer}` as in the early URD R5), and all implementation follows this.\n\n### Criterion 5: Go code examples\nPASS. Go examples in aura:worker.md, aura:reviewer:review-code.md, and aura:architect.md are syntactically correct and idiomatic. They demonstrate proper cobra command wiring, slog usage, afero.Fs dependency injection, and the dual-export anti-pattern avoidance. Interface definitions use standard Go syntax.\n\n### Criterion 6: bd command examples\nPASS. All `bd dep add` examples correctly use `bd dep add \u003cparent\u003e --blocked-by \u003cchild\u003e` direction. Verified across all 40 changed files. No positional `bd dep add` found. No `bd dep relate` usage in the changed files (only in MIGRATION_v1_to_v2.md which correctly documents it as the OLD way).\n\n### Criterion 7: Frontmatter references\nPASS. All cross-references use description frontmatter (references: block) instead of `bd dep relate`. The frontmatter pattern is documented in CLAUDE.md, CONSTRAINTS.md, and demonstrated in every skill file that creates tasks.\n\n### Criterion 8: Handoff procedures\nPASS. All 5 handoff transitions are documented consistently in HANDOFF_TEMPLATE.md, CLAUDE.md, AGENTS.md, and the relevant skill files (architect:handoff.md, supervisor:spawn-worker.md, impl:review.md, worker:complete.md). Same-actor transitions (UAT-\u003eRatify, Ratify-\u003eHandoff) are correctly excluded. Storage path `.git/.aura/handoff/{request-task-id}/` is consistent everywhere.\n\n### Criterion 9: Vote vocabulary\nPASS. Binary ACCEPT/REVISE used consistently everywhere. No APPROVE, REQUEST_CHANGES, or REJECT in the 40 changed files. Old vocabulary only appears in MIGRATION_v1_to_v2.md mapping table (correct context).\n\n### Criterion 10: Severity vocabulary\nPASS. BLOCKER/IMPORTANT/MINOR used consistently everywhere. No BLOCKING or MAJOR in the 40 changed files. Old vocabulary only appears in MIGRATION_v1_to_v2.md mapping table (correct context). EAGER severity group creation correctly documented (ALWAYS 3 groups, empty ones closed immediately).\n\n### Additional checks\n- Quality gate grep for old labels: PASS (only in migration mapping table and user-request-revamp-v2.md source document)\n- Quality gate grep for old vocabulary: PASS (only in migration mapping table)\n- Quality gate grep for `bd dep relate`: PASS (only in migration mapping table showing OLD way)\n- Follow-up epic trigger: correctly documented as \"review completion + ANY IMPORTANT/MINOR findings, NOT gated on BLOCKER resolution\" (matches UAT revision 2)\n- Eager severity groups: correctly documented as always creating 3 groups per review round (matches UAT revision 1)\n- Dual-parent BLOCKER: correctly documented with two `bd dep add` commands\n- File count: 40 files changed (verified via git diff)","created_at":"2026-02-20T10:17:45Z"},{"id":49,"issue_id":"aura-scripts-hl2","author":"David Huu Pham","text":"Vote: ACCEPT. 0 BLOCKERs, 1 IMPORTANT, 3 MINOR.","created_at":"2026-02-20T10:22:50Z"}]}
{"id":"aura-scripts-k87","title":"IMPL-REVIEW-B-1 MINOR","description":"Minor findings from Reviewer B (Test quality)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:13:59.029936709-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:51.650650704-08:00","closed_at":"2026-02-20T02:22:51.650650704-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review","aura:severity:minor"],"comments":[{"id":42,"issue_id":"aura-scripts-k87","author":"David Huu Pham","text":"5 MINOR findings:\n\nM-1: review-code.md anti-pattern/correct-pattern pair for dual-export is well done. No action needed.\n\nM-2: BDD acceptance_criteria JSON keys (given/when/then/should_not) are consistent throughout. No action needed.\n\nM-3: DI patterns (constructor injection, mock deps not SUT) are correctly and consistently documented across 3+ files. No action needed.\n\nM-4: Fixture/constant rules in CLAUDE.md not cross-referenced from worker.md or test.md. Workers are most likely to write tests. Low priority.\n\nM-5: Production code path verification checklist in review-code.md is actionable and verifiable. The generic src/ path in grep examples is appropriate. No action needed.","created_at":"2026-02-20T10:16:58Z"}]}
{"id":"aura-scripts-ky7","title":"IMPL-REVIEW-B-1 BLOCKER","description":"Blocker findings from Reviewer B (Test quality)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:13:58.888270451-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:51.316412055-08:00","closed_at":"2026-02-20T02:22:51.316412055-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review","aura:severity:blocker"]}
{"id":"aura-scripts-ldb","title":"IMPL-REVIEW-C-1 BLOCKER","description":"Blocker findings from Reviewer C (Elegance)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:14:00.316766123-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:51.386496376-08:00","closed_at":"2026-02-20T02:22:51.386496376-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review","aura:severity:blocker"]}
{"id":"aura-scripts-m1w","title":"REVIEW_3: Plan review for aura-scripts Nix flake","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-18T05:56:14.655303784-08:00","created_by":"David Huu Pham","updated_at":"2026-02-18T06:09:11.328459698-08:00","closed_at":"2026-02-18T06:09:11.328459698-08:00","close_reason":"Closed","labels":["aura:plan:review"],"dependencies":[{"issue_id":"aura-scripts-m1w","depends_on_id":"aura-scripts-5fk","type":"blocks","created_at":"2026-02-18T05:56:19.931157716-08:00","created_by":"David Huu Pham"}],"comments":[{"id":9,"issue_id":"aura-scripts-m1w","author":"David Huu Pham","text":"VOTE: ACCEPT — Architecture is sound, implementation is ahead of proposal. Single-module design correctly uses CUSTOM.programs namespace. Key notes: (1) agents section implemented but not in proposal, (2) protocol.target diverged from proposal (improvement), (3) validation checklist mixes MVP and Phase 4 items, (4) epoch classification as \"role\" is debatable. See full review on aura-scripts-5fk.","created_at":"2026-02-18T14:08:47Z"}]}
{"id":"aura-scripts-m20","title":"IMPL-REVIEW-C-1 MINOR","description":"Minor findings from Reviewer C (Elegance)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:14:00.455655956-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:51.783578983-08:00","closed_at":"2026-02-20T02:22:51.783578983-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review","aura:severity:minor"],"comments":[{"id":45,"issue_id":"aura-scripts-m20","author":"David Huu Pham","text":"MINOR findings from Reviewer C (Elegance): M1 - Handoff table duplicated across 4 files. M2 - Label schema repeated 5 times (maintenance burden). M3 - aura:test.md uses npm-specific commands (should be generic). M4 - PROCESS.md anchor name mismatches for cross-references. M5 - aura:p9-impl:slice-complete label used but not in official schema.","created_at":"2026-02-20T10:17:25Z"}]}
{"id":"aura-scripts-n58","title":"PROPOSAL-2-REVIEW-B-1: Plan review (Reviewer B: Test quality)","description":"Vote: ACCEPT\n\nBoth Round 1 BLOCKERs RESOLVED:\n- B1: All 33 skill files now listed with change depths\n- B2: Dual-parent BLOCKER fully operationalized with bd dep add sequences\n\nMINOR:\n1. File count says 40 but enumeration sums to 39 (off-by-one)\n2. Example protocol files (HANDOFF_EXAMPLE-*, RESEARCH_EXAMPLE-*, UAT_EXAMPLE.md) not mentioned\n3. Migration table missing new-only labels (aura:epic-followup, aura:severity:*)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T19:13:44.217929694-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:14:45.822383992-08:00","closed_at":"2026-02-20T02:14:45.822383992-08:00","close_reason":"Closed","labels":["aura:p4-plan:s2-review"],"comments":[{"id":36,"issue_id":"aura-scripts-n58","author":"David Huu Pham","text":"ACCEPT: Review completed in previous session.","created_at":"2026-02-20T10:14:45Z"}]}
{"id":"aura-scripts-rzf","title":"SLICE-5: Utility + messaging skills","description":"## References\n- IMPL_PLAN: aura-scripts-xky\n- PROPOSAL-2: aura-scripts-5eh\n- URD: aura-scripts-9d9\n\n## Blocked by SLICE-1 (protocol core must be done first)\n\n## Files (6)\n- commands/aura:status.md (MODERATE — many label references)\n- commands/aura:test.md (MINIMAL)\n- commands/aura:msg:send.md (MINIMAL)\n- commands/aura:msg:broadcast.md (MINIMAL)\n- commands/aura:msg:receive.md (MINIMAL)\n- commands/aura:msg:ack.md (MINIMAL)\n\n## Key Changes\n1. aura:status.md: update all label references to new format\n2. Messaging skills: update examples to new naming conventions\n3. aura:test.md: minimal label references\n4. Replace any bd dep relate with frontmatter references\n\n## Quality Gates\n- grep these 6 files for old labels → 0 hits\n- grep for bd dep relate → 0 hits","status":"closed","priority":2,"issue_type":"task","assignee":"worker-slice-5","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T00:15:14.433073449-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T00:54:10.968662055-08:00","closed_at":"2026-02-20T00:54:10.968662055-08:00","close_reason":"Closed","labels":["aura:p9-impl:s5-slice"],"dependencies":[{"issue_id":"aura-scripts-rzf","depends_on_id":"aura-scripts-4s1","type":"blocks","created_at":"2026-02-20T00:15:21.407092174-08:00","created_by":"David Huu Pham"}],"comments":[{"id":23,"issue_id":"aura-scripts-rzf","author":"David Huu Pham","text":"Implementation complete. Updated aura:status.md with all v2 label references (aura:p3-plan:s3-propose, aura:p6-plan:s6-ratify, aura:p8-impl:s8-plan, aura:p9-impl:s9-slice) and phase names. Other 5 files (aura:test.md, aura:msg:send.md, aura:msg:broadcast.md, aura:msg:receive.md, aura:msg:ack.md) had no old labels. All 3 quality gates pass.","created_at":"2026-02-20T08:50:52Z"},{"id":24,"issue_id":"aura-scripts-rzf","author":"David Huu Pham","text":"SLICE-5 complete. Commit 1142d93.","created_at":"2026-02-20T08:54:11Z"}]}
{"id":"aura-scripts-t0n","title":"IMPL-REVIEW-B-1 IMPORTANT","description":"Important findings from Reviewer B (Test quality)","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T02:13:58.959426183-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:22:51.583965683-08:00","closed_at":"2026-02-20T02:22:51.583965683-08:00","close_reason":"Closed","labels":["aura:p10-impl:s10-review","aura:severity:important"],"comments":[{"id":41,"issue_id":"aura-scripts-t0n","author":"David Huu Pham","text":"3 IMPORTANT findings:\n\nI-1: aura:test.md uses npm-specific commands (npm run typecheck, npm run test:unit) while all other files use Go examples or language-agnostic placeholders. Creates mismatch for agents on Go projects.\n\nI-2: Go test examples lack table-driven test patterns (t.Run with subtests, t.Parallel(), t.Helper()) which are Go community best practices. Acceptable for MVP since protocol is language-agnostic.\n\nI-3: TDD L2 failure messaging says \"tests will FAIL\" but in compiled languages (Go, Rust), L2 failure manifests as a build/compilation error, not a test runtime failure. Distinction matters for agent understanding.","created_at":"2026-02-20T10:16:53Z"}]}
{"id":"aura-scripts-tbp","title":"SLICE-2: Phase 1-2 skills","description":"## References\n- IMPL_PLAN: aura-scripts-xky\n- PROPOSAL-2: aura-scripts-5eh\n- URD: aura-scripts-9d9\n\n## Blocked by SLICE-1 (protocol core must be done first)\n\n## Files (3)\n- commands/aura:epoch.md (FULL)\n- commands/aura:user:request.md (FULL)\n- commands/aura:user:elicit.md (FULL)\n\n## Key Changes\n1. aura:epoch.md: 12-phase with new labels, expanded Phase 1, follow-up epic, eager severity tree\n2. aura:user:request.md: s1_1-classify, s1_2-research (parallel), s1_3-explore (parallel)\n3. aura:user:elicit.md: URD creation as s2_2, new labels\n4. Replace bd dep relate with frontmatter references\n5. All bd dep add use --blocked-by\n\n## Quality Gates\n- grep these 3 files for old labels → 0 hits\n- grep for bd dep relate → 0 hits\n- grep for positional bd dep add → 0 hits","status":"closed","priority":2,"issue_type":"task","assignee":"worker-slice-2","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T00:15:14.352580968-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T00:56:20.440632574-08:00","closed_at":"2026-02-20T00:56:20.440632574-08:00","close_reason":"Closed","labels":["aura:p9-impl:s2-slice"],"dependencies":[{"issue_id":"aura-scripts-tbp","depends_on_id":"aura-scripts-4s1","type":"blocks","created_at":"2026-02-20T00:15:21.325841054-08:00","created_by":"David Huu Pham"}],"comments":[{"id":25,"issue_id":"aura-scripts-tbp","author":"David Huu Pham","text":"SLICE-2 complete. 3 files rewritten to v2 protocol: aura:epoch.md, aura:user:request.md, aura:user:elicit.md. Commit: 0fd3282. Quality gates pass (old labels, bd dep relate, old vocabulary, positional bd dep add). Note: grep catches skill/command names (aura:user:request, aura:user:elicit) as false positives — these are filenames, not Beads labels.","created_at":"2026-02-20T08:54:43Z"},{"id":27,"issue_id":"aura-scripts-tbp","author":"David Huu Pham","text":"SLICE-2 complete. Commit 0fd3282.","created_at":"2026-02-20T08:56:20Z"}]}
{"id":"aura-scripts-w0d","title":"DEFERRED-V2: Validation pipeline, graph-aware rules, migration path","description":"---\nreferences:\n  request: aura-scripts-82j\n  urd: aura-scripts-9d9\n---\n## Deferred URD Requirements (MVP v1 → v2)\n\nThese requirements were explicitly deferred from MVP v1 scope per user directive ('thinner MVP v1').\n\n### R9: Validation Pipeline (v2)\n- Python script wrapper, Claude Code / OpenCode plugin\n- Rules defined as XML schema\n- Hard block on failure\n- MVP delivered structural checks only (label/title format in protocol docs)\n- v2: automated enforcement via plugin\n\n### R10 v2: Process Guardrails (graph-aware)\n- MVP: validation built into phase transitions (documented in protocol)\n- v2: graph-aware rules (query task relationships, not just structural fields)\n- v2: testing strategy for the protocol itself\n- Notification via .git/.aura/audit/latest.md\n\n### R11: Migration Path\n- Migration path from v1 to v2 labels for in-progress work\n- MIGRATION_v1_to_v2.md exists as documentation\n- v2: automated migration tooling\n\n## Source\nURD aura-scripts-9d9 sections R9, R10, R11\nUser directive: 'lots of requirements gathered at this point. Strict validations and auditting can be for a v2. Need a thinner MVP v1.'","status":"open","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T04:56:07.039056508-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T04:56:07.039056508-08:00","labels":["aura:p1-user:s1_1-classify"]}
{"id":"aura-scripts-w8w","title":"UAT-1: Plan acceptance for Aura protocol v2","description":"## Components Reviewed\n\n### Component 1a: Label Taxonomy\n**Definition shown:** aura:p{N}-{domain}:s{M}-{type} format with before/after examples\n**Question:** Does this label design match your intent from the URE?\n**Options:** ACCEPT / REVISE\n**User response:** ACCEPT\n\n### Component 1b: Review Severity Tree\n**Definition shown:** Lazy creation with dual-parent BLOCKER, single-parent IMPORTANT/MINOR\n**Question:** Does this severity tree structure match your intent?\n**Options:** ACCEPT / REVISE\n**User response (verbatim):** \"REVISE: should not have lazy creation. Should have eager creation of severity groups and no findings at that level just means a severity group with no children\"\n\n### Component 1c: Follow-up Epic\n**Definition shown:** Supervisor creates after Phase 10 once all BLOCKERs resolved\n**Question:** Does this trigger and ownership match your intent?\n**Options:** ACCEPT / REVISE\n**User response (verbatim):** \"REVISE: the follow-up epic trigger should be upon completion of the the review step, by the supervisor, if any IMPORTANT/MINOR findings exist at all NOT only when BLOCKERS are resolved.\"\n\n### Component 2a: Handoff Documents\n**Definition shown:** 5 actor-change transitions, .git/.aura/handoff/ storage, provenance depth by type\n**Question:** Does this handoff scope and storage match your intent?\n**Options:** ACCEPT / REVISE\n**User response:** ACCEPT\n\n### Component 2b: Migration\n**Definition shown:** Additive (old labels kept, old titles recognized, no retroactive restructuring)\n**Question:** Does this migration approach work for you?\n**Options:** ACCEPT / REVISE\n**User response:** ACCEPT\n\n### Component 2c: Vocabulary Reconciliation\n**Definition shown:** 4-level votes → binary ACCEPT/REVISE, BLOCKING/MAJOR → BLOCKER/IMPORTANT\n**Question:** Does this vocabulary reconciliation match your intent?\n**Options:** ACCEPT / REVISE\n**User response:** ACCEPT\n\n## Final Decision\nACCEPT with two revisions:\n1. Severity groups: EAGER creation (always 3 groups per review round)\n2. Follow-up epic: created upon review completion if ANY IMPORTANT/MINOR exist","status":"closed","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-19T23:37:37.906690243-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T02:14:49.309183514-08:00","closed_at":"2026-02-20T02:14:49.309183514-08:00","close_reason":"Closed","labels":["aura:p5-user:s1-uat"],"dependencies":[{"issue_id":"aura-scripts-w8w","depends_on_id":"aura-scripts-9d9","type":"relates-to","created_at":"2026-02-19T23:37:47.06108306-08:00","created_by":"David Huu Pham"}],"comments":[{"id":39,"issue_id":"aura-scripts-w8w","author":"David Huu Pham","text":"UAT completed in previous session. Plan accepted with 2 revisions incorporated into PROPOSAL-2.","created_at":"2026-02-20T10:14:49Z"}]}
{"id":"aura-scripts-xky","title":"IMPL_PLAN: Aura protocol v2 — MVP skill \u0026 process updates","description":"## References\n- URD: aura-scripts-9d9\n- PROPOSAL-2 (ratified): aura-scripts-5eh\n- REQUEST: aura-scripts-82j\n- ELICIT: aura-scripts-4ed\n- UAT-1: aura-scripts-w8w\n\n## UAT Revisions to Incorporate\n1. Severity groups: EAGER creation (always 3 groups per review round, empty = no children)\n2. Follow-up epic: created by Supervisor upon review completion if ANY IMPORTANT/MINOR exist (NOT gated on BLOCKER resolution)\n\n## Constraint Change\n- DO NOT use bd dep relate — it is buggy\n- For \"related\" references (URD, etc.), include task IDs in description frontmatter\n\n## Implementation Strategy\n\n40 files across 5 slices. Slice 1 is prerequisite for Slices 2-5.\nSlices 2-5 can run in parallel after Slice 1 completes.\n\nAll changes are protocol/documentation updates (markdown skill files). No runtime code.\n\n## Slice 1: Protocol Core + Label Schema (PREREQUISITE)\nFiles (6): protocol/CLAUDE.md, protocol/PROCESS.md, protocol/CONSTRAINTS.md, protocol/UAT_TEMPLATE.md, protocol/HANDOFF_TEMPLATE.md (CREATE), protocol/MIGRATION_v1_to_v2.md (CREATE)\nChange depth: FULL\n\nKey changes:\n- New label format aura:p{N}-{domain}:s{M}-{type} throughout\n- Review severity tree with EAGER creation + dual-parent BLOCKER\n- Follow-up epic workflow (trigger: review completion + IMPORTANT/MINOR exist)\n- Vocabulary reconciliation (ACCEPT/REVISE, BLOCKER/IMPORTANT/MINOR)\n- Replace all bd dep relate references with frontmatter references\n- Dependency direction examples (bd dep add \u003cparent\u003e --blocked-by \u003cchild\u003e)\n- Handoff template (CREATE)\n- Migration procedure with label + title mapping tables (CREATE)\n- Expanded Phase 1 (classify, research, explore)\n\nValidation: grep protocol/ for old labels, old vocabulary, bd dep relate\n\n## Slice 2: Phase 1-2 Skills (3 files)\nFiles: aura:epoch.md, aura:user:request.md, aura:user:elicit.md\nChange depth: FULL\n\nKey changes:\n- aura:epoch.md: 12-phase with new labels, expanded Phase 1, follow-up epic, severity tree\n- aura:user:request.md: s1_1-classify, s1_2-research, s1_3-explore sub-steps\n- aura:user:elicit.md: URD creation as s2_2, new labels\n- Replace bd dep relate with frontmatter references\n\nValidation: grep for old labels, old dep format\n\n## Slice 3: Phase 3-7 Skills — Architect + Reviewer (12 files)\nFiles: aura:plan.md, aura:architect.md, aura:architect:propose-plan.md, aura:architect:request-review.md, aura:architect:ratify.md, aura:architect:handoff.md, aura:reviewer.md, aura:reviewer:review-plan.md, aura:reviewer:review-code.md, aura:reviewer:comment.md, aura:reviewer:vote.md, aura:feedback.md\nChange depth: FULL for architect.md, handoff.md, reviewer.md, review-code.md, comment.md, feedback.md; MODERATE for rest\n\nKey changes:\n- PROPOSAL-N / REVIEW-M naming in all architect skills\n- Superseded marking (aura:superseded label + comment)\n- Full severity tree procedure in review-code.md (eager creation, dual-parent bd commands)\n- ACCEPT/REVISE vocabulary in reviewer.md, vote.md, comment.md, feedback.md\n- BLOCKER/IMPORTANT/MINOR replacing BLOCKING/MAJOR/MINOR\n- Plan review = ACCEPT/REVISE only (no severity tree)\n- Code review = full severity tree\n- Handoff template in architect:handoff.md\n- Remove RFC content from review-code.md and comment.md\n- Replace bd dep relate with frontmatter references\n\nValidation: grep for old labels, old vocabulary, BLOCKING, MAJOR, APPROVE, REQUEST_CHANGES, REJECT, bd dep relate\n\n## Slice 4: Phase 8-12 Skills — Supervisor + Worker + Impl (12 files)\nFiles: aura:supervisor.md, aura:supervisor:plan-tasks.md, aura:supervisor:track-progress.md, aura:supervisor:spawn-worker.md, aura:supervisor:commit.md, aura:impl:review.md, aura:impl:slice.md, aura:worker.md, aura:worker:implement.md, aura:worker:complete.md, aura:worker:blocked.md, aura:user:uat.md\nChange depth: FULL for supervisor.md, impl:review.md; MODERATE for rest; MINIMAL for commit.md, blocked.md\n\nKey changes:\n- Supervisor owns EPIC_FOLLOWUP creation (trigger: review completion + IMPORTANT/MINOR exist)\n- impl:review.md: severity tree procedure, SLICE-N-REVIEW naming, handoff\n- Handoff templates in spawn-worker.md (Supervisor→Worker) and worker:complete.md (Worker→Reviewer)\n- SLICE-N naming in plan-tasks.md\n- New labels throughout\n- Replace bd dep relate with frontmatter references\n\nValidation: grep for old labels, old dep format, bd dep relate\n\n## Slice 5: Utility + Messaging Skills (6 files)\nFiles: aura:status.md, aura:test.md, aura:msg:send.md, aura:msg:broadcast.md, aura:msg:receive.md, aura:msg:ack.md\nChange depth: MODERATE for status.md; MINIMAL for rest\n\nKey changes:\n- aura:status.md: update all label references (aura:propose-plan → aura:p3-plan:s1-propose, etc.)\n- Messaging skills: update examples to new naming conventions\n- aura:test.md: minimal label references if any\n- Replace any bd dep relate with frontmatter references\n\nValidation: grep for old labels\n\n## Quality Gates (per slice)\n1. grep for old-format labels (aura:plan:propose, aura:impl, etc.) — must return 0\n2. grep for old vocabulary (BLOCKING, MAJOR, APPROVE_WITH_COMMENTS, REQUEST_CHANGES, REJECT) — must return 0\n3. grep for bd dep relate — must return 0\n4. grep for positional bd dep add (without --blocked-by) — must return 0\n5. Verify all bd dep add examples use correct direction","status":"closed","priority":2,"issue_type":"epic","assignee":"supervisor","owner":"dayvidpham@gmail.com","created_at":"2026-02-20T00:14:38.535208709-08:00","created_by":"David Huu Pham","updated_at":"2026-02-20T01:01:50.075821175-08:00","closed_at":"2026-02-20T01:01:50.075821175-08:00","close_reason":"Closed","labels":["aura:p8-impl:s1-plan"],"dependencies":[{"issue_id":"aura-scripts-xky","depends_on_id":"aura-scripts-4s1","type":"blocks","created_at":"2026-02-20T00:15:21.186562686-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-xky","depends_on_id":"aura-scripts-tbp","type":"blocks","created_at":"2026-02-20T00:15:21.215446625-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-xky","depends_on_id":"aura-scripts-bqu","type":"blocks","created_at":"2026-02-20T00:15:21.242761695-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-xky","depends_on_id":"aura-scripts-0m8","type":"blocks","created_at":"2026-02-20T00:15:21.270809216-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-xky","depends_on_id":"aura-scripts-rzf","type":"blocks","created_at":"2026-02-20T00:15:21.298138213-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-xky","depends_on_id":"aura-scripts-hl2","type":"blocks","created_at":"2026-02-20T02:13:50.163460659-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-xky","depends_on_id":"aura-scripts-du8","type":"blocks","created_at":"2026-02-20T02:13:50.236327047-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-xky","depends_on_id":"aura-scripts-0g8","type":"blocks","created_at":"2026-02-20T02:13:50.308533911-08:00","created_by":"David Huu Pham"},{"issue_id":"aura-scripts-xky","depends_on_id":"aura-scripts-cgv","type":"blocks","created_at":"2026-02-20T05:17:21.279914978-08:00","created_by":"David Huu Pham"}],"comments":[{"id":21,"issue_id":"aura-scripts-xky","author":"David Huu Pham","text":"CONVENTION: REQUEST and IMPL_PLAN tasks use --type epic for aura-swarm compatibility. CONSTRAINT CHANGE: Do NOT use bd dep relate (buggy). For related references (URD, etc.), include task IDs in description frontmatter instead.","created_at":"2026-02-20T08:31:21Z"},{"id":31,"issue_id":"aura-scripts-xky","author":"David Huu Pham","text":"All 5 slices complete. Commits: 866c8b7 (SLICE-1), 1142d93 (SLICE-5), 0fd3282 (SLICE-2), a089722 (SLICE-3), 77a8c1c (SLICE-4). Quality gates pass: no old labels, no old vocabulary, no bd dep relate, no positional bd dep add.","created_at":"2026-02-20T09:01:46Z"},{"id":52,"issue_id":"aura-scripts-xky","author":"David Huu Pham","text":"Impl UAT Phase 11 — REVISE feedback on Component 6 (FOLLOWUP_* lifecycle): User identified that Supervisor hands off FOLLOWUP_URE + FOLLOWUP_URD to Architect for FOLLOWUP_PROPOSAL creation. This is a new handoff type (h6: Supervisor → Architect) unique to the follow-up lifecycle. Fixed in schema.xml, skill files, and HANDOFF_TEMPLATE.md. User also requested research to find further FOLLOWUP_* gaps across the document set.","created_at":"2026-02-20T12:16:13Z"}]}
{"id":"aura-scripts-ztn","title":"URE: Unified agent config via Nix home-manager modules","description":"PHASE 2: USER REQUIREMENTS ELICITATION\n\n## Verbatim User Request (Phase 1)\n\n\"Should look into @~/codebases/agentconfig to create a single source of truth for our ~/.claude/commands, hooks, configs, and settings/permissions. The burden is increasing to try and get a single common config for both Claude Code and OpenCode; a more recent version of some commands and CLAUDE.md files exist at @~/codebases/dayvidpham/aura-scripts/protocol/ .\"\n\nAddendum: \"An immediate translation and integration point I want to set up soon is @~/codebases/dayvidpham/opencode-security\"\n\n## Questions \u0026 Answers (All Verbatim)\n\n### Q1: What is the primary artifact you want agentconfig to manage?\nOptions presented: Everything unified | Settings + commands only | Config translation layer\n**Answer: Everything unified** — agentconfig becomes single source for settings/permissions, slash commands, protocol docs, hooks, and security filter config.\n\n### Q2: For the OpenCode integration, what does the translation look like?\nOptions: Bidirectional sync | One canonical source | Just security for now\n**Answer: Bidirectional sync** — can read either tool config and translate to the other.\n\n### Q3: Where should protocol docs live canonically?\nOptions: Stay in aura-scripts | Move to agentconfig | Shared git submodule\n**Answer (verbatim):** \"For my purposes, turn aura-scripts into a set of consumable NixOS modules/home-manager modules. In that case, should stay in aura-scripts, or can go in @~/dotfiles\"\n\n### Q4: What is the deployment model?\nOptions: Symlinks | Build + install script | Nix/Home Manager\n**Answer (verbatim):** \"Nix/Home Manager. How complicated is agentconfig? Does it deal with versioned schemas for the various tools?\"\n(Answered: agentconfig has Zod schemas but no versioned schema migrations.)\n\n### Q5: Dotfiles repo — does it already use home-manager?\nOptions: Flake + home-manager | Flake no HM | Not Nix-based\n**Answer: Flake + home-manager** — already manages some configs declaratively.\n\n### Q6: Nix module architecture for aura-scripts?\nOptions: Flake with HM module | Overlay + packages | Monorepo in dotfiles\n**Answer (verbatim):** \"Should maybe be (1) and (2). Would want a good flake with options to support tweaking and customization. What would we even be overlaying? Flake should provide nixosModules and/or hmModules, have seen this pattern before.\"\n\n### Q7: Sync engine — bidirectional sync approach?\nOptions: Nix-generated static | agentconfig TypeScript | Hybrid\n**Answer (verbatim):** \"Should be (1) for now, but should actually be using Golang. (1) is required when binaries or scripts (aura-swarm or launch-parallel) change.\"\n\n### Q8: Priority order?\nOptions: Nix module | OpenCode security | Config translation | Unify commands\n**Answer:** \"(1) Nix module, then (3) Config translation, then (4) Unify commands, then (2) OpenCode security\"\n\n## Additional User Feedback (Post-Elicitation)\n\n### Role of agentconfig\n**Verbatim:** \"We want to use agentconfig as inspiration for our own project, not using it in its own right.\"\n\n### Module structure\nUser rejected 3 separate HM modules. Wants a **single module**: `homeManagerModules.aura-config-sync`\n\n### Role selection pattern\nUser wants individual enables with `enableAll` default, NOT a list of role strings:\n```nix\nroles = {\n  enableAll = mkOption { type = bool; default = true; };\n  architect.enable = mkOption { ... default = cfg.commands.roles.enableAll; };\n  # etc.\n};\n```\n\n### Review process\nUser stated: \"Dont skip formal review.\" Then: \"Shouldnt be using the launch-parallel script, should just launch them with TeamCreate.\"\n\n### Epic structure\nUser stated: \"This should be an epic, and should have been captured by a URD.\"\nUser stated: \"The URE should capture all of the users inputs and feedback. It must also keep all of the users Q\u0026A.\"","status":"open","priority":2,"issue_type":"task","owner":"dayvidpham@gmail.com","created_at":"2026-02-18T05:49:46.54675304-08:00","created_by":"David Huu Pham","updated_at":"2026-02-18T06:03:45.046885864-08:00","labels":["aura:user:elicit"],"dependencies":[{"issue_id":"aura-scripts-ztn","depends_on_id":"aura-scripts-ght","type":"blocks","created_at":"2026-02-18T05:49:51.149323164-08:00","created_by":"David Huu Pham"}]}
