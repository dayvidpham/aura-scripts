{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:57:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"85ec44cb3510730fa2adab500b2ee17d0d44a22231281895d58270c2dca1d6b9","created_at":"2026-02-22T12:55:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer B (Test Quality) on SLICE-2 (constraints.py, test_constraints.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-013","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 BLOCKER","updated_at":"2026-02-22T12:57:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:45:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4e87e3a66fce8554b3b1ed54b949916784745432ab092fa03d2c1f229307b0b0","created_at":"2026-02-25T22:45:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings. Elegance axis, round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-04g5","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-2 BLOCKER","updated_at":"2026-02-25T22:45:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:38:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8813d1d4b66df31f58d976e3458d7e3d96e56436e059907423d24d029b53ea2e","created_at":"2026-02-25T22:38:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No IMPORTANT findings for SLICE-2 from Test Quality axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-05bt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-25T22:38:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:19:59Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:28:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-bj1\n  urd: aura-plugins-umi\n  proposal: aura-plugins-gmv\n  handoff: aura-plugins-b5m\n---\n## Layer Structure (TDD)\n\n### Vertical Slices\n- SLICE-1 (aura-plugins-35d): types.py — Protocol type definitions (enums, frozen specs, lookup dicts)\n  - SLICE-1-IMPL (aura-plugins-9nc): types.py + __init__.py\n  - SLICE-1-TESTS (aura-plugins-g2a): test_aura_types.py + test_schema_types_sync.py\n  - Deps: None (foundation)\n- SLICE-2 (aura-plugins-la6): state_machine.py — 12-phase epoch lifecycle\n  - SLICE-2-L1 (aura-plugins-125): Type structure\n  - SLICE-2-L2 (aura-plugins-4mu): test_state_machine.py\n  - SLICE-2-L3 (aura-plugins-0n3): Implementation\n  - Deps: SLICE-1\n- SLICE-3 (aura-plugins-mrm): constraints.py — Runtime constraint validators\n  - SLICE-3-L1 (aura-plugins-eel): Type structure\n  - SLICE-3-L2 (aura-plugins-w28): test_constraints.py\n  - SLICE-3-L3 (aura-plugins-9ii): Implementation\n  - Deps: SLICE-1, SLICE-2\n- SLICE-4 (aura-plugins-8i5): interfaces.py — Cross-project integration + A2A types\n  - SLICE-4-L1 (aura-plugins-1cy): Protocol interfaces + A2A types\n  - SLICE-4-L2 (aura-plugins-exe): test_interfaces.py\n  - SLICE-4-L3 (aura-plugins-0rd): ModelId.parse() + event stubs\n  - Deps: SLICE-1 only\n- SLICE-5 (aura-plugins-lkz): workflow.py — Temporal workflow wrapper\n  - SLICE-5-L1 (aura-plugins-r1n): Temporal types + search attrs + pyproject.toml\n  - SLICE-5-L2 (aura-plugins-amx): test_workflow.py\n  - SLICE-5-L3 (aura-plugins-2au): EpochWorkflow + activities\n  - Deps: SLICE-1, SLICE-2, SLICE-3\n\n## Parallelism Layers\n- Layer 0: SLICE-1 (foundation, solo)\n- Layer 1: SLICE-2 + SLICE-4 (parallel after SLICE-1)\n- Layer 2: SLICE-3 (after SLICE-2)\n- Layer 3: SLICE-5 (after SLICE-3)\n\n## BDD Acceptance Criteria (10)\nAC1-AC10 from RATIFIED_PLAN (aura-plugins-gmv)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-06g","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"IMPL_PLAN: Machine-executable aura protocol engine v1 MVP","updated_at":"2026-02-22T04:19:59Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"07b238efc331874470f89e3269ff6a4caa75fd01dd926f54003f0abf288b2023","created_at":"2026-02-22T12:55:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer A (Correctness) on SLICE-2 (constraints.py, test_constraints.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-081","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0cbd3f59482b3e1c4407cc503ec5a2086ae57ba5b065de702e7f60391e785d42","created_at":"2026-02-26T03:31:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  reviewer: cartographer-c\n  round: 1\n---\nMINOR findings from Cartographer C (Elegance) on SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-08lh","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 MINOR","updated_at":"2026-02-26T09:38:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7db5b170ba820bf17bee226159dc51808dd91ae4fd7d1d29be02e32615b3af71","created_at":"2026-02-26T15:33:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Create bin/worker.py (argparse, register workflows+activities, init_audit_trail). Create nix/temporal-service.nix (systemd user service). Update flake.nix homeManagerModules.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0a9o","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"L3 complete: bin/worker.py (argparse, activities registered, init_audit_trail), nix/temporal-service.nix (systemd user service), flake.nix (homeManagerModules.temporal-service)","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-4-L3: Impl — bin/worker.py + nix/temporal-service.nix + flake.nix","updated_at":"2026-02-26T18:34:51Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:23:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:46Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-4 IMPORTANT severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0ac","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-22T02:23:05Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T09:36:50Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3a9530c4273bac4d7617fe3e9eae078c3a4d2b5999aa4de2b54eb02ca3715a36","created_at":"2026-02-26T05:04:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Let's address the tasks in the follow-up epic. As a new feature, we also want to support updating the version for the plugin in the respective marketplace file.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0biw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"REQUEST: Address follow-up epic + marketplace version update support","updated_at":"2026-02-26T09:36:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:03Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"db3207da48e7083f6981addaa93df8cc3c02d268fca836651930df56dff601ca","created_at":"2026-02-25T22:14:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-eb7q\n  impl_plan: aura-plugins-24cr\n---\n## Scope\n\nAfter SLICE-1 (types.py + context_injection.py) is complete:\n\n1. From scripts/ directory: python -m aura_protocol.gen_schema\n2. Inspect schema.xml output for all 4 new/renamed constraints\n3. Run pytest tests/ to verify round-trip consistency\n4. Fix any test failures caused by the constraint rename/additions\n\n## Key Files\n- skills/protocol/schema.xml (regenerated, do NOT edit manually)\n- tests/ (verify all pass)\n\n## Acceptance Criteria\n- gen_schema.py runs without error\n- schema.xml contains C-supervisor-cartographers (NOT C-supervisor-explore-team)\n- schema.xml contains C-integration-points, C-slice-review-before-close, C-max-review-cycles\n- pytest tests/ passes: 0 failures","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0d4f","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-L1: Run gen_schema.py + pytest — regenerate schema.xml and validate","updated_at":"2026-02-25T22:50:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e7136520527e1c4d2513f39a0476ed4895e5374665d2466bfc2702b12805b9ef","created_at":"2026-02-26T23:48:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-xehz\n  review: aura-plugins-uvgb\n  files:\n    - tests/fixtures/fixture_loader.py (VoteTestCase, line 85)\n    - tests/test_protocol_combinatorial.py (TestVoteCombinatorial, lines 371-406)\n---\n## Finding\n\nVoteTestCase.votes is typed dict[str, str] (raw YAML strings) rather than dict[ReviewAxis, VoteType]. The fixture_loader docstring notes this:\n\n```python\nvotes: dict[str, str]\n# Mapping of ReviewAxis value → VoteType value (string-keyed).\n```\n\nIn TestVoteCombinatorial, the combinatorial tests correctly convert at call site:\n\n```python\nfor axis_str, vote_str in tc.votes.items():\n    sm.record_vote(ReviewAxis(axis_str), VoteType(vote_str))\n```\n\nThe conversion is correct and safe (ReviewAxis and VoteType are StrEnums, so ReviewAxis('correctness') works).\n\nHowever, the conversion is done inline in the test body without a helper, and the type bridge from str to enum is not documented at the call site. A reader seeing 'ReviewAxis(axis_str)' may not immediately understand why an explicit conversion is needed here but not in build_vote_dict().\n\nAdditionally, TestVoteTestCaseGenerator.test_votes_are_valid_strings (fixture_loader tests) validates the string keys, which provides safety. But it would be slightly clearer if the test used build_vote_dict() to get a properly-typed dict for passing to record_vote(), making the type intent explicit:\n\n```python\nvotes = _PROTOCOL_FIXTURE.build_vote_dict(tc.vote_combo_name)\nfor axis, vote in votes.items():\n    sm.record_vote(axis, vote)  # No inline cast needed\n```\n\n## Impact\n\nVery low — the current code is correct and tests pass. The concern is readability and future maintainability.\n\n## Note\n\nThe build_vote_dict() method exists precisely for this use case. Using it in the parametrized tests would be more consistent with the API design intent.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0fmy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: VoteTestCase.votes is dict[str, str] — type bridge from YAML not documented at point of use in combinatorial tests","updated_at":"2026-02-26T23:48:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:19:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:23:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT\n\n## Review Summary (Reviewer C — Elegance and Complexity Proportionality)\n\nSLICE-2 (state_machine.py) implements the state machine with appropriate complexity for the fixed-12-phase topology.\n\n### Strengths\n- Hand-rolled state machine over a library is the correct choice: 12 phases with a fixed, schema-derived transition table. A state machine library would add dependency weight with zero benefit.\n- Three module-level frozensets (_REVIEW_AXES, _CONSENSUS_GATED, _BLOCKER_GATED, _REVISE_DRIVES_BACK) cleanly capture the gate logic as static data rather than buried conditionals. The code reads declaratively.\n- validate_advance / advance pattern (dry-run + commit) is clean DRY design — no duplication of validation logic.\n- TransitionError with a violations: list[str] attribute is the right API shape: exception for the advance() caller path, list for the validate_advance() path. These are the same violations, just routed differently based on call site.\n- review_votes.clear() on phase transition correctly scopes votes to the phase in which they were cast. This is subtle and correct.\n- DI via optional specs dict is minimal and correct.\n- blocker_count clamped to 0 on decrement is a safe invariant.\n\n### Important Finding\n- aura-plugins-r8m: EpochState.current_role is typed str not RoleId, breaking the strongly-typed enum invariant established by the rest of the design.\n\n### Verdict\nOne IMPORTANT finding (type system inconsistency). No BLOCKER findings. SLICE-2 ACCEPT — the IMPORTANT finding is a follow-up item that does not block correctness.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0gt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1: state_machine.py — 12-phase lifecycle","updated_at":"2026-02-22T04:19:53Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T04:28:08Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"389497ea2b09596b4780e6be4b0e8e884aa2bb1856ea9daaa0ddf3597b915015","created_at":"2026-02-23T04:24:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer A on SLICE-4. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0mrs","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 BLOCKER","updated_at":"2026-02-23T04:28:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T01:50:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-la6\n  impl_plan: aura-plugins-06g\n---\n## Scope\nImplement EpochStateMachine: advance(), validate_advance(), record_vote(), has_consensus(), record_blocker(), available_transitions. Makes L2 tests pass.\n\n## Files Owned\n- scripts/aura_protocol/state_machine.py (fill in implementations)\n\n## Acceptance Criteria\nGiven EpochStateMachine when advance(valid) then transitions correctly, when advance(invalid) then TransitionError raised should never allow invalid transitions","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0n3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-L3: Impl — EpochStateMachine logic","updated_at":"2026-02-22T01:50:55Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1163131ba7e08711ae9cd81cd9b2ce6107dab06795bfe11f7d9bfcd30272e159","created_at":"2026-02-26T16:02:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"scripts/aura_protocol/audit_activities.py:148: InMemoryAuditTrail.query_events has role parameter typed as 'object' instead of 'RoleId | None'. The AuditTrail Protocol in interfaces.py:145 correctly uses 'role: RoleId | None = None'. The concrete implementation should match the Protocol signature for type safety.\n\nFile: scripts/aura_protocol/audit_activities.py:148\nProtocol definition: scripts/aura_protocol/interfaces.py:145\nSlice: aura-plugins-sp6y (SLICE-3)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0pix","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: InMemoryAuditTrail.query_events role typed as object (SLICE-3)","updated_at":"2026-02-26T18:40:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"631a763aa476ff4fba4e1828fc09be3401f6bf0af69fe4f7ff52e568c70cff49","created_at":"2026-02-23T13:23:19Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  urd: aura-plugins-w07o\n  reviewer: C (Elegance)\n  round: 1\n---\nElegance/code quality review of all 4 slices in FOLLOWUP epic. Focus: Structure, typing, DRY, conventions.\n\n## Vote: ACCEPT\n0 BLOCKERs found. 4 IMPORTANT, 4 MINOR findings documented in severity groups.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0qlw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-C-1: Elegance review of FOLLOWUP epic z8ga","updated_at":"2026-02-23T13:23:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T01:47:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-8i5\n  impl_plan: aura-plugins-06g\n---\n## Scope\nImplement ModelId.parse() and finalize event stub types. Makes L2 tests pass.\n\n## Files Owned\n- scripts/aura_protocol/interfaces.py (fill in implementations)\n\n## Acceptance Criteria\nGiven ModelId.parse(\"anthropic/claude-opus-4-6\") when parsed then provider=\"anthropic\" model=\"claude-opus-4-6\" should never accept strings without \"/\"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0rd","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-L3: Impl — ModelId.parse() + event stubs","updated_at":"2026-02-22T01:47:28Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:37:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a1e152c29b96751cce36e2321a2ff48f3d71b4c4c91bde9763fbc2debf7ac67f","created_at":"2026-02-23T03:21:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  impl_plan: aura-plugins-94yc\n---\n## Scope\nPopulate 6 new canonical dicts in types.py from schema.xml content:\n- ROLE_SPECS: dict[RoleId, RoleSpec] — 5 roles\n- COMMAND_SPECS: dict[str, CommandSpec] — 35 commands\n- LABEL_SPECS: dict[str, LabelSpec] — 21 labels\n- REVIEW_AXIS_SPECS: dict[str, ReviewAxisSpec] — 3 axes\n- TITLE_CONVENTIONS: list[TitleConvention]\n- PROCEDURE_STEPS: dict[RoleId, tuple[ProcedureStep, ...]] — supervisor+worker POC (UAT-6)\n\n## Files Owned\n- scripts/aura_protocol/types.py (modify — dict definitions)\n\n## Acceptance Criteria\nGiven canonical dicts when populated then all schema.xml entities represented with correct fields should never leave dicts empty or partially populated","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0veo","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S1-L2: Canonical dict population — ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS, etc.","updated_at":"2026-02-23T03:37:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-3 (constraints.py) minor-level findings.\n\n## Finding: TestCheckAuditTrail builds TransitionRecord objects inline using raw datetime.now() — non-reproducible timestamps may cause rare timing issues on very slow machines (MINOR)\n\nTestCheckAuditTrail tests construct TransitionRecord objects with datetime.now(tz=timezone.utc) inline. In a hermetic test environment this is fine, but if the test suite is run in an environment that mocks or freezes time (e.g., via pytest-freezegun), these tests could fail. A shared TransitionRecord factory fixture with a fixed timestamp would be more robust.\n\n## Finding: TestCheckReviewConsensus.test_violation_message_mentions_consensus uses OR condition — weakens assertion (MINOR)\n\nLine 371:\n    assert 'consensus' in violations[0].message.lower() or 'accept' in violations[0].message.lower()\n\nThe production code message always includes both 'consensus' and 'ACCEPT', so this is overly permissive. Recommend:\n    assert 'consensus' in violations[0].message.lower()\n\nTightening the assertion catches future message regressions more reliably.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0yd","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 MINOR","updated_at":"2026-02-22T17:24:09Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ed3da46c2dc6dc6b2e4e3fd9292c3a86a1943fbc370497ea972a9bdb295e2210","created_at":"2026-02-27T07:08:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-ckg0\n  urd: aura-plugins-7vtb\n  review_round: aura-plugins-zldt,aura-plugins-v1ak,aura-plugins-vd4m\n---\nAggregated MINOR findings from code review cycle 1. All BLOCKERs and IMPORTANTs resolved.\n\n## MINOR findings (deferred)\n- aura-plugins-8uc1: aura-msg.md --help example description doesn't match actual stub text\n- aura-plugins-ishd: aurad-service.nix uses pkgs.stdenv.hostPlatform.system; hm-module.nix uses pkgs.system — style inconsistency\n- aura-plugins-ib09: test_aura_msg.py uses scope=module fixture; deviates from per-test loading convention\n- Worker-2 peer: aurad-service.nix comment says 'required' but option has default\n","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-0yuk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":3,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP: Non-blocking improvements from code review (aura-plugins-ckg0)","updated_at":"2026-02-27T07:08:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b39fb3476b636de898fecdd80334b0fd876363a7b2853a786dffc107751e0c81","created_at":"2026-02-23T04:23:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/Documentation Consistency).\n\ntypes.py line 7 reads:\n  'Source of truth: skills/protocol/schema.xml'\n\nThis is the exact opposite of what v2 establishes. The entire point of this epic is that Python types.py is now the source of truth, and schema.xml is a generated export. This contradicts R2, the proposal's stated goal, and every comment in gen_schema.py.\n\nA developer reading types.py cold will be confused about which direction edits should flow.\n\nFix: Update the module docstring to:\n  'Source of truth: this file (types.py). schema.xml is generated from Python via gen_schema.py.'\n  Add a reference to gen_schema.py as the export tool.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-10e7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1-F2: types.py module docstring still declares schema.xml as source of truth","updated_at":"2026-02-23T12:46:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T01:50:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-la6\n  impl_plan: aura-plugins-06g\n---\n## Scope\nDefine the type structure for state_machine.py: EpochState (mutable state), TransitionRecord (frozen audit entry), TransitionError (exception), EpochStateMachine class skeleton with method signatures.\n\n## Files Owned\n- scripts/aura_protocol/state_machine.py (class structure + type definitions only)\n\n## Acceptance Criteria\nGiven state_machine.py when imported then EpochState, TransitionRecord, TransitionError, EpochStateMachine are importable should never have implementations yet (stubs/raise NotImplementedError)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-125","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-L1: Types — EpochState, TransitionRecord, TransitionError","updated_at":"2026-02-22T01:50:54Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No IMPORTANT findings — elegance axis clean","closed_at":"2026-02-26T04:30:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"97af5af017c3dca865bac20bbec81db9557bfa36cf7f41413b7f373731e8894b","created_at":"2026-02-26T04:30:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-12kr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-2 IMPORTANT","updated_at":"2026-02-26T04:30:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T09:09:20Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4db7513f033ca0353974a1cf5de9fcd14164b7c73f4302cada2037df0830fe42","created_at":"2026-02-23T09:04:34Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  uat: aura-plugins-sm9c\n  original_important_finding: aura-plugins-i6wh\n  original_severity_group: aura-plugins-d7ki\n---\n## UAT Escalation\nUser upgraded this from IMPORTANT (FOLLOWUP) to BLOCKER during impl UAT. UAT is paused until this is fixed.\n\n## Problem\nRoleSpec.owned_phases is typed as frozenset[str] (e.g. frozenset({'p7', 'p8', 'p9', 'p10', 'p11', 'p12'})).\nEvery other typed field in the schema uses enums. This breaks the pattern: callers must know the string encoding convention instead of using PhaseId enum members.\n\n## Fix Required\n- types.py: RoleSpec.owned_phases field annotation → frozenset[PhaseId]\n- schema_parser.py: _parse_roles() or wherever owned_phases is populated — convert each string to PhaseId enum\n  - e.g. PhaseId(phase_str) or {PhaseId(s) for s in raw_phase_strs}\n- Any downstream code that iterates owned_phases and compares to PhaseId values\n\n## Secondary benefit\nFixing this also resolves IMPORTANT finding aura-plugins-1nxp (O(n*m) loop due to string phases): once owned_phases is frozenset[PhaseId], the comparison in gen_skills.py _owned_phase_details can use direct frozenset intersection instead of string scanning.\n\n## Validation\n- uv run pytest -x -q — must pass 839+ tests\n- Confirm: spec.roles['supervisor'].owned_phases is frozenset of PhaseId enums\n- Confirm: no string fallback, no mixed types","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-139n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT-BLOCKER-1: RoleSpec.owned_phases must use frozenset[PhaseId] not frozenset[str]","updated_at":"2026-02-23T09:09:20Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:53:40Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f71200ab858e3c712f78dc74d3ef7dfb21e115c64c60f0387985973dd0cf4d72","created_at":"2026-02-22T12:52:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer C (Elegance) on SLICE-2 (constraints.py, test_constraints.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-13n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 BLOCKER","updated_at":"2026-02-22T12:53:40Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T09:18:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b4740c78008a97ba86aaabceabd298ec05dc179538cc17ed361fb515389a9218","created_at":"2026-02-26T08:04:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-0biw\n  urd: aura-plugins-7oqz\n  proposal: aura-plugins-iw89\n  handoff: aura-plugins-cq1o\n---\n## Slice Ordering (Sequential — all slices share bin/aura-release + tests/test_aura_release.py)\n\nSLICE-1 → SLICE-2 → SLICE-3 → SLICE-4 → SLICE-5 (strictly sequential, file ownership conflict)\n\n## Tasks\n\n### SLICE-1: Test quality (aura-plugins-rien)\n- L1 aura-plugins-anjk: Fixture API spec\n- L2 aura-plugins-wfk9: test_case_e + migrated A-D + docstring\n- L3 aura-plugins-oqna: Verify all tests pass\n\n### SLICE-2: MarketplaceVersionFile fix + TestVersionFileWrites (aura-plugins-xkuw)\n- L1 aura-plugins-wo0q: write() corrected signature\n- L2 aura-plugins-7zvn: TestVersionFileWrites (2 tests)\n- L3 aura-plugins-wqxt: Fix write() bug\n\n### SLICE-3: Registry types + load/save/find + TestPluginRegistry (aura-plugins-i142)\n- L1 aura-plugins-p98u: PluginEntry, MarketplaceEntry, PluginRegistry, _registry_path()\n- L2 aura-plugins-c2ja: TestPluginRegistry (8 tests)\n- L3 aura-plugins-vlq9: PluginRegistry.load/save/find_plugin/with_plugin_added/removed\n\n### SLICE-4: Registry CLI (init/add/list/remove) + TestRegistryCLI (aura-plugins-t5i9)\n- L1 aura-plugins-59zy: CLI subcommand argument schemas\n- L2 aura-plugins-2stv: TestRegistryCLI (9 tests including UAT deltas)\n- L3 aura-plugins-a55n: cmd_registry + all 4 subcommands + docstring\n\n### SLICE-5: Release integration + --plugin + --check (aura-plugins-3kul)\n- L1 aura-plugins-b0ff: --plugin argparse spec + integration call sites\n- L2 aura-plugins-6ts2: Integration tests (4 cases)\n- L3 aura-plugins-w843: --plugin + registry integration + --check + error cases\n\n## UAT Deltas (MUST be implemented)\n1. registry add on duplicate: show old entry + interactive confirm + --yes flag [SLICE-4]\n2. Path stored absolute at add time (Path.resolve()) [SLICE-4]\n3. Registry file exists + no CWD match → error verbosely (NOT silent) [SLICE-5]\n4. --check shows 'Registry: plugin=\u003cname\u003e marketplace=\u003cpath\u003e' [SLICE-5]","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-147m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"IMPL_PLAN: Plugin registry + marketplace fix + test quality","updated_at":"2026-02-26T09:18:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"873492e552e5bbfc82d480e558e63dd6cf4a1e3edad1c0e7069dbdb494220dda","created_at":"2026-02-26T02:45:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - Elegance axis review.\n\n1. FOUR TEST CASES REMAIN MINIMAL: URD MVP says 'one pytest test covering the subdirectory case' as a floor, not a ceiling. Cases A-D cover the complete behavioral space of discover_version_files with no additional infrastructure — all four use only tmp_path. Case A (root sanity baseline) and B (original bug) are the obvious core; Cases C and D each guard a specific named regression vector (scan short-circuit and filter-removal respectively) at zero incremental cost. This is proportionate complexity matching: four cases for a function with four distinct behavioral regions. Not over-engineered.\n\n2. SOURCEFILE LOADER IS THE RIGHT PATTERN: The _import_aura_release() helper is minimal and correct. spec_from_file_location returns None for extensionless files — empirically verified by Reviewer B in round 1. The SourceFileLoader two-step is the only correct approach; it is 5 lines and not further simplifiable without losing correctness. Whether it lives as a standalone function or a module-level assignment is a stylistic MINOR; the proposal is acceptable as written.\n\n3. DELETING LINE 32 IS CORRECT: Line 32 is an orphaned comment (identical intent, slightly different punctuation to line 58). After deleting lines 33-57, line 32 would sit directly before COMMIT_SECTIONS with no intervening dead block, making it a redundant duplicate of line 58. Deleting it is the clean call. Keeping or moving it would add clutter.\n\n4. NO SCOPE DRIFT: The proposal addresses exactly the two URD requirements (dead code removal + regression test) and nothing else. All additions in PROPOSAL-2 vs PROPOSAL-1 are direct responses to round-1 BLOCKER findings from Reviewer B. No new abstractions, no API changes, no unrelated refactoring.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-14lr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-2-REVIEW-C-2: aura-release dead code + test","updated_at":"2026-02-26T02:45:01Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:44:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"fac4b058f3457f2879fa12681ce1e201d0176943c2cd29af5c4250750bfc6a5a","created_at":"2026-02-25T22:44:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  review_round: 2\n---\nBLOCKER findings from Reviewer A (Correctness) on SLICE-1, Round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1589","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-2 BLOCKER","updated_at":"2026-02-25T22:44:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:15Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"21ef8552c8c504a4d7345ebff905f88dc5034f95109d9a1cbb61c91066841ad2","created_at":"2026-02-25T22:41:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-xpf1\n  impl_plan: aura-plugins-24cr\n  review_round: 1\n---\nAggregated IMPORTANT findings from Review Round 1. All slices voted ACCEPT.\n\n## IMPORTANT Findings\n\n### SLICE-1 — check_structural() wiring (Reviewers A, B, C)\n1. check_integration_points() not wired into check_structural()\n2. TestCheckStructural missing integration tests for C-slice-review-before-close and C-max-review-cycles\n\n### SLICE-3 — PROCESS.md exit table (Reviewer C)\n3. Phase 10 cycle exit conditions table missing 2 rows","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-179m","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"All IMPORTANT findings resolved during review cycles (R1-R3). No follow-up work needed.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":3,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP: Code review improvements — Ride the Wave propagation","updated_at":"2026-02-25T22:50:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:54:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c59af2cd15bbebe2fcf05590ab42e9e1aeb69cc040d383d981cdf47032efb6a6","created_at":"2026-02-22T12:52:30Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer C (Elegance) on SLICE-4 (workflow.py, test_workflow.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-17p","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 BLOCKER","updated_at":"2026-02-22T12:54:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ec703d534973630b746cbee2392d578217546ea79d76835ab0b73aef6bc03eed","created_at":"2026-02-25T22:14:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  impl_plan: aura-plugins-24cr\n---\n## Scope\n\nModify scripts/aura_protocol/types.py:\n\n1. Find C-supervisor-explore-team constraint definition. Rename to C-supervisor-cartographers.\n   Rewrite its content to cover the Cartographer pattern:\n   - Always exactly 3 Cartographers (dual-role: explore → review)\n   - Created via TeamCreate at start of IMPL_PLAN phase\n   - Run /aura:explore during codebase mapping (Phase 8)\n   - Switch to /aura:reviewer for code review (Phase 10)\n   - NEVER shut down between phases — persist for full Ride the Wave cycle\n   - Max 3 worker-reviewer cycles; shut down after cycle 3 or all-ACCEPT\n\n2. Add C-integration-points constraint:\n   - When slices share types, interfaces, or data flows\n   - Supervisor must identify horizontal Layer Integration Points in IMPL_PLAN\n   - Document: owning slice, consuming slices, shared contract, merge timing\n   - Workers must be told what they export and what they may import\n\n3. Add C-slice-review-before-close constraint:\n   - Slices must NOT be closed by worker immediately upon completion\n   - Slices must be reviewed at least once by Cartographers\n   - Only the supervisor closes slices, after review passes\n\n4. Add C-max-review-cycles constraint:\n   - Max 3 worker-reviewer cycles per Ride the Wave\n   - After 3 cycles: remaining IMPORTANT → FOLLOWUP epic\n   - Proceed to UAT regardless of remaining IMPORTANTs after cycle 3\n\n## Files Owned\n- scripts/aura_protocol/types.py (constraints section only)\n\n## Acceptance Criteria\n- C-supervisor-cartographers exists with new content (old C-supervisor-explore-team removed)\n- C-integration-points, C-slice-review-before-close, C-max-review-cycles all defined\n- Python syntax valid (python -c \"import aura_protocol.types\" passes)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-17pm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-L1: types.py — rename C-supervisor-explore-team → C-supervisor-cartographers + add 3 new constraints","updated_at":"2026-02-25T22:50:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"59c05c287cc2969745f852eeff732adc47602d58390dca5fecd39426163545c6","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-181t","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-2 IMPORTANT","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dfbd87d9c580a5c639322ab24cb565eff730770703b3d924c0e436fa6a8c8152","created_at":"2026-02-26T23:45:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-cyc2\n  slices:\n    - aura-plugins-rpc4\n    - aura-plugins-zh0j\n    - aura-plugins-xehz\n    - aura-plugins-cz2t\n    - aura-plugins-oyxw\n    - aura-plugins-txgq\n---\nMINOR findings for FOLLOWUP correctness review round.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-192h","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-ALL-SLICES-REVIEW-A-1 MINOR","updated_at":"2026-02-26T23:45:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:06:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c6b39c3e7be1deddd597461c966a32c548e254eb71c5ed5f810b2e5439aae86c","created_at":"2026-02-22T12:03:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-2tj\n  proposal: aura-plugins-r1z\n  urd: aura-plugins-s6i\n  original_urd: aura-plugins-umi\n---\nHandoff from architect to supervisor. See handoff document at\n.git/worktrees/aura-protocol/.aura/handoff/aura-plugins-2tj/architect-to-supervisor.md","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-199","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"HANDOFF: Architect → Supervisor for FOLLOWUP epic aura-plugins-2tj","updated_at":"2026-02-22T12:06:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:18Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:14:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-j2k\n  urd: aura-plugins-99q\n  proposal_1: aura-plugins-wux\n  review_1: aura-plugins-1ey\n---\n\n# PROPOSAL-2: bin/aura-release (revised)\n\nAll BLOCKER and IMPORTANT findings from PROPOSAL-1-REVIEW addressed.\n\n## Changes from PROPOSAL-1\n\n### BLOCKER fixes\n1. **Plugin selection by name**: marketplace.json plugins selected by name==\"aura\" predicate, not array index\n2. **Section-anchored TOML parsing**: Regex anchored to [project] section. Match version= only between [project] header and next [...] header. Alternatively use tomllib (3.11+) for reading with regex replacement for writing (avoids reordering keys)\n3. **--check mode fully defined**:\n   - Standalone: `aura-release --check` (no bump argument required)\n   - Exit 0: all versions consistent\n   - Exit 1: drift detected (prints table of file → version)\n   - --check --sync is invalid (mutual exclusion enforced)\n\n### IMPORTANT fixes\n4. **Pre-defined rollback list**: Before any writes, capture the 3 target files + CHANGELOG.md path in a rollback set. On any failure, git checkout all of them unconditionally\n5. **No prior tag fallback**: If no vX.Y.Z tag exists, changelog includes all commits since initial commit (git rev-list --max-parents=0 HEAD)\n6. **Source of truth explicit**: --sync reads pyproject.toml as canonical version, overwrites plugin.json and marketplace.json to match\n7. **Explicit git add whitelist**: Commit stages exactly: pyproject.toml, .claude-plugin/plugin.json, .claude-plugin/marketplace.json, CHANGELOG.md. Never uses git commit -a or git add .\n\n### MINOR acknowledgments\n8. **Double-bump warning**: If current version != last tag version AND no --sync, warn user and require --force or abort\n9. **UTF-8 encoding**: subprocess.run with encoding=\"utf-8\" for all git log calls\n\n## Architecture\n\n### File: bin/aura-release\n\nSingle Python 3.10+ script, stdlib only.\n\n### Version parsing strategy\n\n```python\n# Read: section-anchored regex\ndef read_pyproject_version(path: Path) -\u003e str:\n    text = path.read_text(encoding=\"utf-8\")\n    # Match version= only within [project] section\n    m = re.search(\n        r\"^\\[project\\]\\s*\\n(?:(?!\\[).*\\n)*?version\\s*=\\s*\\\"(\\d+\\.\\d+\\.\\d+)\\\"\",\n        text, re.MULTILINE\n    )\n    ...\n\n# Write: targeted line replacement within [project] section\ndef write_pyproject_version(path: Path, old: str, new: str) -\u003e None:\n    text = path.read_text(encoding=\"utf-8\")\n    # Replace only the first occurrence after [project]\n    text = text.replace(f'version = \"{old}\"', f'version = \"{new}\"', 1)\n    path.write_text(text, encoding=\"utf-8\")\n```\n\n### marketplace.json plugin selection\n\n```python\ndef update_marketplace(path: Path, new_version: str) -\u003e None:\n    data = json.loads(path.read_text(encoding=\"utf-8\"))\n    data[\"metadata\"][\"version\"] = new_version\n    for plugin in data[\"plugins\"]:\n        if plugin[\"name\"] == \"aura\":\n            plugin[\"version\"] = new_version\n            break\n    path.write_text(json.dumps(data, indent=2) + \"\\n\", encoding=\"utf-8\")\n```\n\n### CLI interface\n\n```\n# Bump version\naura-release \u003cmajor|minor|patch\u003e [--dry-run] [--sync] [--no-changelog] [--no-commit] [--no-tag]\n\n# Check consistency only\naura-release --check\n```\n\nExit codes:\n- 0: success (or --check with consistent versions)\n- 1: --check found drift (prints version table)\n- 2: pre-flight failure (dirty tree, detached HEAD, etc.)\n\n### Workflow\n\n1. Parse args\n2. If --check: read all 3 files, compare versions, exit 0/1\n3. Pre-flight checks:\n   a. Not detached HEAD\n   b. Working tree clean (git status --porcelain, ignore .beads/)\n   c. Read versions from all 3 files\n   d. If versions differ AND --sync not given: exit 2 with error\n   e. If --sync: overwrite plugin.json + marketplace.json to match pyproject.toml\n4. Compute new version from current + bump type\n5. Define rollback set: [pyproject.toml, plugin.json, marketplace.json, CHANGELOG.md]\n6. try:\n   a. Update pyproject.toml (section-anchored replace)\n   b. Update plugin.json (json.load/dump)\n   c. Update marketplace.json (select by name==\"aura\")\n   d. Generate CHANGELOG entry (git log since last vX.Y.Z tag, or since root)\n   e. Prepend to CHANGELOG.md (create if missing)\n   f. If not --no-commit: git add \u003cwhitelist\u003e \u0026\u0026 git commit -m \"chore: release vX.Y.Z\"\n   g. If not --no-tag: git tag -a vX.Y.Z -m \"Release vX.Y.Z\"\n7. except: rollback all files in rollback set via git checkout\n8. Print summary\n\n### CHANGELOG format (Keep a Changelog)\n\n```markdown\n# Changelog\n\n## [0.3.0] - 2026-02-21\n\n### Added\n- feat: some new feature (#commit-short)\n\n### Fixed\n- fix: some bug fix (#commit-short)\n\n### Changed\n- refactor: some refactoring (#commit-short)\n\n### Other\n- chore: some chore (#commit-short)\n```\n\nCommit prefix → section mapping:\n- feat → Added\n- fix → Fixed\n- refactor, perf → Changed\n- docs → Documentation\n- everything else → Other\n\n## Nix integration\n- flake.nix packages auto-wrap bin/* → aura-release included automatically\n- No flake.nix changes needed\n\n## Files\n- bin/aura-release (NEW)\n- CHANGELOG.md (created on first release)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1bm","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-2: bin/aura-release — revised after review","updated_at":"2026-02-22T10:40:18Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T01:47:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-8i5\n  impl_plan: aura-plugins-06g\n---\n## Scope\nDefine typing.Protocol interfaces (ConstraintValidatorInterface, TranscriptRecorder, SecurityGate, AuditTrail), A2A content types (TextPart, FilePart, DataPart, Part union), ToolCall, ModelId, and event stub types.\n\n## Files Owned\n- scripts/aura_protocol/interfaces.py (type defs)\n\n## Acceptance Criteria\nGiven interfaces.py when imported then all Protocols are runtime_checkable should never require ABC inheritance","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1cy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-L1: Types — Protocol interfaces + A2A types + ModelId","updated_at":"2026-02-22T01:47:28Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3fc6fb28178873585f59bd75e33ff6e56fd91e9e50702c675792624574b87def","created_at":"2026-02-25T22:37:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-eb7q\n  review_round: 1\n---\nMINOR findings from Reviewer A (Correctness) on SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1dh3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 MINOR","updated_at":"2026-02-25T22:37:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:56:47Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8059aa7a79c3784428bf902fedc27b1734dd52ac3d50f42577424da757572d22","created_at":"2026-02-22T12:55:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer A (Correctness) on SLICE-3 (interfaces.py, test_interfaces.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1dpf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-22T12:56:47Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:25:00Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:24:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-5 (workflow.py) — BLOCKER findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1eo","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1 BLOCKER","updated_at":"2026-02-22T02:25:00Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:21Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:13:25Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-wux\n---\n\n## Review Verdict: REVISE (3 BLOCKERs)\n\n### BLOCKERs\n1. marketplace.json plugins must be selected by name==\"aura\", not array index\n2. TOML regex must be section-anchored to [project] block, or use tomllib (3.11+) with fallback\n3. --check mode is undefined (exit codes, interaction with --sync)\n\n### IMPORTANTs\n1. Rollback list must be pre-defined covering all 3 files regardless of write order\n2. \"No prior tag\" fallback for changelog is unspecified\n3. --sync source-of-truth (pyproject.toml) must be explicitly stated\n4. Dirty-tree exception: commit must use explicit git add (whitelist), not git commit -a\n\n### MINORs\n1. --no-commit --no-tag double-bump footgun\n2. Non-ASCII git log needs explicit UTF-8 handling","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1ey","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW: Design review findings","updated_at":"2026-02-22T10:40:21Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:45:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"07b86882618aaa315522d633f17e53de132d7c16b59f8692ca3ef8de4e07f326","created_at":"2026-02-27T06:25:34Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Migrate content, add roadmap, update all references.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1hfn","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-L1: Create docs/architecture.md + docs/aurad.md + docs/aura-msg.md","updated_at":"2026-02-27T06:45:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T10:12:58Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dce48bd351eafdebe497fc954ae8e9ac6eb3d94eb5523f4f7dc543bae0698343","created_at":"2026-02-23T10:03:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  uat: aura-plugins-sm9c\n---\nProcedureSteps generate into schema.xml (done) but skill_header.j2 has no steps section.\nUser expects SKILL.md headers to include a rendered startup sequence.\n\n## Fix\n- skills/templates/skill_header.j2: Add a '### Startup Sequence' section\n- Render steps from a 'steps' template variable as: Step N: description (→ phase if next_state set)\n- gen_skills.py: Pass PROCEDURE_STEPS.get(role_id, []) as 'steps' variable to template context","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1i1m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT-BLOCKER-4: skill_header.j2 must render PROCEDURE_STEPS as Startup Sequence section","updated_at":"2026-02-23T10:12:58Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:21Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:53Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-2 (state_machine.py) — MINOR findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1ic","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 MINOR","updated_at":"2026-02-22T17:24:21Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"178142ad910ac3558d5f9fc975aae57e37c777fe9ae2bbe0cbdc29606e53dc8a","created_at":"2026-02-26T08:38:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1k4g","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1 IMPORTANT: Double-bump guard and --check registry output","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:22:58Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-5 BLOCKER severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1ka","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-C-1 BLOCKER","updated_at":"2026-02-22T02:22:58Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"23f997a76ec0b3be4e1d419ef862778f066c50d61dc2bf98c08a57e9fc7e76f4","created_at":"2026-02-27T06:54:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"docs/architecture.md:207, 120-125\n\nTwo documentation gaps created by SLICE-4 changes that were not reflected in architecture.md\n(architecture.md was written by SLICE-3 before SLICE-4 completed):\n\n1. SliceWorkflow section (line 207):\n   Says: 'Input: SliceInput(epoch_id, slice_id, phase_spec)'\n   Actual type after SLICE-4: SliceInput(epoch_id, slice_id, phase_spec, parent_workflow_id)\n   parent_workflow_id is a REQUIRED field (no default). The docs are incomplete.\n\n2. Signals table (lines 120-125):\n   Lists only advance_phase and submit_vote.\n   Missing: slice_progress(SliceProgressSignal) added by SLICE-4 to EpochWorkflow.\n\nFix:\n1. Update SliceWorkflow 'Input:' line to include parent_workflow_id with its purpose.\n2. Add slice_progress row to the Signals table:\n   | slice_progress | SliceProgressSignal | Receive progress from a child SliceWorkflow |\n3. Add slice_progress_state to the Queries table.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1ma7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"IMPORTANT: docs/architecture.md stale after SLICE-4 additions (SliceInput + Signals table)","updated_at":"2026-02-27T06:54:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bf067ab911f680fbc0b8236a579697d633cc43ad69073b1b0db22b062bae85c2","created_at":"2026-03-01T05:51:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-0cr\n  elicit: aura-plugins-amg\n---\n\n# User Requirements Document: Unified aura-swarm\n\n## R1: Script Consolidation\nMerge bin/aura-parallel and bin/aura-swarm into a single bin/aura-swarm script.\nbin/aura-parallel becomes a deprecation wrapper that warns and delegates to aura-swarm.\n\n## R2: Swarm Mode Flag\n--swarm-mode {worktree,intree}\n- worktree: creates git worktree per epic (current aura-swarm behavior)\n- intree: operates in current working directory (current aura-parallel behavior)\n\n## R3: tmux Destination Flag\n--tmux-dest {session,window} (default: window)\n- window: creates tmux windows in an existing or new session\n- session: creates separate tmux sessions (legacy behavior)\n- When not inside tmux: create a new session, then add windows to it\n- Same session name → add window to existing session\n\n## R4: XDG State Directory\nAll runtime state stored at $XDG_STATE_HOME/aura/swarm/ (default: ~/.local/state/aura/swarm/).\nUse XDG_STATE_HOME env var, not hardcoded path.\n\n## R5: Session Registry\nFull observability session registry with BCNF-aligned schema.\nFields: session_id, permission_mode, model, pid, working_dir, started_at, parent_session_id, role, epic_id, task_ids, swarm_mode, tmux_session, tmux_window, status, last_activity_at, prompt_hash, git_branch, beads_task_id.\nBackends: YAML per session (default), Temporal DB if aurad available.\n\n## R6: Permission Inheritance\nParent permission mode propagated to children via session registry.\nIf parent is bypassPermissions, children default to bypassPermissions.\nExplicit --permission-mode flag overrides inherited value.\n\n## R7: Registry Lifecycle\n- Write: aura-swarm writes entries on launch\n- Cleanup: lazy on aura-swarm start/status + periodic via aurad if running\n\n## R8: Unified Start Subcommand\n--epic always required for start (both modes).\nAdd -n/--njobs flag for parallel instances.\nIntree mode skips worktree creation but still uses beads task discovery.\n\n## R9: Mode-Aware Subcommands\nAll subcommands work for both modes with appropriate behavior:\n- start: in intree skips worktree creation\n- status: shows all sessions regardless of mode\n- attach: attaches to tmux session/window\n- stop: kills agents, in intree no worktree to preserve\n- merge: in intree is no-op (already in-tree)\n- review: generates review docs in both modes\n- cleanup: in intree just kills sessions, in worktree also removes worktree+branch\n\n## R10: Skill Consolidation\nMerge skills/parallel/ and skills/swarm/ into single unified skills/swarm/SKILL.md.\nDocument both --swarm-mode options in one file.\n\n## R11: Nix Packaging Updates\nUpdate flake.nix: remove aura-parallel package, update aura-swarm.\nAdd deprecation wrapper script for aura-parallel.\nUpdate HM module references.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1nla","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"URD: Unified aura-swarm requirements document","updated_at":"2026-03-01T05:51:12Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:19:59Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"aea3a6dc9d540fc05ad226202beeb64fbdf6a31d9371729138953010b631fb7a","created_at":"2026-02-23T04:24:55Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance — symptom of F3 type gap).\n\ngen_skills.py _owned_phase_details() (lines 111-119) iterates over role_spec.owned_phases (frozenset of strings), then for each string iterates over all of PHASE_SPECS to find a matching PhaseId by .value comparison.\n\nThis is directly caused by the frozenset[str] type gap in RoleSpec.owned_phases (finding F3). If owned_phases were frozenset[PhaseId], the lookup would be a single direct dict access: PHASE_SPECS[phase_id].\n\nCurrent code:\n  for phase_id_str in role_spec.owned_phases:\n      for phase_id, phase_spec in PHASE_SPECS.items():\n          if phase_id.value == phase_id_str:\n              result.append(phase_spec)\n              break\n\nWith frozenset[PhaseId] this becomes:\n  return sorted([PHASE_SPECS[pid] for pid in role_spec.owned_phases], key=lambda p: p.number)\n\nFix: Address F3 (change RoleSpec.owned_phases to frozenset[PhaseId]), then simplify _owned_phase_details to a direct lookup.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1nxp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1-F10: _owned_phase_details uses O(n*m) nested loop because owned_phases is frozenset[str] not frozenset[PhaseId]","updated_at":"2026-02-23T12:19:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:56:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dc6205ed4a4708f9652da552ef8c99dadb976b75698fe8ecc05af8da17eea01a","created_at":"2026-02-27T06:55:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-8lfp\n  review: aura-plugins-qrgx\n---\nIMPORTANT findings for SLICE-2 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1q1r","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-27T06:56:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:57:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"baac69a3b1be9864784e2dc5b7decb2c55dcf00075690a3846f0db010e428970","created_at":"2026-02-26T08:57:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  review_round: 1\n---\nIMPORTANT findings from Reviewer A (Correctness) on FOLLOWUP-SLICE-3.\n\nNo IMPORTANT findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1rgq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-26T08:57:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:59:29Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"35dd1d498327ee1a9e5632a383cf2a52353e383cb3b933cd348e0d0fd6ca8abe","created_at":"2026-02-27T06:59:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-wsys\n  review: aura-plugins-82gp\n---\nIMPORTANT findings for SLICE-5 review round A-1","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1rov","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-27T06:59:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bd37a9c14cb223c347502539383851915eb2ff2f1fdc27f203ba53102bc91ea9","created_at":"2026-02-26T08:54:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  review_round: 1\n---\nBLOCKER findings from Reviewer B (Test Quality) on FOLLOWUP-SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1voc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T08:55:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5750b8bc458a9968cdfac601d6af8b505c9dcd196d847ac7e240908faa9bb22b","created_at":"2026-02-26T16:02:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"bin/worker.py is the only bin/ script not packaged in flake.nix. The other 3 scripts (aura-parallel, aura-swarm, aura-release) are all Nix-packaged. While worker.py has a runtime dependency on temporalio (Python), the inconsistency should be noted for follow-up.\n\nFile: bin/worker.py\nNix outputs: flake.nix (packages section)\nSlice: aura-plugins-o8va (SLICE-4)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1w3u","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"MINOR: bin/worker.py not Nix-packaged (SLICE-4)","updated_at":"2026-02-26T21:03:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2436f9ce6b5a4a1161450a273c12702b871ceaa665ea2e99dc727492db6da088","created_at":"2026-02-22T12:53:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In constraints.py, check_supervisor_no_impl() (line 1045) defines _IMPL_ACTIONS as a local frozenset inside the method body on every call. This is the exact same anti-pattern that _SAME_ACTOR was pulled out of to become a module-level constant in this follow-up (per the proposal, finding pxo). The fix was applied to _SAME_ACTOR but _IMPL_ACTIONS was missed.\n\nImpact: Minor performance waste per call (recreating the frozenset each invocation). More importantly, inconsistent convention — the proposal explicitly mandated moving such constants to module level.\n\nFix: Move '_IMPL_ACTIONS: frozenset[str] = frozenset({...})' to module level, following the same pattern as _SAME_ACTOR, _REQUIRED_SEVERITY_LEVELS, etc.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1wa","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: _IMPL_ACTIONS frozenset defined inside check_supervisor_no_impl() — should be module-level","updated_at":"2026-02-22T17:30:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:24:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:23:53Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-4 (interfaces.py) — BLOCKER findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1wg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 BLOCKER","updated_at":"2026-02-22T02:24:02Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:58:52Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0973d9db0a6c2cf1ac3e7679ecdb7d8cb99a206facefb248f31bb731ba2d6911","created_at":"2026-02-27T06:56:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-karq\n  review: aura-plugins-6m2m\n---\nBLOCKER findings for SLICE-4 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-1xkp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 BLOCKER","updated_at":"2026-02-27T06:58:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:22:57Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-2 BLOCKER severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-20c","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 BLOCKER","updated_at":"2026-02-22T02:22:57Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T04:27:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"edcb912d5d789b107aef3bc92d9635878e977eb7e432505c21edeaf074b4f568","created_at":"2026-02-23T04:24:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer A on SLICE-3. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-21ji","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 BLOCKER","updated_at":"2026-02-23T04:27:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:01Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:58:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Finding this workflow management untenable. How does LangGraph or LangChain handle these? We need strict schema specification with various constraints upheld, with roles, with shared pieces of context, and also floating pieces of context.\n\nAlso: is the aura:epoch command telling which skills directly to run? We have the skills/protocol/schema.xml that needs to be updated with these rules. Finding this workflow management untenable.\n\n---\n\nContext: The aura protocol has an N-file synchronization problem. schema.xml defines the protocol in BCNF, but the same rules must be restated across SKILL.md files, PROCESS.md, CLAUDE.md, and CONSTRAINTS.md. Every change requires touching 5-7 files manually, and drift is inevitable. We already have some testing and validation occurring via Python. Need to investigate: (1) how frameworks like LangGraph, OpenAI Agents SDK, Microsoft Agent Framework, AgentSpec handle strict schema specification with constraints, roles, shared/floating context; (2) a generation pipeline from schema.xml to downstream files; (3) runtime constraint enforcement.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-220","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"REQUEST: Multi-agent orchestration schema-as-runtime with generation pipeline and constraint enforcement","updated_at":"2026-02-22T10:40:01Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:17:23Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ca7ad43ebff6b88fe3eee52a0a143e1d0bfdaaf93a80cc59f8cd06a50bc3b243","created_at":"2026-02-27T05:49:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-ckg0\n---\n## Topic 1: Worker References Inventory (19 locations)\n\n### Binary/CLI references (MUST rename):\n1. bin/worker.py — entry point file\n2. flake.nix:62-70 — packages.worker definition (name = \"worker\")\n3. docs/worker.md — entire file (17+ references to bin/worker.py)\n4. tests/test_worker.py — entire test file (WORKER_PATH, _load_worker(), 18+ refs)\n5. nix/temporal-service.nix:60,62 — \"bin/worker.py\" in comments\n6. CHANGELOG.md:21 — \"bin/worker.py Temporal worker entry point\"\n\n### Role references (DO NOT rename):\n- RoleId.WORKER in types.py enum — this is the protocol role, not the CLI tool\n- protocol.yaml owner_roles containing \"worker\" — protocol role\n- test_context_injection.py constraint tests — C-worker-gates etc.\n\n## Topic 2: packages.default\n\nCurrent: symlinkJoin of aura-parallel, aura-swarm, aura-release\nWorker is defined separately but NOT included in default.\n\n## Topic 3: Signal Patterns (existing code)\n\n- ReviewPhaseWorkflow: signal-driven with _votes: dict[str, str]\n- EpochWorkflow: advance_phase and submit_vote signals queued, drained in run() loop\n- SliceWorkflow: pure R12 stub, no signals\n- _run_p9_slices: fail-fast with workflow.wait(FIRST_EXCEPTION)\n\n## Topic 4: Fixture Axes (protocol.yaml)\n\n6 axes: phase_specs (12), epoch_states (13), vote_combinations (8), audit_events (8), forward_phase_path, transition_matrix\nProtocolFixture provides 4 generators yielding frozen TestCase dataclasses.\nConstraint violations axis would follow audit_events pattern.\n\n## Topic 5: dbPath Default\n\nCurrent default: \"\" (in-memory volatile). Infrastructure already supports persistent SQLite via --db-filename flag. Change default to persistent path.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2321","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"EXPLORE: codebase inventory for auractl rename + integration points","updated_at":"2026-02-27T06:17:23Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:15Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9fbe4fea46f3683d6158b501c3d91917dbcfcf170691456500d5c57c9ab87be0","created_at":"2026-02-23T17:56:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-xpf1\n  ure: aura-plugins-om47\n---\n## URE Decisions (aura-plugins-om47)\n\n1. **Constraints strategy**: Update existing + add new\n   - Rename C-supervisor-explore-team → C-supervisor-cartographers (rewrite the constraint)\n   - Add: C-integration-points, C-slice-review-before-close, C-max-review-cycles\n\n2. **PROCESS.md approach**: Restructure around Ride the Wave\n   - Rewrite Phases 8-10 so Ride the Wave is the primary narrative\n   - Phase 8: Cartographers + integration points step\n   - Phase 9: Worker persistence rules (no close before review)\n   - Phase 10: Review-fix cycle (max 3 iterations)\n\n## Scope\n\nPropagate the Ride the Wave / Cartographers / integration points concepts already added\nto skill SKILL.md files into the canonical source chain.\n\nNote: skills/supervisor/SKILL.md, skills/supervisor-plan-tasks/SKILL.md,\nskills/supervisor-spawn-worker/SKILL.md already updated (documented in aura-plugins-xpf1 comments).\n\n## Vertical Slice Decomposition\n\n### SLICE-1: Python constraints (Foundation)\n- types.py: Rename C-supervisor-explore-team → C-supervisor-cartographers + add 3 new constraints\n- context_injection.py: Map new constraints to SUPERVISOR role + P8/P9/P10 phases\n- Runs first (schema.xml depends on this)\n\n### SLICE-2: Schema regeneration (depends on SLICE-1)\n- Run python -m aura_protocol.gen_schema to regenerate schema.xml\n- Run pytest tests/ to verify round-trip consistency\n\n### SLICE-3: PROCESS.md restructure (parallel with SLICE-1)\n- Restructure Phase 8 (IMPL_PLAN) — Cartographers + integration points\n- Restructure Phase 9 (Worker Slices) — persistence rules\n- Restructure Phase 10 (Code Review) — max-3 review-fix cycle\n\n## Execution Order\n\n1. SLICE-1 + SLICE-3 in parallel (independent)\n2. SLICE-2 after SLICE-1 completes (schema depends on Python)\n\n## Validation\n\n- pytest tests/ passes (constraint round-trip: types.py → schema.xml → gen_skills)\n- C-supervisor-cartographers appears in schema.xml with correct content\n- C-integration-points, C-slice-review-before-close, C-max-review-cycles appear in schema.xml\n- PROCESS.md Phases 8-10 reflect Ride the Wave as primary narrative","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-24cr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"IMPL_PLAN: Propagate Ride the Wave to schema.xml, PROCESS.md, and Python codegen","updated_at":"2026-02-25T22:50:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:37Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-1 (types.py / __init__.py) important-level findings.\n\n## Finding: Mutation test uses bare 'except Exception' — insufficient specificity (IMPORTANT)\n\nIn test_aura_types.py (TestSpecFreezing), the freezing tests use a bare:\n\n    with pytest.raises(Exception):\n        t.condition = 'mutate'\n\nPython frozen dataclasses raise dataclasses.FrozenInstanceError (a subclass of AttributeError). Using pytest.raises(Exception) accepts ANY exception, including ones that could mask a real bug (e.g. NameError, TypeError from a different code path). The tests would still pass even if the field name was wrong and raised AttributeError for a different reason.\n\nRecommendation: Use pytest.raises((dataclasses.FrozenInstanceError, AttributeError)) or simply pytest.raises(AttributeError) to narrow the exception type. This follows the principle of testing observable outcomes precisely.\n\nThis is IMPORTANT (not BLOCKER) because the tests do pass and the production code IS frozen; this is an imprecision in the test assertion specificity only.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-295","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-22T17:24:09Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:17:12Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-lkz\n  impl_plan: aura-plugins-06g\n---\n## Scope\nImplement EpochWorkflow (run, advance_phase, submit_vote, current_state, available_transitions) and activities (check_constraints, record_transition). Makes L2 tests pass.\n\n## Files Owned\n- scripts/aura_protocol/workflow.py (fill in implementations)\n\n## Acceptance Criteria\nGiven EpochWorkflow when advance_phase signal received then state transitions + search attrs updated atomically should never have non-deterministic operations","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2au","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-L3: Impl — EpochWorkflow + activities","updated_at":"2026-02-22T02:17:12Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"fdd7de2afd78a2b2b50894d15422282f630001bcbc973c6e236f3c6308725f0a","created_at":"2026-02-26T03:06:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-cuuw\n  urd: aura-plugins-s7l0\n  proposal: aura-plugins-pcs6\n---\n## Components Reviewed\n\n### Component: Dead code deletion range (lines 32-57 vs 33-57)\n\n**Definition shown:**\n```\nBEFORE:\n30: # ── Constants ─────\n31:\n32: # Conventional commit prefix -\u003e ...  ← orphan (misplaced above _discover_repo_root)\n33: def _discover_repo_root()...          ← dead\n...(VERSION_FILES, REPO_ROOT, CHANGELOG_PATH)\n57: (blank)                              ← dead\n58: # Conventional commit prefix → ...  ← correct (stays, above COMMIT_SECTIONS)\n59: COMMIT_SECTIONS = {...}\n\nAFTER (delete 32-57):\n30: # ── Constants ─────\n31:\n58: # Conventional commit prefix → ...  ← clean\n59: COMMIT_SECTIONS = {...}\n```\n\n**Question asked:** During URE you said 'remove dead code entirely.' The proposal deletes lines 32-57, which includes an extra orphaned comment at line 32. Line 32 is a duplicate of line 58 in the wrong place. After deleting 33-57 only, line 32 would be directly above line 58 (identical comment twice in a row). Which is the right call?\n**Options presented:** Delete 32-57 (remove orphan too) / Delete 33-57 only (keep line 32)\n**User response:** Delete 32-57 (remove orphan too)\n\n---\n\n### Component: Test scope (4 cases vs 2) and import strategy\n\n**Definition shown:**\n```python\nBIN_PATH = Path(__file__).resolve().parent.parent / 'bin'\n\ndef _import_aura_release():\n    from importlib.machinery import SourceFileLoader\n    import importlib.util\n    loader = SourceFileLoader('aura_release', str(BIN_PATH / 'aura-release'))\n    spec = importlib.util.spec_from_loader('aura_release', loader)\n    mod = importlib.util.module_from_spec(spec)\n    spec.loader.exec_module(mod)\n    return mod\n\nclass TestDiscoverVersionFiles:\n    def test_case_a_root_pyproject(self, tmp_path): ...\n    def test_case_b_subdir_only(self, tmp_path): ...    # THE ORIGINAL BUG\n    def test_case_c_both_root_and_subdir(self, tmp_path): ...\n    def test_case_d_subdir_without_version_key(self, tmp_path): ...\n```\n\n**Question asked:** During URE you requested 'a test for the subdirectory case.' The proposal has 4 test cases. Cases C and D added by Reviewer B (not in original plan). Cases C and D each add ~10 lines; no extra infrastructure. Is the expanded scope correct?\n**Options presented:** Keep all 4 cases (A-D) / Only Cases A and B (original scope)\n**User response:** Keep all 4 cases (A-D)\n\n---\n\n### Catch-all\n\n**Question asked:** Any feedback, concerns, or gaps not covered above?\n**Options presented:** No additional feedback / I have a related concern / Missing coverage\n**User response:** No additional feedback\n\n---\n\n### Decision\n\n**Question asked:** Do you ACCEPT PROPOSAL-2 to proceed to implementation?\n**Options presented:** ACCEPT / REVISE\n**User response:** ACCEPT\n\n## Final Decision\nACCEPT — delete lines 32-57 (inclusive, including orphaned comment at line 32), add 4-case TestDiscoverVersionFiles, run pytest clean.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2cl4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"UAT: Plan acceptance for aura-release dead code + test","updated_at":"2026-02-26T03:06:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:08Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2666606116e80a0780ff8b90028eaa9e987a80e216cdfe67942e81591771e7a1","created_at":"2026-02-26T16:01:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-l6n8\n  review: aura-plugins-4rj7\n---\nIMPORTANT findings for SLICE-1 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2g06","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T16:02:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:03Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6d03f6ca5e89ba87f8e286879c7046a84c1de947a452d571d6ba4363db7257cb","created_at":"2026-02-26T08:37:59Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2irp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 IMPORTANT: Test Quality","updated_at":"2026-02-26T08:38:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-2","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:21:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4fa9c4cf60c9ee7ece9fb529435dcd60cd82c83a035178547ca18bdcee0aa10d","created_at":"2026-02-23T03:09:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-mg6h\n  impl_plan: aura-plugins-94yc\n  depends_on_slice: aura-plugins-9suu\n---\n\n## Scope\n\nGenerate schema.xml from Python types. Validates against existing validate_schema.py.\n\n### Files Created\n- scripts/aura_protocol/gen_schema.py — generate_schema(output, diff=True). Uses xml.etree.ElementTree (stdlib). Generates role-ref/phase-ref attributes on \u003cconstraint\u003e elements from _ROLE_CONSTRAINTS/_PHASE_CONSTRAINTS static dicts (UAT-3). Shows unified diff of changes before writing (UAT-2).\n- tests/test_gen_schema.py — Round-trip field-by-field comparison (AC3), validate_schema.py passes with 0 errors (AC2), diff output verification (AC2a), role-ref/phase-ref in output XML (AC2b)\n\n### Acceptance Criteria\n- AC2: gen_schema.py output passes validate_schema.py with 0 errors\n- AC2a: Prints unified diff of changes before writing (UAT-2)\n- AC2b: schema.xml constraint elements include role-ref and phase-ref attributes (UAT-3)\n- AC3: Round-trip consistency — types.py → gen_schema → parse_schema → field-by-field match\n- AC7: All 554 existing tests pass\n- AC10 (partial): gen_schema → validate_schema pipeline step succeeds\n\n### Implementation Notes\n- Use xml.etree.ElementTree (stdlib) — no lxml dependency\n- Output must match existing schema.xml structure closely enough to pass validate_schema.py\n- role-ref/phase-ref are NEW attributes on \u003cconstraint\u003e elements — verify validate_schema.py tolerates them (it should ignore unknown attributes, but verify)\n- Diff output: use difflib.unified_diff comparing old file vs new content\n- Round-trip test pattern: model on test_schema_types_sync.py field-level assertions","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2j4v","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: Schema.xml Generator (Python → XML) with Diff + role-ref/phase-ref","updated_at":"2026-02-26T07:21:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No BLOCKER findings for SLICE-2 test quality","closed_at":"2026-02-26T04:30:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7ec8dbf06455f0ccf4e8cd7c97541a8c8fccb9f3f6406226f03bdec1e18bb4ad","created_at":"2026-02-26T04:30:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2j4v.1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-2 BLOCKER","updated_at":"2026-02-26T04:30:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No IMPORTANT findings for SLICE-2 test quality","closed_at":"2026-02-26T04:30:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"362e4c64624bac50d72e46eff97019ac3e0802d09cd3f1e18b16fdfbc26a1ab0","created_at":"2026-02-26T04:30:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2j4v.2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-2 IMPORTANT","updated_at":"2026-02-26T04:30:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7b548aabfdfd9a24d1ecb7ca1953e44152c8b8118b0d367dad72936bd98b40be","created_at":"2026-02-26T04:30:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2j4v.3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-2 MINOR","updated_at":"2026-02-26T04:30:21Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d45cc1d0eeca482a50bd0bf939bb7dc65871c1f145ed65302d1c5ed4f0c8f27b","created_at":"2026-02-26T04:30:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"test_roundtrip_procedure_steps_supervisor (line 779) and test_roundtrip_procedure_steps_worker (line 797) check only instruction and order fields. The command, context, and next_state fields are not verified through the parse_schema round-trip. While test_optional_attributes_present_when_set covers XML generation directly, a parser bug that drops these attributes would go undetected. Add assertions for parsed_step.command, parsed_step.context, and parsed_step.next_state in the round-trip tests.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2j4v.3.1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-2: Round-trip test for procedure_steps doesn't verify command/context/next_state","updated_at":"2026-02-26T04:30:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:57:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0b5095c1cf181ee4e1eadb9104d0e6f67870eb0f977e03416d154aa122b42acf","created_at":"2026-02-26T08:57:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  review_round: 1\n---\nBLOCKER findings from Reviewer A (Correctness) on FOLLOWUP-SLICE-3.\n\nNo BLOCKER findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2kte","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-REVIEW-A-1 BLOCKER","updated_at":"2026-02-26T08:57:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"06842c1876afff7271174c56dbb33a7d046e5dbd1f457cdc0331047944936d42","created_at":"2026-02-27T06:54:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"nix/temporal-service.nix:27-33 vs :159\n\nThe startDevArgs let-binding (lines 27-33) constructs: server start-dev --port X --ui-port Y --namespace Z --db-filename $dbPath\n\nBut the XDG ExecStart branch (line 159) repeats the same 4 positional args inline:\n  ExecStart = \"${cfg.package}/bin/temporal server start-dev --port ${toString cfg.port} --ui-port ${toString cfg.uiPort} --namespace ${cfg.namespace} --db-filename \\${TEMPORAL_DB_PATH}\";\n\nIf a new option (e.g. --log-level, --metrics-port) is added in the future, the developer must\nupdate startDevArgs AND the inline XDG ExecStart string. The inconsistency is a DRY violation\nand a maintenance trap.\n\nElegant fix: introduce a baseArgs let-binding for the shared args:\n  baseArgs = lib.concatStringsSep \" \" (\n    [ \"server\" \"start-dev\" ]\n    ++ [ \"--port\" (toString cfg.port) ]\n    ++ [ \"--ui-port\" (toString cfg.uiPort) ]\n    ++ [ \"--namespace\" cfg.namespace ]\n  );\n  startDevArgs = \"${baseArgs} --db-filename ${cfg.dbPath}\";\n\nThen use ExecStart = \"${cfg.package}/bin/temporal ${baseArgs} --db-filename \\${TEMPORAL_DB_PATH}\" in the XDG branch.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2kv1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"IMPORTANT: temporal-service.nix ExecStart for dbPath='' duplicates arg construction (DRY violation)","updated_at":"2026-02-27T06:54:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:57:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"862bb84d628bbf656c5947a55eb437eb920c63590fe71ffb238934f1b3e4c57a","created_at":"2026-02-26T08:57:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  review_round: 1\n---\nBLOCKER findings from Reviewer A (Correctness) on FOLLOWUP-SLICE-2.\n\nNo BLOCKER findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2of2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-REVIEW-A-1 BLOCKER","updated_at":"2026-02-26T08:57:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8c6fa65cebd7394e184f35ae05538f5a4a365bfe7e4f4093c8b05f44a808e468","created_at":"2026-02-26T11:59:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  elicit: aura-plugins-ollt\n---\n## Requirements\n\n### R1: Phase decomposition (hybrid recommended)\n- P4_REVIEW and P10_CODE_REVIEW MUST be child workflows — they receive inbound vote signals while running\n- P9_SLICE MUST be parallel child workflows — genuine concurrent fan-out per slice\n- Sequential phases (P1–P3, P5–P8, P11–P12) MUST be wrapped as Temporal activities (not child workflows)\n- Activity-to-child-workflow upgrade path MUST be preserved without changing parent API\n\n### R2: EpochStateMachine stays in parent\n- EpochWorkflow MUST retain EpochStateMachine as central gate validator\n- Child workflows execute phase logic and return results; parent validates all transitions\n- available_transitions query MUST remain functional without architecture change\n- No gate logic duplication across child workflows\n\n### R3: PhaseInput frozen snapshot type\n- A frozen dataclass (PhaseInput or equivalent) MUST be introduced for cross-workflow boundaries\n- EpochState (mutable, dict/set/list fields) MUST NOT be passed as Temporal payload\n- All cross-workflow types MUST be Temporal-serializable (frozen dataclasses, StrEnum)\n\n### R4: AuditTrail implementation\n- AuditTrail Protocol (interfaces.py) MUST have a concrete implementation backed by Temporal search attributes\n- record_transition activity (currently a v1 no-op stub) MUST become a real durable activity\n- Event types (PhaseTransitionEvent, ConstraintCheckEvent, ReviewVoteEvent, AuditEvent) MUST be emitted from child workflow activities\n\n### R5: SecurityGate implementation\n- SecurityGate Protocol MUST be wired to the existing agentfilter service\n- check_tool_permission() MUST delegate to agentfilter via the established integration pattern\n\n### R6: TranscriptRecorder stub (clearly labeled)\n- TranscriptRecorder MUST have a stub implementation for unified-schema integration\n- The stub MUST carry a structured docstring label with: motivation, which epic it was added in (aura-plugins v3 epoch), and a note that implementation requires unified-schema wiring\n- stub pattern applies to all future stubs throughout the codebase\n\n### R7: A2A FilePart fix\n- FilePart.file_uri MUST be migrated to nested file_with_uri structure matching the A2A spec\n- This is a breaking field rename on a frozen dataclass — all call sites MUST be updated\n\n### R8: Production worker registration\n- A production worker script (bin/worker.py or equivalent) MUST be added\n- MUST register EpochWorkflow + all child workflow types + activities against a real Temporal namespace\n- MUST accept namespace and task-queue as configurable parameters (env var or CLI arg)\n\n### R9: Self-hosted Temporal server (Temporal CLI dev server)\n- A home-manager user-level systemd service MUST be added for temporal server start-dev\n- MUST be expressed as a home-manager module in the project's flake.nix\n- Temporal namespace setup/teardown MUST be scripted (CLI or declarative Nix)\n- Design MUST accommodate future expansion to Docker Compose and native binary variants via Nix module options\n\n### R10: Test infrastructure\n- Test sandbox harness (test_workflow.py) MUST be updated for child workflow registration\n- Worker registration in tests MUST be generalized to include all new child workflow types\n\n### R11: Version bump + CHANGELOG\n- Release version MUST be bumped to 0.7.0\n- CHANGELOG MUST include a v3 section documenting all new workflow types, the Temporal infrastructure additions, and the stub/implementation split\n\n### R12: Stub labeling standard\n- ALL stubs (implemented and future) MUST carry a structured label:\n  - Motivation: why the stub exists\n  - Epic/feature: which epoch it was added in\n  - Expected implementation: when/what unblocks a real implementation\n\n## Priorities\n\n1. P4/P10/P9 child workflows (unblocks all other v3 work)\n2. PhaseInput frozen snapshot type (prerequisite for child workflows)\n3. AuditTrail implementation + event emission\n4. SecurityGate wiring to agentfilter\n5. Production worker script + home-manager Temporal systemd service\n6. Temporal namespace setup scripting\n7. TranscriptRecorder stub (with label)\n8. A2A FilePart fix\n9. Test infrastructure update\n10. Version bump + CHANGELOG\n\n## Design Choices\n\n- EpochStateMachine: keep in parent EpochWorkflow (no distributed gate logic)\n- Sequential phases: activities first, child workflow upgrade deferred to later epic\n- Stubs: all stubs must be clearly labeled (motivation, epic, expected timeline)\n- Nix: home-manager user service for Temporal dev server; Docker Compose + native binary planned via Nix module options\n- SA thread: SA_EPOCH_ID propagated to all child workflows at spawn time for forensic audit linkability\n\n## MVP Goals\n\n- P4ReviewWorkflow and P10CodeReviewWorkflow as child workflows receiving vote signals directly\n- P9SliceWorkflow (parallel) with asyncio.gather fan-out\n- Sequential phases wrapped as activities\n- PhaseInput frozen snapshot type for cross-workflow data flow\n- Production worker script\n- Home-manager Temporal dev server systemd service\n\n## End-Vision Goals\n\n- Full hybrid topology with AuditTrail, SecurityGate, and event emission\n- Self-hosted Temporal infrastructure via NixOS home-manager with future Docker Compose + native binary options\n- All stubs labeled; clear path to full TranscriptRecorder implementation in future epic\n- v0.7.0 release with complete v3 CHANGELOG","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2ojv","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"URD: Protocol Engine v3 — Temporal child workflow decomposition","updated_at":"2026-02-26T11:59:57Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bbf420a408f5f840b97095e1982ab35edb7340aece33447a2088246d00d26456","created_at":"2026-02-26T08:38:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2q4k","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 MINOR: Module docstring registry documentation","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e8b61a0f8a48d260abf8f3e56d35f65981cd3bd7a77fd31340c8ea26e11866fb","created_at":"2026-02-26T08:55:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  review_round: 1\n---\nMINOR findings from Reviewer C (Elegance) on FOLLOWUP-SLICE-3. No findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2q74","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-REVIEW-C-1 MINOR","updated_at":"2026-02-26T08:55:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:33:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"76468569234f867950dd92380b3a11a7704c952b134b15a81e3bd4f6be48c9d7","created_at":"2026-02-26T08:06:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-t5i9\n  impl_plan: aura-plugins-147m\n---\n## Scope\nWrite TestRegistryCLI class with 9 test cases using tmp_path + monkeypatch for _registry_path.\n\n## Test Cases (UAT deltas marked)\n1. test_registry_init_creates_empty_registry\n2. test_registry_init_errors_if_already_exists\n3. test_registry_add_creates_entry\n4. test_registry_add_stores_path_as_absolute [UAT DELTA]\n5. test_registry_add_duplicate_prompts_confirm [UAT DELTA]\n6. test_registry_add_duplicate_with_yes_flag_skips_prompt [UAT DELTA]\n7. test_registry_list_output_format\n8. test_registry_remove_by_name\n9. test_registry_remove_noop_if_absent\n\n## Pattern\nUse monkeypatch.setattr(aura_release_mod, '_registry_path', lambda: tmp_path / 'registry.json')","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2stv","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-L2: Tests — TestRegistryCLI (9 test cases)","updated_at":"2026-02-26T08:33:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:27:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-bj1\n  urd: aura-plugins-umi\n  review_round: aura-plugins-e0j\n---\n## Aggregated IMPORTANT and MINOR findings from code review round 1.\n\n### IMPORTANT Findings (11 total across 3 reviewers)\n\n#### Reviewer A\n1. aura-plugins-ipj (SLICE-2): Timestamp coupling — advance() creates TransitionRecord with datetime.now(), workflow post-hoc mutates. Fix: pass timestamp param.\n2. aura-plugins-jwb (SLICE-3): check_severity_tree() missing C-severity-eager positive enforcement (p10 MUST have 3 groups). EpochState needs severity_groups field.\n3. aura-plugins-zpu (SLICE-4): TYPE_CHECKING Protocol implications undocumented — isinstance checks only method name presence.\n4. aura-plugins-6wg (SLICE-5): Bare except Exception in EpochWorkflow.run() catches unexpected errors. Should be except TransitionError.\n\n#### Reviewer B\n5. aura-plugins-yno (SLICE-3): check_all() only aggregates 5 of 22 constraint methods.\n6. aura-plugins-o83 (SLICE-2): P10→P11 consensus enforcement split between state_machine and constraints layers — undocumented architectural decision.\n7. aura-plugins-5zf (SLICE-4): No test verifying RuntimeConstraintChecker satisfies ConstraintValidatorInterface Protocol.\n8. aura-plugins-68o (SLICE-5): No WorkflowEnvironment.start_time_skipping() integration test.\n\n#### Reviewer C\n9. aura-plugins-r8m (SLICE-2): EpochState.current_role typed str not RoleId.\n10. aura-plugins-in8 (SLICE-3): check_severity_tree() incomplete (same as A's finding).\n11. aura-plugins-i2g (SLICE-5): Bare except + no audit of failed transitions (same concern as A's finding).\n\n### MINOR Findings (8+ across 3 reviewers)\nReferenced in individual severity group tasks.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2tj","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":3,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP: Non-blocking improvements from aura_protocol v1 code review","updated_at":"2026-02-22T17:24:31Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:30:29Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7fe4741396e889d4f11b2111544548dc574feb46d47ef6c20d201f1d6519ef9e","created_at":"2026-02-26T03:30:25Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  reviewer: cartographer-b\n  round: 1\n---\nMINOR findings from Cartographer B (Test quality) on SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2ujn","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 MINOR","updated_at":"2026-02-26T03:30:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2c63fe12406d5dc21c7a964de730f8a86e0f3b5d7cc7052c0144a7ba5b8cd7d0","created_at":"2026-02-26T08:38:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2uq4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 IMPORTANT: Test Quality","updated_at":"2026-02-26T08:38:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e7eecde6779c5258a88c025fdb59c6d928d6baf93fb1f8adf5ae2b67f700aea6","created_at":"2026-02-26T15:33:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Tests for worker.py: import test, arg parsing test, env var fallback test.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2x5m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"L2 complete: 25 tests passing — import, arg parsing, env vars, priority, --help","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-4-L2: Tests — worker.py import + arg parsing","updated_at":"2026-02-26T18:34:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2ed40ed7d650cab0a909042ff989052a1264968141ef431c008c4e94c98b62d7","created_at":"2026-02-26T23:48:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: tests/fixtures/fixture_loader.py, lines 219-221\n\n    def generate_forward_path_transition_cases(self):\n        ...\n        _CONSENSUS_GATED = {('p4', 'p5'), ('p10', 'p11')}  # hardcoded strings\n        _BLOCKER_GATED = {('p10', 'p11')}                  # hardcoded strings\n\nThe transition_matrix axis in protocol.yaml already encodes requires_consensus\nand requires_blocker_clear for each transition (e.g. p4→p5 has requires_consensus: true).\nThe forward_phase_path already lists all consecutive phases.\n\nThe generator re-invents gate knowledge that already exists in the YAML,\ncreating a second source of truth. If the protocol gains a new consensus-gated\ntransition, someone must update both the YAML and this local variable.\n\nThe method also diverges from the style of generate_transition_test_cases()\nwhich reads from YAML faithfully. generate_forward_path_transition_cases()\nshould either:\n  A. Look up each (source, target) pair in the transition_matrix to extract\n     requires_consensus and requires_blocker_clear dynamically.\n  B. Add a forward_path_gates section to protocol.yaml and read from it.\n\nOption A is simpler and eliminates the duplication.\n\nSlice: aura-plugins-xehz","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2y3s","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: fixture_loader.py generate_forward_path_transition_cases hardcodes _CONSENSUS_GATED and _BLOCKER_GATED as local string literals instead of deriving from YAML","updated_at":"2026-02-26T23:48:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:15Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4995a65d9e6ae595c6a34ae88e6a86a331af0fa0a954da35e45e1712e9587128","created_at":"2026-02-26T03:30:55Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  reviewer: cartographer-b\n  round: 1\n---\nBLOCKER findings from Cartographer B (Test quality) on SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2y86","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T03:31:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d2b7a6c21ed927779e9e1ddbc3d5c456326ff1c81815792931a9fc0bcd7f9e29","created_at":"2026-02-25T22:15:05Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-a1bn\n  impl_plan: aura-plugins-24cr\n---\n## Scope\n\nRestructure skills/protocol/PROCESS.md Phase 10 (Code Review):\n\n1. Cartographers switch role: from /aura:explore to /aura:reviewer (same 3 agents, same team)\n2. Add review-fix cycle procedure:\n   Step 1: Cartographers review ALL slices\n   Step 2: Supervisor collects findings (BLOCKER + IMPORTANT)\n   Step 3: Workers fix BLOCKERs + IMPORTANTs\n   Step 4: Cartographers re-review fixed slices\n   Repeat up to MAX 3 cycles\n3. Add cycle exit conditions:\n   - All ACCEPT with no BLOCKERs → proceed to UAT\n   - 3 cycles exhausted → remaining IMPORTANT → FOLLOWUP epic, proceed to UAT\n4. Add FOLLOWUP tracking: remaining IMPORTANT + MINOR after cycle 3 go to FOLLOWUP epic (per existing protocol)\n\n## Files Owned\n- skills/protocol/PROCESS.md (Phase 10 section only)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-2ywx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-L3: PROCESS.md Phase 10 — add max-3 review-fix cycle + FOLLOWUP tracking","updated_at":"2026-02-25T22:50:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"00b8676a5ea041b7941a199be3530e74134fe64ae21ffd4d5457e26f129cd7a4","created_at":"2026-02-22T12:56:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"tests/test_constraints.py line 767 uses 'from conftest import _advance_to' as an inline import inside the test method body (TestCheckSeverityTree.test_p10_state_machine_advance_populates_severity_groups). Finding v1b from the original code review was explicitly about moving inline imports to top-level. SLICE-1 fixed test_aura_types.py, but this inline import pattern persists in test_constraints.py. Fix: Move the import to the top of the file alongside other top-level imports.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-31jj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"test_constraints.py uses inline 'from conftest import _advance_to' inside test method body instead of top-level import","updated_at":"2026-02-22T17:30:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:53:48Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"83240a89f9a566eca80a4c07c0b0b65adae3eeafcd852e1938a68349e13aa37c","created_at":"2026-02-27T06:53:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-vd4m\n---\nBLOCKER findings for REVIEW-C-1 (Reviewer C — Elegance)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-32mk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"REVIEW-C-1 BLOCKER","updated_at":"2026-02-27T06:53:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-1","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T01:42:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:31:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-06g\n  urd: aura-plugins-umi\n  proposal: aura-plugins-gmv\n---\n## Specification\nDefine all typed enums and frozen dataclass specs for the aura protocol. This is the foundation module imported by all others.\n\n### Key Types\n- PhaseId (13 values: p1-p12 + complete)\n- Domain (user, plan, impl)\n- RoleId (epoch, architect, reviewer, supervisor, worker)\n- VoteType (ACCEPT, REVISE)\n- SeverityLevel (BLOCKER, IMPORTANT, MINOR)\n- PhaseSpec, Transition, ConstraintSpec, HandoffSpec (frozen dataclasses)\n- PHASE_SPECS, CONSTRAINT_SPECS, HANDOFF_SPECS (canonical lookup dicts)\n- PHASE_DOMAIN mapping\n\n### Also\n- Create scripts/aura_protocol/__init__.py with public API re-exports\n- Event stub types: PhaseTransitionEvent, ConstraintCheckEvent, ReviewVoteEvent, AuditEvent, ToolPermissionRequest, PermissionDecision\n\n## Files Owned\n- scripts/aura_protocol/__init__.py (NEW)\n- scripts/aura_protocol/types.py (NEW)\n- tests/test_aura_types.py (NEW)\n- tests/test_schema_types_sync.py (NEW)\n\n## Acceptance Criteria\n- AC8: Given Python type definitions when compared against schema.xml then every PhaseId, Domain, RoleId matches schema.xml should never drift\n- All enums are str Enums for JSON/Temporal serialization\n- All spec dataclasses are frozen (immutable)\n- PHASE_DOMAIN mapping matches schema.xml _EXPECTED_DOMAINS\n\n## Validation Checklist\n- [ ] Types defined (enums + frozen dataclasses)\n- [ ] Tests written (test_aura_types.py + test_schema_types_sync.py)\n- [ ] __init__.py with re-exports\n- [ ] All 13 PhaseId values present\n- [ ] PHASE_SPECS covers all 12 phases\n- [ ] Integration test verifies Python types match schema.xml","design":"{\"validation_checklist\":[\"PhaseId matches schema.xml\",\"Domain matches DomainType enum\",\"RoleId matches schema.xml\",\"PHASE_DOMAIN mapping correct\",\"All specs are frozen\",\"str Enums for serialization\"],\"acceptance_criteria\":[{\"given\":\"Python types.py\",\"when\":\"compared to schema.xml\",\"then\":\"all enums match\",\"should_not\":\"drift from schema.xml\"}],\"ratified_plan\":\"aura-plugins-gmv\"}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-35d","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1: types.py — Protocol type definitions","updated_at":"2026-02-22T01:42:54Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:48:18Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a39e85c3ca12a5b506e9e2704e92a85cec0c305457bb60edd79c5be1d0d13dad","created_at":"2026-02-25T22:48:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  review_round: 3\n---\nBLOCKER findings from Reviewer A (Correctness) on SLICE-1, Round 3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-36ar","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-3 BLOCKER","updated_at":"2026-02-25T22:48:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:55:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"457a8f1a8f154a30599c4ad8cbe947aca0c13ec2c97c833aa30ba3be9bc920ed","created_at":"2026-02-27T06:55:05Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-s7dj\n  review: aura-plugins-zldt\n---\nIMPORTANT findings for SLICE-1 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-37i1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-27T06:55:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"21e94261b10f7a2ac779fac75ec104173d6498bc66534de9573f61ebb5903994","created_at":"2026-02-22T12:55:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer A (Correctness) on SLICE-4 (workflow.py, test_workflow.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3a1d","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a3b2fc7e8fceb6a9cc109531030ae2c4853d7e927b3905cb7e0f60499c0790ec","created_at":"2026-02-26T08:38:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3bgm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 MINOR: Comment clarity","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"732c5532b52f456d1aa324b180e0bb9bb03f12e92b2c5710190e0cae8b108315","created_at":"2026-02-26T15:33:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Tests for FileWithUri, ReviewAxis membership, ToolCall field renames + camelCase aliases, NullStub protocol compliance. Import from production paths.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3djw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-2-L2: Tests — Interface + A2A type changes","updated_at":"2026-02-26T18:34:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1d8408bf22a4a3f5aaa3a1ba7156f9c14d71dc135433d86cbfb9ae40e025bf5c","created_at":"2026-02-25T22:44:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  review_round: 2\n  severity: minor\n---\n## Finding: Missing integration test for check_integration_points via check_structural\n\nThe round 1 fix correctly wired check_integration_points into check_structural (param at line 298, dispatch at line 376-377, docstring at line 333). However, no integration test was added to verify this wiring.\n\nThe 2 new integration tests added are:\n- test_slice_review_before_close_via_structural (line 1945) — tests a DIFFERENT constraint\n- test_max_review_cycles_via_structural (line 1954) — tests a DIFFERENT constraint\n\nMissing: test_integration_points_via_structural that calls check_structural(has_integration_points=False) and asserts C-integration-points in violation IDs.\n\nThis is MINOR because:\n1. The wiring itself is correct (verified by code review)\n2. Standalone tests for check_integration_points exist (lines 1542-1556)\n3. The pattern is consistent (supervisor_cartographers already has its own structural test at line 1936)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3dyw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-2: Missing test_integration_points_via_structural","updated_at":"2026-02-25T22:44:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:57:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4ecbdceb0b95aa48fa58c24cacaa57a1a80f1bbd1c37461a33420e945057ef59","created_at":"2026-02-26T08:57:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  review_round: 1\n---\nMINOR findings from Reviewer A (Correctness) on FOLLOWUP-SLICE-3.\n\nNo MINOR findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3fd0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-REVIEW-A-1 MINOR","updated_at":"2026-02-26T08:57:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"668dc4f4598a4c7bdb2fbfd20e9d9684ca69053d4e67c4369314cff193f59dcd","created_at":"2026-02-23T13:24:19Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  reviewer: A (Correctness)\n  round: 1\n---\nMINOR findings from Reviewer A on FOLLOWUP epic z8ga.\n\n## A-MINOR-1: Role-ref priority excludes EPOCH silently (DEDUP: also C-IMPORTANT-2)\n- File: gen_schema.py L62-63\n- No comment explains why EPOCH is absent from _ROLE_PRIORITY\n\n## A-MINOR-2: Multi-role tie-breaking degrades C-review-consensus metadata\n- File: gen_schema.py L74-85\n- matching[0] only when len==1; multi-match → None loses semantic information\n- Old static: role-ref='reviewer'; new computed: role-ref=None\n\n## A-MINOR-3: Chronological first heuristic degrades two phase-refs\n- File: gen_schema.py L88-107\n- C-supervisor-no-impl: old p9 (semantically relevant), new p8 (chronological first)\n- C-agent-commit: old p12 (canonical commit phase), new p9 (chronological first)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3jjt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-A-1 MINOR","updated_at":"2026-02-23T13:24:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:45:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"222d605b5240ef12bba9e658ea95d3eb05097160d159ffc387e7ee2ccd4f22b8","created_at":"2026-02-25T22:45:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings. Elegance axis, round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3kbk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-2 MINOR","updated_at":"2026-02-25T22:45:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:36:26Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d8936f6221a2b892c2a5996e2f2cf300cc17df0cf7956cb19dd263174b38c375","created_at":"2026-02-26T08:06:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-147m\n  urd: aura-plugins-7oqz\n  proposal: aura-plugins-iw89\n  predecessor: aura-plugins-t5i9\n---\n## Scope\nWire PluginRegistry into cmd_release(), add --plugin flag, add --check output, implement error cases.\n\n## Files Owned\n- bin/aura-release (cmd_release + main argparse)\n- tests/test_aura_release.py (release integration tests)\n\n## New argparse flag\n```python\nparser.add_argument('--plugin', metavar='NAME',\n    help='Plugin name for registry lookup; auto-detected from cwd if omitted')\n```\n\n## Registry Integration in cmd_release() — AFTER git commit/tag\n\n```python\n# ── After commit and tag ──────────────────────────────────────────\nregistry = PluginRegistry.load()\nif registry:\n    match = registry.find_plugin(getattr(args, 'plugin', None), root)\n    if match is None:\n        # UAT DELTA: Registry exists but no match → error verbosely\n        print('Error: plugin registry found but no match for current directory', file=sys.stderr)\n        print('Use --plugin \u003cname\u003e to specify explicitly or run registry add', file=sys.stderr)\n        return 1\n    plugin_entry, marketplace_entry = match\n    resolved_mp = marketplace_entry.path.resolve()\n    discovered_paths = {vf.path.resolve() for vf in files}\n    if resolved_mp not in discovered_paths:   # double-bump guard\n        if dry_run:\n            print(f'[dry-run] Would update marketplace {resolved_mp}: metadata.version -\u003e {new_version_str}')\n        else:\n            mp_vf = MarketplaceVersionFile(name=str(resolved_mp), path=resolved_mp)\n            mp_vf.write(new_version_str)\n```\n\n## --check registry info (UAT delta)\nWhen --check flag: after existing output, add registry lookup result:\n```\nRegistry: plugin=\u003cname\u003e marketplace=\u003cpath\u003e\n```\n(or 'Registry: not found' if no registry or no match)\n\n## Critical UAT Deltas\n1. Registry exists + no CWD match → error verbosely and stop (NOT silent proceed)\n2. --check shows 'Registry: plugin=\u003cname\u003e marketplace=\u003cpath\u003e'\n3. Double-bump guard: resolved_mp not in {vf.path.resolve() for vf in files}\n4. Registry write occurs AFTER git commit/tag\n5. --dry-run skips registry write (prints [dry-run] message)\n\n## Tests\n- test_release_dry_run_skips_registry_write\n- test_release_errors_verbosely_when_registry_exists_no_match (UAT delta)\n- test_check_shows_registry_info_when_found (UAT delta)\n- test_double_bump_guard_prevents_duplicate_write\n\n## Validation Checklist\n- [ ] --plugin flag in argparse\n- [ ] Registry lookup AFTER git commit/tag\n- [ ] Registry exists + no CWD match → error verbosely (exit 1)\n- [ ] --check includes 'Registry: plugin=\u003cname\u003e marketplace=\u003cpath\u003e'\n- [ ] Double-bump guard: set comprehension comparison with .resolve()\n- [ ] --dry-run prints [dry-run] and skips write\n- [ ] All existing tests still pass\n- [ ] All new integration tests pass","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3kul","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5: Release integration + --plugin flag + --check registry info","updated_at":"2026-02-26T08:36:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e7918c2dae1f3945a7c3fff5c43f3e2cb8cb924fe1e598e1eeb7b39095c23561","created_at":"2026-02-26T16:01:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-o8va\n  review: aura-plugins-zd9p\n---\nBLOCKER findings for SLICE-4 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3m28","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T16:02:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\nIn workflow.py (lines 284-285), after the advance() call produces a TransitionRecord, the workflow replaces the last entry in transition_history with a new record using workflow.now():\n\n    if self._sm.state.transition_history:\n        self._sm.state.transition_history[-1] = deterministic_record\n\nTransitionRecord is documented as 'Immutable audit entry for one transition' and is a frozen=True dataclass. The list itself (transition_history) is mutable (EpochState.transition_history: list[TransitionRecord]), so replacing the list entry is structurally legal in Python.\n\nHowever, this pattern is unexpected and subtle:\n1. The comment in advance() says 'Records the transition in transition_history' — the record written there has a non-deterministic datetime.now() timestamp\n2. The workflow then silently overwrites the last record with a deterministic timestamp\n3. Callers who query current_state() before the overwrite step (very unlikely in practice due to Temporal's scheduling, but possible) would see the non-deterministic timestamp\n4. This is the only place in the entire codebase where a list element is reassigned post-hoc\n\n## Alternative\nModify EpochStateMachine.advance() to accept an optional timestamp parameter:\n    def advance(self, to_phase, *, triggered_by, condition_met, timestamp=None):\n        ts = timestamp or datetime.now(tz=timezone.utc)\n        record = TransitionRecord(..., timestamp=ts)\n\nThe workflow passes workflow.now() directly; pure Python tests pass nothing (defaults to datetime.now()). This eliminates the post-hoc mutation entirely.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3m4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-C-1-F1: Workflow reassigns frozen TransitionRecord in transition_history list — breaks expected immutability guarantee","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2242d88c4e0a5f23155b9ed0c5b01807e36964a4eeef1a273097b45ac87397a7","created_at":"2026-02-26T08:38:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3p8c","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 BLOCKER: MarketplaceVersionFile.write() fix validation","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T03:03:04Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:59:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-06g\n  urd: aura-plugins-umi\n  review_round: aura-plugins-e0j\n---\n## UAT Revision Requests (verbatim)\n\n### 1. Split check_all() into two APIs\nUser chose: \"Rename check_all() to check_state_constraints() and add check_transition_constraints(state, to_phase) that combines transition-specific checks. Two clear entry points.\"\n\nChanges needed:\n- constraints.py: Rename check_all() → check_state_constraints()\n- constraints.py: Add check_transition_constraints(state, to_phase) that combines transition-specific checks\n- Keep individual check methods intact\n- Update __init__.py re-exports if needed\n- Update test_constraints.py to test new API\n\n### 2. Use runtime imports in Protocol interfaces\nUser chose: \"Change to real runtime imports even though it creates tighter coupling. Full isinstance() fidelity at the cost of potential circular imports.\"\n\nChanges needed:\n- interfaces.py: Change TYPE_CHECKING imports to real runtime imports\n- Verify no circular import issues\n- Update test_interfaces.py if needed\n\n## Files to Modify\n- scripts/aura_protocol/constraints.py\n- scripts/aura_protocol/interfaces.py\n- scripts/aura_protocol/__init__.py (if re-exports change)\n- tests/test_constraints.py\n- tests/test_interfaces.py (if needed)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3r4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"FIX: UAT revisions — constraints API split + interfaces runtime imports","updated_at":"2026-02-22T03:03:04Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"85942dbf0b81b33c254ebda611390edd733fd6a8f4b604c22ce61fa68026434a","created_at":"2026-02-26T04:30:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3t80","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-2 IMPORTANT","updated_at":"2026-02-26T04:30:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8a3a2d82345da390b1f467298205daf5893a635feea48a3b6f11058fb4e712df","created_at":"2026-02-26T04:02:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  uat: aura-plugins-6p9j\n---\nUser selected BLOCKER: procedures must render into both schema.xml and SKILL.md before landing.\n\ngen_schema.py currently emits constraints, phases, roles, commands, handoffs, labels — but does NOT emit a procedure-steps section from PROCEDURE_STEPS dict.\n\nRequired: add a \u003cprocedure-steps\u003e or equivalent section to schema.xml generation that emits ProcedureStep data for SUPERVISOR and WORKER roles.\n\nNote: This is blocked by SLICE-1 BLOCKER (ProcedureStep field changes must land first).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3tfg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"BLOCKER: gen_schema.py must emit procedure-steps section into schema.xml","updated_at":"2026-02-26T04:02:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:08Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9ca906b09ed2062f76f8e287f8b15267f1bfc5a75ea3a1932578c58f44db5c51","created_at":"2026-02-26T16:01:14Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-vhtx\n  review: aura-plugins-mip5\n---\nBLOCKER findings for SLICE-2 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3x1v","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T16:02:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:24:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-5 (workflow.py) — IMPORTANT findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3xe","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-22T17:24:09Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"58603ee83ef1f84fc91076417675aece58725a027cdcc0cc2e6116a276337963","created_at":"2026-02-26T04:02:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  uat: aura-plugins-6p9j\n---\nUser selected REVISE — restore full 4-field design:\nCurrent: ProcedureStep(order, description, next_state)\nRequired: ProcedureStep(order, instruction, command: Optional[str], context: Optional[str])\n\nChanges:\n1. Rename description → instruction\n2. Add command: Optional[str] = None (the exact bd/shell command to run)\n3. Add context: Optional[str] = None (situational context for the step)\n4. Update PROCEDURE_STEPS[SUPERVISOR] and PROCEDURE_STEPS[WORKER] with command+context values where appropriate","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-3zs8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"BLOCKER: ProcedureStep missing command and context fields","updated_at":"2026-02-26T04:02:38Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e11a456103b53b8dc72519454fa8b2a27135cb7ba68a81661e7b8e0073283946","created_at":"2026-02-22T12:57:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"AC6 requires that failed transitions (TransitionError) are recorded in transition_history with condition_met='FAILED: {error}'. This behavior is implemented in workflow.py lines 277-290 (the except TransitionError block). However, no non-sandbox test directly exercises this code path.\n\nTestLastErrorObservability (test_workflow.py lines 585-638) manually simulates the workflow's catch block by writing sm.state.last_error = str(e) directly — it does NOT call through to EpochWorkflow.run() or verify that transition_history receives the failed TransitionRecord. The test is testing the state machine's last_error field in isolation, not the workflow's audit trail behavior.\n\nThe only test for the full failed-transition → transition_history recording is TestWorkflowEnvironmentSandbox.test_failed_transition_recorded_in_history_e2e, which is marked skip-safe and skips in this environment.\n\nFix: Add a non-sandbox integration test that creates an EpochWorkflow via ActivityEnvironment or mocked workflow context, sends an invalid advance signal, and asserts that transition_history contains a record with condition_met.startswith('FAILED:'). If that's not feasible due to Temporal coupling, at minimum add a test that calls the workflow's _except TransitionError_ error-recording logic directly (e.g., by extracting the error-recording into a helper method).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-403x","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"AC6 failed-transition audit trail has no non-sandbox unit test — only tested end-to-end via skipped sandbox tests","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0a9e95ccb40ed99e31c7a5c01180c55d8476636b8067bfc4c417c76704d34f80","created_at":"2026-02-26T08:59:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-0biw\n  urd: aura-plugins-7oqz\n  impl_plan: aura-plugins-147m\n---\n## Components Demonstrated\n\n### Component 1: Registry CLI (init/add/list/remove)\n**Commands shown:** registry init, add, list, remove in the actual aura-plugins repo\n**Question asked:** How does the list format feel? (`\u003cmarketplace\u003e → \u003cname\u003e (\u003cplugin-path\u003e)`)\n**User response:** 'Let's run these commands in this repo. However, --remote should verbosely default to the origin remote of the repo in the cwd.'\n→ DELTA: --remote auto-detects git remote get-url origin when omitted\n\n### Component 2: registry add duplicate handling\n**Output shown:** Existing entry shown + Update? [y/N] prompt; --yes skips prompt but still shows entry\n**Question asked:** Should --yes be fully silent or show old entry?\n**User response:** 'Show old entry, show what was changed.'\n→ DELTA: After update, show diff-style old → new output\n\n### Component 3: --check registry output\n**Output shown:** 'Registry: not found' vs 'Registry: plugin=aura-plugins marketplace=...'\n**Question asked:** Does the format work?\n**User response:** 'Registry: not found is uninformative: which registry, and where did you try looking?'\n→ DELTA: Two distinct messages — 'Registry: no file at \u003cpath\u003e' vs 'Registry: no match in \u003cpath\u003e'\n\n### Catch-all\n**Question asked:** Any other gaps?\n**User response:** 'Nothing else — ACCEPT with the 3 deltas noted'\n\n## Final Decision\nACCEPT — with 3 deltas applied (committed in fix worker)\n\n## Deltas Applied\n1. --remote defaults to git remote get-url origin of plugin path (verbose)\n2. registry add on update: shows old entry + 'Updated to: ...' diff line\n3. Registry: not found → 'Registry: no file at \u003cpath\u003e' or 'Registry: no match in \u003cpath\u003e'","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-46yx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"UAT: Implementation acceptance — plugin registry + marketplace fix + test quality","updated_at":"2026-02-26T08:59:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"605d83ead34bf270af01c70932e44b8ca8e6391d9fddf310856e619a56334af3","created_at":"2026-02-27T06:24:59Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Rename entry point, update flake packages, update temporal-service.nix with XDG runtime resolution.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-47zo","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-1-L1: Rename bin/worker.py→bin/aurad.py + flake.nix + nix","updated_at":"2026-02-27T06:36:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:20:06Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7bbf935542c8f08300eeb24589d601cf7072331e80010e19673f867a75894f37","created_at":"2026-02-23T04:24:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer A on SLICE-1. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-484m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 MINOR","updated_at":"2026-02-23T12:20:06Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:56Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"00e811b0de3a8b449dcd6ac666afddac3ab20af5aa00c80daae5ccea85d45b8f","created_at":"2026-02-26T04:30:50Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-49xw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-2 MINOR","updated_at":"2026-02-26T04:30:56Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"354ae7d417a96c816342ef8c6f6d9909f11b024dec612c8b03ca6660d58ed00d","created_at":"2026-02-22T12:55:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer A (Correctness) on SLICE-4 (workflow.py, test_workflow.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4bkc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 MINOR","updated_at":"2026-02-22T17:30:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No MINOR findings — elegance axis clean","closed_at":"2026-02-26T04:30:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0f50e165b728b922367324de2fb8544c1496f1c27e206aeac67b9da9a210c579","created_at":"2026-02-26T04:30:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4d3s","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-2 MINOR","updated_at":"2026-02-26T04:30:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:53:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"285e082d9c887b0b46333208574bffcf3b12a2f0eac4ca333ae456927d3116b0","created_at":"2026-02-22T12:52:25Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer C (Elegance) on SLICE-3 (interfaces.py, test_interfaces.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4f1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 BLOCKER","updated_at":"2026-02-22T12:53:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ebc221c9b55c3cfaed3978c1eb3c6a5be2be3bd4b24cc03de2548a3bcbf1dc8e","created_at":"2026-02-23T13:23:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  urd: aura-plugins-w07o\n  reviewer: B (Test Quality)\n  round: 1\n---\nTest quality review of all 4 slices in FOLLOWUP epic. Focus: Do tests verify intended behavior? False positives? Missing coverage?\n\n## Vote: ACCEPT\n0 BLOCKERs found. 3 IMPORTANT, 4 MINOR findings documented in severity groups.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4gx1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-B-1: Test Quality review of FOLLOWUP epic z8ga","updated_at":"2026-02-23T13:23:16Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\n### Location\n`scripts/aura_protocol/state_machine.py`, line 47:\n```python\ncurrent_role: str = 'epoch'\n```\n\n### Description\nThe proposal (RATIFIED_PLAN aura-plugins-gmv) defines `EpochState.current_role` as type `RoleId` (typed enum). The implementation declares it as plain `str`.\n\n```python\n# Proposal spec:\ncurrent_role: RoleId\n\n# Implementation:\ncurrent_role: str = 'epoch'\n```\n\n### Consequence\n- No type-safety guarantee that current_role is a valid RoleId value\n- RuntimeConstraintChecker.check_role_ownership() correctly compensates by checking `state.current_role not in known_roles` (a set of str values), but this is defensive coding around a typing gap\n- Consumers of EpochState.current_role cannot rely on IDE autocomplete or static type checking for the enum variants\n\n### Severity\nMINOR — the runtime behaviour is correct because check_role_ownership() enforces validity, and str is compatible with RoleId.value. No functional bug exists. This is a type annotation gap relative to the proposal spec.\n\n### Suggestion\nChange to `current_role: RoleId = RoleId.EPOCH` to match the proposal spec and gain full type safety. Update any callers that pass plain strings (the workflow currently sets via signal, so no breaking change to public API).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4hu","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 MINOR: EpochState.current_role type is str not RoleId","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No IMPORTANT findings — elegance axis clean","closed_at":"2026-02-26T04:30:26Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b71ada751e080953e4d14ccb7319cb21c2f8e590a04a3d3c74d6c17f10b7c4c7","created_at":"2026-02-26T04:30:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4k9t","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-2 IMPORTANT","updated_at":"2026-02-26T04:30:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"270260c1463307a36f678fc63d0e3bafddc52f94d952ffdf159e0830c2ad6762","created_at":"2026-02-26T08:55:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i08u\n  review_round: 1\n---\nIMPORTANT findings from Reviewer C (Elegance) on FOLLOWUP-SLICE-1. No findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4kq5","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-1-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-26T08:55:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T01:50:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-la6\n  impl_plan: aura-plugins-06g\n---\n## Scope\nWrite test_state_machine.py covering AC1 (transitions), AC2 (consensus gate), AC3 (revision loop), AC4 (BLOCKER gate). Tests import from state_machine.py and WILL FAIL until L3 implementation.\n\n## Files Owned\n- tests/test_state_machine.py\n\n## Acceptance Criteria\nGiven test_state_machine.py when run before L3 then tests fail (expected) should never pass without real implementation","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4mu","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-L2: Tests — test_state_machine.py (AC1-AC4)","updated_at":"2026-02-22T01:50:54Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:08Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3585273f986b2724900a780539441c53590e9b647604d0c829f793e5ee25e3bc","created_at":"2026-02-26T16:01:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-vhtx\n  review: aura-plugins-mip5\n---\nIMPORTANT findings for SLICE-2 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4nzt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T16:02:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:21:38Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\nIn `scripts/aura_protocol/__init__.py` the module docstring says:\n\u003e RuntimeConstraintChecker — checks all 22 C-* constraints against epoch state\n\nThe number 22 is also stated in constraints.py module docstring. However, CONSTRAINT_SPECS in types.py has exactly 22 entries (verified by counting). This is correct.\n\nActually reviewing more carefully: the __init__.py comment says '13 values: p1-p12 + complete' for PhaseId which is accurate (12 numbered + 1 COMPLETE = 13). This is also correct.\n\nRESOLUTION: After detailed re-read, SLICE-1 has no IMPORTANT findings. All types, counts, and docstrings are accurate and consistent with the schema.\n\n**No finding — group to be closed.**","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4ou","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 IMPORTANT: CONSTRAINT_SPECS count in __init__.py docstring says 22 but not verified","updated_at":"2026-02-22T02:21:38Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9b4b5349d4b205f2c3b8973657881d4b2d777c1376c0cb27487dc5ac3944a4ac","created_at":"2026-02-26T16:00:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-l6n8\n  urd: aura-plugins-2ojv\n---\nVOTE: ACCEPT - test_serializable_phase_spec.py has 68 comprehensive tests covering construction, frozen enforcement, JSON roundtrip, from_spec conversion for all 12 phases, and edge cases. Follows codebase patterns (no mocks, BDD docstrings, parametrized over PhaseId enum). Test quality is excellent.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4rj7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1: SerializablePhaseSpec test quality","updated_at":"2026-02-26T16:02:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"53eb328569e3172ec9bb936b5d4a183d426893a99c72c761b55fc73da04f9a05","created_at":"2026-02-26T08:55:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  review_round: 1\n---\nBLOCKER findings from Reviewer C (Elegance) on FOLLOWUP-SLICE-3. No findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4s7g","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-REVIEW-C-1 BLOCKER","updated_at":"2026-02-26T08:55:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-4 (interfaces.py) minor-level findings.\n\n## Finding: TestToolCall.test_tool_call_is_hashable documents that ToolCall with dict fields is NOT hashable via a pytest.raises(TypeError) assertion — this is a surprising test (MINOR)\n\nThe test at test_interfaces.py lines 374-380 explicitly tests that hash(ToolCall(...)) raises TypeError. While this documents a known limitation, it's unusual to write a test that asserts an operation FAILS as expected behavior. The test is named 'test_tool_call_is_hashable' but actually documents the opposite. This could confuse future contributors.\n\nRecommend renaming to 'test_tool_call_with_dict_fields_is_not_hashable' and adding a comment explaining why (frozen dataclass with mutable dict fields loses hash). This is a naming clarity issue only.\n\n## Finding: No test verifies ModelId.parse raises ValueError for strings with only whitespace around the slash (MINOR)\n\nTests cover empty string, leading slash, trailing slash, slash only. However '  /model' or 'provider/  ' (whitespace around separator) are not tested. The production code would parse these as provider=' ' and model='model' (no error). Whether this is correct behavior is undefined in the spec. A minor clarification or test would document the decision.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4u1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 MINOR","updated_at":"2026-02-22T17:24:09Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1b3b6106acb982dc9007de381a8b066aed1261997523c031af18986672e44b53","created_at":"2026-02-25T22:37:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"PROCESS.md:659-663 exit conditions table has 3 rows but supervisor/SKILL.md:298-303 has 4. Missing rows: (1) 'BLOCKERs or IMPORTANT remain, cycles \u003c 3 → Workers fix, Cartographers re-review' and (2) '3 cycles exhausted, BLOCKERs remain → STOP — escalate to user, do NOT proceed'. The BLOCKER escalation row is critical — without it a supervisor reading only PROCESS.md would not know to escalate.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4wcp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FIX: Complete PROCESS.md cycle exit conditions table","updated_at":"2026-02-25T22:37:43Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:30:29Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cf5e16e62048c390470ff0dde98daa4744bd9f0621398f9b4768a1eab67d7a57","created_at":"2026-02-26T03:30:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  reviewer: cartographer-b\n  round: 1\n---\nBLOCKER findings from Cartographer B (Test quality) on SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4wno","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T03:30:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T08:39:08Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"60f8934f1190c8247ab0ad8546751e1265a27bd41ad3af8e8770be030309ce2e","created_at":"2026-02-23T04:22:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer C (Elegance) on SLICE-1. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4x1p","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 BLOCKER","updated_at":"2026-02-23T08:39:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ba7d7150fdb052dea1538aaa0ae4c0b7f138f0192e2dfebe2eca6c26c65c53bd","created_at":"2026-02-23T04:26:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer B (Test Quality) on SLICE-1 (Schema Parser + Type Expansion + Bootstrap Codegen). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4y9r","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No IMPORTANT findings — elegance axis clean","closed_at":"2026-02-26T04:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e2e4198a86b7a7500e2080146f251be8974e32ec44ae871efac111b5f4349627","created_at":"2026-02-26T04:30:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-4zxl","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-2 IMPORTANT","updated_at":"2026-02-26T04:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e9a8e86d6ea532fa616d28f8cf897fb815260f5c080ec5e4260423edb3c48518","created_at":"2026-02-25T22:14:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  impl_plan: aura-plugins-24cr\n---\n## Scope\n\nModify scripts/aura_protocol/context_injection.py to add role/phase mappings for all 4 constraints:\n\n| Constraint | Role(s) | Phase(s) |\n|---|---|---|\n| C-supervisor-cartographers | SUPERVISOR | P8, P9, P10 |\n| C-integration-points | SUPERVISOR | P8 |\n| C-slice-review-before-close | SUPERVISOR | P9, P10 |\n| C-max-review-cycles | SUPERVISOR | P10 |\n\nRemove any mapping for C-supervisor-explore-team (replaced by C-supervisor-cartographers).\n\n## Files Owned\n- scripts/aura_protocol/context_injection.py\n\n## Acceptance Criteria\n- All 4 constraints mapped under SUPERVISOR role\n- C-supervisor-explore-team mapping removed (if it existed)\n- python -c \"import aura_protocol.context_injection\" passes","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-50mz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-L2: context_injection.py — map new constraints to SUPERVISOR/P8/P9/P10","updated_at":"2026-02-25T22:50:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-blocker-fix","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T08:39:14Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cce33fb92f8d27d6100f4362fc6e6cf24547c832b52584b119b5c6f0ee48ebd7","created_at":"2026-02-23T08:34:30Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-94yc\n  urd: aura-plugins-w07o\n  blocker_finding: aura-plugins-h369\n  blocker_group: aura-plugins-4x1p\n  slice: aura-plugins-9suu\n---\n## Problem\nSchemaSpec.constraints in schema_parser.py uses raw tuple[str,str,str,str] instead of ConstraintSpec dataclass.\nLine 371 of schema_parser.py: result[cid] = (given, when, then, should_not)\n\nEvery other field in SchemaSpec returns rich typed dataclasses (RoleSpec, CommandSpec, HandoffSpec, LabelSpec, ReviewAxisSpec).\nConstraintSpec already exists in types.py with exactly these 4 fields.\n\n## Fix Required\n\n### File 1: scripts/aura_protocol/schema_parser.py\n- Change _parse_constraints() return type annotation: dict[str, tuple[str,str,str,str]] → dict[str, ConstraintSpec]\n- Change line 371 (or near): return ConstraintSpec(id=cid, given=given, when=when, then=then, should_not=should_not)\n- Update SchemaSpec.constraints field type annotation\n\n### File 2: scripts/aura_protocol/types.py  \n- Ensure SchemaSpec.constraints: dict[str, ConstraintSpec] (update annotation if needed)\n\n### File 3: Any downstream code that destructures tuples\n- Search for patterns like: given, when, then, should_not = constraint_tuple\n- Update to use .given, .when, .then, .should_not attribute access instead\n\n## Validation\n- Run: uv run pytest -x -q\n- Must pass 839+ tests\n- No regressions allowed\n\n## On Completion\nWorker must:\n1. git agent-commit -m 'fix(schema_parser): SchemaSpec.constraints returns ConstraintSpec not tuple'\n2. bd close aura-plugins-h369\n3. bd close aura-plugins-4x1p\n4. Report completion via bd comments add on this task","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-51zy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FIX-BLOCKER: Change SchemaSpec.constraints to dict[str, ConstraintSpec]","updated_at":"2026-02-23T08:39:14Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c5271146c49c4543adbf0bcbbf56d160ca2729a485ac7d571cdcfe50e0f3c584","created_at":"2026-02-22T12:56:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"tests/test_workflow.py lines 678-714: _temporal_sandbox_works() is called at module import time (line 717: _HAS_TEMPORAL_SANDBOX = _temporal_sandbox_works()). The probe catches 'except Exception' (bare) to suppress all failures — the same bare-except pattern that was fixed in workflow.py (finding 3xe). While the intent (avoid 4x30s probe per test) is correct, the bare except swallows errors silently including import errors, misconfiguration, and transient failures indistinguishable from 'server unavailable'. A more specific catch like 'except (ImportError, OSError, asyncio.TimeoutError, Exception)' with logging at DEBUG level would make the skip behavior transparent. This is MINOR because the functional outcome (skip tests) is correct, just not auditable.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-54c8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"test_workflow.py _temporal_sandbox_works() probe runs asyncio.run() at module import time with bare except Exception","updated_at":"2026-02-22T17:30:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"672e466ca6202a87e089e77b3f124ab2ef90f55560c74c41c4594d506d8f5634","created_at":"2026-02-22T12:55:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer B (Test Quality) on SLICE-4 (workflow.py, test_workflow.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-58p","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 MINOR","updated_at":"2026-02-22T17:30:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1f5af54fc062e0a64b4baa395891c407e2ef14cccf2ace917b69513221973344","created_at":"2026-02-25T22:38:30Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings for SLICE-1 (Test Quality axis):\n\n1. check_integration_points() is NOT wired into check_structural() aggregation.\n   - All 13 other structural constraint checks are accessible through check_structural()\n   - Missing: has_integration_points parameter in check_structural kwargs, dispatch condition, docstring entry\n   - File: scripts/aura_protocol/constraints.py:270-395\n   - Fix: Add has_integration_points kwarg to check_structural, dispatch to check_integration_points when non-None, add to docstring\n\n2. TestCheckStructural missing integration tests for C-slice-review-before-close and C-max-review-cycles.\n   - C-supervisor-cartographers IS tested through check_structural (line 1936) but the other 2 new constraints are not\n   - These are wired in production code (constraints.py:376-382) but have no integration tests\n   - Fix: Add test_slice_review_before_close_via_structural and test_max_review_cycles_via_structural to TestCheckStructural","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-59fg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-25T22:38:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"02aeb9a616dd2644e174cd500c4dc00e19931ddd72aeeb6a7a602c2c46676023","created_at":"2026-02-22T12:54:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In test_workflow.py, line 717: '_HAS_TEMPORAL_SANDBOX = _temporal_sandbox_works()' is a module-level side-effecting call that runs during pytest collection. The probe attempts asyncio.run() with a WorkflowEnvironment.start_time_skipping() call, which tries to download or start the Temporal test server binary on every import of this module — including during 'pytest --collect-only', IDE indexing, and any test run touching this module.\n\nThe proposal described the tests as 'skip-safe' but the skip check itself is not skip-safe: it runs eagerly and blocks for a timeout on every import. When the binary is absent and no network is available, this can cause a multi-second hang per test collection run.\n\nStandard pytest pattern for expensive skip probes: use @pytest.mark.skipif with a lazy marker, a session-scoped fixture that caches the probe result, or pytest.ini markers. The probe should not run at module import time.\n\nFix: Move the probe into a session-scoped pytest fixture and use pytest.mark.skipif referencing the fixture, OR wrap the probe call in an explicit lazy cache accessed only at the first class instantiation. The comment block above line 717 documents the intent correctly but the implementation doesn't match.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-59p","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4: _temporal_sandbox_works() runs at module import time — blocks test collection","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:33:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9c6de6cd1d134f64e9c9161f8e505d4aee0a2ebc8ddee76680683ccfb1d65133","created_at":"2026-02-26T08:06:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-t5i9\n  impl_plan: aura-plugins-147m\n---\n## Scope\nDefine the argument structure for each registry subcommand (argparse or manual argv parsing).\n\n## Deliverables\n- cmd_registry(args: list[str]) -\u003e int: dispatch function signature\n- cmd_registry_init(args) -\u003e int signature\n- cmd_registry_add(args) -\u003e int: name, --path, --remote, --marketplace, --yes flags\n- cmd_registry_list(args) -\u003e int\n- cmd_registry_remove(name) -\u003e int","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-59zy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-L1: Types — CLI subcommand argument schemas","updated_at":"2026-02-26T08:33:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:48:48Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"edae820a8e964f1015ccc6cd3b6f7abcc082c7962876bf1cf30772cb9a40c87f","created_at":"2026-02-22T12:07:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-cts\n  urd: aura-plugins-s6i\n  proposal: aura-plugins-r1z\n---\n\n## Specification\nRecord failed transitions in audit trail, remove post-hoc TransitionRecord mutation, add Temporal sandbox integration tests.\n\n## Changes\n1. On TransitionError: append TransitionRecord(to_phase=attempted, condition_met=\"FAILED: {error}\") to transition_history\n2. Remove post-hoc transition_history[-1] mutation → pass timestamp=workflow.now() to advance()\n3. SA_EPOCH_ID: add to per-transition upsert for defensive consistency (or document set-once with comment)\n4. Import _advance_to from conftest.py (remove local duplicate from test_workflow.py)\n5. Add WorkflowEnvironment.start_time_skipping() integration tests:\n   - advance_phase signal delivery end-to-end\n   - submit_vote signal delivery end-to-end\n   - Query current_state returns correct phase after signal\n   - Search attributes updated after signal-driven transition\n\n## Files Owned\n- scripts/aura_protocol/workflow.py\n- tests/test_workflow.py\n\n## Acceptance Criteria\n- AC6: Failed transition recorded in transition_history with condition_met=\"FAILED: ...\"\n- AC7: WorkflowEnvironment sandbox tests pass with actual signal delivery\n- AC9: All 475+ existing tests still pass\n\n## Findings Adopted\n3xe, 68o, gdx, xui, r8f, sk6, x36, 3m4","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-5kp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Implementation complete. All 5 ACs satisfied: (1) failed transitions recorded in transition_history with condition_met='FAILED: {error}', (2) timestamp=workflow.now() passed directly to advance() — no post-hoc mutation, (3) SA_EPOCH_ID documented as set-once with comment in workflow.py, (4) _advance_to imported from conftest, local duplicate removed, (5) 4 WorkflowEnvironment integration tests added (skip-safe, all skip gracefully without Temporal test server). 494 original tests preserved; 4 new sandbox tests added (skipped in this env). Resolved findings: 3xe, 68o, gdx, xui, r8f, sk6, x36, 3m4.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-4: workflow.py — Failed Transition Audit + Temporal Sandbox","updated_at":"2026-02-22T12:48:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d7b35a7a885e3352038dadd33955a2882f0570c9139222870eebe24fa64988ab","created_at":"2026-02-26T16:01:19Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-sp6y\n  review: aura-plugins-mwf0\n---\nMINOR findings for SLICE-3 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-5l4q","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 MINOR","updated_at":"2026-02-26T16:02:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0ab5909f2551a6a365d654f4876eb3591a584e89d287786371cb97f902678c91","created_at":"2026-02-23T04:30:05Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT — All 4 slices accepted by Reviewer B (Test Quality). Round 1.\n\n## Summary\n\nReviewed all 4 slices against the Test Quality axis. 839 tests pass, 4 pre-existing skips, 0 regressions. No BLOCKER findings. All acceptance criteria are meaningfully tested with real assertions.\n\n## ACCEPT rationale\n\n- All imports are from production code paths (no inline mocks)\n- SchemaParseError: 9 error-path tests (well above required 3+)\n- MarkerError: 6 tests covering missing + malformed cases\n- AC5a/AC6a absence tests: 13 specific constraint exclusion tests across roles and phases\n- Round-trip tests: field-by-field for constraints/handoffs/roles/commands/labels/review_axes\n- Parametrized tests: 4 roles × 4 properties in AC8 template tests (16 parametrized cases)\n- Parametrized tests: all 5 roles × 3 fields + all 12 phases × 3 fields in constraint context tests\n- Sync tests: all 6 new canonical dicts validated against schema.xml\n- No TODO/placeholder tests found\n- Test isolation confirmed: module-scoped fixtures, no cross-test dependencies\n\n## Findings (all non-blocking)\n\n### IMPORTANT\n- aura-plugins-zs04 (SLICE-1): PROCEDURE_STEPS sync test is count-only\n- aura-plugins-l4ih (SLICE-2): Round-trip procedure_steps tests are count-only\n- aura-plugins-ph0n (SLICE-2): AC10 end-to-end pipeline test missing\n- aura-plugins-7jsw (SLICE-3): StrictUndefined not verified via negative path test\n- aura-plugins-hirz (SLICE-4): REVIEWER/ARCHITECT/EPOCH have no positive inclusion tests\n\n### MINOR\n- aura-plugins-9j0i (SLICE-1): frozen=True check is substring-only\n- aura-plugins-f4n2 (SLICE-2): Diff test relies on wrapper header for '---' presence\n- aura-plugins-il7q (SLICE-3): Diff body vs header assertion weakness\n- aura-plugins-t8za (SLICE-4): test_worker_phases_is_p9_only asserts inclusion only","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-5n2l","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"IMPL_PLAN-REVIEW-B-1: Schema-driven protocol engine v2 — Test Quality","updated_at":"2026-02-23T04:30:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bbfb5aaf4c90aa7b356a9f77cbda4a5aef63051de694fabe6e89e347a188f4b4","created_at":"2026-02-26T08:54:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  review_round: 1\n---\nIMPORTANT findings from Reviewer B (Test Quality) on FOLLOWUP-SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-5n68","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T08:55:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:12:56Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8c3b26536339f039ee5923000143763c1935f3d4a3fbc64bc9b97712066104a9","created_at":"2026-02-26T03:11:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-7iy2\n  proposal: aura-plugins-pcs6\n---\nMinor findings from code review.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-5nec","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"IMPL-REVIEW-MINOR: aura-release dead code + test","updated_at":"2026-02-26T03:12:56Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e82de2ecf24e72e534236b3710cb3022b11355c2f25905a939abe54b419c6878","created_at":"2026-02-26T07:12:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - All four round-1 blockers resolved.\n\nBLOCKER-1 (fixture contradiction): RESOLVED. Module-scope aura_release_mod holds the module for the full test module with sys.modules teardown only at module exit. Function-scope autouse _clear_caches calls repo_root.cache_clear() only — does NOT pop sys.modules per-test. The @dataclass sys.modules hazard (documented at lines 29-33 in the existing test file) is correctly avoided.\n\nBLOCKER-2 (MarketplaceVersionFile.write() test): RESOLVED. TestVersionFileWrites is fully specified with concrete code: test_marketplace_write_updates_only_metadata_version asserts metadata.version bumped and both plugins[*].version entries unchanged; test_marketplace_write_dry_run_does_not_write asserts file is unchanged under dry_run=True. The test will correctly catch the current bug in bin/aura-release lines 164-165.\n\nBLOCKER-3 (registry CLI tests): RESOLVED. TestPluginRegistry covers 8 named cases including all load() validation branches (absent→None, malformed JSON→exit(2), missing marketplaces key→exit(2), nonexistent path→warn+skip, malformed plugin entry→warn+skip) and find_plugin() (by name, by cwd, no match). TestRegistryCLI covers 7 named cases for init/add/list/remove subcommands with monkeypatch for _registry_path.\n\nBLOCKER-4 (dry-run test): RESOLVED in intent. test_release_dry_run_skips_registry_write is named and described in SLICE-5. NOTE: the body is a skeleton (3 comment lines, no concrete assertions). This is weaker than the fully-coded TestVersionFileWrites tests. Implementation team should use monkeypatch(_registry_path), capsys to assert the [dry-run] print line, and assert the marketplace file is unchanged. Sufficient guidance exists; not a blocker.\n\nNEW FINDING (not a blocker): Existing tests A-D still call _import_aura_release() directly. The checklist item 'All existing test methods (A-D) updated to accept aura_release_mod parameter' covers this. If missed, tests will redundantly re-import the module per-test (safe but slow; the autouse _clear_caches still fires correctly via fixture injection regardless).\n\nOVERALL: Test coverage enumeration is complete. All critical axes (fixture lifecycle, write() correctness, registry validation branching, CLI subcommands, dry-run guard) have named test cases with sufficient specification for implementation.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-5r4v","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-2-REVIEW-B-2: Plugin registry + marketplace fix + test quality","updated_at":"2026-02-26T07:12:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:23:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:52Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-3 (constraints.py) — BLOCKER findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-5s5","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 BLOCKER","updated_at":"2026-02-22T02:23:02Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:19:14Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-1bm\n---\n\n## UAT Result: ACCEPT\n\nUser accepted PROPOSAL-2 design for bin/aura-release.\nNo revision feedback provided.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-5sn","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"UAT-1: Plan acceptance for release automation PROPOSAL-2","updated_at":"2026-02-22T10:40:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:18Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"893a075b18656599faeb4ccda75cc4e57c48c6aa436da0c602b8b443317b51f8","created_at":"2026-02-22T18:11:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT\n\n## Axis: Elegance — Proportionality, Abstraction, Module Decomposition, Minimal Complexity\n\n### Summary\n\nThe proposal is well-matched to the problem it solves. The 38 SKILL.md files × schema.xml drift problem is real, the 1,314-line schema.xml has genuine complexity, and the engineering response is proportionate. No unnecessary abstractions are introduced. Below is a breakdown by sub-axis.\n\n---\n\n### 1. Is Jinja2 Justified or Overkill?\n\nJUSTIFIED. The SKILL.md generation problem inherently involves:\n- Conditional blocks (e.g. role-specific sections that vary by phase ownership)\n- Iteration (phase tables, constraint lists, label schemas)\n- Macro reuse across 38 files (shared formatting patterns)\n\nf-strings cannot express loops cleanly. `string.Template` has no conditionals or loops. Jinja2 with `StrictUndefined` is the minimal tool that covers this problem without over-engineering. It is already listed as a dev-only dependency, meaning zero runtime overhead. The proposal's rationale (\"StrictUndefined catches missing vars, supports conditionals, loops, inheritance\") is accurate and sufficient.\n\n---\n\n### 2. Is the module decomposition clean?\n\nYES, with one observation. The five modules map directly to five distinct concerns:\n- `schema_parser.py` — bootstrap extraction (one-time, then verification)\n- `types.py` — canonical Python SoT (runtime-importable, statically defined)\n- `gen_schema.py` — export to XML (roundtrip generator)\n- `gen_skills.py` — export to SKILL.md (Jinja2-powered)\n- `context_injection.py` — runtime context lookup\n\nEach module has a single axis of change. The dependency graph is clean: all generators depend only on `types.py`, not on each other. The runtime module (`context_injection.py`) imports only from `types.py`, keeping it decoupled from generation concerns. This is excellent separation.\n\nOne structural note: `ProcedureStep` is defined in `types.py` (R5 of URD), but the proposal marks R5 as in-scope only transitionally. If `ProcedureStep` instances are not populated in this MVP, the type should be defined but its canonical dict should be explicitly left empty with a comment indicating \"populate in follow-up.\" The proposal should clarify this to avoid worker confusion.\n\n---\n\n### 3. Are there premature abstractions?\n\nNO. Every abstraction corresponds to a concrete entity in schema.xml:\n- `SchemaSpec` wraps all 12 entity collections — this is not over-engineering, it mirrors the schema's own grouping\n- `RoleContext` / `PhaseContext` are read-only views computed from canonical dicts — not a general framework, just typed bags of related data\n- `DelegateSpec` and `SubstepSpec` capture schema.xml child elements that already exist\n\nThe `TitleConvention` and `DependencyModel` types are less immediately critical but are present in schema.xml and thus justified as complete extraction targets for the bootstrap.\n\n---\n\n### 4. Does the architecture follow minimal complexity?\n\nYES, with a nuance about `ProcedureStep`. The proposal introduces `ProcedureStep` as a new type in `types.py` but its population in the canonical Python dicts is deferred to a future milestone (R5 is \"move procedural guidance into Python\"). The type appears in the file tree and the expanded `types.py` dataclass list, but it is unclear whether any PROCEDURE_STEPS canonical dict exists in MVP scope or not.\n\nThis is a **minor clarity gap**, not a BLOCKER. The proposal should explicitly state whether `PROCEDURE_STEPS` is populated in SLICE-1 or left as an empty dict placeholder. If it is a placeholder, the validation checklist should reflect that.\n\n---\n\n### 5. Is the source-of-truth inversion well-reasoned?\n\nYES. The proposal correctly identifies that having schema.xml as the SoT creates a friction loop: the XML must be hand-edited, then Python types must be manually kept in sync. Inverting to Python-as-SoT with generated XML output removes the manual sync burden and is the correct direction for a team that lives in Python. The bootstrap strategy (parse once, verify, then Python is SoT) is pragmatic and safe.\n\n---\n\n### 6. Slice decomposition elegance\n\nThe SLICE-1 → [SLICE-2, SLICE-3, SLICE-4] parallel fan-out is correct. The foundation must be stable before generators build on it. No slice is overly large or too narrow.\n\nOne note: SLICE-3 (gen_skills.py) includes Jinja2 templates for all 4 roles plus a base command template plus macros. This is a nontrivial content authoring task in addition to code. The proposal does not specify who authors the template content (what goes into `role_architect.j2`, etc.) or what the template expansion contract is. This is a scoping concern that the worker for SLICE-3 will need to resolve, but it is not a design flaw — it is expected work for an MVP of this kind.\n\n---\n\n### Conclusion\n\nThe design is proportionate to the real problem (38-file drift, 1,314-line schema, runtime context gap). Every module has a single responsibility. Jinja2 is justified. The SoT inversion is sound. The only gap is a clarity ambiguity about `ProcedureStep` population scope in SLICE-1, which is minor enough that implementors can resolve it from context.\n\nVOTE: ACCEPT","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-5tr0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-C-1: v2 schema-driven engine","updated_at":"2026-02-26T07:22:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"74b20de83bba62bf2d34f34bdd48fc9dfc3835a74bcb60c9edef0c0127242ae3","created_at":"2026-02-25T22:14:56Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-a1bn\n  impl_plan: aura-plugins-24cr\n---\n## Scope\n\nRestructure skills/protocol/PROCESS.md Phase 9 (Worker Slices):\n\n1. Introduce \"Ride the Wave\" as the execution concept name\n2. Add Worker Persistence rules:\n   - Workers do NOT shut down after completing implementation\n   - Workers stay alive for review-fix cycles\n   - Workers notify supervisor when implementation complete\n3. Add Slice Closure rules:\n   - Slices MUST NOT be closed immediately upon worker completion\n   - Slices must be reviewed at least once by Cartographers\n   - Only the supervisor closes slices, after review passes\n\n## Files Owned\n- skills/protocol/PROCESS.md (Phase 9 section only)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-5y1j","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-L2: PROCESS.md Phase 9 — add persistence rules (no early close, workers stay alive)","updated_at":"2026-02-25T22:50:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-4 (interfaces.py) important-level findings.\n\n## Finding: ConstraintValidatorInterface.validate() type annotation uses forward references (EpochState, ConstraintViolation) hidden behind TYPE_CHECKING — isinstance() test with inline ConcreteValidator returns True even though the type signatures differ (IMPORTANT)\n\nIn interfaces.py, the Protocol uses:\n    from aura_protocol.constraints import ConstraintViolation  (TYPE_CHECKING only)\n    from aura_protocol.state_machine import EpochState         (TYPE_CHECKING only)\n\nThe Protocol method signature is:\n    def validate(self, state: EpochState) -\u003e list[ConstraintViolation]: ...\n\nAt runtime (non-TYPE_CHECKING), EpochState and ConstraintViolation are NOT available as types in the Protocol method signature. Python's runtime_checkable only checks method PRESENCE, not signatures. The test:\n\n    class ConcreteValidator:\n        def validate(self, state: object) -\u003e list:  # different type annotations\n            return []\n    assert isinstance(ConcreteValidator(), ConstraintValidatorInterface)  # True\n\nThis PASSES, which is correct Python behavior for @runtime_checkable. However, the test does not verify that the production RuntimeConstraintChecker (the intended implementor of this protocol) would itself satisfy isinstance(checker, ConstraintValidatorInterface).\n\nRecommendation: Add a test that verifies isinstance(RuntimeConstraintChecker(), ConstraintValidatorInterface). This is the AC9 integration test that closes the loop between the Protocol definition and its actual production implementor.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-5zf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-22T17:24:09Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T04:25:45Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"47a704d1942d0aee7799d38627c405f103a18cf4f7a5e26bf2d13bb41911e915","created_at":"2026-02-23T04:24:19Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer A on SLICE-2. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-635d","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-23T04:25:45Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":null,"closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T04:18:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  origin: aura-plugins-bj1 (observed during impl UAT)\n---\n## Problem\n\nThe supervisor skill defines a standing explore team (TeamCreate) for codebase exploration during Phase 8, but:\n\n1. The supervisor is not consistently adhering to the standing research team directive in practice\n2. The architect skill (Phases 1-7) has NO equivalent standing research team — it explores the codebase directly\n3. The architect and supervisor should share the SAME standing research team, not have separate ones\n\n## User Request (verbatim)\n\n\"I'm noticing that when I run the /supervisor skill defined in the skills/supervisor/SKILL.md, the supervisor is not adhering to the standing research team directive we've given it. A standing research team should exist for the architect too. Actually, they should be the same research team.\"\n\n## Scope\n\n- Unify the standing research/explore team across architect and supervisor roles\n- Update skills/architect/SKILL.md to include standing explore team setup\n- Update skills/supervisor/SKILL.md to reference the shared team\n- Update schema.xml to reflect the shared team in role definitions\n- Ensure the team persists across the architect→supervisor handoff (p7)\n- Consider: should the team be created in Phase 1 (architect starts) and survive through Phase 12 (supervisor ends)?\n\n## Classification (preliminary)\n- Scope: cross-cutting (affects multiple skills, protocol docs, schema)\n- Complexity: medium (design decision on team lifecycle + persistence across handoff)\n- Risk: internal-only (no external API changes)\n- Novelty: familiar (extending existing pattern)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-63f","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"open","target":"","timeout_ns":0,"title":"REQUEST: Unified standing research team for architect and supervisor roles","updated_at":"2026-02-22T04:18:40Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:44:42Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"fdf68f09c3a041cf12d7d024a2e47c38fd6207f4da3af81b831c8ee0b4b5ed55","created_at":"2026-02-25T22:44:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings for SLICE-1 Round 2 (Test Quality axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6405","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-2 MINOR","updated_at":"2026-02-25T22:44:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:56:47Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6d3aad5d11c2c43e7f7e061d07ede6ace7c9c1c2a9ea2320e7c95f0a975d7ecd","created_at":"2026-02-22T12:55:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer A (Correctness) on SLICE-3 (interfaces.py, test_interfaces.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6682","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 MINOR","updated_at":"2026-02-22T12:56:47Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:23:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-5 (workflow.py) important-level findings.\n\n## Finding: No full end-to-end Temporal sandbox test — WorkflowEnvironment.start_time_skipping() tests are absent — AC6 and AC7 are tested via state machine integration only, not via actual Temporal signal delivery (IMPORTANT)\n\nThe test file explicitly documents this limitation in the module docstring:\n  'When a Temporal server is available, full end-to-end sandbox tests should use WorkflowEnvironment.start_time_skipping() with the EpochWorkflow class.'\n\nThe proposal (AC6, AC7) describes Temporal-specific behavior:\n  - AC6: 'advance_phase signal is received → state machine transitions and search attributes are updated atomically'\n  - AC7: 'querying Temporal with filter AuraPhase=p9 → the workflow is returned in results'\n\nThe current tests verify that the LOGIC is correct (state machine integration tests) and that the STRUCTURE is correct (decorator introspection). They do NOT verify that:\n1. The workflow's signal handler actually calls sm.advance() correctly (the wire-up is untested end-to-end).\n2. workflow.upsert_search_attributes() is called with the correct values after a signal (search attr freshness is untested).\n3. The workflow correctly drains the pending signal queue before advancing (the pending_*_signals pattern in EpochWorkflow.run() is untested).\n\nRecommendation: Once a Temporal dev server binary is available in CI (via docker or pre-downloaded), add WorkflowEnvironment.start_time_skipping() tests for at least:\n  - One full advance_phase signal → state transition → search attribute update path\n  - One submit_vote signal → has_consensus() path\n\nThis should be tracked as a follow-up epic item. The current tests are a pragmatic v1 solution, not a permanent architecture.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-68o","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-22T17:24:09Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c7e4a6949f1b964e21fea25d47007df9323b6c21293b446fd20dccc8e0dc2659","created_at":"2026-02-27T06:55:00Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-s7dj\n  review: aura-plugins-zldt\n---\nBLOCKER findings for SLICE-1 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6btj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 BLOCKER","updated_at":"2026-02-27T06:55:00Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"079baa97dfb160f3fa82428451330b23cfbbce70baf2113ace55d4f99c978bb2","created_at":"2026-02-26T04:02:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  uat: aura-plugins-6p9j\n---\nUser feedback: 'Additionally, should print out a message saying there were no changes' when the diff produces 0 lines. Currently the script just prints 'Generated ... (N bytes)' which does not clearly indicate whether anything changed. Add explicit 'No changes — schema.xml is up to date' message when unified diff is empty.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6dac","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"IMPORTANT: gen_schema.py should print 'No changes' when diff is empty","updated_at":"2026-02-26T09:38:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ec104711c774cf3127a7065d67fccb4f5325c54ce46388b77f441e8e213c5ff0","created_at":"2026-02-26T23:45:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-cyc2\n  slices:\n    - aura-plugins-rpc4\n    - aura-plugins-zh0j\n    - aura-plugins-xehz\n    - aura-plugins-cz2t\n    - aura-plugins-oyxw\n    - aura-plugins-txgq\n---\nBLOCKER findings for FOLLOWUP correctness review round.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6dfm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP-ALL-SLICES-REVIEW-A-1 BLOCKER","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7a8df9294b1a191c8ec6b30da13c1bb2abbfe4f9525e99b6e241ba46216b3910","created_at":"2026-02-26T16:01:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-w5hi\n  review: aura-plugins-duzp\n---\nBLOCKER findings for SLICE-5 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6gb7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T16:02:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:44:48Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6360579fa121efd05068a4168de62362c0e6d712e98e44493c3682fa809aca4c","created_at":"2026-02-25T22:44:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-a1bn\n  review_round: 2\n---\nMINOR findings from Reviewer A (Correctness) on SLICE-3, Round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6hio","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-2 MINOR","updated_at":"2026-02-25T22:44:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:18Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a107c70f9fe56624eb4d718406bb71ca891b7af0afe59443499ad6db6549a409","created_at":"2026-02-22T18:18:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT\n\n## Reviewer: C (Elegance and Complexity Matching) — Round 2\n\nreferences:\n  proposal: aura-plugins-v01u\n  urd: aura-plugins-w07o\n  round1_review: aura-plugins-5tr0\n\n---\n\n## Summary\n\nPROPOSAL-2 fully resolves the two notes raised in my Round 1 ACCEPT (ProcedureStep scoping and SLICE-3 template contract). The 6 BLOCKERs from Reviewers A and B are addressed correctly. No new elegance concerns introduced by the revisions. ACCEPT stands.\n\n---\n\n## Axis C Re-evaluation: Each Sub-Axis\n\n### 1. Module Decomposition — 5 modules, single-responsibility\n\nThe five-module architecture is unchanged and remains well-scoped:\n\n- schema_parser.py — bootstrap extraction only (one-time, then verification)\n- types.py — canonical Python SoT (runtime-importable, statically defined)\n- gen_schema.py — Python → XML export\n- gen_skills.py — Python → SKILL.md generation\n- context_injection.py — runtime role/phase context lookup\n\nEach module has exactly one axis of change. The dependency graph is clean: generators depend only on types.py, never on each other. context_injection.py imports only types.py, staying decoupled from generation concerns. This is correct.\n\n### 2. Vertical Slice Separation\n\nSLICE-1 → [SLICE-2, SLICE-3, SLICE-4] fan-out is correct. All three parallel slices depend on SLICE-1's expanded types.py and nothing else. No circular slice dependencies. The slices are appropriately sized — none is either trivially small or unreasonably large.\n\n### 3. ProcedureStep Deferral — Boundary Quality\n\nPROPOSAL-2 now explicitly states: 'ProcedureStep dataclass is defined in types.py (the type exists) but PROCEDURE_STEPS dict is left empty with a TODO comment.' This is the right boundary. The type definition reserves the namespace and signals intent; the empty dict makes the MVP scope unambiguous. The validation checklist item 'ProcedureStep type defined; PROCEDURE_STEPS dict empty with TODO' directly expresses this invariant. Workers will not be confused about scope.\n\nThe deferral does NOT create an awkward gap in MVP functionality because:\n- SKILL.md bodies remain hand-written for MVP (the existing behaviour is preserved)\n- The marker-based split in gen_skills.py handles the generated header without needing ProcedureStep content\n- The follow-up is scoped correctly as post-generation-pipeline-proves-out\n\n### 4. SKILL.md Marker-Based Split — Elegance and Safety\n\nThe marker design is elegant:\n- Two HTML comments that are invisible to Markdown renderers\n- BEGIN / END pair is the minimal safe delimiter (reversible, detectable)\n- MarkerError on malformed markers (missing END, reversed) correctly refuses to guess rather than silently discarding hand-written content\n\nThe AC4a edge case matrix (missing END → raise, missing both → generate clean, reversed → raise) is the correct exhaustive coverage. The proposal correctly treats 'missing both markers' as the new-file case rather than an error — this is the right semantic.\n\nOne observation (not a concern): the proposal uses 'MarkerError(ValueError)' as the exception hierarchy. Inheriting from ValueError is appropriate — it signals a structural input error without requiring callers to import a custom exception type for basic isinstance checks. SchemaParseError(Exception) is a separate hierarchy for parsing failures. These two exception types serve distinct surfaces (file format vs XML parsing), which is clean.\n\n### 5. Error Types — Appropriate Count and Scope\n\nTwo error types for two distinct failure surfaces:\n- SchemaParseError — raised by schema_parser.py on malformed/incomplete XML input\n- MarkerError — raised by gen_skills.py on malformed SKILL.md marker structure\n\nThis is the minimum necessary set. Neither is redundant with the other. A single unified 'GenerationError' would conflate two unrelated failure domains. Creating more specific subtypes (MissingEndMarkerError, ReversedMarkerError) would be premature for MVP. The count is right.\n\n### 6. Bootstrap → Steady-State Transition\n\nThe two-phase architecture is natural and correctly scoped:\n\n  BOOTSTRAP: schema.xml → schema_parser.py → SchemaSpec → verify → expanded types.py\n  STEADY STATE: types.py → gen_schema.py / gen_skills.py / context_injection.py\n\nThe transition is a one-time event after which schema_parser.py's primary role becomes verification (round-trip consistency). This is a clean architectural seam — the bootstrap module does not pollute steady-state operation. AC10 (end-to-end pipeline test) correctly covers the full chain and validates the seam.\n\n### 7. Naming Conventions — Consistency Check\n\nSpec type names: PhaseSpec, ConstraintSpec, HandoffSpec, RoleSpec, CommandSpec, LabelSpec, ReviewAxisSpec, SubstepSpec, DelegateSpec, TitleConvention, ProcedureStep. The 'Spec' suffix is consistent across all protocol entity types; TitleConvention and ProcedureStep are convention/step nouns which is slightly inconsistent but acceptable given they are not protocol entities in the same sense. Not a blocker.\n\nDict names: PHASE_SPECS, CONSTRAINT_SPECS, HANDOFF_SPECS, ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS, REVIEW_AXIS_SPECS, TITLE_CONVENTIONS, PROCEDURE_STEPS. The plural ALL_CAPS pattern is consistent. PROCEDURE_STEPS vs PROCEDURE_SPECS is a minor inconsistency with the Spec suffix naming — but since ProcedureStep itself doesn't use 'Spec', the dict name is correct.\n\nModule names: schema_parser, gen_schema, gen_skills, context_injection. The gen_ prefix clearly distinguishes generators from the parser and runtime module. Clean.\n\n### 8. Complexity Matching\n\nThe proposal's engineering response to the problem is proportionate:\n- 1,314-line schema.xml with 7 distinct entity types → SchemaSpec with 7 dict fields (1:1)\n- 38 SKILL.md files with header/body split → marker-based generator (no over-engineering)\n- Role-level + phase-level context injection → two functions with typed return values (no framework)\n- Jinja2 templates — dev-only, StrictUndefined, industry standard (not a custom template engine)\n\nNothing in PROPOSAL-2's revisions adds complexity. The additions (AC1a, AC3a, AC4a, AC5a, AC6a, AC8 parametrized, AC10) are test coverage expansions, not architectural changes. They make the plan more correct without adding modules or abstractions.\n\n### 9. SLICE-3 Template Contract\n\nPROPOSAL-2 adds: 'Worker derives template content from existing SKILL.md files. Handoff doc will specify which SKILL.md sections map to which template variables.' This is sufficient for a plan-level document. The handoff doc specification is the correct place to define the template contract rather than the proposal itself. Workers have a clear instruction: look at existing SKILL.md files and the handoff doc. This resolves my Round 1 note.\n\n### 10. Confirming 38 SKILL.md Count\n\nskills/ directory contains 38 directories total including protocol/. protocol/SKILL.md exists. The corrected count '38 SKILL.md files' is accurate. The AC1 correction to '38 SKILL.md files' (from Reviewer A's B1 fix) is verified.\n\n---\n\n## URD Coverage (Elegance Lens)\n\n| Req | Status | Elegance Note |\n|-----|--------|---------------|\n| R1 | Clean | SchemaSpec mirrors schema.xml structure 1:1 |\n| R2 | Clean | Python-as-SoT inversion is well-motivated |\n| R3 | Clean | New spec types are frozen dataclasses (correct) |\n| R4 | Clean | Marker-based split is minimal and safe |\n| R5 | Deferred (type defined, dict empty) | Correct boundary for MVP |\n| R6 | Clean | Two-function injection API, no framework |\n| R7 | Clean | gen_schema.py → validate_schema.py round-trip |\n\n---\n\n## Conclusion\n\nPROPOSAL-2 is architecturally clean. The revisions in response to Reviewer A and B BLOCKERs are correctly scoped — none of them introduce new complexity or change the module decomposition. The five modules remain well-separated. The four slices remain cleanly dependent. The error types are appropriately minimal. The ProcedureStep deferral is correctly expressed as type-defined, dict-empty.\n\nVOTE: ACCEPT","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6hmr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-2-REVIEW-C-2: Schema-driven protocol engine v2","updated_at":"2026-02-26T07:22:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"90032c939c7c5f7f4e7f7d74ed77761a78581352aa6b51c443eba758059f3da3","created_at":"2026-02-26T04:30:46Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6ivv","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-2 BLOCKER","updated_at":"2026-02-26T04:30:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T07:31:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b3264ad26a07c06f2ef73ec765cc6c6b6b4a2ee44f3bfbcca87d2651c07dbdad","created_at":"2026-02-27T07:31:14Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-ckg0\n  urd: aura-plugins-7vtb\n  impl_plan: aura-plugins-vjsk\n---\n## Components Demonstrated\n\n### R1+R4: Rename + packages.default\nUser ran ./result/bin/aurad --help, confirmed output. ACCEPT.\n\n### R3: Persistent SQLite\nXDG auto-resolution via ExecStartPre with dbPath override. ACCEPT.\n\n### R2: aurad systemd service\nSeparate nix/aurad-service.nix, After=temporal-dev-server.service. ACCEPT.\n\n### R5: aura-msg stub\n4 subcommands (start-epoch, signal-vote, query-state, advance-phase), all exit 1 'not implemented'. ACCEPT.\n\n### R6: Doc restructure\n3-file split (architecture.md, aurad.md, aura-msg.md) with roadmaps. ACCEPT.\n\n### R7+R8: Workflow signals + ReviewAxis\nSliceProgressSignal per leaf-task, dict[ReviewAxis, VoteType] in _votes. ACCEPT.\n\n### R9: Constraint fixtures\n26 C-* constraints in YAML, 5 runnable, 21 skip. 1263 tests passing. ACCEPT.\n\n## Follow-up Items\n- Unify homeManagerModules under aura-plugins namespace (services.temporal, services.aurad, programs.*, plugins.*) with deprecation warnings for old module paths\n\n## Final Decision\nACCEPT — proceed to landing","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6kl3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT: Implementation acceptance for aurad rename + protocol improvements","updated_at":"2026-02-27T07:31:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:49:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4874ffab33adda41e7f69be24586dd6c0fb3ac8b99dc0d7e18637bbf9b6991a1","created_at":"2026-02-26T08:39:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  impl_plan: aura-plugins-uvfm\n---\n## Scope\nAdd TestSlugPinLiterals class to tests/test_gen_schema.py.\n\nTests must assert literal string comparisons (not Python-vs-Python):\n- assert any(s.id == 'S-supervisor-call-skill' for s in PROCEDURE_STEPS[RoleId.SUPERVISOR])\n- assert any(s.id == 'S-supervisor-cartographers' for s in PROCEDURE_STEPS[RoleId.SUPERVISOR])\n- assert any(s.id == 'S-worker-types' for s in PROCEDURE_STEPS[RoleId.WORKER])\n\nThese pin that slugs haven't been silently renamed.\n\n## Files\n- tests/test_gen_schema.py\n\n## Acceptance\nAC-D1-1: literal string comparisons, not Python-vs-Python cross-checks","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6lsr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-L2: D1 — literal slug pin tests in test_gen_schema.py","updated_at":"2026-02-26T08:49:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f2419090d8449a5af50798ef003427867ce72edafd1cd7b502e0541b0c04f036","created_at":"2026-02-27T06:56:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-karq\n  urd: aura-plugins-7vtb\n---\nVOTE: ACCEPT — No blockers. All R7/R8 requirements met. IMPORTANT finding for follow-up.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6m2m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1: Workflow signals + ReviewAxis type fix","updated_at":"2026-02-27T06:56:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:41Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e537245a38ec85d6b632f6bb53e7ddc5d675ee2d827a70d66836c07d3a7311fb","created_at":"2026-02-26T03:31:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  reviewer: cartographer-c\n  round: 1\n---\nIMPORTANT findings from Cartographer C (Elegance) on SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6ntg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-26T03:31:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"637a5339254d2cd1f0347661684ccd2b46d0888a4f96632480b28ba4aac5b197","created_at":"2026-02-26T23:46:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"**File:** scripts/aura_protocol/state_machine.py, line ~42\n\n**Problem:**\nThe EpochState class docstring says:\n  'review_votes keys are ReviewAxis values: \"correctness\", \"test_quality\", \"elegance\".'\n\nThe type annotation is now:\n  review_votes: dict[ReviewAxis, VoteType] = field(default_factory=dict)\n\nThe docstring uses string examples ('correctness') which are accurate at runtime (since ReviewAxis is a StrEnum), but the description 'keys are ReviewAxis values' could be read as 'the string values of ReviewAxis' rather than 'the ReviewAxis enum members themselves'. This was accurate under the old dict[str, VoteType] type but is now misleading.\n\n**Fix:**\nUpdate docstring to:\n  'review_votes keys are ReviewAxis enum members: ReviewAxis.CORRECTNESS, ReviewAxis.TEST_QUALITY, ReviewAxis.ELEGANCE.'\n\nThis is MINOR because ReviewAxis is a StrEnum and runtime behavior is correct; only the docstring is misleading.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6p08","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: EpochState docstring says keys are strings ('correctness', etc) but type is dict[ReviewAxis, VoteType]","updated_at":"2026-02-26T23:46:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:21:49Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a9f9f940514ba15821060d245fa0b3ef59a92d87546462feddc5d003fe359d74","created_at":"2026-02-26T04:01:52Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-w115\n  urd: aura-plugins-w07o\n  impl_plan: aura-plugins-94yc\n---\n## Components Demonstrated\n\n### Component 1: Runtime Context Injection (context_injection.py)\n\n**Output shown:**\nget_role_context(RoleId.SUPERVISOR) → RoleContext:\n  role: SUPERVISOR\n  phases (6): [P7_HANDOFF, P8_IMPL_PLAN, P9_SLICE, P10_CODE_REVIEW, P11_IMPL_UAT, P12_LANDING]\n  constraints (18): full list of C-* with given/when/then/should_not fields\n\n**Question asked:** Which injection model matches your intended usage?\n**Options:** Role-baseline-only (current) | Role + auto phase | Phase-only at transitions\n**User response:** Role-baseline-only (current)\n\n**Question asked (follow-up):** Was the rendering (format) of constraints correct?\n**Options:** (free text)\n**User response verbatim:** 'I thought we agreed on adding the full when / then / should / should not. Supposedly, Claude prefers structured instructions like this in an XML format, so we should support both the natural language formatting like this, and the XML format. This is great formatting, with the vertical alignment. However, I would still like these constraints numbered and titled. e.g. constraint: C-supervisor-no-impl / when: ... / then: ....'\n\n**Question asked:** Is the absence of a prompt renderer a blocking issue?\n**Options:** BLOCKER needs renderer before landing | IMPORTANT defer to follow-up | Scope clarification\n**User response:** BLOCKER — needs renderer before landing\n\n---\n\n### Component 2: gen_schema.py diff output + role-ref/phase-ref\n\n**Output shown:** Unified diff of schema.xml changes; role-ref='epoch,supervisor' comma-separated attributes\n\n**Question asked:** Is the diff behavior correct?\n**Options:** ACCEPT always-diff | REVISE skip when no changes | REVISE add --quiet flag\n**User response:** ACCEPT — always-diff is correct. Additionally, should print out a message saying there were no changes.\n\n**Question asked:** Is the role-ref comma-separated format correct?\n**Options:** ACCEPT comma-separated | REVISE space-separated | REVISE child elements\n**User response:** ACCEPT — comma-separated string\n\n---\n\n### Component 3: gen_skills.py MarkerError + body preservation\n\n**Output shown:**\nMarkerError: Missing markers in /tmp/tmpXXX.md: neither '\u003c\\!-- BEGIN GENERATED FROM schema --\u003e' nor '\u003c\\!-- END GENERATED --\u003e' found. This file has not been prepared for gen_skills.py. Add both markers (in order) to the file, then re-run.\n\n**Question asked:** Is 0/38 markers (no files prepared) the correct state for this milestone?\n**Options:** ACCEPT manual-first is intentional | REVISE add --init mode | REVISE add separate init script\n**User response:** REVISE — gen_skills.py should offer a --init mode\n\n**Question asked:** Feedback on MarkerError message quality?\n**User response verbatim:** 'Great message. Both markers should say ... GENERATED FROM aura schema'\n\n---\n\n### Component 4: ProcedureStep POC\n\n**Output shown:**\nProcedureStep fields: order, description, next_state\nPROCEDURE_STEPS[SUPERVISOR]: 6 steps (Call Skill, Read URD, TeamCreate, decompose, leaf tasks, spawn workers)\nPROCEDURE_STEPS[WORKER]: 3 steps (types, tests, impl)\nOther roles (EPOCH, ARCHITECT, REVIEWER): empty (deferred)\n\n**Question asked:** Are 3 fields sufficient for the POC, or restore full 4-field design?\n**Options:** ACCEPT 3-field sufficient | REVISE add command | REVISE restore full 4-field\n**User response:** REVISE — restore full 4-field design (add command Optional[str] + context Optional[str])\n\n**Question asked:** Is the gap (procedures not rendered into schema.xml or SKILL.md) a blocker?\n**Options:** ACCEPT data layer only | BLOCKER schema.xml must render | BLOCKER both must render\n**User response:** BLOCKER — must render into both before landing\n\n---\n\n### Component 5: schema_parser.py (R1)\n\n**Output shown:**\nparse_schema('skills/protocol/schema.xml') → SchemaSpec:\n  phases: 12, constraints: 26, handoffs: 6, roles: 5, commands: 35, labels: 21, review_axes: 3\n  Round-trip: all fields correctly typed\n\n**Question asked:** Does this satisfy R1?\n**User response:** ACCEPT — R1 satisfied\n\n---\n\n## Final Decision\nREVISE\n\n### BLOCKERs (must fix before Phase 12)\n\n1. SLICE-4: Missing prompt renderer — add render_role_context_as_text() + render_role_context_as_xml() with numbered/titled format and full GWT+S fields\n2. SLICE-3: gen_skills.py --init mode — places markers at top of files lacking them, then generates\n3. SLICE-1: ProcedureStep — restore full 4-field design: order, instruction (rename from description), command (Optional[str]), context (Optional[str])\n4. SLICE-2 + SLICE-3: Procedures must render into schema.xml (procedure-steps section) AND SKILL.md headers\n\n### IMPORTANT (can be follow-up)\n- gen_schema.py: Print 'No changes' message when diff is empty\n\n### MINOR (can be follow-up)\n- gen_skills.py: Marker text should say 'GENERATED FROM aura schema' (both markers)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6p9j","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT: Implementation acceptance for Protocol Engine v2","updated_at":"2026-02-26T07:21:49Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d8e1130b4b3b93c5a2b8d9a718661dceefcc83e1c1b94f04e1891b4375e0337a","created_at":"2026-02-26T08:38:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6r7u","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 IMPORTANT: Docstring accuracy","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:36:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3e6a51fdd13dbd48320478706df1c65fc9e7385f80622423842596432c0def3b","created_at":"2026-02-26T08:07:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-3kul\n  impl_plan: aura-plugins-147m\n---\n## Scope\nWrite 4 release integration tests using tmp_path + monkeypatch for _registry_path.\n\n## Test Cases\n1. test_release_dry_run_skips_registry_write\n2. test_release_errors_verbosely_when_registry_exists_no_match [UAT DELTA]\n3. test_check_shows_registry_info_when_found [UAT DELTA]\n4. test_double_bump_guard_prevents_duplicate_write\n\n## File\n- tests/test_aura_release.py (append integration test cases)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6ts2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"4 integration tests written and passing: dry-run, verbose error, check registry info, double-bump guard.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-L2: Tests — release integration tests (4 cases)","updated_at":"2026-02-26T08:36:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-3","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:49:50Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"64017ea91cfe480eb7bd5b986f0cb27dfaee70ee4ecd6afd54a2f3ac720ac49f","created_at":"2026-02-26T08:38:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-uvfm\n  followup_urd: aura-plugins-wloc\n  proposal: aura-plugins-9e68\n---\n## Findings in Scope\n- C1 (aura-plugins-prbl): Rename _ROLE_CONSTRAINTS/_PHASE_CONSTRAINTS in gen_schema.py\n- C2 (aura-plugins-jwoo): Move lazy import inside _constraints_for_role() to module-level\n- D1: Add literal slug pin test (assert step.id == 'S-supervisor-call-skill' etc.)\n- D2: schema_parser.py: raise SchemaParseError on missing \u003cinstruction\u003e child element\n- D3: Document next-state attribute optionality in gen_schema.py + schema_parser.py\n\n## Files Owned\n- scripts/aura_protocol/gen_schema.py   (C1, C2, D3)\n- scripts/aura_protocol/schema_parser.py (D2, D3)\n- tests/test_gen_schema.py              (C1-import update, D1)\n- tests/test_schema_parser.py           (D2 test)\n\n## Blocking Dependency\nSLICE-3 is BLOCKED BY SLICE-2 (both touch test_gen_schema.py).\nDo NOT start work until SLICE-2 is complete.\n\n## Acceptance Criteria\nAC-C1-1: Given gen_schema.py module-level constraint dicts, when module is imported, then dicts are named _CONSTRAINT_TO_ROLE_REF and _CONSTRAINT_TO_PHASE_REF (not old names). Should not leave any reference to old names anywhere in codebase.\n\nAC-C2-1: Given gen_schema.py's _constraints_for_role() function, when module is loaded, then any previously lazy import is moved to module-level. Should not introduce circular imports (verify: python -c 'import aura_protocol.gen_schema' succeeds).\n\nAC-D1-1: Given PROCEDURE_STEPS in types.py, when slug pin tests run in TestSlugPinLiterals, then 'S-supervisor-call-skill', 'S-supervisor-cartographers', and 'S-worker-types' each found as literal string comparisons. Should not assert step.id == py_step.id (Python-vs-Python).\n\nAC-D2-1 (IMPORTANT): Given a step element with id and order but no \u003cinstruction\u003e child, when parse_schema() processes it, then SchemaParseError is raised with message identifying step id and fix instructions. Should not return empty string silently.\n\nAC-D3-1: Given next-state handling in gen_schema.py and schema_parser.py, when developer reads the code, then inline comment clarifies next-state is only present/emitted when next_state is not None.\n\n## Validation Checklist\n- [ ] gen_schema.py uses _CONSTRAINT_TO_ROLE_REF and _CONSTRAINT_TO_PHASE_REF (not old names)\n- [ ] test_gen_schema.py imports updated to use new names\n- [ ] No remaining references to _ROLE_CONSTRAINTS or _PHASE_CONSTRAINTS in gen_schema.py\n- [ ] python -c 'import aura_protocol.gen_schema' succeeds (no circular imports)\n- [ ] TestSlugPinLiterals class added to test_gen_schema.py with literal string pin assertions\n- [ ] schema_parser.py raises SchemaParseError (not returns '') on missing \u003cinstruction\u003e\n- [ ] test_schema_parser.py has test verifying SchemaParseError on missing instruction\n- [ ] gen_schema.py has inline comment on next-state optionality\n- [ ] schema_parser.py has inline comment on next-state optionality\n- [ ] All 934 existing tests still pass\n- [ ] PYTHONPATH=scripts uv run python -m aura_protocol.gen_schema shows no changes (schema.xml valid)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6v80","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3: Code clarity + parser correctness (C1, C2, D1-D3)","updated_at":"2026-02-26T08:49:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:21:15Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:25:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\n### Location\n`scripts/aura_protocol/workflow.py`, `run()` method, lines 263-272:\n\n```python\ntry:\n    record = self._sm.advance(\n        advance_signal.to_phase,\n        triggered_by=advance_signal.triggered_by,\n        condition_met=advance_signal.condition_met,\n    )\nexcept Exception:\n    # TransitionError from invalid advance — skip, stay in current phase.\n    # The violation is already counted from the constraint check.\n    continue\n```\n\n### Description\nThe bare `except Exception:` catches ALL exceptions, not just `TransitionError`. This means:\n\n1. **Unexpected exceptions** (e.g., MemoryError, RuntimeError, AttributeError from a bug in state_machine.py) are silently swallowed, the workflow continues in the current phase without any indication that something went wrong.\n\n2. **Violation double-counting gap:** The comment says 'The violation is already counted from the constraint check.' But the constraint check (check_constraints activity) and the state machine's validate_advance() check overlapping but NOT identical conditions. The constraint checker checks C-* constraints; the state machine checks the transition table. A state machine TransitionError for an invalid target (not in PHASE_SPECS transition table at all) would be caught here but the constraint activity may NOT have returned violations for it (check_transition only checks consensus and handoff, not the full table).\n\n3. **Silent failure mode:** An invalid advance signal (e.g., a to_phase not in the transition table from the current phase) silently drops the signal. The workflow user has no way to know the signal was rejected unless they poll current_state(). There is no error signal or result returned to the signal sender.\n\n### Risk\nIMPORTANT (not BLOCKER) because: (1) in the happy path and even in the error path the workflow continues running; (2) the violation counter is not the primary user-facing indicator; (3) AC6 tests pass. However, silent failure of advance signals is a significant correctness concern for production use.\n\n### Suggestion\nChange to `except TransitionError as e:` to make the intent explicit and not swallow unexpected exceptions:\n```python\nexcept TransitionError:\n    # Invalid advance — stay in current phase.\n    # Violation was already counted from constraint check activity.\n    continue\n```\nThis allows unexpected exceptions to propagate and fail the workflow with a proper error, rather than silently continuing.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6wg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1 IMPORTANT: bare except Exception swallows TransitionError without distinguishing constraint vs protocol violation","updated_at":"2026-02-22T04:21:15Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cccd838294f2bfa216352c5e826a8437c0ef50be15eb60926673e77deefa5643","created_at":"2026-02-25T22:37:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-eb7q\n  review_round: 1\n---\nIMPORTANT findings from Reviewer A (Correctness) on SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6xt9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-25T22:37:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e1a537f3f2ae01f6802888466a8e3208c5f8d04ba45589b790385dc46c9205a3","created_at":"2026-02-25T22:37:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-eb7q\n  review_round: 1\n---\nBLOCKER findings from Reviewer A (Correctness) on SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6ymd","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 BLOCKER","updated_at":"2026-02-25T22:37:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-1","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:08Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:31:06Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  uat: aura-plugins-nfr\n  impl_plan: aura-plugins-bch\n---\n\n## Specification\n\nFix 4 UX issues identified during UAT-2 in bin/aura-release error messages.\n\n## Files Owned\n- bin/aura-release (lines ~430-465: CLI/main, lines ~305-341: cmd_release pre-flight, lines ~286-302: cmd_check)\n\n## Issues to Fix\n\n### Issue 1: No-args error message needs actionable examples\n**Current (line 459):**\n  bump type required (major, minor, or patch). Use --check for consistency validation.\n**Required:** Show example commands:\n  aura-release patch           # bump patch version\n  aura-release minor           # bump minor version\n  aura-release --check         # check version consistency\n  aura-release patch --dry-run # preview changes\n\n### Issue 2: Drift error needs to suggest exact fix command\n**Current (lines 337-340):**\n  Error: version drift detected:\n    pyproject.toml: 0.2.2\n    ...\n  Use --sync to align before bumping.\n**Required:** Show the exact command the user should run, e.g.:\n  Try: aura-release \u003cbump\u003e --sync\n  (where \u003cbump\u003e is the bump_kind the user already passed)\n\n### Issue 3: --sync should explain what needs to be clean\n**Current (lines 321-324):**\n  Error: working tree has uncommitted changes (outside .beads/).\n  Commit or stash them first.\n**Required:** Briefly explain WHAT needs to be clean: tracked files outside .beads/ must have no uncommitted changes. The .beads/ directory is always excluded from the clean-tree check.\n\n### Issue 4: Overall — all error paths should guide user to next action\nEvery error exit should end with a concrete \"Try: ...\" or \"Next: ...\" suggestion.\n\n## Acceptance Criteria\nGiven a user runs aura-release with no args, when they see the error, then the message shows example commands they can copy-paste.\nGiven a user runs aura-release patch and versions are drifted, when they see the drift error, then the message shows the exact command with --sync to fix it.\nGiven a user runs aura-release and the working tree is dirty, when they see the error, then the message explains what files need to be clean.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6yr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: Fix CLI UX error messages in bin/aura-release","updated_at":"2026-02-22T10:40:08Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d33dad9de5f24944ae4fc2ac9b5b7bbbd386dad5e6c0f19d4e6f2d8e21e89cd1","created_at":"2026-02-26T15:25:58Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  urd: aura-plugins-2ojv\n  supersedes: aura-plugins-vbrj\n  uat: aura-plugins-m9p1\n---\n\n# PROPOSAL-11: Aura Protocol v3 Temporal Engine (UAT Amendments)\n\nSupersedes PROPOSAL-10 (aura-plugins-vbrj). Incorporates 3 user revisions from Plan UAT (aura-plugins-m9p1). No reviewer cycle required — UAT revisions are direct user decisions.\n\n---\n\n## UAT-1: SerializablePhaseSpec for cross-workflow boundary\n\n### Problem\nPROPOSAL-10 passed only `phase_id: PhaseId` and had child workflows reconstruct PhaseSpec from the PHASE_SPECS registry. User prefers explicit serialization of the spec data.\n\n### Design\nIntroduce `SerializablePhaseSpec` — a frozen dataclass mirroring `PhaseSpec` but with JSON-serializable field types:\n\n```python\n@dataclass(frozen=True)\nclass SerializableTransition:\n    to_phase: PhaseId\n    condition: str\n    action: str | None = None\n\n@dataclass(frozen=True)\nclass SerializablePhaseSpec:\n    id: PhaseId\n    number: int\n    domain: Domain\n    name: str\n    owner_roles: list[RoleId]        # list, not frozenset\n    transitions: list[SerializableTransition]  # list, not tuple\n\n    @staticmethod\n    def from_spec(spec: PhaseSpec) -\u003e 'SerializablePhaseSpec':\n        return SerializablePhaseSpec(\n            id=spec.id,\n            number=spec.number,\n            domain=spec.domain,\n            name=spec.name,\n            owner_roles=sorted(spec.owner_roles, key=lambda r: r.value),\n            transitions=[\n                SerializableTransition(to_phase=t.to_phase, condition=t.condition, action=t.action)\n                for t in spec.transitions\n            ],\n        )\n```\n\nUpdated PhaseInput:\n```python\n@dataclass(frozen=True)\nclass PhaseInput:\n    epoch_id: str\n    phase_spec: SerializablePhaseSpec   # was: phase_id: PhaseId only\n```\n\n**Temporal serializability:** All fields are StrEnum (PhaseId, Domain, RoleId), str, int, or list of the above. No frozenset, no tuple — fully JSON-serializable via Temporal's DataConverter.\n\nChild workflows use `input.phase_spec.id` for PhaseId access and `input.phase_spec.owner_roles` for role membership.\n\n---\n\n## UAT-2: Module-level AuditTrail singleton\n\n### Problem\nPROPOSAL-10 used class-based AuditActivities for DI. User prefers a module-level singleton (simpler registration, no class wrapping).\n\n### Design\n```python\n# scripts/aura_protocol/audit_activities.py\n\n_AUDIT_TRAIL: AuditTrail | None = None\n\ndef init_audit_trail(trail: AuditTrail) -\u003e None:\n    \"\"\"Initialize the module-level AuditTrail for worker activities.\n\n    Must be called before starting the Temporal worker. Tests call this\n    to inject a mock/stub: init_audit_trail(InMemoryAuditTrail()).\n    \"\"\"\n    global _AUDIT_TRAIL\n    _AUDIT_TRAIL = trail\n\n@activity.defn\nasync def query_audit_events(\n    epoch_id: str,\n    phase: PhaseId | None = None,\n) -\u003e list[AuditEvent]:\n    \"\"\"Query audit events. ACTIVITY-ONLY — do not call from workflow context.\"\"\"\n    if _AUDIT_TRAIL is None:\n        raise ApplicationError('AuditTrail not initialized — call init_audit_trail() before starting worker', non_retryable=True)\n    return await _AUDIT_TRAIL.query_events(epoch_id=epoch_id, phase=phase)\n```\n\nWorker registration:\n```python\ninit_audit_trail(InMemoryAuditTrail())\nworker = Worker(client, task_queue='aura', activities=[query_audit_events])\n```\n\nActivity call from workflow (module-level function, so workflow.execute_activity, not execute_activity_method):\n```python\nfrom aura_protocol.audit_activities import query_audit_events\n\nresult = await workflow.execute_activity(\n    query_audit_events,\n    args=[self._epoch_id, PhaseId.P4_REVIEW],\n    start_to_close_timeout=timedelta(seconds=30),\n)\n```\n\n**Testability:** init_audit_trail(InMemoryAuditTrail()) is the test injection point. Tests call init_audit_trail before executing activities via ActivityEnvironment.\n\n---\n\n## UAT-3: Fail-fast P9_SLICE failure mode\n\n### Problem\nPROPOSAL-10 did not specify failure mode. User prefers fail-fast: cancel remaining slices on first failure.\n\n### Design\n```python\n# In EpochWorkflow.run(), Phase 9 execution:\nhandles = [\n    await workflow.start_child_workflow(\n        SliceWorkflow.run,\n        PhaseInput(epoch_id=self._epoch_id, phase_spec=SerializablePhaseSpec.from_spec(PHASE_SPECS[PhaseId.P9_SLICE])),\n        id=f'{self._epoch_id}-slice-{s.id}',\n    )\n    for s in slices\n]\n\ntry:\n    done, pending = await workflow.wait(\n        set(handles),\n        return_when=asyncio.FIRST_EXCEPTION,\n    )\n    # Check if any completed slice failed\n    for h in done:\n        try:\n            await h\n        except Exception as e:\n            # First failure: cancel all pending slices\n            for p in pending:\n                await p.cancel()\n            raise  # propagate to supervisor for review\nexcept Exception:\n    # Phase 9 failed — record and surface to supervisor\n    raise\n```\n\n**Rationale:** Fail-fast gives the supervisor faster feedback. Slices are designed as independent vertical units — a failure in one is typically not recoverable by other slices completing anyway. Cancel pending work, report the failure, restart with a fix.\n\n---\n\n## Everything else unchanged from PROPOSAL-10\n\n- ReviewVoteSignal.axis: ReviewAxis ✓\n- tool_call_id: str | None = None ✓\n- AuditTrail.query_events(epoch_id, phase, role) \\u2014 epoch_id optional in Protocol, required in activity ✓\n- workflow.execute_activity_method for class-method activities (N/A now — UAT-2 uses module-level function with execute_activity) ✓\n- child_handle.signal() guarded with try/except ApplicationError ✓\n- asyncio.gather PROHIBITED \\u2014 workflow.wait() mandated ✓\n- Class-level @workflow.signal decorators in child workflows ✓\n- _REVISE_DRIVES_BACK_PHASES private constant ✓\n- FileWithUri(uri, name, mime_type), FilePart.file_with_uri: FileWithUri ✓\n- NullTranscriptRecorder + NullSecurityGate (R12 stub labels) ✓\n- No agent-client-protocol dependency in v3 core ✓\n- 5 slices ✓\n- Infrastructure: bin/worker.py + nix/temporal-service.nix + NixOS systemd user module ✓\n- Test baseline: 945 existing tests ✓\n\n## Decision log (UAT amendments)\n\nD14 (UAT-1): SerializablePhaseSpec — list[RoleId] + list[SerializableTransition] for Temporal JSON serializability. PhaseInput carries the full spec, not just phase_id.\nD15 (UAT-2): Module-level _AUDIT_TRAIL singleton + init_audit_trail() injection point. Free @activity.defn function. Simpler registration.\nD16 (UAT-3): Fail-fast P9_SLICE — workflow.wait(FIRST_EXCEPTION), cancel pending on first failure.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6zbz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-11: v3 Temporal engine — UAT amendments (SerializablePhaseSpec, singleton AuditTrail, fail-fast slices)","updated_at":"2026-02-26T15:25:58Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"supervisor","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"42a7aea3ba3fa410b0bf1c093b6ed993c0c907012b8e8727ee6756cd87832839","created_at":"2026-02-26T15:26:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  urd: aura-plugins-2ojv\n  ratified_proposal: aura-plugins-6zbz\n  uat: aura-plugins-m9p1\n---\n\n# Handoff: Aura Protocol v3 Temporal Engine\n\n## Ratified Design\n\nPROPOSAL-11 (aura-plugins-6zbz) is the final ratified design. Key decisions:\n\n## Architecture\n\n**Topology:** Hybrid — sequential phases as activities in EpochWorkflow; P4_REVIEW, P9_SLICE, P10_CODE_REVIEW as child workflows.\n\n**PhaseInput boundary:**\n```python\n@dataclass(frozen=True)\nclass SerializableTransition:\n    to_phase: PhaseId\n    condition: str\n    action: str | None = None\n\n@dataclass(frozen=True)\nclass SerializablePhaseSpec:\n    id: PhaseId; number: int; domain: Domain; name: str\n    owner_roles: list[RoleId]           # list, not frozenset\n    transitions: list[SerializableTransition]  # list, not tuple\n    \n    @staticmethod\n    def from_spec(spec: PhaseSpec) -\u003e 'SerializablePhaseSpec': ...\n\n@dataclass(frozen=True)\nclass PhaseInput:\n    epoch_id: str\n    phase_spec: SerializablePhaseSpec\n\n@dataclass(frozen=True)\nclass PhaseResult:\n    phase_id: PhaseId\n    success: bool\n    blocker_count: int = 0\n    vote_result: VoteType | None = None\n```\n\n**AuditTrail injection (module-level singleton):**\n```python\n_AUDIT_TRAIL: AuditTrail | None = None\n\ndef init_audit_trail(trail: AuditTrail) -\u003e None: ...\n\n@activity.defn\nasync def query_audit_events(epoch_id: str, phase: PhaseId | None = None) -\u003e list[AuditEvent]:\n    if _AUDIT_TRAIL is None:\n        raise ApplicationError('AuditTrail not initialized', non_retryable=True)\n    return await _AUDIT_TRAIL.query_events(epoch_id=epoch_id, phase=phase)\n```\n\n**P9_SLICE failure mode:** Fail-fast — workflow.wait(FIRST_EXCEPTION), cancel pending slices on first failure.\n\n**Review vote tracking:**\n```python\n_votes: dict[ReviewAxis, VoteType] = {}  # ReviewAxis is StrEnum\n\n@workflow.signal\ndef submit_vote(self, signal: ReviewVoteSignal) -\u003e None:\n    self._votes[signal.axis] = signal.vote\n\nawait workflow.wait_condition(lambda: all(ax in self._votes for ax in ReviewAxis))\n```\nReviewVoteSignal.axis: ReviewAxis (was: str)\n\n**asyncio.gather PROHIBITED** — use workflow.wait() / workflow.as_completed() for parallel child workflows.\n\n**Child workflow signal race:** ChildWorkflowHandle retained from start_child_workflow; child_handle.signal() wrapped in try/except ApplicationError.\n\n**Interface changes:**\n- FileWithUri(uri, name, mime_type); FilePart.file_with_uri: FileWithUri\n- ToolCall: raw_input, raw_output, tool_call_id: str | None = None\n- AuditTrail.query_events(*, epoch_id: str | None, phase: PhaseId | None, role: RoleId | None)\n- _REVISE_DRIVES_BACK_PHASES (private, was _REVISE_DRIVES_BACK)\n- NullTranscriptRecorder + NullSecurityGate (R12 stub labels)\n- No agent-client-protocol dependency\n\n**Infrastructure:**\n- bin/worker.py: Temporal worker entry point\n- nix/temporal-service.nix: systemd user service for Temporal server\n- NixOS homeManagerModules.temporal-service\n\n## Implementation Slices\n\n| Slice | Scope |\n|-------|-------|\n| SLICE-1 | SerializablePhaseSpec + SerializableTransition + PhaseInput + PhaseResult + hybrid topology doc |\n| SLICE-2 | Interface + A2A types: FileWithUri, FilePart.file_with_uri, ToolCall rename, ReviewVoteSignal.axis |\n| SLICE-3 | AuditTrail: epoch_id param + init_audit_trail + query_audit_events @activity.defn |\n| SLICE-4 | Infrastructure: bin/worker.py + nix/temporal-service.nix + NixOS systemd user module |\n| SLICE-5 | Tests: contract tests for all new types + P9_SLICE fail-fast + 945 baseline |\n\n## Supervisor Instructions\n\n1. Call Skill(/aura:supervisor) immediately\n2. Use ONLY Sonnet workers (not Opus) for implementation slices\n3. Repeat worker-review cycle until no BLOCKER or IMPORTANT items remain in code review (Phase 10)\n4. Cartographers (3) must be created via TeamCreate before any exploration — do NOT shut them down between phases 8-10 (Ride the Wave)\n5. Full proposal: bd show aura-plugins-6zbz\n6. URD: bd show aura-plugins-2ojv\n7. REQUEST: bd show aura-plugins-eocq","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-6zro","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"in_progress","target":"","timeout_ns":0,"title":"HANDOFF: v3 Temporal Engine — Architect → Supervisor","updated_at":"2026-02-26T15:30:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3106099564dbee71f9401cb2be9205022265b65217b8ac50a39d3ccededc6d7c","created_at":"2026-02-23T04:26:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer B (Test Quality) on SLICE-2 (Schema.xml Generator with Diff + role-ref/phase-ref). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-76ab","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 MINOR","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-22T17:43:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"90517af197ae69c803dd08576029c6a29f8ba578f03da8def04c1394a6dbc64c","created_at":"2026-02-22T17:42:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"agent-data-leverage .beads/metadata.json was missing dolt_mode:server, causing bd to look for local .beads/dolt/ directory (embedded mode default). Fixed by adding dolt_mode:server to metadata.json.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-77q6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"Fix agent-data-leverage metadata.json missing dolt_mode","updated_at":"2026-02-22T17:43:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-23T04:26:24Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b7929f5024aa4c0dd393c6f8466668e48bd3454b26f1bde343c14fcfcb1f4325","created_at":"2026-02-23T04:26:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer B (Test Quality) on SLICE-1 (Schema Parser + Type Expansion + Bootstrap Codegen). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-782x","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 BLOCKER","updated_at":"2026-02-23T04:26:24Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a5b54856e71bce4cc395bba4591d116d622867c60ace2cd2a59d097aed8adf5d","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-797c","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-2 MINOR","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cdf52b23ec4c704461e73e07e880e8613babbfc219b67e5dbaf824d5c8b6cc98","created_at":"2026-02-26T12:56:59Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  elicit: aura-plugins-ollt\n  urd: aura-plugins-2ojv\n  supersedes: aura-plugins-ndxz\n---\n## 1. Executive Summary\n\nTargeted correction from PROPOSAL-4. Addresses one fundamental architectural error:\n\nPROPOSAL-4 claim: 'Aura acts as ACP Agent (outbound sender). Agentfilter is the ACP Client.'\nCorrect model (per URD R15 + user clarification):\n- Aura control layer (EpochWorkflow) = ACP **Client** (orchestrates agents, receives SessionUpdates)\n- Claude Code / OpenCode = ACP **Agent** (does the work, sends SessionUpdates to Client)\n- Agentfilter = ALSO ACP Client (permission brokering/oversight)\n\nAll other content is carried forward unchanged from PROPOSAL-4.\n\n---\n\n## 2. Corrected AcpTranscriptRecorder design\n\n### 2.1 URD R15 requirement (verbatim)\n\n'TranscriptRecorder stub in interfaces.py MUST be redesigned with an ACP Client interface in mind.\nPrimary method should be session_update(notification: SessionUpdate) mirroring ACP Client.SessionUpdate().\nTranscriptRecorder should subclass or implement acp.client base class.'\n\n### 2.2 ACP Client.session_update signature (from acp.interfaces)\n\n```python\nfrom acp.interfaces import Client  # import path\n\n# Client.session_update signature:\nasync def session_update(\n    self,\n    session_id: str,\n    update: UserMessageChunk | AgentMessageChunk | AgentThoughtChunk\n           | ToolCallStart | ToolCallProgress | AgentPlanUpdate\n           | AvailableCommandsUpdate | CurrentModeUpdate\n           | ConfigOptionUpdate | SessionInfoUpdate | UsageUpdate,\n    **kwargs: Any,\n) -\u003e None: ...\n```\n\n### 2.3 Corrected AcpTranscriptRecorder stub\n\n```python\nclass AcpTranscriptRecorder(Client):\n    \"\"\"ACP Client + TranscriptRecorder bridge for Epoch lifecycle recording.\n\n    DIRECTION:\n      Aura control layer (EpochWorkflow) = ACP CLIENT.\n      Claude Code / OpenCode = ACP AGENTS.\n      Agentfilter = also ACP Client (permission broker — separate concern).\n\n    INBOUND (ACP → Aura): Override session_update() to receive SessionUpdate\n      notifications FROM Claude Code / OpenCode agents. Internally, forwards\n      to EpochWorkflow via AcpRawSignal Temporal signal.\n\n    OUTBOUND (Aura internal): The domain methods record_phase_transition(),\n      record_constraint_check(), record_review_vote() are called by Aura\n      activities to record Epoch state changes. These may emit ACP-compatible\n      events to observability/audit systems in a future epic.\n\n    Implements acp.interfaces.Client. Client methods unrelated to session\n    recording (write_text_file, create_terminal, etc.) are NO-OP stubs\n    with stub labels per R12.\n\n    STUB — Motivation: bridge ACP agent session updates (from Claude Code /\n    OpenCode) into EpochWorkflow Temporal signals, and record Epoch lifecycle\n    events for audit. Added in aura-plugins v3 (epoch: aura-plugins-eocq).\n    Expected implementation: when ACP client connection to Claude Code /\n    OpenCode agents is established via acp.interfaces.Client.\n    \"\"\"\n\n    # ── ACP Client interface — primary INBOUND handler ──────────────────\n    async def session_update(\n        self,\n        session_id: str,\n        update: Any,  # acp.interfaces.SessionUpdate union — inside activity only\n        **kwargs: Any,\n    ) -\u003e None:\n        \"\"\"Receive ACP SessionUpdate FROM Claude Code / OpenCode agent.\n        Forward to EpochWorkflow as AcpRawSignal via Temporal signal.\n        Stub: see class docstring for expected implementation.\n        \"\"\"\n        ...\n\n    # Other Client methods — NO-OP stubs (per R12 stub labeling)\n    async def request_permission(self, *args: Any, **kwargs: Any) -\u003e Any:\n        \"\"\"STUB — delegated to AcpSecurityGate (R17). See SecurityGate interface.\"\"\"\n        ...\n\n    # write_text_file, read_text_file, create_terminal, terminal_output,\n    # release_terminal, wait_for_terminal_exit, kill_terminal, ext_method,\n    # ext_notification, on_connect — all NO-OP stubs (not needed for Epoch recording)\n\n    # ── TranscriptRecorder domain interface — OUTBOUND recording hooks ──\n    async def record_phase_transition(self, event: PhaseTransitionEvent) -\u003e None:\n        \"\"\"Record Aura phase transition (called by Aura activities, not ACP agents).\n        Stub: map event to ACP-compatible representation and emit to audit trail.\n        \"\"\"\n        ...\n\n    async def record_constraint_check(self, event: ConstraintCheckEvent) -\u003e None: ...\n    async def record_review_vote(self, event: ReviewVoteEvent) -\u003e None: ...\n```\n\n### 2.4 Bidirectional ACP data flow (corrected)\n\n```\nINBOUND (Claude Code → Aura control layer):\n  Claude Code / OpenCode (ACP Agent) sends SessionUpdate\n    → AcpTranscriptRecorder.session_update() [Client callback — receives update]\n      → Serialize to AcpRawSignal(session_id, event_type: AuraSignalType, payload_json)\n        → EpochWorkflow.acp_session_update(@workflow.signal)\n          → _pending_acp_raw queue\n            → map_acp_event(@activity.defn) → AcpMappedSignal\n              → _pending_advance / _pending_votes queues (existing mechanism)\n\nOUTBOUND (Aura activities → audit/observability):\n  Aura @activity.defn calls record_transition()\n    → AcpTranscriptRecorder.record_phase_transition(PhaseTransitionEvent)\n      → Stub: future implementation maps to ACP-compatible audit event\n        → Destination TBD: AuditTrail (SA), or separate ACP session toward Agentfilter\n```\n\n---\n\n## 3. Files changed (delta from PROPOSAL-4)\n\n| File | Change |\n|------|--------|\n| scripts/aura_protocol/interfaces.py | AcpTranscriptRecorder: implements Client (from acp.interfaces); session_update override; stub method list; corrected DIRECTION docstring |\n\nAll other files from PROPOSAL-4 are unchanged.\n\n---\n\n## 4. Updated design decisions\n\nD17 (replaces PROPOSAL-4 D17): AcpTranscriptRecorder extends acp.interfaces.Client (not AgentSideConnection). Aura control layer = ACP Client. Claude Code / OpenCode = ACP Agents. session_update() is the primary INBOUND method. Domain methods (record_phase_transition, etc.) are Aura-internal OUTBOUND recording hooks, NOT ACP API calls.\n\n---\n\n## 5. Acceptance criteria (additions to PROPOSAL-4 AC1-AC25)\n\nAC26: AcpTranscriptRecorder class is a subclass/implementor of acp.interfaces.Client. isinstance(AcpTranscriptRecorder(), Client) is True.\nAC27: AcpTranscriptRecorder.session_update() is the primary INBOUND handler. Stub docstring includes DIRECTION note: Aura = ACP Client, Claude Code/OpenCode = ACP Agents.\nAC28: AcpTranscriptRecorder stub docstring does NOT claim 'Aura acts as ACP Agent'. Correct direction stated.\nAC29: Other Client methods (write_text_file, create_terminal, etc.) are NO-OP stubs with R12-compliant stub labels.\nAC30: TranscriptRecorder Protocol (existing 3 domain methods) remains unchanged — AcpTranscriptRecorder also implements these as outbound recording hooks.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7csc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-5: Protocol Engine v3 — AcpTranscriptRecorder as ACP Client (corrected)","updated_at":"2026-02-26T12:56:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:21Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:23:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-4 (interfaces.py) — MINOR findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7d2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 MINOR","updated_at":"2026-02-22T17:24:21Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1831a623eee9d1292b01719f73324c5abf994c0b22f177e3abcab670f27bf126","created_at":"2026-02-26T08:38:30Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7f2h","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 MINOR: Test Quality","updated_at":"2026-02-26T08:38:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:21:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:00:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - The proposal faithfully serves the user's original request across all 8 URD requirements. R1 (machine-executable protocol) is the core deliverable and is thoroughly addressed with 5 well-scoped modules. R2-R3 are correctly deferred to v2/v3 per the user's explicit 3-version roadmap. R4-R8 are addressed proportionally to v1 scope.\n\n## Correctness Findings\n\n### Transition Table Design\nThe 12-phase transition table is derived directly from schema.xml transitions. Forward transitions, revision loops (p4-\u003ep3, p10-\u003ep9, p5-\u003ep3, p11-\u003ep9), and the terminal p12-\u003ecomplete are all accounted for. The PhaseId.COMPLETE sentinel correctly represents the terminal state without a corresponding PhaseSpec. The integration test (test_schema_types_sync.py) is a strong safeguard against type drift.\n\n### Temporal Integration\nSignals for mutations (advance_phase, submit_vote), queries for reads (current_state, available_transitions), search attributes for forensics (5 typed keys), and activities for I/O (check_constraints, record_transition) — all follow correct Temporal patterns. Determinism is preserved by keeping workflow code side-effect-free with all I/O in activities.\n\n### Engineering Tradeoffs\nAll 8 tradeoffs are well-justified and internally consistent: hand-rolled SM for fixed topology, one workflow per epoch for v1 simplicity, dataclasses for Temporal SDK compatibility, typing.Protocol for structural subtyping across repo boundaries, scripts/ package location matching existing pythonpath.\n\n### Review Consensus and BLOCKER Gates\nAC2 (consensus requires 3 ACCEPT votes) and AC4 (BLOCKER count \u003e 0 blocks p10-\u003ep11) correctly model the schema.xml constraints C-review-consensus and the p10 transition condition \"all 3 reviewers ACCEPT, all BLOCKERs resolved.\"\n\n### Minor Observations (Non-Blocking)\n1. A2A TaskState enum is mentioned in the URD (R5) and tradeoff table but not included in the module definitions. PhaseId covers lifecycle states, so this is not a functional gap, but should be tracked for A2A compliance completeness.\n2. EpochState uses set[PhaseId] and dict[str, VoteType] which will need Temporal serialization handling — this is an implementation detail, not a design flaw, and will be caught by test_workflow.py integration tests.\n3. The proposal could explicitly state how the follow-up lifecycle (schema.xml followup-lifecycle section) maps to the state machine — whether FOLLOWUP_* phases reuse the same EpochStateMachine or create a new instance. This does not block v1 since follow-up is triggered after code review, but clarifying the design intent would help implementers.\n\n### Verdict\nAll 6 end-user alignment criteria satisfied. No BLOCKER issues. The proposal is technically consistent with its stated rationale, faithfully addresses the URD requirements within v1 scope, and the public interfaces are sufficient for the MVP goals.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7gm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-A-1: aura protocol engine v1","updated_at":"2026-02-22T04:21:05Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:19:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:24:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT\n\n## Review Summary (Reviewer C — Elegance and Complexity Proportionality)\n\nSLICE-4 (interfaces.py) is the most externally-facing slice and the design is proportionate to v1 scope.\n\n### Strengths\n- typing.Protocol + @runtime_checkable is the correct choice for cross-repo structural subtyping. External repos (unified-schema, agentfilter) implement the interface without any dependency on aura-plugins' class hierarchy. This is exactly the right use of structural subtyping.\n- The 4 Protocols (ConstraintValidatorInterface, TranscriptRecorder, SecurityGate, AuditTrail) map cleanly to the 4 external system boundaries defined in the URD. No extra interfaces speculating on future needs.\n- TYPE_CHECKING guard for ConstraintViolation and EpochState imports avoids circular imports at runtime while keeping the method signatures fully typed. Clean Python idiom.\n- TextPart / FilePart / DataPart as a Part union type alias is the minimal A2A content type hierarchy for v1 — correct scoping. Full hierarchy is explicitly deferred to v2/v3.\n- ModelId.parse() using str.partition('/') splits on the first '/' only, correctly handling org/team/model formats. The error message is specific and actionable.\n- The re-export of event stub types from interfaces.py (in __all__) allows callers to import all integration-related types from one place. Good ergonomics.\n\n### Minor Finding\n- aura-plugins-eqy: DataPart.data, ToolCall.tool_input, ToolCall.tool_output typed as bare dict — should be dict[str, Any] for consistency with the rest of the typed codebase.\n\n### Verdict\nNo BLOCKER or IMPORTANT findings. One MINOR finding. SLICE-4 ACCEPT.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7iy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1: interfaces.py — Integration interfaces and A2A types","updated_at":"2026-02-22T04:19:54Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f830830b344fae01b048960174c2c3705884a8f7796d2983ea3ffd183b2ec036","created_at":"2026-02-26T03:09:02Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-cuuw\n  urd: aura-plugins-s7l0\n  proposal: aura-plugins-pcs6\n  handoff: aura-plugins-lnce\n---\n## Slices\n\n### SLICE-1: Delete dead code (bin/aura-release lines 32-57)\n- Edit bin/aura-release: remove lines 32-57 inclusive\n- Verify: grep confirms no remaining references to deleted symbols\n\n### SLICE-2: Add regression test (tests/test_aura_release.py)\n- Create tests/test_aura_release.py with TestDiscoverVersionFiles (Cases A-D)\n- Run pytest tests/test_aura_release.py — all 4 pass","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7iy2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"IMPL_PLAN: aura-release dead code + test","updated_at":"2026-02-26T03:09:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:37Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b69dce569b53a53c98c41d4c39b4355c3b7817df43c19758b0391cd76ea9de89","created_at":"2026-02-23T04:27:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"AC8 requires Jinja2 templates to render with StrictUndefined. The tests in test_gen_skills.py::TestTemplateRenderingAllRoles only verify that rendering succeeds — they do not verify that StrictUndefined mode is active by testing that an undefined variable raises jinja2.UndefinedError.\n\nThe production code in gen_skills.py line 219 does use Environment(undefined=StrictUndefined), which is correct. But without a test that deliberately references an undefined variable in a template context and asserts UndefinedError is raised, there is no regression protection against someone removing StrictUndefined from the Environment constructor.\n\nRemediation: Add a test that calls _render_header (or a test-only minimal template) with a context dict that omits one required variable and asserts that jinja2.UndefinedError (or a subclass) is raised. This directly verifies that StrictUndefined is active.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7jsw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S3-B1-IMPORTANT: StrictUndefined is not explicitly tested — no negative path for undefined template variables","updated_at":"2026-02-23T12:46:37Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:23:04Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:37Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-2 MINOR severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7no","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 MINOR","updated_at":"2026-02-22T02:23:04Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T09:36:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2a9f326b8fbaa2fa3585839ca557ed8ce7608260dc1bf30425ca0ef5685fa2b0","created_at":"2026-02-26T07:06:19Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-0biw\n  urd: aura-plugins-7oqz\n  followup_epic: aura-plugins-klac\n---\n\n## Problem Space\n\n**Axes:** single-process, sequential, user-global config, single-file mutations\n**Has-a:** PluginRegistry has-a list of MarketplaceEntry; MarketplaceEntry has-a list of PluginEntry\n**Is-a:** MarketplaceVersionFile is-a VersionFile (already exists, needs write() fix)\n\nTwo independent streams that share a commit boundary:\n\n1. **Test quality** (aura-plugins-klac): 4 items in tests/test_aura_release.py\n2. **Registry + marketplace feature** (new): plugin registry subsystem + CLI + release integration\n\n---\n\n## Engineering Tradeoffs\n\n| Decision | Option A | Option B | Choice |\n|----------|----------|----------|--------|\n| Registry CLI structure | argparse subparsers (breaking) | Prefix-check dispatch (`if sys.argv[1] == \"registry\"`) | **B** — zero breaking change, keeps existing CLI flat |\n| Registry types | Plain dicts | Frozen dataclasses | **Frozen dataclasses** — consistent with existing VersionFile/ScanSpec patterns |\n| Registry save format | Sorted keys | Insertion order | **Insertion order** — user edits registry by hand, sort would be surprising |\n| Plugin auto-detect | Always require --plugin | Auto-detect by cwd match in registry | **Auto-detect** — UX: zero friction in common case |\n| write() fix | Surgical line removal | Full rewrite | **Surgical** — remove only the 2-line plugins[] loop |\n\n---\n\n## Architecture\n\n### SLICE-1: Test quality (tests/test_aura_release.py)\n\n**Changes:**\n- Add module-scoped `aura_release_mod` fixture (replaces per-test _import_aura_release() calls)\n- Add `autouse` function-scoped fixture for sys.modules cleanup\n- Add `test_case_e_root_pyproject_without_version_key` (root-level [tool.*]-only → excluded)\n- Update `TestDiscoverVersionFiles` docstring\n\n**Fixture design:**\n```python\n@pytest.fixture(scope=\"module\")\ndef aura_release_mod():\n    \"\"\"Import aura-release once per test module, with cleanup.\"\"\"\n    loader = SourceFileLoader(\"aura_release\", str(BIN_PATH / \"aura-release\"))\n    spec = importlib.util.spec_from_loader(\"aura_release\", loader)\n    mod = importlib.util.module_from_spec(spec)\n    sys.modules[\"aura_release\"] = mod\n    spec.loader.exec_module(mod)\n    yield mod\n    sys.modules.pop(\"aura_release\", None)\n```\n\nAll 5 test methods accept `aura_release_mod` as a fixture parameter instead of calling `_import_aura_release()` inline.\n\n---\n\n### SLICE-2: Fix MarketplaceVersionFile.write() (bin/aura-release)\n\nRemove the 2-line plugins[*].version loop. `write()` must only update `data[\"metadata\"][\"version\"]`:\n\n```python\ndef write(self, version: str, *, dry_run: bool = False) -\u003e None:\n    data = json.loads(self.path.read_text(encoding=\"utf-8\"))\n    data[\"metadata\"][\"version\"] = version\n    # plugins[*].version intentionally NOT updated (each plugin manages own version)\n    if not dry_run:\n        self.path.write_text(json.dumps(data, indent=2) + \"\\n\", encoding=\"utf-8\")\n```\n\n---\n\n### SLICE-3: Registry types, constants, loading (bin/aura-release)\n\n**New constant:**\n```python\n_REGISTRY_PATH = Path.home() / \".local\" / \"config\" / \"aura\" / \"plugins\" / \"claude-plugin-registry.json\"\n```\n\n**New dataclasses:**\n```python\n@dataclass(frozen=True)\nclass PluginEntry:\n    name: str\n    path: str        # absolute local filesystem path to plugin repo\n    remote: str | None  # remote URL (e.g. \"github:dayvidpham/agentfilter\") or None\n\n@dataclass(frozen=True)\nclass MarketplaceEntry:\n    path: str                         # filesystem path to marketplace.json\n    plugins: tuple[PluginEntry, ...]  # plugins registered in this marketplace\n\n@dataclass(frozen=True)\nclass PluginRegistry:\n    marketplaces: tuple[MarketplaceEntry, ...]\n\n    @classmethod\n    def load(cls) -\u003e PluginRegistry | None:\n        \"\"\"Load registry from _REGISTRY_PATH. Returns None if file absent.\n        Exits with error on malformed JSON. Warns (does not error) on nonexistent paths.\"\"\"\n        ...\n\n    def save(self, *, dry_run: bool = False) -\u003e None:\n        \"\"\"Serialise registry back to _REGISTRY_PATH.\"\"\"\n        ...\n\n    def find_plugin(self, name: str | None, cwd: Path) -\u003e tuple[PluginEntry, MarketplaceEntry] | None:\n        \"\"\"Find plugin by name (if given) or by matching path to cwd.\"\"\"\n        ...\n\n    def with_plugin_added(self, entry: PluginEntry, marketplace_path: str) -\u003e PluginRegistry:\n        \"\"\"Return new registry with plugin added to the named marketplace.\"\"\"\n        ...\n\n    def with_plugin_removed(self, name: str) -\u003e PluginRegistry:\n        \"\"\"Return new registry with all entries matching name removed.\"\"\"\n        ...\n```\n\n**Validation rules (load time):**\n- Invalid JSON → `print(\"Error: registry is malformed: …\"); sys.exit(2)`\n- Missing `marketplaces` key → same error\n- marketplace.path does not exist → `print(\"Warning: marketplace not found: …\"); continue`\n\n---\n\n### SLICE-4: Registry CLI (bin/aura-release)\n\n**Dispatch (backward-compatible):**\n```python\ndef main() -\u003e int:\n    if len(sys.argv) \u003e 1 and sys.argv[1] == \"registry\":\n        return cmd_registry(sys.argv[2:])  # strip \"registry\" and dispatch\n    # existing argparse unchanged below …\n```\n\n**Registry subcommand parser:**\n```python\ndef cmd_registry(argv: list[str]) -\u003e int:\n    parser = argparse.ArgumentParser(prog=\"aura-release registry\")\n    sub = parser.add_subparsers(dest=\"subcmd\", required=True)\n\n    sub.add_parser(\"init\", help=\"Create empty registry at ~/.local/config/aura/plugins/\")\n\n    p_add = sub.add_parser(\"add\", help=\"Register a plugin\")\n    p_add.add_argument(\"name\")\n    p_add.add_argument(\"--path\", default=\".\", help=\"Local path to plugin repo (default: cwd)\")\n    p_add.add_argument(\"--remote\", default=None)\n    p_add.add_argument(\"--marketplace\", required=True, help=\"Path to marketplace.json\")\n\n    p_rm = sub.add_parser(\"remove\", help=\"Remove a plugin from registry\")\n    p_rm.add_argument(\"name\")\n\n    sub.add_parser(\"list\", help=\"List registered plugins\")\n\n    args = parser.parse_args(argv)\n    dispatch = {\n        \"init\": cmd_registry_init,\n        \"add\": cmd_registry_add,\n        \"remove\": cmd_registry_remove,\n        \"list\": cmd_registry_list,\n    }\n    return dispatch[args.subcmd](args)\n```\n\n**cmd_registry_init:** Creates `_REGISTRY_PATH.parent` dirs + writes `{\"marketplaces\": []}`. Errors if file already exists.\n**cmd_registry_add:** Loads (or creates empty) registry, adds PluginEntry to the named marketplace (creates marketplace entry if absent), saves.\n**cmd_registry_remove:** Loads registry, removes all PluginEntry with matching name, saves.\n**cmd_registry_list:** Loads registry, prints one line per plugin: `\u003cmarketplace\u003e → \u003cname\u003e (\u003cpath\u003e)`.\n\n---\n\n### SLICE-5: Release integration — --plugin flag (bin/aura-release)\n\n**New flag added to main argparse:**\n```python\nparser.add_argument(\"--plugin\", metavar=\"NAME\",\n    help=\"Plugin name for registry lookup; auto-detected from cwd if omitted\")\n```\n\n**Integration in cmd_release() (after local files bumped):**\n```python\nregistry = PluginRegistry.load()\nif registry:\n    match = registry.find_plugin(args.plugin, root)\n    if match:\n        plugin_entry, marketplace_entry = match\n        mp_path = Path(marketplace_entry.path).expanduser().resolve()\n        if mp_path.is_file():\n            mp = MarketplaceVersionFile(name=marketplace_entry.path, path=mp_path)\n            if not dry_run:\n                mp.write(new_version_str)\n            else:\n                print(f\"[dry-run] Would update marketplace {mp_path}: metadata.version -\u003e {new_version_str}\")\n```\n\n**Note:** if marketplace is already in `_SCAN_SPECS` discovery (i.e., `.claude-plugin/marketplace.json` in the repo), it is NOT double-bumped — the registry lookup only adds a bump if the marketplace path is distinct from already-discovered files.\n\n---\n\n## Validation Checklist\n\n- [ ] test_case_e added: root-level [tool.*]-only → empty results\n- [ ] aura_release_mod session fixture present\n- [ ] sys.modules cleanup autouse fixture present\n- [ ] TestDiscoverVersionFiles docstring updated\n- [ ] MarketplaceVersionFile.write() does NOT update plugins[*].version\n- [ ] _REGISTRY_PATH constant defined\n- [ ] PluginEntry, MarketplaceEntry, PluginRegistry dataclasses implemented\n- [ ] PluginRegistry.load() validates JSON, warns on missing paths\n- [ ] aura-release registry init creates empty registry\n- [ ] aura-release registry add adds entry\n- [ ] aura-release registry list prints entries\n- [ ] aura-release registry remove removes by name\n- [ ] --plugin flag accepted by main argparse\n- [ ] release integration: registry lookup + marketplace bump (no double-bump)\n- [ ] --dry-run skips all registry writes\n- [ ] All existing tests still pass\n- [ ] New tests added for MarketplaceVersionFile.write() and registry CLI\n\n## BDD Acceptance Criteria\n\n**Given** root pyproject.toml with only [tool.*] section **when** discover_version_files() runs **then** file is excluded **should not** appear in results\n\n**Given** valid registry + --plugin aura **when** aura-release patch runs **then** marketplace metadata.version bumped **should not** update plugins[*].version\n\n**Given** no registry file **when** aura-release patch runs **then** release proceeds normally **should not** error or warn\n\n**Given** malformed registry JSON **when** aura-release loads registry **then** clear error message + sys.exit(2) **should not** crash with a traceback\n\n**Given** aura-release registry init **when** registry already exists **then** error and exit **should not** overwrite existing registry\n\n**Given** --dry-run **when** registry write would occur **then** print \"[dry-run] Would update marketplace …\" **should not** write to disk\n\n**Given** marketplace already discovered via _SCAN_SPECS **when** registry also references same path **then** marketplace bumped exactly once **should not** double-bump\n\n## Proposed Slices (for Supervisor)\n\n| Slice | Scope | Files |\n|-------|-------|-------|\n| SLICE-1 | Test quality | tests/test_aura_release.py |\n| SLICE-2 | Fix MarketplaceVersionFile.write() | bin/aura-release |\n| SLICE-3 | Registry types + load/save | bin/aura-release |\n| SLICE-4 | Registry CLI (init/add/list/remove) | bin/aura-release |\n| SLICE-5 | Release integration + --plugin flag | bin/aura-release |","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7ome","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-1: Plugin registry + marketplace fix + test quality","updated_at":"2026-02-26T09:36:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T09:36:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"646b0572d39d980eff50987e749814d7600b4a255d9df57e182e0d3e4b9e99ab","created_at":"2026-02-26T07:03:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-0biw\n  elicit: aura-plugins-ears\n  followup_epic: aura-plugins-klac\n---\n## Requirements\n\n### R1 — Fix MarketplaceVersionFile.write() scope\nThe write() method MUST only update `data[\"metadata\"][\"version\"]`.\nIt MUST NOT update `plugins[*].version`.\nThe current implementation loops over all plugins and overwrites their version — this is incorrect behaviour.\n\n### R2 — Plugin registry file\nLocation: `~/.local/config/aura/plugins/claude-plugin-registry.json` (user-global only)\n\nSchema (marketplaces as top-level grouping):\n```json\n{\n  \"marketplaces\": [\n    {\n      \"path\": \"\u003cfilesystem path to marketplace.json\u003e\",\n      \"plugins\": [\n        { \"name\": \"\u003cplugin-name\u003e\", \"path\": \"\u003clocal filesystem path\u003e\", \"remote\": \"\u003cremote url or null\u003e\" }\n      ]\n    }\n  ]\n}\n```\n\nPlugins are expected to be cloned locally; `path` is the local clone path; `remote` is the upstream URL (e.g. \"github:dayvidpham/agentfilter\") or null for local-only.\n\n### R3 — Registry CLI subcommands\nAll subcommands operate on `~/.local/config/aura/plugins/claude-plugin-registry.json`:\n\n- `aura-release registry init` — create empty registry file (error if exists)\n- `aura-release registry add \u003cname\u003e [--path \u003clocal-path\u003e] [--remote \u003curl\u003e] --marketplace \u003cmarketplace-path\u003e` — add plugin entry\n- `aura-release registry list` — print all registered plugins with their marketplace\n- `aura-release registry remove \u003cname\u003e` — remove a plugin entry from the registry\n\n### R4 — Plugin identity and auto-detection\nWhen running a release command:\n- `--plugin \u003cname\u003e` flag: optional\n- If `--plugin` is omitted, auto-detect by finding registry entry where `path` matches the current working directory\n- If `--plugin` is given, use that name directly\n- If no matching entry found in registry, proceed without registry integration (no error)\n\n### R5 — Marketplace version bump via registry\nWhen running `aura-release \u003cbump\u003e [--plugin \u003cname\u003e]`:\n1. Look up the plugin in the registry (by name or auto-detect)\n2. Find its marketplace(s) in the registry\n3. Bump `metadata.version` in each found marketplace.json\n4. The marketplace file is confirmed as `.claude-plugin/marketplace.json` locally (already in _SCAN_SPECS)\n5. `--dry-run` MUST skip all registry writes\n\n### R6 — Registry validation\nRegistry MUST be validated on load:\n- Valid JSON required (error clearly on parse failure)\n- Warn (not error) if referenced marketplace paths do not exist\n\n### R7 — Test quality (from aura-plugins-klac)\n#### R7.1 — IMPORTANT: Root-level exclusion test\nAdd test case E: root-level pyproject.toml with only [tool.*] section (no [project] key) must be excluded.\nThis guards the _has_pyproject_version() filter at root level (not just subdirs).\n\n#### R7.2 — MINOR: sys.modules cleanup\nAdd pytest fixture to clean up sys.modules[\"aura_release\"] after each test.\n\n#### R7.3 — MINOR: Session-scoped import fixture\nReplace per-test _import_aura_release() calls with a module-scoped fixture.\n\n#### R7.4 — MINOR: Class docstring update\nUpdate TestDiscoverVersionFiles docstring to document actual test scope.\n\n## Priorities\n1. R1 (MarketplaceVersionFile fix) — correctness bug, blocks all marketplace tests\n2. R7 (test quality) — completes aura-plugins-klac follow-up\n3. R2 + R3 (registry schema + CLI) — new subsystem, largest scope\n4. R4 + R5 (registry integration into release flow) — depends on R2/R3\n5. R6 (validation) — safety, low effort\n\n## Design Choices\n- Registry is user-global (not per-repo); no repo-local override\n- Registry schema: marketplaces-first grouping (vs flat plugin list)\n- write() scope: metadata.version only (not plugins[*].version)\n- Plugin matching: auto-detect by cwd, override with --plugin\n- Dry-run: skips registry writes (reads are always safe)\n\n## MVP Goals\n- Registry init/add/list/remove CLI commands working\n- aura-release reads registry and bumps marketplace metadata.version\n- MarketplaceVersionFile.write() corrected to metadata.version only\n- All aura-plugins-klac test quality items resolved\n\n## End-Vision Goals\n- Full plugin lifecycle management: install from registry, update, remove\n- Multi-marketplace support (a plugin can appear in multiple marketplaces)\n- Cross-repo release coordination via registry","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7oqz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"URD: Plugin registry + marketplace version update + test quality","updated_at":"2026-02-26T09:36:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:57:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f8f6924e1c6c08910b399b953d2ea9683687565cad8b24c46482f3daea50e8a7","created_at":"2026-02-22T12:55:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer A (Correctness) on SLICE-2 (constraints.py, test_constraints.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7t5","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 BLOCKER","updated_at":"2026-02-22T12:57:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b7357ec7fd735c0af7b66706ab308f2561a55c1e6c4acc9efd9a7700ecacad40","created_at":"2026-02-26T04:30:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7vox","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-2 MINOR","updated_at":"2026-02-26T04:30:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"164b5c688ac1a05fbbe949221e27f5769e797ac9f39d9a9ffa9183ebb87783a0","created_at":"2026-02-27T06:17:14Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-ckg0\n  elicit: aura-plugins-bo5x\n  prior_urd: aura-plugins-gox3\n  prior_followup: aura-plugins-hgki\n---\n## Architecture\n\n### Binary Layout\n- **aurad** (bin/aurad.py): Temporal worker daemon. Registers EpochWorkflow, SliceWorkflow, ReviewPhaseWorkflow + activities. Long-running, managed by systemd.\n- **aura-msg** (bin/aura-msg.py): CLI stub for this epoch. --help only. Future: protocol-aware CLI for model harness hooks to send signals, query state, start epochs.\n- **Temporal server**: Managed by temporal-service.nix (unchanged, two systemd services).\n\n### Communication Model\n```\nModel harness hook → aura-msg \u003ccommand\u003e → Temporal Client SDK → aurad (EpochWorkflow)\n```\n\n## Requirements\n\n### R1: Rename worker → aurad\n- Rename bin/worker.py → bin/aurad.py\n- Rename packages.worker → packages.aurad in flake.nix\n- Rename tests/test_worker.py → tests/test_aurad.py\n- Update all 19 binary/CLI references (see explore task aura-plugins-2321)\n- DO NOT rename RoleId.WORKER or protocol role references\n\n### R2: aurad systemd service\n- New systemd user service: aura-worker (runs bin/aurad.py)\n- Add to temporal-service.nix or create separate nix/aurad-service.nix\n- Depends on temporal-dev-server service (After=temporal-dev-server.service)\n\n### R3: Persistent SQLite default\n- Change dbPath default to \"${XDG_DATA_HOME:-$HOME/.local/share}/aura/plugin/temporal.db\"\n- Auto-create parent directory via ExecStartPre (mkdir -p)\n- Resolve XDG_DATA_HOME at runtime\n\n### R4: Include aurad in packages.default\n- Add packages.aurad to the symlinkJoin in packages.default\n\n### R5: aura-msg stub\n- Create bin/aura-msg.py with argparse --help showing planned subcommands\n- Planned subcommands (stub only, not implemented): start-epoch, signal-vote, query-state, advance-phase\n- Create packages.aura-msg in flake.nix\n- Include in packages.default\n\n### R6: Doc restructure\n- docs/worker.md → split into:\n  - docs/architecture.md: Overall design (Temporal topology, aurad/aura-msg model, communication flow)\n  - docs/aurad.md: Daemon ops guide (systemd, config, running locally)\n  - docs/aura-msg.md: CLI stub docs (planned commands, hook integration vision)\n- Add roadmap section with full descriptions and design notes for each R12 stub\n\n### R7: Signal-based slice progress\n- Add @workflow.signal handler to EpochWorkflow for slice progress\n- SliceWorkflow signals parent with per-leaf-task completion (not fixed to 3 stages)\n- Pass parent workflow ID as explicit input to SliceWorkflow (via SliceInput)\n- Add @workflow.query handler to EpochWorkflow exposing progress dict\n\n### R8: ReviewAxis/VoteType in ReviewPhaseWorkflow\n- Change ReviewPhaseWorkflow._votes from dict[str, str] to dict[ReviewAxis, VoteType]\n- Research confirms StrEnum dict keys are supported by Temporal SDK serialization\n- Update ReviewPhaseResult.vote_result accordingly\n\n### R9: Constraint violation fixture axis\n- Add constraint_violations axis to protocol.yaml\n- Define all 23 C-* constraints in YAML\n- Implemented constraints (5) generate runnable test cases\n- Unimplemented constraints (18) generate pytest.mark.skip test cases\n- Add generate_constraint_violation_test_cases() to ProtocolFixture\n- Add ConstraintViolationTestCase frozen dataclass\n\n## Priorities\n1. R1 (rename) + R4 (packages.default) + R3 (SQLite) — mechanical, unblocks everything\n2. R2 (aurad systemd) + R5 (aura-msg stub) — new infrastructure\n3. R6 (docs) — captures architecture for future reference\n4. R7 (signals) + R8 (ReviewAxis) — workflow improvements\n5. R9 (constraint fixtures) — test infrastructure\n\n## MVP Goals\n- aurad binary working with systemd\n- aura-msg stub with --help\n- All renames complete\n- Persistent SQLite default\n- Docs restructured\n- Signal progress wired (R12 stub body but topology complete)\n- Constraint violation fixtures runnable\n\n## End-Vision Goals\n- aura-msg is the primary programmatic interface for model harness hooks\n- Agents call aura-msg to register, update progress, signal votes, advance phases\n- aurad handles all workflow execution, constraint checking, audit trail\n- Full constraint coverage in fixtures (all 23 implemented + tested)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7vtb","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"URD: aurad rename + aura-msg stub + protocol improvements","updated_at":"2026-02-27T06:17:14Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2dff6bc58d599a72543e2a05a279400e1f7f2029c0367042dcb51af71f4f2923","created_at":"2026-02-26T23:46:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-qy79\n  followup_epic: aura-plugins-hgki\n---\nMINOR findings for FOLLOWUP-REVIEW-C-1 (Elegance axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7vzp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-C-1 MINOR","updated_at":"2026-02-26T23:46:10Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:14:14Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d3024504e62538b8b94cb1d6db1126157899c8187c0dd0350fe12fdb894066c7","created_at":"2026-02-26T08:05:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-xkuw\n  impl_plan: aura-plugins-147m\n---\n## Scope\nWrite TestVersionFileWrites class with 2 tests that use the aura_release_mod fixture (from SLICE-1).\nTests MUST fail until SLICE-2-L3 fixes write().\n\n## Tests\n1. test_marketplace_write_updates_only_metadata_version: verify plugins[*].version unchanged\n2. test_marketplace_write_dry_run_does_not_write: verify file not modified with dry_run=True\n\n## File\n- tests/test_aura_release.py (append TestVersionFileWrites class)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-7zvn","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-L2: Tests — TestVersionFileWrites (write correctness + dry_run)","updated_at":"2026-02-26T08:14:14Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c1f2d85b251b766a4163885d61fb888efdbc7a5e3c63f079ed01b274649f5129","created_at":"2026-02-26T14:48:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  elicit: aura-plugins-ollt\n  urd: aura-plugins-2ojv\n  supersedes: aura-plugins-7csc\n---\n## 1. Executive Summary\n\nComplete re-scope from PROPOSAL-5. ACP alignment (R13, R15-R17) deferred to a dedicated aura-acp plugin epic. v3 core scope is R1-R12 only.\n\n**Why:** Claude Code lacks native ACP support. All harnesses need their own adapters (Claude Code via Agent SDK; Gemini/OpenCode/Codex via ACP adapter). Coupling the core to the ACP SDK produces a leaky abstraction. Harness-agnostic core + harness plugin is the correct long-term design.\n\n**What changes:** Remove all ACP-specific types from core: no AcpRawSignal, AcpMappedSignal, AuraSignalType, AcpEventMapper, map_acp_event activity, AcpTranscriptRecorder, AcpSecurityGate, acp_session_update signal. No agent-client-protocol or pydantic dependency.\n\n**What stays:** All of R1-R12 plus R14 (ToolCall camelCase JSON aliases — naming only, no SDK).\n\n---\n\n## 2. Architecture\n\n### 2.1 Workflow topology (hybrid)\n\n```\nEpochWorkflow (orchestrator — keeps EpochStateMachine)\n  │\n  ├── Sequential phases P1–P3, P5–P8, P11–P12\n  │     → run_sequential_phase(@activity.defn)\n  │\n  ├── P4_REVIEW → P4ReviewWorkflow(@workflow.defn, child)\n  │     - submit_vote signal received directly\n  │     - gates on CONSENSUS_GATED (all 3 axes ACCEPT)\n  │\n  ├── P9_SLICE → [P9SliceWorkflow(@workflow.defn, child) × N]\n  │     - asyncio.gather fan-out; max_concurrent_slices=20 cap\n  │     - each child carries SA_EPOCH_ID\n  │\n  └── P10_CODE_REVIEW → P10CodeReviewWorkflow(@workflow.defn, child)\n        - submit_vote signal received directly\n        - tracks blocker_count; gates P10→P11 on blocker_count == 0\n```\n\n### 2.2 Cross-workflow types (R3)\n\n```python\n@dataclass(frozen=True)\nclass PhaseInput:\n    epoch_id: str\n    phase_id: PhaseId\n    phase_spec: PhaseSpec\n\n@dataclass(frozen=True)\nclass PhaseResult:\n    phase_id: PhaseId\n    success:  bool\n    blocker_count: int = 0\n    vote_result:   VoteType | None = None\n```\n\nEpochState (mutable) stays in parent only. Never crosses workflow boundaries.\n\n### 2.3 Gate constants — public (R2, B-1 fix)\n\nstate_machine.py: make public:\n  _CONSENSUS_GATED    → CONSENSUS_GATED\n  _BLOCKER_GATED      → BLOCKER_GATED\n  _REVISE_DRIVES_BACK → REVISE_DRIVES_BACK\n\nImport chain: phase_workflows.py → state_machine.py (direct). No circular imports.\n\n### 2.4 AuditTrail — real implementation (R4)\n\n```python\nclass TemporalAuditTrail:\n    async def record_event(self, event: AuditEvent) -\u003e None:\n        # upsert_search_attributes for SA_EPOCH_ID, SA_PHASE, SA_ROLE, SA_STATUS\n        ...\n\n    async def query_events(self, *, phase=None, role=None) -\u003e list[AuditEvent]:\n        # ACTIVITY-ONLY: Temporal Visibility API query (network I/O)\n        # MUST NOT be called from workflow code — wrap in execute_activity()\n        ...\n\nclass InMemoryAuditTrail:\n    # No-I/O list-backed stub for tests; satisfies AuditTrail Protocol\n    ...\n```\n\nrecord_transition(@activity.defn): was no-op stub, now calls TemporalAuditTrail.record_event().\n\n### 2.5 TranscriptRecorder + SecurityGate — stubs (R6, R12)\n\n```python\nclass NullTranscriptRecorder:\n    \"\"\"TranscriptRecorder stub for unified-schema / harness integration.\n\n    STUB — Motivation: provide a typed no-op until a harness adapter (e.g.\n    aura-acp plugin, Claude Agent SDK adapter) is wired. All methods are\n    intentional no-ops. Added in aura-plugins v3 (epoch: aura-plugins-eocq).\n    Expected implementation: harness-specific plugin epic (aura-acp for\n    Gemini/OpenCode/Codex; claude-agent-sdk adapter for Claude Code).\n    \"\"\"\n    async def record_phase_transition(self, event: PhaseTransitionEvent) -\u003e None: ...\n    async def record_constraint_check(self, event: ConstraintCheckEvent) -\u003e None: ...\n    async def record_review_vote(self, event: ReviewVoteEvent) -\u003e None: ...\n\nclass NullSecurityGate:\n    \"\"\"SecurityGate stub — allows all tool calls until harness wired.\n\n    STUB — Motivation: provide a permissive no-op gate until Agentfilter\n    (or equivalent harness security layer) is wired via harness adapter plugin.\n    Added in aura-plugins v3 (epoch: aura-plugins-eocq).\n    Expected implementation: aura-acp plugin for Agentfilter ACP integration.\n    \"\"\"\n    async def check_tool_permission(self, req: ToolPermissionRequest) -\u003e PermissionDecision:\n        return PermissionDecision.ALLOW\n```\n\n### 2.6 A2A type updates (R7, R14)\n\n```python\n@dataclass(frozen=True)\nclass FileWithUri:\n    \"\"\"A2A file reference — 3 fields per A2A spec v0.3.0 (PR #663).\"\"\"\n    uri:       str\n    name:      str | None = None\n    mime_type: str | None = None\n\n@dataclass(frozen=True)\nclass FilePart:\n    file_with_uri: FileWithUri  # was: file_uri: str\n\n@dataclass(frozen=True)\nclass ToolCall:\n    tool_name:   str\n    raw_input:   str        # was: tool_input (ACP/A2A: rawInput camelCase JSON alias)\n    raw_output:  str | None # was: tool_output\n    tool_call_id: str | None = None  # was: absent (ACP/A2A: toolCallId)\n\n# Full A2A part hierarchy:\n@dataclass(frozen=True) class ThinkingPart:     thinking: str\n@dataclass(frozen=True) class ImagePart:        data: str; mime_type: str; source_type: str = 'base64'\n@dataclass(frozen=True) class AudioPart:        data: str; mime_type: str\n@dataclass(frozen=True) class ResourceLinkPart: uri: str; title: str | None = None; mime_type: str | None = None\n\nPart = TextPart | FilePart | DataPart | ThinkingPart | ImagePart | AudioPart | ResourceLinkPart\n```\n\n---\n\n## 3. Files\n\n### New\n| File | Purpose |\n|------|---------|\n| scripts/aura_protocol/phase_workflows.py | P4ReviewWorkflow, P9SliceWorkflow, P10CodeReviewWorkflow |\n| scripts/aura_protocol/phase_activities.py | run_sequential_phase, emit_* activities |\n| scripts/aura_protocol/audit_trail.py | TemporalAuditTrail + InMemoryAuditTrail |\n| bin/worker.py | Production worker: registers all workflow + activity types |\n| nix/temporal-service.nix | home-manager systemd user service for temporal server start-dev |\n| tests/test_phase_workflows.py | Child workflow tests (P4 consensus, P10 blocker gate, P9 parallel) |\n| tests/test_audit_trail.py | AuditTrail tests |\n\n### Modified\n| File | Changes |\n|------|---------|\n| scripts/aura_protocol/workflow.py | Dispatch to child workflows; real record_transition; NullTranscriptRecorder/NullSecurityGate injected |\n| scripts/aura_protocol/interfaces.py | FileWithUri (3 fields); FilePart.file_with_uri; ToolCall fields renamed; full A2A hierarchy; NullTranscriptRecorder + NullSecurityGate stubs; AuditTrail.query_events ACTIVITY-ONLY docstring |\n| scripts/aura_protocol/state_machine.py | Public gate constants |\n| pyproject.toml | version → 0.7.0 (no new runtime deps) |\n| flake.nix | homeManagerModules.temporal-dev-server |\n| tests/test_interfaces.py | 4 FilePart tests updated for FileWithUri; ToolCall field name tests |\n| tests/test_workflow.py | Child workflow type registration |\n| CHANGELOG.md | v0.7.0 entry |\n\n---\n\n## 4. Slices (5 vertical)\n\n**Ordering:** SLICE-1 → SLICE-2 → SLICE-3+4 in parallel → SLICE-5\n\n### SLICE-1: PhaseInput + workflow topology\nFiles: workflow.py, state_machine.py, phase_workflows.py (new), phase_activities.py (new)\nDeliverables:\n- PhaseInput(frozen=True), PhaseResult(frozen=True)\n- P4ReviewWorkflow: submit_vote signal; CONSENSUS_GATED gate\n- P9SliceWorkflow: asyncio.gather fan-out; max_concurrent_slices=20\n- P10CodeReviewWorkflow: submit_vote signal; BLOCKER_GATED gate; returns blocker_count\n- run_sequential_phase(@activity.defn)\n- EpochWorkflow: dispatches to child workflows; NullTranscriptRecorder/NullSecurityGate wired\n- CONSENSUS_GATED, BLOCKER_GATED, REVISE_DRIVES_BACK public in state_machine.py\nAC: All 973 existing tests pass. Full 12-phase hybrid run completes in Temporal sandbox.\n\n### SLICE-2: Interface + A2A type updates\nFiles: interfaces.py, tests/test_interfaces.py\nDeliverables:\n- FileWithUri(frozen=True): uri, name, mime_type\n- FilePart.file_with_uri: FileWithUri (4 existing tests updated)\n- ToolCall: raw_input, raw_output, tool_call_id (camelCase JSON aliases)\n- ThinkingPart, ImagePart, AudioPart, ResourceLinkPart\n- NullTranscriptRecorder stub (R12 label)\n- NullSecurityGate stub (R12 label, returns ALLOW)\n- AuditTrail.query_events: ACTIVITY-ONLY docstring\nAC: FileWithUri(uri, name, mime_type) constructed. ToolCall.raw_input/raw_output/tool_call_id. All Part union variants present. isinstance(NullTranscriptRecorder(), TranscriptRecorder) True. isinstance(NullSecurityGate(), SecurityGate) True.\n\n### SLICE-3: AuditTrail + event emission (parallel with SLICE-4)\nFiles: audit_trail.py (new), workflow.py, tests/test_audit_trail.py\nDeliverables:\n- TemporalAuditTrail: record_event (SA upsert), query_events (Visibility API — ACTIVITY-ONLY)\n- InMemoryAuditTrail: list-backed test stub\n- record_transition activity: now real (calls TemporalAuditTrail.record_event)\n- emit_constraint_check_event, emit_review_vote_event activities\nAC: record_transition not a no-op. InMemoryAuditTrail.query_events returns correct events. AuditTrail docstring warns ACTIVITY-ONLY.\n\n### SLICE-4: Infrastructure (parallel with SLICE-3)\nFiles: bin/worker.py, nix/temporal-service.nix, flake.nix\nDeliverables:\n- bin/worker.py: registers EpochWorkflow + P4/P9/P10 child workflows + all activities; env-var/CLI config; SIGTERM shutdown\n- nix/temporal-service.nix: options: enable, port (7233), ui-port (8080), namespace, db-filename, backend (dev-server|docker-compose|native)\n- systemd.user.services.temporal-dev-server\n- flake.nix: homeManagerModules.temporal-dev-server\nAC: bin/worker.py --help clean. nix/temporal-service.nix evaluates. homeManagerModules.temporal-dev-server exported.\n\n### SLICE-5: Tests + version bump + CHANGELOG\nFiles: tests/test_phase_workflows.py, tests/test_workflow.py, pyproject.toml, CHANGELOG.md\nDeliverables:\n- test_phase_workflows.py: P4 consensus, P10 blocker gate, P9 parallel; max_concurrent_slices enforcement\n- test_workflow.py: child workflow type registration; updated worker registration\n- pyproject.toml: version = 0.7.0 (no new runtime deps — temporalio\u003e=1.9.0 only)\n- CHANGELOG.md: v0.7.0 section\nAC: All tests pass. Version 0.7.0. No new runtime deps.\n\n---\n\n## 5. Design decisions\n\nD1: Hybrid topology — P4/P9/P10 as child workflows; P1-P3, P5-P8, P11-P12 as activities.\nD2: EpochStateMachine stays in parent. Gate constants public for phase_workflows import.\nD3: PhaseInput/PhaseResult are the only cross-workflow types. EpochState never crosses boundaries.\nD4: AuditTrail.query_events is ACTIVITY-ONLY (Temporal Visibility = network I/O = non-deterministic).\nD5: NullTranscriptRecorder/NullSecurityGate are permissive stubs. Real implementations are harness plugins (aura-acp, claude-agent-sdk adapter) in future epics.\nD6: No harness SDK dependency in core. pyproject.toml runtime: temporalio\u003e=1.9.0 only.\nD7: ACP integration (R13, R15-R17) deferred to aura-acp plugin epic. Claude Code gets its own adapter (not ACP-based — ACP feature request open, not shipped).\nD8: R14 (ToolCall camelCase) retained — naming convention only, no SDK dependency.\n\n---\n\n## 6. Acceptance criteria\n\nAC1: All 973 existing tests pass after topology refactor.\nAC2: P4ReviewWorkflow, P9SliceWorkflow, P10CodeReviewWorkflow pass Temporal sandbox tests.\nAC3: isinstance(NullTranscriptRecorder(), TranscriptRecorder) and isinstance(NullSecurityGate(), SecurityGate) both True.\nAC4: ToolCall.raw_input, ToolCall.raw_output, ToolCall.tool_call_id accessible.\nAC5: FilePart.file_with_uri is FileWithUri. FileWithUri has 3 fields: uri, name, mime_type.\nAC6: bin/worker.py --help exits cleanly.\nAC7: homeManagerModules.temporal-dev-server exported from flake.nix.\nAC8: record_transition activity is not a no-op (test asserts PhaseTransitionEvent emitted).\nAC9: All stubs carry R12-compliant labels (motivation, epoch, expected implementation).\nAC10: pyproject.toml version = 0.7.0; no new runtime deps; CHANGELOG has v0.7.0 section.\nAC11: P9SliceWorkflow respects max_concurrent_slices cap (default 20).\nAC12: AuditTrail.query_events docstring contains ACTIVITY-ONLY warning.\nAC13: 4 existing FilePart tests pass with new FileWithUri structure.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-80ac","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"SUPERSEDED by PROPOSAL-7 (aura-plugins-c9xw). Reason: A-1 MUST FIX (PhaseSpec not Temporal-serializable due to frozenset field) + B-1 MUST FIX (query_events needs @activity.defn structural enforcement).","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-6: Protocol Engine v3 — Harness-agnostic core (R1-R12)","updated_at":"2026-02-26T14:55:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:21:38Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-1 (types.py, __init__.py) — IMPORTANT findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-80v","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-22T02:21:38Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a016df64146d320aece1e76dc5b12ab0077d534d342506c4889899c701d814fe","created_at":"2026-02-27T06:59:06Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-wsys\n  urd: aura-plugins-7vtb\n---\nVOTE: ACCEPT - Implementation matches URD requirements. All 26 C-* constraints present in CONSTRAINT_SPECS (URD estimated 23; 26 is correct). Five runnable state/transition-based cases are correctly structured. Twenty-one skipped cases are present with skip_reason. fixture_loader.py generator produces correct ConstraintViolationTestCase objects with EpochState construction from YAML. Tests pass (1260 passed, 25 skipped).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-82gp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1: constraint violation fixtures (protocol.yaml + fixture_loader.py)","updated_at":"2026-02-27T06:59:06Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-3","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:21:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"503622398e324638d728241c8710d25682a692b5e80cb2d28479d60e70ed3012","created_at":"2026-02-23T03:09:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-mg6h\n  impl_plan: aura-plugins-94yc\n  depends_on_slice: aura-plugins-9suu\n---\n\n## Scope\n\nGenerate SKILL.md headers from Python types using Jinja2 templates.\n\n### Files Created\n- scripts/aura_protocol/gen_skills.py — GENERATED_BEGIN/GENERATED_END markers. MarkerError(ValueError) raised on malformed OR missing markers (UAT-5). generate_skill() preserves hand-written body below END marker. Shows unified diff of changes (UAT-2).\n- tests/test_gen_skills.py — Marker preservation, MarkerError on missing markers (UAT-5), MarkerError on malformed markers, diff output, template rendering\n- skills/templates/*.j2 — Jinja2 templates for SKILL.md headers (1 per role or shared template)\n\n### Acceptance Criteria\n- AC4: Given SKILL.md with markers, header updated, body preserved\n- AC4a: MarkerError on malformed markers AND on missing markers (UAT-5). No silent prepending, no silent body discard.\n- AC2a: Prints unified diff of changes before writing (UAT-2)\n- AC7: All 554 existing tests pass\n- AC8: Jinja2 templates render with StrictUndefined (parametrized over 4 roles)\n- AC10 (partial): gen_skills pipeline step succeeds\n\n### Implementation Notes\n- Jinja2 with StrictUndefined — catches template variable errors at render time\n- Developer must manually add BEGIN/END markers to each SKILL.md before gen_skills.py will operate\n- 38 SKILL.md files exist with 0 markers today — gen_skills.py refuses to touch them until markers are placed\n- Templates parametrized over roles: supervisor, worker, reviewer, user (4 role templates)\n- Diff output: use difflib.unified_diff comparing old file content vs new generated content\n- pyproject.toml: add jinja2 to dev dependencies","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-82ya","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Implementation complete. All leaf tasks closed. 679 tests pass (4 skipped, pre-existing). Production code verified via test suite and code inspection.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3: SKILL.md Generator (Python → SKILL.md) with Diff + MarkerError","updated_at":"2026-02-26T07:21:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No BLOCKER findings for SLICE-3 test quality","closed_at":"2026-02-26T04:30:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4a510721728f0c0e18f71ebbccb086f9b3f7153fbd485aa72e1bd69c1ba29cb8","created_at":"2026-02-26T04:30:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-82ya.1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-2 BLOCKER","updated_at":"2026-02-26T04:30:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3c029636d4d27aa3fb5c4294641d1528ce387980e77993001061170cd3eda352","created_at":"2026-02-26T04:30:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-82ya.2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-2 IMPORTANT","updated_at":"2026-02-26T04:30:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9446536a82bd7b74968e545a344f2b6aade29a4b02845b681b1be6e5e09ad9e5","created_at":"2026-02-26T04:30:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"The Jinja2 template skill_header.j2 (line 63) renders command in backtick+parens and context in italics after em-dash: '**Step N:** instruction (`command`) — _context_ → `next_state`'. Tests in TestStartupSequenceSection and TestProcedureStepsInGeneratedHeader verify instruction text and next_state ('→ `p8`') but never assert that command or context strings appear in the rendered output. Supervisor step 1 has command='Skill(/aura:supervisor)', step 2 has command='bd show ...', step 3 has context='TeamCreate with /aura:explore role; minimum 3 agents'. If someone removed the command/context Jinja2 conditionals from the template, no test would fail. Add tests that e.g. assert 'Skill(/aura:supervisor)' appears in supervisor output and 'TeamCreate' appears for step 3 context.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-82ya.2.1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-3: No test verifies command/context rendering in SKILL.md output","updated_at":"2026-02-26T04:30:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No MINOR findings for SLICE-3 test quality","closed_at":"2026-02-26T04:30:56Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"336add72233ad16e5aeb980ca789a4f481f4a3b6bdb32b8a1272082e3db2b1ce","created_at":"2026-02-26T04:30:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-82ya.3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-2 MINOR","updated_at":"2026-02-26T04:30:56Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0e09d36f6cb3bbc628efd455b96c9832de6dbe4d5f0fd93096660e0d42ca2ffc","created_at":"2026-02-26T08:38:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-83eq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 BLOCKER: Registry CLI UAT deltas (duplicate prompt, absolute paths)","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d7254fe9a55231fea7898cbde1bc83f9abad2f0c4ce1e765d9ff03c61c8b440e","created_at":"2026-02-27T06:53:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-vd4m\n---\nMINOR findings for REVIEW-C-1 (Reviewer C — Elegance)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-83sn","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"REVIEW-C-1 MINOR","updated_at":"2026-02-27T06:53:40Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9afa9d0a37ce3cec963bde4fdf80d75f1a22a4cb83961d0c07f026191d3a1cb2","created_at":"2026-02-25T22:37:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings for SLICE-1 (Python constraints). Elegance axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-84j4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 MINOR","updated_at":"2026-02-25T22:37:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d4223ea3d418fe308d9961ec3216b3028fb8112c4c2c5ef6f4923ef359a9fd63","created_at":"2026-02-26T23:47:17Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: docs/worker.md, lines 155-168 and line 34\n\nThe Activities section contains a Python code block:\n\n  async with Worker(\n      client,\n      task_queue=task_queue,\n      workflows=[EpochWorkflow],      # \u003c-- STALE\n      activities=[...],\n  ):\n\nBut bin/worker.py (line 121) actually registers:\n  workflows=[EpochWorkflow, SliceWorkflow, ReviewPhaseWorkflow]\n\nThis was introduced after the SLICE-2 doc was written (aura-plugins-zh0j), but\naura-plugins-cz2t added SliceWorkflow and ReviewPhaseWorkflow to worker.py.\nThe doc was not updated to match.\n\nAdditionally, the ASCII architecture diagram (line 34) only shows EpochWorkflow\nunder run_worker() — it does not reflect the 3-workflow registration.\n\nThe 'query_audit_events' activity description on line 151 also says\n'optional phase filter' but now also accepts a role filter (added in aura-plugins-oyxw).\n\nFix:\n  1. Update workflows=[...] in the code block to include SliceWorkflow and ReviewPhaseWorkflow.\n  2. Update the ASCII diagram to show all 3 workflow types.\n  3. Update query_audit_events description: 'optional phase and role filters'.\n\nSlices: aura-plugins-zh0j (doc was written here), aura-plugins-cz2t (added workflows),\n        aura-plugins-oyxw (added role param)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-84xf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: docs/worker.md has stale Worker registration example — omits SliceWorkflow and ReviewPhaseWorkflow","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:46Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"78d6aff6a23e96e629112eaaddbe903317bdd562b6811800ae639466bafcad03","created_at":"2026-02-26T03:31:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-kg25\n  reviewer: cartographer-b\n  round: 1\n---\nMINOR findings from Cartographer B (Test quality) on SLICE-4.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-85e7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 MINOR","updated_at":"2026-02-26T03:31:46Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bc9f6a5bfc79976aa3833fc8049e08a4036100c2da5c4a2afcbb3e21d07cad2d","created_at":"2026-02-26T15:33:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Define any types needed for P9_SLICE fail-fast test (SliceResult, etc). Version bump 0.7.0 in pyproject.toml.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-86ue","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-5-L1: Types — P9 fail-fast pattern types","updated_at":"2026-02-26T18:34:51Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"782c29f0e05946356926c519e93e78bacf03af43a6e0a78fd3f33ed0d2d0cb83","created_at":"2026-02-26T04:03:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  uat: aura-plugins-6p9j\n---\nUser verbatim: 'Both markers should say ... GENERATED FROM aura schema'.\nCurrent: \u003c!-- BEGIN GENERATED FROM schema --\u003e / \u003c!-- END GENERATED --\u003e\nRequired: \u003c!-- BEGIN GENERATED FROM aura schema --\u003e / \u003c!-- END GENERATED FROM aura schema --\u003e","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-87ir","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"MINOR: Marker strings should say 'GENERATED FROM aura schema'","updated_at":"2026-02-26T09:38:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:22:58Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:46Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-4 BLOCKER severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-8be","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 BLOCKER","updated_at":"2026-02-22T02:22:58Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"128c18333c549cfc8432f46cd79b4d21f248a5bde2740fa8d0a8fcac89737eec","created_at":"2026-02-22T12:56:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"tests/test_constraints.py lines 68-74 define a local _make_state() helper that is functionally identical to the shared _make_state() in tests/conftest.py. Finding 0yd (SLICE-2 minor) was supposed to eliminate local helper duplicates, but the conftest.py shared helper for _make_state is not imported by test_constraints.py. Instead a local copy persists. This violates the shared-fixtures design principle established in SLICE-1.\n\nLocation: tests/test_constraints.py lines 68-74\nFix: Remove local _make_state() definition and import from conftest: from conftest import _make_state","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-8ejz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"test_constraints.py defines local _make_state() duplicate instead of importing from conftest.py","updated_at":"2026-02-22T17:30:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:53:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e4ca0429027e3235ca16a6b68c7b3eac0a766bf3fc92e3a345459fc6eb5862af","created_at":"2026-02-23T03:23:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Create scripts/aura_protocol/context_injection.py with _ROLE_CONSTRAINTS, _PHASE_CONSTRAINTS static dicts, get_role_context(RoleId) → RoleContext, get_phase_context(PhaseId) → PhaseContext. Pure lookup module, ConstraintContext with typed when+then (UAT-4). References: slice=aura-plugins-kg25, impl_plan=aura-plugins-94yc","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-8gud","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S4-L1: context_injection.py — runtime role/phase context with ConstraintContext","updated_at":"2026-02-23T03:53:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-4","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T01:47:29Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:31:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-06g\n  urd: aura-plugins-umi\n  proposal: aura-plugins-gmv\n---\n## Specification\nPython Protocol interfaces for cross-project integration + A2A-compatible content types. Uses structural subtyping (typing.Protocol, runtime_checkable).\n\n### Protocol Interfaces\n- ConstraintValidatorInterface — validate(state) -\u003e list[ConstraintViolation]\n- TranscriptRecorder — record phase transitions, constraint checks, review votes\n- SecurityGate — check tool permissions\n- AuditTrail — record and query audit events\n\n### A2A Content Types (minimal v1 subset)\n- TextPart, FilePart, DataPart (frozen dataclasses)\n- Part = TextPart | FilePart | DataPart (union type)\n- ToolCall (MCP-compatible tool call representation)\n- ModelId (models.dev {provider}/{model} composite identifier)\n\n### Event Stub Types (frozen dataclasses)\n- PhaseTransitionEvent, ConstraintCheckEvent, ReviewVoteEvent\n- AuditEvent, ToolPermissionRequest, PermissionDecision\n\n## Files Owned\n- scripts/aura_protocol/interfaces.py (NEW)\n- tests/test_interfaces.py (NEW)\n\n## Acceptance Criteria\n- AC9: Given class implementing Protocol when isinstance() checked then True should not require subclassing\n- AC10: Given ModelId.parse(\"anthropic/claude-opus-4-6\") when parsed then provider=\"anthropic\" model=\"claude-opus-4-6\" should not accept strings without \"/\"\n\n## Validation Checklist\n- [ ] All Protocol interfaces are runtime_checkable\n- [ ] A2A Part union covers 3 types\n- [ ] ModelId.parse() validates format\n- [ ] Event stub types defined\n- [ ] Tests cover AC9 + AC10","design":"{\"validation_checklist\":[\"Protocol interfaces runtime_checkable\",\"Part union complete\",\"ModelId validates format\",\"Event stubs defined\"],\"acceptance_criteria\":[{\"given\":\"Protocol implementor\",\"when\":\"isinstance checked\",\"then\":\"returns True\",\"should_not\":\"require subclassing\"},{\"given\":\"ModelId.parse(valid)\",\"when\":\"parsed\",\"then\":\"correct provider and model\",\"should_not\":\"accept invalid format\"}],\"ratified_plan\":\"aura-plugins-gmv\"}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-8i5","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4: interfaces.py — Cross-project integration + A2A types","updated_at":"2026-02-22T01:47:29Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:10Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:50Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-1 (types.py / __init__.py) minor-level findings.\n\n## Finding: TestConstraintSpecs.test_known_constraints_present uses a fixed hardcoded subset — does not verify ALL 22 constraints (MINOR)\n\ntest_aura_types.py line 289-294 checks 8 specific constraint IDs are present. The schema-sync integration test (test_schema_types_sync.py) does verify ALL constraints against schema.xml, so this is covered at the integration level. However, the unit test could be replaced with a count check (assert len(CONSTRAINT_SPECS) == 22) to make the intent clearer. This is minor because the integration test provides full coverage.\n\n## Finding: _make_state helper in test_constraints.py uses **kwargs pass-through to EpochState constructor — obscures which fields are being set in individual tests (MINOR)\n\nThe _make_state(phase, epoch_id, **kwargs) helper delegates all extra kwargs directly to EpochState. While functional, this means a reader cannot see from the helper signature which fields are valid. Named helper variants (_make_state_at_p4_with_votes, _make_state_at_p10_with_votes, _all_accept_state) partially address this. Recommend adding typed overloads or named parameters for the most common cases (blocker_count, current_role). This improves fixture clarity but does not affect correctness.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-8jy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 MINOR","updated_at":"2026-02-22T17:24:10Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-2","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:43:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9414247f7060a8820a05c7efeb25863b0d79ef0c45cc27a938e0c8789dc2b10f","created_at":"2026-02-27T06:25:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-vjsk\n  urd: aura-plugins-7vtb\n  depends_on_slice: aura-plugins-s7dj\n---\n## Specification\nNew systemd user service for aurad + aura-msg CLI stub (--help only).\n\n## Files Owned (exclusive)\n- nix/aurad-service.nix (NEW — systemd user service \"aurad\", After=temporal-dev-server.service)\n- bin/aura-msg.py (NEW — stub with argparse --help, planned subcommands)\n- flake.nix (ADD ONLY: packages.aura-msg, homeManagerModules.aurad-service)\n- tests/test_aura_msg.py (NEW — test stub --help, parse_args)\n\n## Acceptance Criteria\nGiven aurad service when started then After=temporal-dev-server.service\nGiven aura-msg stub when --help then shows planned subcommands (start-epoch, signal-vote, query-state, advance-phase)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-8lfp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: aurad systemd service + aura-msg stub","updated_at":"2026-02-27T06:43:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7e12f830c5801abc216bc35611b1138b1f2c1da5d95ce53a0143a21cdffffc23","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-8nvc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-2 MINOR","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:22:01Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:52Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-2 (state_machine.py) — BLOCKER findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-8pm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 BLOCKER","updated_at":"2026-02-22T02:22:01Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T03:35:12Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T03:27:19Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-06g\n  urd: aura-plugins-umi\n---\n## UAT Revision Requests (verbatim)\n\n### 1. Workflow error handling: store error in state\nUser chose: \"Add last_error field to EpochState. Callers check current_state().last_error after sending signals.\"\n\nChanges needed:\n- state_machine.py: Add `last_error: str | None = None` field to EpochState\n- workflow.py: Narrow `except Exception` to `except TransitionError`, set `self._sm.state.last_error = str(e)` on catch\n- workflow.py: Clear last_error on successful advance\n- Update tests to verify last_error behavior\n\n### 2. Test quality improvements (user feedback, verbatim)\n\"Should make sure that we are only testing the high-level APIs and public interfaces and behaviours, NOT implementation details. Should be continuing to use the typed enums, and not stringly-typed APIs. Should also be using putting common inline values into the fixtures.\"\n\nChanges needed across ALL test files:\n- Replace any string literals with typed enum values (e.g., use PhaseId.P1_REQUEST not \"p1\")\n- Move repeated inline values (epoch IDs, test descriptions, etc.) into fixtures\n- Create tests/conftest.py with shared fixtures if needed\n- Remove any tests that assert on implementation details (internal state, private methods)\n- Keep tests focused on public API behavior (return values, exceptions, isinstance)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-8sk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"FIX: UAT revisions — workflow error handling + test quality","updated_at":"2026-02-22T03:35:12Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b3739f518577190eae7923687d894c88b3e0bcbeb8167513d3f28476f83fcb78","created_at":"2026-02-27T06:54:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"docs/aura-msg.md:52-69\n\nThe '--help' example in the docs shows:\n  'aura-msg — Aura Protocol v3 CLI.\n   Programmatic interface for model harness hooks to interact with EpochWorkflow\n   running inside aurad.'\n\nBut bin/aura-msg.py:22-26 has the parser description:\n  'CLI stub for Aura Protocol model harness hooks. All subcommands are planned and not yet implemented.'\n\nThe actual --help output would say 'CLI stub...' not 'Aura Protocol v3 CLI. Programmatic interface...'\n\nFix: either (a) align aura-msg.py description text to match the aspirational docs text, or (b) update\nthe docs to show the actual --help output. Option (a) is better UX — the stub's description should\ncommunicate intent, not implementation status.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-8uc1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: aura-msg.md --help example output doesn't match actual stub description","updated_at":"2026-02-27T06:54:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dfa2a4b3f6e05a1e2ea33b77f5ebc2be98000fe3120f70eddf37179f51d25c65","created_at":"2026-02-26T16:01:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-sp6y\n  review: aura-plugins-mwf0\n---\nIMPORTANT findings for SLICE-3 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-8w06","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T16:02:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"04de0a0f5e1f57a8a125f14a1f8e1db63f0474fb268ee73d85f4800b2c6336a8","created_at":"2026-02-26T07:12:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - All three round-1 blockers are resolved.\n\n## BLOCKER-1 (Double-bump guard): RESOLVED\nThe guard `resolved_mp not in {vf.path.resolve() for vf in files}` is correct and sufficient. MarketplaceEntry.path is already resolved at load time (expanduser().resolve() in load()), and vf.path.resolve() is called inline for the comparison. Symlinks and ~ expansion are both handled. Guard is correct.\n\n## BLOCKER-2 (Rollback hazard): RESOLVED\nRegistry marketplace write is placed AFTER the try/except block (after git commit and tag). This correctly removes the rollback hazard: if the marketplace write fails post-commit, the release is already committed and tagged locally; the user can fix the external file manually. The rationale in the proposal is sound.\n\n## BLOCKER-3 (Entry-level deserialization): RESOLVED\nPluginRegistry.load() now explicitly checks `if 'name' not in p or 'path' not in p` per plugin entry, prints a warning to stderr, and continues (warn+skip). This satisfies R6 spirit. Structural failures (invalid JSON, missing marketplaces key) still exit 2.\n\n## New findings (non-blocking)\n\n### NOTABLE: Marketplace entry missing 'path' key not symmetrically guarded\n`m.get('path', '')` for marketplace entries will resolve '' to CWD if path key is absent. This is the same pattern as the old BLOCKER-3 but one level up. Since the marketplace entry IS checked via `mp_path.exists()` (CWD always exists), a malformed entry missing 'path' would NOT be warned/skipped — it would silently try to treat CWD as a marketplace.json path. This is a minor correctness gap, acceptable at MVP scope (registries are user-constructed), but should be tracked as a follow-up hardening item.\n\n### MINOR: Pseudocode uses new_version_str vs actual variable new_str\nNaming inconsistency in SLICE-5 pseudocode; implementation must bind to the actual variable name. No blocker.\n\n## Summary\nThe proposal correctly addresses all stated user requirements. The three correctness blockers from round 1 are resolved with appropriate mechanisms. One minor gap exists (empty/missing marketplace path key) but is narrow in scope and does not affect the primary use case. ACCEPT.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-90s0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-2-REVIEW-A-2: Plugin registry + marketplace fix + test quality","updated_at":"2026-02-26T07:12:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:21:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:06Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-2 (state_machine.py) blocker-level findings.\n\n## Finding Summary\n\nNO BLOCKER findings identified for SLICE-2.\n\n- Tests import from production modules (aura_protocol.state_machine, aura_protocol.types).\n- SUT (EpochStateMachine) is NOT mocked. Tests exercise real state machine instances.\n- All 4 AC tests (AC1-AC4) present and test observable outcomes (exceptions raised, return values, state after advance).\n- DI via constructor injection (custom specs param) is tested and working.\n- Integration with full 12-phase lifecycle verified (_advance_to helper + TestSequentialProgression).\n- _CONSENSUS_GATED only includes P4→P5 (not P10→P11); P10→P11 consensus is gated by _BLOCKER_GATED and a separate advance-time check. Tests cover both paths correctly.\n\nThis group is empty and will be closed immediately.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-919","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 BLOCKER","updated_at":"2026-02-22T02:21:34Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:53:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5e15190af17ac8325e2abfc74fa63de65848ddbd962e9f7592dbe4c46cd9b648","created_at":"2026-02-23T03:23:02Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Create tests/test_gen_skills.py with marker preservation (AC4), MarkerError on missing/malformed markers (AC4a, UAT-5), diff output (AC2a), template rendering with StrictUndefined parametrized over 4 roles (AC8). References: slice=aura-plugins-82ya, impl_plan=aura-plugins-94yc","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-91by","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S3-L3: Tests — marker preservation, MarkerError, diff, template rendering","updated_at":"2026-02-23T03:53:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:21Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-3 IMPORTANT severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-947","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-22T17:24:21Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:21:49Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9b1c5df9f943cb0af86a55d16ea016fd3ac96c9be97bf1479feffc735d9c1f6b","created_at":"2026-02-23T03:08:25Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-w115\n  proposal: aura-plugins-mg6h\n  urd: aura-plugins-w07o\n  uat: aura-plugins-tvkz\n---\n\n## Implementation Plan\n\nRatified PROPOSAL-3 with 6 UAT revisions. 4 vertical slices: SLICE-1 is foundation (sequential), SLICE-2/3/4 are parallel after SLICE-1 completes.\n\n### Execution Order\n```\nSLICE-1 (foundation, sequential)\n    ├─→ SLICE-2 (parallel)\n    ├─→ SLICE-3 (parallel)\n    └─→ SLICE-4 (parallel)\n```\n\n### Worker Assignment\n- All slices: sonnet workers in worktree isolation\n- SLICE-1 must complete and be merged before SLICE-2/3/4 can start\n- SLICE-2, SLICE-3, SLICE-4 run in parallel after SLICE-1\n\n### Regression Safety\n- Each slice runs full test suite (554+ existing tests) before completion\n- AC7: No regressions. AC11: Temporal isolation verified.\n\n### UAT Revisions Mapped to Slices\n| UAT | Revision | Slice |\n|-----|----------|-------|\n| UAT-1 | Hybrid codegen bootstrap (gen_types.py) | SLICE-1 |\n| UAT-2 | Diff output on generation | SLICE-2, SLICE-3 |\n| UAT-3 | role-ref/phase-ref in schema.xml | SLICE-2 |\n| UAT-4 | ConstraintContext frozen dataclass | SLICE-1 (type), SLICE-4 (usage) |\n| UAT-5 | MarkerError on missing markers | SLICE-3 |\n| UAT-6 | ProcedureStep supervisor+worker POC | SLICE-1 |","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-94yc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"IMPL_PLAN: Schema-driven protocol engine v2 — 4-slice parallel implementation","updated_at":"2026-02-26T07:21:49Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0e3ea57b41a7ab88ef89999ca004cbc1151fc259a6d9782a08b302583a9ccb9d","created_at":"2026-02-23T11:24:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-z8ga\n  uat: aura-plugins-sm9c\n---\n## UAT Feedback (verbatim)\nUser chose 'Track A2A runtime as FOLLOWUP' during Component 5 UAT.\n'A2A compliance' means connecting ProcedureStep.next_state to an actual\nstate machine runtime that validates transitions at runtime (guards, entry/exit\nactions, A2A-protocol-compatible state definitions).\n\n## Current state\nProcedureStep.next_state: PhaseId | None gives FSM typechecking at schema definition\ntime. Invalid phase refs are caught statically. But no runtime enforcement.\n\n## Required\nDesign and implement A2A-compatible state machine runtime using ProcedureStep\nas the step definition source. May require new types (guards, transitions, events).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-954g","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP: A2A-compliant runtime for ProcedureStep FSM","updated_at":"2026-02-23T11:24:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:10:46Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-j2k\n  elicit: aura-plugins-wqw\n---\n\n# URD: Automated Release Tagging and Version Bumping\n\n## 1. Purpose\nA CLI tool (bin/aura-release) that automates version bumping, CHANGELOG generation, git commit, and annotated tagging for the aura-plugins repository.\n\n## 2. Scope\n- Single Python 3.10+ script, stdlib only (zero external dependencies)\n- Follows existing bin/ tool conventions (argparse, same shebang pattern)\n- Operates on the local git repository only (no push)\n\n## 3. Functional Requirements\n\n### FR-1: Version Bump\n- Accept bump type: major | minor | patch\n- Parse current version from pyproject.toml (source of truth)\n- Compute new version per semver rules\n- Update version in exactly 3 files:\n  - pyproject.toml: project.version field\n  - .claude-plugin/plugin.json: top-level version field\n  - .claude-plugin/marketplace.json: metadata.version AND plugins[0].version\n- Must NOT modify plugins[1].version (agentfilter, external)\n\n### FR-2: Version Consistency Check\n- Before bumping, validate all 3 files have the same version\n- If versions are inconsistent, offer a --sync flag to align them to pyproject.toml's version before bumping\n- On first run with existing drift, --sync aligns marketplace.json to current 0.2.2\n\n### FR-3: CHANGELOG Generation\n- Auto-generate CHANGELOG.md entries from git log between tags\n- Use \"Keep a Changelog\" format (https://keepachangelog.com)\n- Group commits by type using conventional commit prefixes (feat, fix, chore, etc.)\n- If no prior tag exists, include all commits since initial commit\n\n### FR-4: Git Commit\n- Stage the 3 version files + CHANGELOG.md\n- Create commit with message: \"chore: release vX.Y.Z\"\n\n### FR-5: Git Tag\n- Create annotated tag: vX.Y.Z\n- Tag message: \"Release vX.Y.Z\"\n\n## 4. Non-Functional Requirements\n\n### NFR-1: Pre-flight Checks\n- Working tree must be clean (no uncommitted changes beyond .beads/)\n- Must be on a branch (not detached HEAD)\n- Current version must parse as valid semver\n\n### NFR-2: Dry Run\n- Support --dry-run flag showing what would happen without making changes\n\n### NFR-3: Error Handling\n- Atomic: if any step fails, roll back file changes (git checkout the files)\n- Clear error messages for each failure mode\n\n### NFR-4: Idempotency\n- Running with --sync when versions already match is a no-op\n\n## 5. CLI Interface\n\n```\naura-release \u003cmajor|minor|patch\u003e [--dry-run] [--sync] [--no-changelog] [--no-commit] [--no-tag]\naura-release --check  # just validate version consistency\n```\n\n## 6. Files Affected\n- bin/aura-release (NEW — the tool itself)\n- pyproject.toml (version field)\n- .claude-plugin/plugin.json (version field)\n- .claude-plugin/marketplace.json (2 version fields)\n- CHANGELOG.md (created/appended)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-99q","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"URD: Release automation requirements document","updated_at":"2026-02-22T10:40:27Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:16:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4d24bd5e99d435f8f23cae0567c8a87544c9027f71906b13e24c1887802afce5","created_at":"2026-02-22T12:07:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-cts\n  urd: aura-plugins-s6i\n  proposal: aura-plugins-r1z\n---\n\n## Specification\nModify EpochState and EpochStateMachine for type safety, timestamp decoupling, and consensus uniformity. Create shared test fixtures.\n\n## Changes\n1. EpochState.current_role: str → RoleId (default RoleId.EPOCH)\n2. EpochState.severity_groups: dict[SeverityLevel, set[str]] = field(default_factory=dict)\n   - Auto-populate with 3 empty SeverityLevel keys when advance() transitions TO P10\n3. advance() accepts optional timestamp: datetime | None param; fallback datetime.now(UTC)\n4. Add (PhaseId.P10_CODE_REVIEW, PhaseId.P11_IMPL_UAT) to _CONSENSUS_GATED\n5. Create tests/conftest.py with shared _advance_to() and _make_state() helpers\n6. Fix bare except in test_aura_types.py mutation tests → except specific type\n\n## Files Owned\n- scripts/aura_protocol/state_machine.py\n- tests/test_state_machine.py\n- tests/conftest.py (NEW)\n- tests/test_aura_types.py (mutation test fix only)\n\n## Acceptance Criteria\n- AC1: EpochState.current_role is RoleId type, not str\n- AC2: advance(timestamp=custom_ts) produces TransitionRecord.timestamp == custom_ts\n- AC3: P10→P11 without consensus raises TransitionError (matching P4→P5)\n- AC5: severity_groups auto-populated with 3 SeverityLevel keys on P10 entry\n- AC9: All 475+ existing tests still pass\n\n## Findings Adopted\ntcn, don, 1ic, 4hu, v1b, o83, 295, 8jy","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9ae","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Implementation complete. 494 tests pass (475 original + 19 new). Resolved leaf tasks: tcn, don, 1ic, 4hu, v1b, o83, 295, 8jy. All 6 changes implemented: (1) current_role: str→RoleId, (2) severity_groups auto-populated on P10 entry, (3) advance() optional timestamp param, (4) P10→P11 added to _CONSENSUS_GATED, (5) conftest.py shared _advance_to() and _make_state(), (6) test_aura_types.py bare except fixed.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-1: state_machine.py — Type Safety + Timestamp + Shared Fixtures","updated_at":"2026-02-22T12:16:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:37:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2466732d40b52df7b1e183219e2f92611d5eec2ec76e47962e3af0f02f7689e5","created_at":"2026-02-26T08:30:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-qfze\n  followup_urd: aura-plugins-wloc\n  original_urd: aura-plugins-w07o\n  followup_ure: aura-plugins-dt90\n  original_request: aura-plugins-w115\n  supersedes: aura-plugins-w5xu\n---\n\n# FOLLOWUP_PROPOSAL-2: Protocol Engine v2 Follow-up (Revised)\n\n## Revision Summary (PROPOSAL-1 → PROPOSAL-2)\n\nThree targeted corrections from reviewer consensus. All other content is unchanged.\n\n| Correction | Axis | Finding | Change |\n|-----------|------|---------|--------|\n| 1 | A (Correctness) | AC-A1-1 | Added explicit `skill_header.j2` filename constraint; test must provide BOTH temp template dir AND valid SKILL.md with markers |\n| 2 | B (Test quality) | B3 / AC-B3-2 | Worker round-trip only preserves 3 fields (id, order, instruction); command/context/next_state are None. Revised AC-B3-2 to assert exactly those 3 fields and confirm the 3 remaining are None. |\n| 3 | C (Elegance) | D2 severity | Reclassified D2 from MINOR to IMPORTANT — silent coercion of missing required element is a correctness asymmetry, not a style issue. |\n\n---\n\n## Problem Space\n\n**Axes:** correctness (silent regression risk), test coverage completeness, code naming clarity\n**Has-a / Is-a:**\n- Group A: Tests *have-a* test isolation problem — the StrictUndefined test creates its own `jinja2.Environment` instead of exercising `gen_skills.py`'s Environment; EPOCH constraints *have-a* coverage gap in `test_context_injection.py`\n- Group B: `ProcedureStep` *has-a* 6-field dataclass (id, order, instruction, command, context, next_state) — existing round-trip and sync tests only assert 3 of 6 fields\n- Group C: `gen_schema.py` *has-a* naming inconsistency — `_ROLE_CONSTRAINTS`/`_PHASE_CONSTRAINTS` shadow `context_injection.py`'s identically-named dicts with inverted semantics\n- Group D: `schema_parser.py` *has-a* silent failure mode (missing `\u003cinstruction\u003e` → empty string instead of error); slug pin tests *are* absent; `next-state` optionality *is* undocumented\n\n**Primary risk:** Group A findings are silent regression risks — the StrictUndefined test passes even if `gen_skills.py` removes `StrictUndefined`. Group B findings mean a regression in `ProcedureStep.command` or `.context` generation would not be caught by the round-trip cycle.\n\n## Scope\n\nGroups A + B + D2 are IMPORTANT (7 findings; all must be addressed before close).\nGroups C + D1 + D3 are MINOR (4 findings; address in FOLLOWUP-SLICE-3 alongside others).\n\n**Scope change vs PROPOSAL-1:** D2 moved from MINOR to IMPORTANT. It is grouped into SLICE-3 for implementation locality (schema_parser.py + test_schema_parser.py), but is now a blocker for epic close.\n\n---\n\n## Engineering Tradeoffs\n\n| Option | Pros | Cons | Decision |\n|--------|------|------|----------|\n| Group B: test private `_template_env` or internal rendering paths | Easy to write | Violates public-interface constraint; brittle to refactor | REJECTED |\n| Group B: call `generate_skill()` / `parse_schema()` / compare `PROCEDURE_STEPS` directly | Durable, public-interface-only | Slightly more setup | CHOSEN |\n| A1: Create a separate bad-template fixture | Precise isolation | Adds more fixture boilerplate | Acceptable; use minimal fixture |\n| A1: Call `generate_skill()` with a template that references undefined var | Tests gen_skills.py's actual Environment | Requires correct template filename matching gen_skills.py's loader | CHOSEN |\n| C1: Rename using `replace_all` with automated grep check | Safe, complete | Must update all import sites | CHOSEN (all import sites: test_gen_schema.py) |\n| D2: Raise `SchemaParseError` vs. return empty string | Consistent with `_require()` pattern; catches malformed XML | Technically a behavior change | CHOSEN (consistent with existing error handling) |\n\n---\n\n## Slice Decomposition\n\nSlices are vertical: each slice owns its files end-to-end with no shared file ownership.\n\n### FOLLOWUP-SLICE-1: Test Isolation Fixes (A2)\n\n**Files owned:**\n- `tests/test_context_injection.py` — A2: add parametrized EPOCH Ride the Wave inclusion tests\n\n**What changes:**\n- A2: Add a new class `TestEpochRideTheWaveConstraints` in `test_context_injection.py` with 4 parametrized tests, one per Ride the Wave constraint (C-supervisor-cartographers, C-integration-points, C-slice-review-before-close, C-max-review-cycles), asserting each is in `get_role_context(RoleId.EPOCH).constraints` by id.\n\n**No source code changes** — tests only.\n\n---\n\n### FOLLOWUP-SLICE-2: ProcedureStep Test Coverage (A1, B1, B2, B3, B4)\n\n**Files owned:**\n- `tests/test_gen_skills.py` — A1 (replace StrictUndefined test), B2 (new rendering test)\n- `tests/test_schema_types_sync.py` — B1, B4\n- `tests/test_gen_schema.py` — B3 (extend round-trip tests)\n\n**What changes:**\n\n**A1 — test_gen_skills.py:**\nRemove the existing `TestStrictUndefined.test_undefined_variable_raises_undefined_error` test that creates its own `jinja2.Environment`. Replace with a test that calls `generate_skill()` with a Jinja2 template that references an undefined variable, and asserts `jinja2.UndefinedError` is raised.\n\nTemplate fixture requirements (BOTH required):\n1. A temp template directory containing a file named `skill_header.j2` with content `{{ undefined_var }}`. The filename MUST be `skill_header.j2` — this is the exact filename loaded by `_render_header()` via `env.get_template('skill_header.j2')`. Any other filename causes `TemplateNotFound` instead of `UndefinedError`, which does not test gen_skills.py's Environment.\n2. A valid SKILL.md file at `skill_path` with properly placed BEGIN/END markers. The markers are required before `_render_header()` is called. Without them, a `MarkerError` is raised before the template rendering path is reached, and the test fails to exercise the Environment at all.\n\n**B1 — test_schema_types_sync.py:**\nAdd assertions for `command` and `context` field values in `TestProcedureStepsMatchSchema`. Extend `test_supervisor_steps_from_schema` or add `test_supervisor_step_command_and_context_values`:\n- Assert that `PROCEDURE_STEPS[RoleId.SUPERVISOR]` steps with non-None `.command` have specific expected string values (assert against known literal values from `types.py` via `PROCEDURE_STEPS` — public API, not internal dict).\n- Assert that steps with non-None `.context` have specific expected string values.\n- Use the public `PROCEDURE_STEPS` dict directly (it is exported from `aura_protocol`).\n\n**B2 — test_gen_skills.py:**\nAdd `TestProcedureStepCommandContextRendering` class. Call `generate_skill(RoleId.SUPERVISOR, ...)` and assert:\n- The rendered output contains at least one backtick-wrapped command (`` (`...`) ``) in a step line (template renders command as `` (`{{ step.command }}`) ``).\n- The rendered output contains at least one em-dash italic context (` — _..._`) in a step line.\nThese assertions are against the rendered string returned by `generate_skill()` — observable output, not template internals.\n\n**B3 — test_gen_schema.py:**\nExtend round-trip tests for supervisor and worker steps to assert all fields via the `parsed_spec` fixture (parse_schema → ProcedureStep). The `parsed_spec` fixture already calls `parse_schema()` on gen_schema output — this is a public-interface round-trip test.\n\nFor supervisor steps: assert all 6 fields (id, order, instruction, command, context, next_state) survive the Python→XML→parse round-trip.\n\nFor worker steps: the schema_parser synthesizes worker step ids from a hardcoded list and only preserves 3 fields. The fields command/context/next_state are NOT stored in `\u003ctdd-layers\u003e` XML — they are all None after round-trip. Assert only the 3 fields that survive the round-trip (id, order, instruction), and explicitly assert that command, context, and next_state are each None after parsing.\n\n**B4 — test_schema_types_sync.py:**\nFix `test_supervisor_steps_from_schema` docstring: extend the test body to assert `step.id == xml_step.get(\"id\")` for each step, making the docstring truthful by matching assertion to description.\n\n**No source code changes** — tests only.\n\n---\n\n### FOLLOWUP-SLICE-3: Code Clarity + Parser Correctness + Documentation (C1, C2, D1, D2, D3)\n\n**Files owned:**\n- `scripts/aura_protocol/gen_schema.py` — C1 (rename dict variables), C2 (move lazy import), D3 (doc comment for next-state optionality)\n- `scripts/aura_protocol/schema_parser.py` — D2 (raise SchemaParseError on missing `\u003cinstruction\u003e`), D3 (doc comment)\n- `tests/test_gen_schema.py` — C1 (update import of renamed dicts), D1 (add slug pin tests)\n- `tests/test_schema_parser.py` — D2 (add test for missing `\u003cinstruction\u003e` raises SchemaParseError)\n\n**What changes:**\n\n**C1 — gen_schema.py:**\nRename module-level dicts:\n- `_ROLE_CONSTRAINTS` → `_CONSTRAINT_TO_ROLE_REF`\n- `_PHASE_CONSTRAINTS` → `_CONSTRAINT_TO_PHASE_REF`\n\nUpdate all references within `gen_schema.py` (internal usage) and update `test_gen_schema.py` which imports these names.\n\n**C2 — gen_schema.py:**\nIdentify the lazy import inside `_constraints_for_role()` (if present after earlier refactors). Move any such import to module-level. Confirm no circular import risk by verifying the import chain: `gen_schema` → `context_injection` (already imported at top). If the lazy import was already removed in a prior refactor, document this finding and mark C2 as a no-op.\n\n**D1 — test_gen_schema.py:**\nAdd `TestSlugPinLiterals` class with tests that pin specific slug literals:\n- `assert any(s.id == \"S-supervisor-call-skill\" for s in PROCEDURE_STEPS[RoleId.SUPERVISOR])` — verifies the first supervisor step id has not been silently renamed\n- `assert any(s.id == \"S-supervisor-cartographers\" for s in PROCEDURE_STEPS[RoleId.SUPERVISOR])` — verifies Ride the Wave step id is pinned\n- `assert any(s.id == \"S-worker-types\" for s in PROCEDURE_STEPS[RoleId.WORKER])` — verifies worker step ids\n\nThese are pinned literal comparisons, not just Python-vs-Python cross-checks.\n\n**D2 — schema_parser.py (IMPORTANT, blocker for epic close):**\nIn `_parse_procedure_steps()`, change the silent empty-string fallback on missing `\u003cinstruction\u003e` to raise `SchemaParseError`:\n\n```python\n# Before (silent):\ninstruction = instr_el.text.strip() if instr_el is not None and instr_el.text else \"\"\n\n# After (raises):\nif instr_el is None or not instr_el.text:\n    raise SchemaParseError(\n        f\"Missing required \u003cinstruction\u003e child element on \u003cstep id='{step_id}'\u003e \"\n        f\"in startup-sequence in {path}. \"\n        f\"Instruction is required for all procedure steps. \"\n        f\"Fix: add \u003cinstruction\u003e...\u003c/instruction\u003e as a child element of the \u003cstep\u003e.\"\n    )\ninstruction = instr_el.text.strip()\n```\n\nRationale: `instruction` is a required element. Silent coercion to empty string is inconsistent with how `id` (also required) is handled via `_require()`. This is a correctness asymmetry — both required elements must error on absence.\n\nAdd test in `test_schema_parser.py` for isolation: construct a minimal XML with a `\u003cstep\u003e` missing `\u003cinstruction\u003e`, call `parse_schema()`, assert `SchemaParseError` is raised.\n\n**D3 — gen_schema.py + schema_parser.py:**\nAdd inline comments at the point where `next-state` is handled clarifying its optionality.\n\n---\n\n## File Ownership Summary (No Overlaps)\n\n| File | Slice | Findings |\n|------|-------|----------|\n| `tests/test_context_injection.py` | SLICE-1 | A2 |\n| `tests/test_gen_skills.py` | SLICE-2 | A1, B2 |\n| `tests/test_schema_types_sync.py` | SLICE-2 | B1, B4 |\n| `tests/test_gen_schema.py` | SLICE-2 (B3), SLICE-3 (C1-import, D1) | B3, C1, D1 |\n| `scripts/aura_protocol/gen_schema.py` | SLICE-3 | C1, C2, D3 |\n| `scripts/aura_protocol/schema_parser.py` | SLICE-3 | D2, D3 |\n| `tests/test_schema_parser.py` | SLICE-3 | D2 |\n\n**Overlap resolution for test_gen_schema.py:** SLICE-2 adds round-trip assertions (B3) and SLICE-3 adds slug pins (D1) + updates renamed imports (C1). These are additive and non-conflicting. SLICE-3 depends on SLICE-2 (for import stability after B3 additions). SLICE-2 must complete before SLICE-3 begins work on `test_gen_schema.py`.\n\n---\n\n## Acceptance Criteria (BDD GWT+S Format)\n\n### FOLLOWUP-SLICE-1\n\n**AC-A2-1:**\n**Given** `test_context_injection.py` and the 4 Ride the Wave constraints in `EPOCH`'s role-scoped mapping,\n**When** `get_role_context(RoleId.EPOCH)` is called,\n**Then** each of `C-supervisor-cartographers`, `C-integration-points`, `C-slice-review-before-close`, `C-max-review-cycles` appears in the returned `RoleContext.constraints` (checked by `.id`),\n**Should not** rely on indirect XML assertions or count comparisons alone — each constraint must be individually asserted by id.\n\n### FOLLOWUP-SLICE-2\n\n**AC-A1-1:**\n**Given** (a) a temp template directory containing a file named `skill_header.j2` with content `{{ undefined_var }}`, AND (b) a valid SKILL.md at `skill_path` with properly placed BEGIN/END markers,\n**When** `generate_skill(RoleId.SUPERVISOR, skill_path, template_dir=\u003ctemp dir\u003e)` is called,\n**Then** `jinja2.UndefinedError` is raised,\n**Should not** (1) create a `jinja2.Environment` directly in the test body — must go through `generate_skill()`; (2) use any filename other than `skill_header.j2` for the template — any other name causes `TemplateNotFound`, not `UndefinedError`, and does not test gen_skills.py's Environment; (3) omit the BEGIN/END markers from SKILL.md — without them `MarkerError` is raised before template rendering is reached.\n\n**AC-B1-1:**\n**Given** `PROCEDURE_STEPS[RoleId.SUPERVISOR]` contains steps with non-None `.command` and `.context`,\n**When** `PROCEDURE_STEPS` values are inspected directly (public exported dict),\n**Then** at least one step has `.command == \"Skill(/aura:supervisor)\"` (step 1) and at least one step has a non-None `.context` string,\n**Should not** inspect internal `types.py` private variables or go through XML.\n\n**AC-B2-1:**\n**Given** a valid SKILL.md with markers,\n**When** `generate_skill(RoleId.SUPERVISOR, skill_path, template_dir=TEMPLATE_DIR, diff=False, write=False)` is called,\n**Then** the returned string contains at least one substring matching the backtick pattern `` (`...`) `` and at least one substring matching the em-dash italic pattern ` — _..._`,\n**Should not** inspect template source code or Jinja2 AST.\n\n**AC-B3-1 (supervisor — 6-field round-trip):**\n**Given** the `parsed_spec` fixture (round-trip: `types.py → gen_schema() → parse_schema()`),\n**When** `parsed_spec.procedure_steps[RoleId.SUPERVISOR]` is compared against `PROCEDURE_STEPS[RoleId.SUPERVISOR]`,\n**Then** for each step, all 6 fields (id, order, instruction, command, context, next_state) match field-by-field,\n**Should not** skip any field — command/context/next_state must be explicitly asserted.\n\n**AC-B3-2 (worker — 3-field round-trip, 3 fields None):**\n**Given** the `parsed_spec` fixture (round-trip: `types.py → gen_schema() → parse_schema()`),\n**When** `parsed_spec.procedure_steps[RoleId.WORKER]` is compared against `PROCEDURE_STEPS[RoleId.WORKER]`,\n**Then** (a) for each step, the 3 fields that survive the round-trip (id, order, instruction) match field-by-field; AND (b) for each step, command, context, and next_state are each explicitly asserted to be None — worker steps are parsed from `\u003ctdd-layers\u003e` (Phase 9 section), not from `\u003cstartup-sequence\u003e`, and the schema_parser does not store command/context/next_state there,\n**Should not** assert command/context/next_state equal the Python-side values — they are intentionally discarded by the parser for worker steps.\n\n**AC-B4-1:**\n**Given** `test_supervisor_steps_from_schema` in `TestProcedureStepsMatchSchema`,\n**When** the test runs,\n**Then** the test body asserts `step.id == xml_step.get(\"id\")` for each supervisor step AND the docstring accurately describes what is tested,\n**Should not** have docstring claims that are not matched by assertions in the test body.\n\n### FOLLOWUP-SLICE-3\n\n**AC-C1-1:**\n**Given** `gen_schema.py` defines module-level constraint-to-role and constraint-to-phase mapping dicts,\n**When** the module is imported,\n**Then** the dicts are named `_CONSTRAINT_TO_ROLE_REF` and `_CONSTRAINT_TO_PHASE_REF` (not `_ROLE_CONSTRAINTS`/`_PHASE_CONSTRAINTS`), and all usages within `gen_schema.py` and all imports in test files use the new names,\n**Should not** leave any reference to the old names anywhere in the codebase.\n\n**AC-C2-1:**\n**Given** `gen_schema.py`'s `_constraints_for_role()` function (if it still exists),\n**When** the module is loaded,\n**Then** any import that was previously lazy (inside function body) is moved to module-level,\n**Should not** introduce circular imports — verify by running `python -c \"import aura_protocol.gen_schema\"` with 0 errors.\n\n**AC-D1-1:**\n**Given** `PROCEDURE_STEPS` in `types.py`,\n**When** slug pin tests run in `TestSlugPinLiterals`,\n**Then** `\"S-supervisor-call-skill\"` is found as an `.id` in supervisor steps, `\"S-supervisor-cartographers\"` is found, and `\"S-worker-types\"` is found in worker steps — all as literal string comparisons,\n**Should not** assert only that `step.id == py_step.id` (Python-vs-Python) — must compare against hard-coded literal strings.\n\n**AC-D2-1 (IMPORTANT — blocker for epic close):**\n**Given** a `\u003cstep\u003e` element in schema.xml that has `id` and `order` attributes but no `\u003cinstruction\u003e` child element,\n**When** `parse_schema()` processes this element,\n**Then** `SchemaParseError` is raised with a message identifying the step id and explaining how to fix the problem,\n**Should not** return an empty string for `instruction` silently — `instruction` is a required element with the same status as `id`; both must be enforced via `_require()`-equivalent logic.\n\n**AC-D3-1:**\n**Given** the `next-state` attribute handling in `gen_schema.py` and `schema_parser.py`,\n**When** a developer reads the relevant code,\n**Then** an inline comment clarifies that `next-state` is only present/emitted when `next_state is not None`,\n**Should not** require reading the full function to understand optionality.\n\n---\n\n## Validation Checklist\n\n### FOLLOWUP-SLICE-1\n- [ ] `test_context_injection.py` has new `TestEpochRideTheWaveConstraints` class\n- [ ] 4 parametrized (or 4 individual) tests, one per Ride the Wave constraint id\n- [ ] Each test calls `get_role_context(RoleId.EPOCH)` and checks `.constraints` by id\n- [ ] `get_role_context` is a public function (imported from `aura_protocol.context_injection`)\n- [ ] All existing tests still pass (`pytest tests/test_context_injection.py`)\n\n### FOLLOWUP-SLICE-2\n- [ ] `TestStrictUndefined.test_undefined_variable_raises_undefined_error` replaced with test calling `generate_skill()`\n- [ ] New test provides BOTH: (a) temp template dir with `skill_header.j2` containing `{{ undefined_var }}`; (b) valid SKILL.md at `skill_path` with BEGIN/END markers\n- [ ] Template file is named exactly `skill_header.j2` (not any other name)\n- [ ] Test asserts `jinja2.UndefinedError` is raised (not `jinja2.Environment` instantiated in test)\n- [ ] `test_schema_types_sync.py` asserts `.command` value for at least one supervisor step\n- [ ] `test_schema_types_sync.py` asserts `.context` value for at least one supervisor step with context\n- [ ] `test_gen_skills.py` has new test asserting backtick-wrapped command in rendered output\n- [ ] `test_gen_skills.py` has new test asserting em-dash italic context in rendered output\n- [ ] `test_gen_schema.py` round-trip asserts all 6 ProcedureStep fields for supervisor steps\n- [ ] `test_gen_schema.py` round-trip asserts id, order, instruction match for worker steps\n- [ ] `test_gen_schema.py` round-trip explicitly asserts command=None, context=None, next_state=None for worker steps\n- [ ] `test_supervisor_steps_from_schema` body asserts `.id == xml_step.get(\"id\")` for each step\n- [ ] All 911 existing tests still pass\n- [ ] No test inspects `jinja2.Environment`, private template variables, or internal dicts\n\n### FOLLOWUP-SLICE-3\n- [ ] `gen_schema.py` uses `_CONSTRAINT_TO_ROLE_REF` and `_CONSTRAINT_TO_PHASE_REF` (not old names)\n- [ ] `test_gen_schema.py` imports updated to use new names\n- [ ] No remaining references to `_ROLE_CONSTRAINTS` or `_PHASE_CONSTRAINTS` in `gen_schema.py`\n- [ ] Module-level import verified: `python -c \"import aura_protocol.gen_schema\"` succeeds\n- [ ] `TestSlugPinLiterals` class added to `test_gen_schema.py` with literal string pin assertions\n- [ ] `schema_parser.py` raises `SchemaParseError` (not returns `\"\"`) on missing `\u003cinstruction\u003e`\n- [ ] Test in `test_schema_parser.py` verifies SchemaParseError on missing instruction\n- [ ] `gen_schema.py` has inline comment on `next-state` optionality\n- [ ] `schema_parser.py` has inline comment on `next-state` optionality\n- [ ] All 911 existing tests still pass\n- [ ] `gen_schema --diff` shows no changes after running (schema.xml still valid)\n\n---\n\n## Dependency Chain\n\n```\nFOLLOWUP-SLICE-3\n    └── blocked-by FOLLOWUP-SLICE-2   (test_gen_schema.py round-trip additions must land first)\nFOLLOWUP-SLICE-2\n    └── (no blocking dependency on SLICE-1; can run in parallel)\nFOLLOWUP-SLICE-1\n    └── (no blocking dependencies)\n```\n\nSLICE-1 and SLICE-2 can run in parallel (no shared files).\nSLICE-3 should start after SLICE-2 completes, to avoid rebasing conflicts on `test_gen_schema.py`.\n\n---\n\n## Key Risk: A1 Template Fixture Design\n\nFinding A1 requires calling `generate_skill()` with a bad template that references an undefined variable. The template file MUST be named `skill_header.j2` — this is the exact filename loaded by `_render_header()` via `env.get_template('skill_header.j2')`. Any other filename causes `TemplateNotFound` instead of `UndefinedError`. Additionally, the SKILL.md at `skill_path` must have valid BEGIN/END markers, as `MarkerError` is raised before template rendering is reached if markers are absent. The worker must supply both preconditions or the test will fail to exercise gen_skills.py's Environment.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9e68","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_PROPOSAL-2: Protocol Engine v2 follow-up — test coverage + code clarity (rev)","updated_at":"2026-02-26T09:37:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d59930e3c146f1542e9e95f72645384e7b2b57c4f095e6efc3e8d0213302ede8","created_at":"2026-02-26T16:01:25Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-w5hi\n  review: aura-plugins-duzp\n---\nIMPORTANT findings for SLICE-5 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9fcw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T18:40:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-23T04:28:18Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a9c8db9ecbb7f06a51485ce6f3cc35f4cbb1a71724771ed6178ef2f7b6aa1708","created_at":"2026-02-23T04:26:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer B (Test Quality) on SLICE-3 (SKILL.md Generator with Diff + MarkerError). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9foc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 BLOCKER","updated_at":"2026-02-23T04:28:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ff78f2d62b7bcbcd2232714305c8fc88560901e3125089339c1a429aac120159","created_at":"2026-02-26T23:46:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"**File:** scripts/aura_protocol/workflow.py, line ~487 (inside EpochWorkflow._run_p9_slices)\n\n**Problem:**\nThe implementation uses `asyncio.wait(handles, return_when=asyncio.FIRST_EXCEPTION)` inside EpochWorkflow, which is Temporal workflow code. The Temporal Python SDK explicitly provides `workflow.wait()` as the *deterministic* replacement for `asyncio.wait()` in workflow code. The SDK docstring for `workflow.wait` states:\n\n  'This is a deterministic version of asyncio.wait. This function should be used instead of that one in workflows.'\n\nUsing `asyncio.wait()` inside a Temporal workflow risks non-determinism on replay, which can cause workflow history corruption.\n\n**Evidence:**\n- `temporalio.workflow.wait` exists and is the approved replacement (confirmed from temporalio source).\n- The task description (aura-plugins-cz2t) specifies: 'workflow.wait(handles, return_when=FIRST_EXCEPTION)'.\n- The code comment says 'asyncio.wait is the approved pattern' — this is incorrect.\n- The code already imports `from temporalio import activity, workflow`, so `workflow.wait` is accessible as-is.\n\n**Fix:**\nReplace:\n  done, pending = await asyncio.wait(handles, return_when=asyncio.FIRST_EXCEPTION)\nWith:\n  done, pending = await workflow.wait(handles, return_when=asyncio.FIRST_EXCEPTION)\n\nUpdate the comment to correct the claim. The rest of the _run_p9_slices logic (cancellation, result collection) is correct.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9fud","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"BLOCKER: asyncio.wait() used inside EpochWorkflow._run_p9_slices() — must be workflow.wait()","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4dd34de9b72b7ff3a861afdec4ac641a711f3b517b73f1990bb8adc7f0486818","created_at":"2026-02-26T23:47:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: scripts/aura_protocol/workflow.py, lines 418 vs 594\n\nEpochWorkflow.advance_phase (line 407):    @workflow.signal  def advance_phase(...)\nEpochWorkflow.submit_vote (line 417):      @workflow.signal  def submit_vote(...)\nReviewPhaseWorkflow.submit_vote (line 594): @workflow.signal  async def submit_vote(...)\n\nBoth signal body types do synchronous work (dict write / list append).\nNeither awaits anything. The async def on ReviewPhaseWorkflow.submit_vote is\nunnecessary and creates an inconsistency that may cause future maintainers to\nwonder whether there is a meaningful difference.\n\nWhile Temporal supports both sync and async signal handlers, the codebase\nshould be consistent. All three signal handlers here are functionally sync;\nReviewPhaseWorkflow.submit_vote should be def (not async def) to match the\npattern established by EpochWorkflow.\n\nSlice: aura-plugins-cz2t","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9g9r","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: ReviewPhaseWorkflow.submit_vote uses async def while EpochWorkflow signals use def — inconsistent Temporal signal handler style","updated_at":"2026-02-26T23:47:43Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:41Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bf971b361f0282fe0048ee2a1ab6fff6cb0dee47814a927e5c79a40a60a6f18d","created_at":"2026-02-26T03:31:00Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  reviewer: cartographer-c\n  round: 1\n---\nBLOCKER findings from Cartographer C (Elegance) on SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9i4s","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 BLOCKER","updated_at":"2026-02-26T03:31:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:05:52Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-mrm\n  impl_plan: aura-plugins-06g\n---\n## Scope\nImplement all constraint check methods in RuntimeConstraintChecker. Makes L2 tests pass.\n\n## Files Owned\n- scripts/aura_protocol/constraints.py (fill in implementations)\n\n## Acceptance Criteria\nGiven RuntimeConstraintChecker when checking violated state then returns ConstraintViolation list should never silently pass violations","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9ii","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-L3: Impl — RuntimeConstraintChecker logic","updated_at":"2026-02-22T02:05:52Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b63fd5e7cb1d15778a4963a360d91a9d09f57c5a521fa7b1d5e0089d3d0b75a4","created_at":"2026-02-23T04:26:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In test_gen_types.py::TestGenTypesDataIntegrity::test_frozen_dataclass_decorator_present (line 165), the test only checks that 'frozen=True' appears anywhere in the generated source. This passes even if only one class uses @dataclass(frozen=True) while others use @dataclass. The proposal requires ALL new spec types to be frozen dataclasses. The assertion does not verify the count or that every class definition has the decorator.\n\nRemediation: Use ast.parse() to count @dataclass(frozen=True) decorators and verify it matches the expected number of dataclass definitions, or at minimum check that the count of 'frozen=True' occurrences equals the number of expected dataclass names defined. Low risk since production code is verified; this is a test quality concern only.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9j0i","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S1-B1-MINOR: test_gen_types frozen=True check is substring-only, not per-class","updated_at":"2026-02-23T12:46:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d399b3485697052412b6833fb5b59d9faa70f9f2e04a7c7c278d9ab401799477","created_at":"2026-02-22T18:06:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-w115\n  original_urd: aura-plugins-umi\n---\n\n## Questions and Responses\n\n### Round 1\n\n#### Generation Target\nQ: For v2 schema.xml runtime injection, what is the generation target? Should we generate SKILL.md files at build time (committed to git), or inject schema context into agent prompts dynamically at skill invocation time?\nOptions: Build-time generation (Parse schema.xml → Jinja2 templates → generate SKILL.md files committed to git), Runtime injection (Parse schema.xml at skill invocation time, dynamically construct prompt section), Hybrid: generate + runtime override (Generate SKILL.md at build time as baseline, allow runtime schema queries for dynamic context)\nA: Hybrid: generate + runtime override. Build-time generation for SKILL.md + types.py (git-tracked), plus runtime constraint injection and phase-aware context queries.\n\n#### SKILL.md Structure\nQ: How should the 38 SKILL.md files be structured after v2? Currently each has unique procedural guidance + duplicated schema content. What stays manual vs generated?\nOptions: Fully generated from templates (100% generated from schema.xml + Jinja2), Split: generated header + manual body (Schema context generated as header, procedural guidance stays hand-written below marker), Schema inlined via includes (SKILL.md stays hand-written but uses include directives)\nA: Split: generated header + manual body. Schema context (phases, constraints, labels) generated as header section with markers. Procedural guidance stays as hand-written markdown below.\n\n#### Types Generation\nQ: Should types.py also be generated from schema.xml, or stay manually maintained with sync tests?\nOptions: Generate types.py from schema.xml (codegen script parses schema.xml → generates types.py), Keep manual + sync tests (types.py stays hand-written, validated by integration tests)\nA: Generate types.py from schema.xml. But with critical refinement: \"The Python code should become the source of truth: XML as portable schema.\"\n\n#### MVP Scope\nQ: What is the MVP scope for v2?\nOptions: Schema parser → Python specs, Types.py generation, SKILL.md generation, Constraint injection at runtime\nA: ALL FOUR selected. Additional note: \"The Python code should become the source of truth: XML as portable schema.\"\n\n### Round 2\n\n#### Source of Truth Direction\nQ: You said 'Python code should become the source of truth: XML as portable schema.' This inverts the original URD R2 direction. Confirm: after bootstrap from schema.xml, the flow becomes Python → schema.xml (export) and Python → SKILL.md (generation)?\nOptions: Yes — Python is SoT/XML is export (Bootstrap: parse schema.xml → types.py; Steady state: types.py → schema.xml + SKILL.md), No — XML stays SoT/Python is generated, Bidirectional — either can change/sync enforced\nA: Yes — Python is SoT, XML is export. Bootstrap once from schema.xml, then Python types.py is authoritative. schema.xml is regenerated from Python. SKILL.md generated from Python specs.\n\n#### Constraint Injection Point\nQ: When should constraints be injected into the agent's context?\nOptions: At skill invocation only, At phase transition, Both: skill + phase\nA: Both: skill + phase. Role-level constraints at skill invocation (baseline), phase-specific constraints at each transition (contextual enrichment).\n\n#### Procedural Guidance\nQ: What about the 'procedural guidance' content unique to each SKILL.md? Stay hand-written or move?\nOptions: Stay hand-written forever, Move to schema.xml over time, Move procedures to Python\nA: Move procedures to Python. Procedures stored as Python constants/dataclasses, then generated into BOTH schema.xml AND SKILL.md. Note: \"Should move procedures to Python, which generates and places them in the schema.xml.\"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9lps","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"ELICIT: Schema.xml runtime context injection (v2) — Python as source of truth","updated_at":"2026-02-26T07:22:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"44df7b601c5d0efdd93ea44b9258f49b4be2d636e2e4c63082726d273be208c4","created_at":"2026-02-27T06:59:25Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-wsys\n  review: aura-plugins-82gp\n---\ntests/fixtures/protocol.yaml ~line 670 — The constraint_violations entry for C-review-consensus has a description that reads '... axes (A, B, C)'.\n\nSince R8 (SLICE-4), ReviewAxis enum values are CORRECTNESS='correctness', TEST_QUALITY='test_quality', ELEGANCE='elegance'. The old A/B/C shorthand labels no longer appear in any production code.\n\nSuggestion: Update the description to reference the canonical enum names: '... axes (CORRECTNESS, TEST_QUALITY, ELEGANCE)' or their string values 'correctness, test_quality, elegance'.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9lqe","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: protocol.yaml C-review-consensus description references stale axis labels (A, B, C)","updated_at":"2026-02-27T06:59:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"630adbfa4ee24f82232fb831ddbd34a7e0b830a5d9f053d3063bb83d01adb714","created_at":"2026-02-26T02:44:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - All four REVISE findings from round 1 (aura-plugins-oitf) are fully addressed.\n\nFinding 1 (BLOCKER - SourceFileLoader): RESOLVED. PROPOSAL-2 now documents the correct two-step pattern verbatim: SourceFileLoader -\u003e spec_from_loader -\u003e module_from_spec -\u003e exec_module. The broken spec_from_file_location reference is gone.\n\nFinding 2 (BLOCKER - pythonpath): RESOLVED. Proposal explicitly states no pythonpath change needed and documents BIN_PATH = Path(__file__).resolve().parent.parent / 'bin' as the path constant. The substantive guidance is correct and actionable.\n\nFinding 3 (REVISE - ordering prerequisite): RESOLVED. An explicit 'Ordering note (hard prerequisite)' section states Change 2 MUST follow Change 1, explains the SystemExit(2) mechanism clearly, and the validation checklist lists deletion first.\n\nFinding 4 (REVISE - Cases C and D): RESOLVED. Case C (root + subdir both present, root first) guards against future short-circuit regression. Case D (subdir pyproject with no [project] version key returns empty list) guards against _has_pyproject_version filter removal. Both verified against actual source: _PYPROJECT_VERSION_RE requires [project] header + version = \"X.Y.Z\" pattern; [tool.foo] content correctly yields False. No git repo needed for any case - discover_version_files uses only pathlib.\n\nTest quality axis: All cases use tmp_path (no git repo setup, fast), assert observable outputs (return value list, length, path attributes), SUT is not mocked (module imported directly via SourceFileLoader), shared _import_aura_release() helper avoids duplication. Cases match the repo's existing class-based test organization pattern.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9m27","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-2-REVIEW-B-2: aura-release dead code + test","updated_at":"2026-02-26T02:44:43Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d779ea85fffd9e983e695a8999b28b394fbe323caf6b64b99c46a185695fd4af","created_at":"2026-02-26T07:08:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: REVISE - Four blockers found on the test quality axis.\n\nBLOCKER-1: Module-scope fixture contradicts function-scope autouse cleanup.\nThe proposed aura_release_mod fixture (scope='module') holds the module for the entire test module. The companion autouse function-scope fixture removes sys.modules['aura_release'] after each test. After the first test, the module-scoped fixture still holds a reference to mod, but mod is no longer registered in sys.modules. Tests 2-5 will fail with AttributeError when @dataclass field resolution calls sys.modules[cls.__module__].__dict__ (this hazard is documented in the existing test file at lines 29-33). Fix: either drop the per-function autouse teardown (let the module-scope fixture's own yield/pop handle cleanup), or use function scope for both the import fixture and cleanup.\n\nBLOCKER-2: No test case specified for MarketplaceVersionFile.write() correctness.\nR1 is the highest-priority correctness fix (plugins[*].version must NOT be updated). SLICE-2 implements the fix, but no test is designed or described anywhere in the proposal that verifies: given a marketplace.json with plugins[].version, when write() is called with a new version, then plugins[*].version is unchanged. The checklist line 'New tests added for MarketplaceVersionFile.write() and registry CLI' is present but entirely unspecified. Without this test, SLICE-2 can be silently reverted.\n\nBLOCKER-3: No test cases specified for any registry CLI command.\nSLICES 3 and 4 introduce a new subsystem (init/add/list/remove) with load/save/find_plugin logic and warn-vs-error validation semantics. The proposal describes implementation in detail but specifies zero test cases for: registry init (creates file, errors if exists), registry add (adds entry, idempotency), registry list (output format), registry remove (removes correct entries), PluginRegistry.load() (missing file -\u003e None, malformed JSON -\u003e exit(2), nonexistent marketplace path -\u003e warn+continue), find_plugin() (by name vs by cwd). A plan that introduces a new subsystem without test specifications is incomplete.\n\nBLOCKER-4: --dry-run for registry writes untested.\nThe BDD criterion 'Given --dry-run when registry write would occur then print [dry-run] Would update marketplace' is listed but no test case is designed for it. Two surfaces need coverage: MarketplaceVersionFile.write(dry_run=True) skips the write, and the SLICE-5 release integration path skips the registry-triggered marketplace bump under --dry-run.\n\nActionable suggestions:\n1. Resolve fixture scope conflict: use module scope for import + teardown only in the module fixture's finally block; remove the autouse function-scope cleanup, OR use function scope for everything.\n2. Specify a concrete test for MarketplaceVersionFile.write() that asserts plugins[*].version is unchanged after write().\n3. Specify test cases for each registry CLI subcommand and PluginRegistry.load() validation branches.\n4. Specify a --dry-run test for the marketplace bump path (assert file not written, assert print output).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9mch","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-B-1: Plugin registry + marketplace fix + test quality","updated_at":"2026-02-26T07:08:01Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T01:42:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-35d\n  impl_plan: aura-plugins-06g\n---\n## Scope\nCreate scripts/aura_protocol/types.py and __init__.py. Define all enums (PhaseId, Domain, RoleId, VoteType, SeverityLevel), frozen dataclasses (Transition, PhaseSpec, ConstraintSpec, HandoffSpec), canonical lookup dicts (PHASE_SPECS, CONSTRAINT_SPECS, HANDOFF_SPECS, PHASE_DOMAIN), and event stub types.\n\n## Files Owned\n- scripts/aura_protocol/__init__.py\n- scripts/aura_protocol/types.py\n\n## Acceptance Criteria\nGiven types.py when imported then all enums are str Enums, all specs are frozen should never have mutable spec dataclasses","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9nc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-IMPL: types.py + __init__.py — enums, specs, lookup dicts","updated_at":"2026-02-22T01:42:53Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:19:59Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c9777726f9b8036bfc319611c0ef8a6cc4294e09d949f7cc5ea87761eb77379d","created_at":"2026-02-23T04:24:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/API Coherence).\n\ngen_skills.py _constraints_for_role() (lines 93-99) returns all 23 constraints for every role, with a comment:\n  'Currently returns all constraints (they apply globally). Future versions may filter by role tag once schema supports it.'\n\nHowever, context_injection.py (SLICE-4) already implements per-role constraint filtering with _ROLE_CONSTRAINTS. The SKILL.md generator renders all 23 constraints into every role's header — a worker agent's SKILL.md will show supervisor-only constraints like C-supervisor-no-impl and C-vertical-slices, and a reviewer's SKILL.md will show worker-specific C-worker-gates.\n\nThis undermines the core value proposition of the SKILL.md generator: providing role-appropriate context. An agent reading their SKILL.md should see only the constraints relevant to them, not the full global list.\n\nMore importantly, context_injection.py already has the correct per-role filtering. The _constraints_for_role() function in gen_skills.py should delegate to or reuse the same _ROLE_CONSTRAINTS mapping rather than ignoring it.\n\nFix: In gen_skills.py, change _constraints_for_role() to use _ROLE_CONSTRAINTS from context_injection.py (or a shared location). Return only the constraints relevant to the given role, consistent with what get_role_context() returns at runtime.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9oxz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1-F9: gen_skills.py _constraints_for_role returns ALL constraints for every role — not filtered","updated_at":"2026-02-23T12:19:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:30:29Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0f927afbd2d6cdac45b8b3a404513317b190d8bbad61909c57472095c36e442b","created_at":"2026-02-26T03:30:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  reviewer: cartographer-b\n  round: 1\n---\nIMPORTANT findings from Cartographer B (Test quality) on SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9qjz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T03:30:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9be8d2c667473055f0a8d5c7ed65b369cb377d27bff6ca16d3c075ef93147f05","created_at":"2026-02-26T15:31:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  urd: aura-plugins-2ojv\n  proposal: aura-plugins-6zbz\n---\n## Horizontal Layers (TDD)\n- L1: Types, interfaces, schemas (no deps)\n- L2: Tests (import production code, fail until L3)\n- L3: Implementation + wiring (make tests pass)\n\n## Vertical Slices\n- SLICE-1: SerializablePhaseSpec + PhaseInput + PhaseResult (cross-workflow boundary types)\n- SLICE-2: Interface + A2A types (FileWithUri, ToolCall rename, ReviewVoteSignal.axis, NullStubs)\n- SLICE-3: AuditTrail singleton (init_audit_trail + query_audit_events activity + InMemoryAuditTrail)\n- SLICE-4: Infrastructure (bin/worker.py + nix/temporal-service.nix + NixOS systemd user module)\n- SLICE-5: Contract tests + P9_SLICE fail-fast + version bump (945 baseline preservation)\n\n## Layer Integration Points\n\n### IP-1: SerializablePhaseSpec → AuditTrail\n- Owner: SLICE-1\n- Consumers: SLICE-3, SLICE-5\n- Contract: SerializablePhaseSpec.from_spec(PhaseSpec) → SerializablePhaseSpec; PhaseInput(epoch_id, phase_spec)\n- Merge timing: SLICE-1 types must exist before SLICE-3 can import PhaseInput\n\n### IP-2: ReviewAxis enum → ReviewVoteSignal\n- Owner: SLICE-2\n- Consumers: SLICE-1, SLICE-3, SLICE-5\n- Contract: ReviewAxis(StrEnum) replaces str in ReviewVoteSignal.axis\n- Merge timing: SLICE-2 defines ReviewAxis; SLICE-1 uses it in PhaseResult if needed\n\n### IP-3: AuditTrail activities → Worker registration\n- Owner: SLICE-3\n- Consumers: SLICE-4, SLICE-5\n- Contract: init_audit_trail(trail), query_audit_events activity function, record_audit_event activity\n- Merge timing: SLICE-3 activities must exist before SLICE-4 worker.py can register them\n\n### IP-4: All types → Test contracts\n- Owner: SLICE-5\n- Consumers: none (leaf)\n- Contract: All new frozen dataclasses must be importable and Temporal-serializable\n- Merge timing: After all other slices merge","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9qpq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPL_PLAN: v3 Temporal Engine — hybrid child workflow decomposition","updated_at":"2026-02-26T18:34:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:43:59Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b9c9990d2b8aadc94b47b0e7f1cf12cb2bc2d60eb8f296b56cfae4564a7fab79","created_at":"2026-02-27T06:25:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Add SliceProgressSignal dataclass, update ReviewPhaseWorkflow._votes type, update vote_result type.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9s8h","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-L1: SliceProgressSignal type + ReviewAxis _votes type","updated_at":"2026-02-27T06:43:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-1","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:21:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3ed2a173a8d33a758188cdebc324617a8819c0e59d8d0bacdc679aaaa40ffe83","created_at":"2026-02-23T03:08:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-mg6h\n  impl_plan: aura-plugins-94yc\n---\n\n## Scope\n\nFoundation slice. All other slices depend on this.\n\n### Files Modified\n- scripts/aura_protocol/types.py — +9 dataclasses (SubstepSpec, RoleSpec, DelegateSpec, CommandSpec, LabelSpec, ReviewAxisSpec, TitleConvention, ProcedureStep, ConstraintContext), +6 dicts (ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS, REVIEW_AXIS_SPECS, TITLE_CONVENTIONS, PROCEDURE_STEPS), +3 enums (ExecutionMode, ContentLevel, ReviewAxis), fix HandoffSpec.content_level str→ContentLevel, fix ReviewVoteEvent.axis str→ReviewAxis\n- scripts/aura_protocol/__init__.py — Re-export new types\n- tests/test_schema_types_sync.py — Extend sync tests for all new canonical dicts\n\n### Files Created\n- scripts/aura_protocol/schema_parser.py — parse_schema(path) → SchemaSpec, raises SchemaParseError\n- scripts/aura_protocol/gen_types.py — generate_types_source(SchemaSpec) → draft Python source for developer review (UAT-1)\n- tests/test_schema_parser.py — Entity count verification + 3+ error-path tests\n- tests/test_gen_types.py — Codegen output is valid Python, contains expected definitions\n\n### Acceptance Criteria\n- AC1: parse_schema() returns SchemaSpec with 12 phases, 5 roles, 35 commands, 23 constraints, 6 handoffs, 21 labels, 3 review axes\n- AC1a: SchemaParseError on malformed XML (3+ error-path tests)\n- AC1b: gen_types.py produces valid Python source from SchemaSpec (UAT-1)\n- AC7: All 554 existing tests pass (no regressions)\n- AC9: All new spec types and dicts tested; test_schema_types_sync.py covers new dicts\n- AC9a: PROCEDURE_STEPS populated for supervisor + worker roles as POC (UAT-6)\n- AC11: No Temporal-serialized types modified\n\n### Implementation Notes\n- Reuse validate_schema.py traversal patterns (~60% of control flow derivable, but object instantiation is new code)\n- All new enums inherit from str (consistent with existing PhaseId, Domain, RoleId pattern)\n- All new dataclasses are frozen (consistent with existing PhaseSpec, ConstraintSpec pattern)\n- ConstraintContext dataclass: id (str), when (str), then (str) — frozen, used by SLICE-4 context_injection\n- PROCEDURE_STEPS: dict[PhaseId, tuple[ProcedureStep, ...]] populated for supervisor+worker, empty tuples for other roles\n- HandoffSpec.content_level change from str to ContentLevel is non-breaking (str enum, not Temporal-serialized)\n- gen_types.py is a one-time bootstrap tool — generates draft source that developer reviews and merges","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9suu","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1: Schema Parser + Type Expansion + Bootstrap Codegen (Foundation)","updated_at":"2026-02-26T07:21:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1da4fefc1a96ad36649e19817a1975addbdbbe571ebdabb2538acf47dcff00e7","created_at":"2026-02-26T04:30:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9suu.1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-2 IMPORTANT","updated_at":"2026-02-26T04:30:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"687a9aebd79ba66ebcf3f5ba5c71539bc6bf480166acd9f1e131d4b8a8ed6bd7","created_at":"2026-02-26T04:30:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"test_schema_types_sync.py tests instruction, order, next_state on ProcedureStep but no test verifies the new command or context fields. Supervisor step 1 has command='Skill(/aura:supervisor)', step 3 has context='TeamCreate with /aura:explore role; minimum 3 agents', but if these were set to None, no test would fail. Add tests that assert specific command/context values for populated steps.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9suu.1.1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1: No test verifies ProcedureStep command/context field values","updated_at":"2026-02-26T04:30:16Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No BLOCKER findings for SLICE-1 test quality","closed_at":"2026-02-26T04:30:52Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0661d272126682491c496d77fc1eab85ae0795a0d1e3a992174704b51141f875","created_at":"2026-02-26T04:30:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9suu.2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-2 BLOCKER","updated_at":"2026-02-26T04:30:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No MINOR findings for SLICE-1 test quality","closed_at":"2026-02-26T04:30:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0cb4e283a797f51c0f5b5de5841ccc64e9923052477cb209b3ce3c57262a5641","created_at":"2026-02-26T04:30:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9suu.3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-2 MINOR","updated_at":"2026-02-26T04:30:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:57:26Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"414b50a4aebecc689b9c8a73a3ac9177cb6e1e0e6057ac90b55298e561bf5c90","created_at":"2026-02-26T08:57:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i08u\n  review_round: 1\n---\nMINOR findings from Reviewer A (Correctness) on FOLLOWUP-SLICE-1.\n\nNo MINOR findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9uox","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-1-REVIEW-A-1 MINOR","updated_at":"2026-02-26T08:57:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f222889542c93cd7bfde6c98e9384e9790a572a14b62c0b2a15d74133230a085","created_at":"2026-02-26T02:41:37Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - All four correctness questions verified cleanly.\n\n1. DEAD CODE CONFIRMATION (lines 33-57): Confirmed true dead code. Grep across the entire file shows _discover_repo_root, REPO_ROOT, VERSION_FILES, and CHANGELOG_PATH appear ONLY within lines 33-56. No reference to any of these four symbols exists anywhere in lines 58-637. The replacement machinery (repo_root() at line 83, discover_version_files() at line 227, changelog_path = repo_root() / 'CHANGELOG.md' at line 395, changelog_path = root / 'CHANGELOG.md' at line 530) is fully self-contained and independent.\n\n2. IMPORTLIB SAFETY: Correct. After removing lines 33-57, the only module-level executable statements are pure data literals (COMMIT_SECTIONS dict, DEFAULT_SECTION string, _PYPROJECT_VERSION_RE compiled regex, _SKIP_DIRS set), plus def/class/decorator statements that do not call repo_root(). The repo_root() function at line 83 is decorated with @functools.lru_cache and is a function definition only — it is NOT invoked at module level. importlib.util.spec_from_file_location will import the module with zero git subprocess calls. This is correct.\n\n3. SUBDIRECTORY HANDLING: discover_version_files correctly handles the case where root has no pyproject.toml but a subdirectory does. The logic at lines 240-251: it first checks root/pyproject.toml (skipped if absent), then iterates _subdirs(root) — sorted child directories excluding hidden and known junk dirs — and appends any subdirectory pyproject.toml that passes _has_pyproject_version(). The regex _PYPROJECT_VERSION_RE requires a [project] section with a version = 'X.Y.Z' field, so bare pyproject.toml files without a [project] version are correctly excluded. If MULTIPLE subdirectories have valid pyproject.toml files, all are returned and version-consistency is enforced downstream — this is correct monorepo behavior.\n\n4. EDGE CASES: No missing critical edge cases for MVP scope. One minor cosmetic note that does NOT affect correctness: the comment on line 32 ('Conventional commit prefix -\u003e Keep a Changelog section') currently appears above the dead code block rather than above COMMIT_SECTIONS. After deleting lines 33-57, this comment will immediately precede COMMIT_SECTIONS at what becomes line 33 — it will then correctly describe that dict. No action needed.\n\nOne behavioral difference between the dead _discover_repo_root (check=False, custom error + sys.exit(2)) and the live repo_root() (check=True, raises CalledProcessError) is irrelevant post-removal since all git calls go through repo_root().\n\nThe proposal is technically sound, MVP-scoped, and faithfully serves the end-user requirement of aura-release working correctly in repos where pyproject.toml lives in a subdirectory.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9wd6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-A-1: aura-release dead code + test","updated_at":"2026-02-26T02:41:37Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"532dc18976f57137575bb3b0f75b6fec7c5a67319e0f9a9166a8f4e47b60ec44","created_at":"2026-02-26T20:50:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Fix import ordering, docstring, __all__ comment in __init__.py. File: scripts/aura_protocol/__init__.py","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9yum","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-1-L1: __init__.py cleanups","updated_at":"2026-02-26T21:03:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T04:25:03Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"709a035801f8b1dd68306bff50f4a31063089a877c0dd02949c7e72d4eeae789","created_at":"2026-02-23T04:24:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer A on SLICE-1. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-9yvg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 BLOCKER","updated_at":"2026-02-23T04:25:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"afea0b595ddfa15da6d463b737fcde16b38dc374c575e63569094b937489d0a1","created_at":"2026-02-26T03:30:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  reviewer: cartographer-b\n  round: 1\n---\nIMPORTANT findings from Cartographer B (Test quality) on SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-a048","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T09:38:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c38af60a2b31c337f7692ea90d77b0a9780fb6fff6dee0e655b66ea52c4a5733","created_at":"2026-02-26T07:39:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-0biw\n  urd: aura-plugins-7oqz\n  proposal: aura-plugins-iw89\n---\n## Components Reviewed\n\n### Component 1: Registry schema + validation\n**Definition shown:** PluginEntry(name, path: Path, remote), MarketplaceEntry(path: Path, plugins), PluginRegistry(marketplaces) frozen dataclasses.\n\n**Question:** Which validation behavior when loading a malformed plugin entry?\nOptions: Warn+skip (current proposal) / Fail+exit 2\n**User response:** \"Will error if trying to add a malformed entry with informative error message, but if user edits later, will warn+skip.\"\n→ Delta: `registry add` validates and errors; `load()` warns and skips. Proposal already matches.\n\n**Question:** Any concerns about registry schema or JSON structure?\n**User response:** \"No concerns — proceed\"\n\n---\n\n### Component 2: Registry CLI — `registry add`\n**Definition shown:** `aura-release registry add \u003cname\u003e [--path \u003clocal\u003e] [--remote \u003curl\u003e] --marketplace \u003cmp\u003e`\n\n**Question:** Path storage — absolute or relative?\nOptions: Always absolute / Store as-given\n**User response:** \"Always absolute (resolve at add time)\"\n\n**Question:** Duplicate handling — error or update?\nOptions: Error if exists / Update silently\n**User response:** \"Update verbosely. State what existed before, and should require interaction to update. Have --yes flag to update non-interactively.\"\n→ **UAT DELTA**: Show old entry + interactive confirm prompt + --yes flag to skip. This is NEW behaviour not in PROPOSAL-2.\n\n---\n\n### Component 3: Plugin auto-detection + --plugin flag\n**Definition shown:** Auto-detect by CWD.resolve() == PluginEntry.path.resolve(); explicit --plugin \u003cname\u003e override. Double-bump guard.\n\n**Question:** When no registry match, what should happen?\nOptions: Proceed silently (proposal) / Warn and proceed / Error if --plugin given only\n**User response:** \"Error and stop verbosely in all cases if both auto-detect fails and registry file exists.\"\n→ **UAT DELTA**: If registry EXISTS but no CWD match → error verbosely. Proposal said proceed silently. This is stricter.\n\n**Question:** Should --check show registry info?\nOptions: Yes — show registry plugin + marketplace / No — unchanged\n**User response:** \"Yes — show registry info in --check output\"\n→ **UAT DELTA**: Add registry info to --check output. Not in PROPOSAL-2.\n\n---\n\n### Component 4: Test quality (aura-plugins-klac)\n**Definition shown:** module-scoped aura_release_mod fixture + autouse _clear_caches (cache_clear only, not sys.modules).\n\n**Question:** Migrate A-D to fixture or leave as-is?\nOptions: Migrate all A-E (current proposal) / Leave A-D unchanged\n**User response:** \"Migrate all (A-E) to aura_release_mod fixture (current proposal)\"\n\n**Question:** Any concerns about test quality changes?\n**User response:** \"No concerns — proceed\"\n\n---\n\n### Catch-all\n**Question:** Any gap or drift from original URE?\n**User response:** \"Nothing else — ACCEPT the plan\"\n\n## Final Decision\n**ACCEPT** — with 4 deltas noted above that must be reflected in implementation:\n1. `registry add` duplicate: interactive confirm + --yes flag\n2. Path always stored absolute at add time\n3. Registry exists + no CWD match → error verbosely (not silent)\n4. --check output includes registry info when found","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-a0x0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"UAT: Plan acceptance — plugin registry + marketplace fix + test quality","updated_at":"2026-02-26T07:39:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:07Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"662003e0b6f97ed073b14840ea916fbfe6461206e0a2fe41f7ece8f2b06ecc32","created_at":"2026-02-25T22:13:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-24cr\n  ure: aura-plugins-om47\n  request: aura-plugins-xpf1\n---\n## Production Code Path\n\n**End users read:** skills/protocol/PROCESS.md\n\n## Worker Owns (Full Vertical Slice)\n\nRestructure PROCESS.md Phases 8-10 so Ride the Wave is the primary narrative:\n\n### Phase 8 (Implementation Plan)\n- Replace \"Standing Explore Team\" with \"Cartographers\" framing\n- Add \"Identify horizontal Layer Integration Points\" as explicit step\n  - Table format: | ID | Contract | Owner (exports) | Consumer(s) (imports) | Merge Timing |\n- Add Cartographers setup (TeamCreate with /aura:explore, always 3, dual-role)\n\n### Phase 9 (Worker Slices)\n- Add \"Ride the Wave\" as the section name / primary concept\n- Add Worker Persistence rules: workers do NOT shut down after implementation\n- Add: slices MUST NOT be closed until reviewed at least once\n- Add: supervisor (not workers) closes slices post-review\n\n### Phase 10 (Code Review)\n- Cartographers switch role: /aura:explore → /aura:reviewer (same agents, never shut down)\n- Add review-fix cycle procedure:\n  1. Cartographers review all slices\n  2. Workers fix BLOCKERs + IMPORTANT findings\n  3. Cartographers re-review fixed slices\n  4. Repeat max 3 cycles\n- Add cycle exit conditions: all ACCEPT, or 3 cycles exhausted\n- After 3 cycles: remaining IMPORTANT → FOLLOWUP epic, proceed to UAT\n\n## Key File\n- skills/protocol/PROCESS.md (Phases 8-10 sections only)\n\n## Validation Checklist\n- [ ] Phase 8 mentions Cartographers (not just \"Standing Explore Team\")\n- [ ] Phase 8 includes integration points step with table format\n- [ ] Phase 9 has persistence rules (no early close, workers stay alive)\n- [ ] Phase 10 has max-3 review-fix cycle\n- [ ] Phase 10 has FOLLOWUP tracking for post-cycle-3 IMPORTANTs\n- [ ] Ride the Wave terminology used throughout Phases 8-10","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-a1bn","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3: PROCESS.md restructure — Phases 8-10 around Ride the Wave","updated_at":"2026-02-25T22:50:07Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9085c9575fc0ca1798b4a3d6f2568a327fd45d8c4119a7f260110d559edaf86f","created_at":"2026-02-22T18:09:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-w115\n  urd: aura-plugins-w07o\n  original_urd: aura-plugins-umi\n  original_proposal: aura-plugins-gmv\n---\n\n## Problem Space\n\n**Axes:** code generation (schema → code, code → schema), drift elimination (38 SKILL.md files × 1 schema.xml), runtime context injection (role-level + phase-level), source-of-truth inversion (schema.xml → Python types.py)\n\n**Has-a / Is-a relationships:**\n- SchemaSpec HAS-A collection of PhaseSpec, RoleSpec, CommandSpec, ConstraintSpec, HandoffSpec, LabelSpec, ReviewAxisSpec\n- RoleSpec HAS-MANY owned phases, invariants, label-awareness declarations\n- CommandSpec HAS-A role-ref, phase-refs, creates-labels\n- PhaseSpec HAS-MANY SubstepSpec (with startup sequences, TDD layers)\n- Generator IS-A function (SchemaSpec → output format)\n- ContextInjector IS-A function (RoleId|PhaseId → relevant constraints/phases/commands)\n\n## Engineering Tradeoffs\n\n| Decision | Options | Choice | Rationale |\n|----------|---------|--------|-----------|\n| Source of truth | schema.xml / Python types.py / bidirectional | Python types.py | User requirement. Python is more expressive, testable, and directly usable at runtime. XML is for portability. |\n| Bootstrap strategy | Manual expansion / auto-parse schema.xml | Auto-parse + human review | 1,314-line schema.xml with 12 entity types — too much to manually transcribe. Parse once, verify, then Python is SoT. |\n| Template engine | Jinja2 / string.Template / f-strings | Jinja2 | Industry standard for prompt generation. StrictUndefined catches missing vars. Supports conditionals, loops, inheritance. Minimal dependency. |\n| XML generation | lxml / xml.etree / template-based | xml.etree.ElementTree | Already in stdlib, already used in validate_schema.py. No new dependency. |\n| SKILL.md split strategy | Full generation / marker-based split / includes | Marker-based split | User chose split: generated header + manual body. Markers are simple, git-friendly, no preprocessor needed. |\n| Procedure storage | schema.xml / Python / separate YAML | Python dataclasses | User chose Python. Procedures generate into both schema.xml AND SKILL.md. Python is more readable for procedural text. |\n| Runtime injection integration | State machine / standalone module | Standalone module + state machine hook | Keep injection logic decoupled from state machine. Hook into advance() for phase-level. Standalone for role-level. |\n\n## MVP Milestone\n\n### Architecture Overview\n\n```\n== BOOTSTRAP (one-time) ==\nschema.xml → [schema_parser.py] → SchemaSpec → verify → expanded types.py\n\n== STEADY STATE (ongoing) ==\ntypes.py (SOURCE OF TRUTH)\n    ├─→ [gen_schema.py] → schema.xml (portable export)\n    ├─→ [gen_skills.py] → SKILL.md (generated headers with markers)\n    └─→ [context_injection.py] → runtime role/phase context\n```\n\n### Module 1: `scripts/aura_protocol/schema_parser.py` — Bootstrap Schema Parser\n\nParses schema.xml into a comprehensive SchemaSpec. Used ONCE for bootstrap, then kept for round-trip verification.\n\n```python\n@dataclass\nclass SchemaSpec:\n    \"\"\"Complete protocol specification extracted from schema.xml.\"\"\"\n    phases: dict[str, PhaseSpec]        # PhaseId → PhaseSpec (expanded with substeps)\n    roles: dict[str, RoleSpec]          # RoleId → RoleSpec (with invariants, standing teams)\n    commands: dict[str, CommandSpec]     # command-id → CommandSpec\n    constraints: dict[str, ConstraintSpec]  # constraint-id → ConstraintSpec\n    handoffs: dict[str, HandoffSpec]    # handoff-id → HandoffSpec\n    labels: dict[str, LabelSpec]        # label-id → LabelSpec\n    review_axes: dict[str, ReviewAxisSpec]  # axis-id → ReviewAxisSpec\n    title_conventions: list[TitleConvention]\n    dependency_model: DependencyModel\n\ndef parse_schema(path: Path) -\u003e SchemaSpec:\n    \"\"\"Parse schema.xml into a complete SchemaSpec.\n    \n    This is the bootstrap entry point. After initial extraction,\n    types.py becomes the source of truth and this parser is used\n    only for round-trip verification.\n    \"\"\"\n```\n\n### Module 2: Expanded `scripts/aura_protocol/types.py` — Protocol Types (SoT)\n\nAdd new spec dataclasses and canonical dicts:\n\n```python\n# NEW dataclasses\n@dataclass(frozen=True)\nclass SubstepSpec:\n    id: str\n    type: str\n    execution: str  # \"sequential\" | \"parallel\"\n    order: int\n    label_ref: str\n    parallel_group: str | None = None\n    startup_sequence: tuple[str, ...] = ()  # ordered step descriptions\n\n@dataclass(frozen=True)\nclass RoleSpec:\n    id: RoleId\n    name: str\n    description: str\n    owns_phases: frozenset[PhaseId]\n    label_awareness: tuple[str, ...]\n    invariants: tuple[str, ...] = ()\n    delegates: tuple[DelegateSpec, ...] = ()\n\n@dataclass(frozen=True)\nclass DelegateSpec:\n    to_role: RoleId\n    phases: frozenset[PhaseId]\n    description: str\n\n@dataclass(frozen=True)\nclass CommandSpec:\n    id: str\n    name: str\n    role_ref: RoleId\n    description: str\n    phase_refs: frozenset[PhaseId]\n    creates_labels: tuple[str, ...]\n    file_path: str | None = None\n\n@dataclass(frozen=True)\nclass LabelSpec:\n    id: str\n    value: str\n    phase_ref: PhaseId | None = None  # None for special labels\n    substep_ref: str | None = None\n    special: bool = False\n\n@dataclass(frozen=True)\nclass ReviewAxisSpec:\n    id: str\n    letter: str  # \"A\", \"B\", \"C\"\n    name: str\n    focus: str\n    key_questions: tuple[str, ...]\n\n@dataclass(frozen=True)\nclass TitleConvention:\n    pattern: str\n    label_ref: str\n    created_by: RoleId\n    phase_ref: PhaseId | None = None\n\n@dataclass(frozen=True)\nclass ProcedureStep:\n    \"\"\"Procedural guidance step for a role or command.\"\"\"\n    order: int\n    instruction: str\n    command: str | None = None  # beads/git command example\n    context: str = \"\"  # \"first-steps\", \"creating-slice\", etc.\n\n# NEW canonical dicts (source of truth)\nROLE_SPECS: dict[RoleId, RoleSpec]\nCOMMAND_SPECS: dict[str, CommandSpec]\nLABEL_SPECS: dict[str, LabelSpec]\nREVIEW_AXIS_SPECS: dict[str, ReviewAxisSpec]\nTITLE_CONVENTIONS: list[TitleConvention]\n```\n\n### Module 3: `scripts/aura_protocol/gen_schema.py` — Python → schema.xml Generator\n\n```python\ndef generate_schema(output_path: Path) -\u003e None:\n    \"\"\"Generate schema.xml from Python types.py canonical definitions.\n    \n    Output must pass validate_schema.py validation.\n    Uses xml.etree.ElementTree (stdlib).\n    \"\"\"\n\ndef verify_round_trip(schema_path: Path) -\u003e list[str]:\n    \"\"\"Parse generated schema.xml, compare against Python types.\n    \n    Returns list of discrepancies (empty = perfect round-trip).\n    \"\"\"\n```\n\n### Module 4: `scripts/aura_protocol/gen_skills.py` — Python → SKILL.md Generator\n\n```python\nGENERATED_BEGIN = \"\u003c!-- BEGIN GENERATED FROM schema --\u003e\"\nGENERATED_END = \"\u003c!-- END GENERATED --\u003e\"\n\ndef generate_skill(\n    role: RoleId,\n    command_id: str | None = None,\n    template_dir: Path = Path(\"skills/templates\"),\n    output_path: Path | None = None,\n) -\u003e str:\n    \"\"\"Generate SKILL.md content for a role or command.\n    \n    If output_path exists and has a manual section below GENERATED_END,\n    that section is preserved. Only the generated header is replaced.\n    \n    Uses Jinja2 templates from template_dir.\n    \"\"\"\n\ndef generate_all_skills(\n    template_dir: Path = Path(\"skills/templates\"),\n    output_dir: Path = Path(\"skills\"),\n) -\u003e dict[str, Path]:\n    \"\"\"Generate all SKILL.md files. Returns {skill_name: output_path}.\"\"\"\n```\n\n### Module 5: `scripts/aura_protocol/context_injection.py` — Runtime Context Injection\n\n```python\n@dataclass(frozen=True)\nclass RoleContext:\n    \"\"\"All protocol context relevant to a specific role.\"\"\"\n    role: RoleSpec\n    owned_phases: tuple[PhaseSpec, ...]\n    constraints: tuple[ConstraintSpec, ...]  # constraints mentioning owned phases\n    commands: tuple[CommandSpec, ...]\n    handoffs: tuple[HandoffSpec, ...]  # handoffs at owned phases\n    labels: tuple[LabelSpec, ...]  # labels for owned phases\n\n@dataclass(frozen=True)\nclass PhaseContext:\n    \"\"\"Protocol context specific to a single phase transition.\"\"\"\n    phase: PhaseSpec\n    constraints: tuple[ConstraintSpec, ...]  # constraints specifically for this phase\n    labels: tuple[LabelSpec, ...]  # labels for this phase\n    transitions: tuple[Transition, ...]  # available transitions\n    handoff: HandoffSpec | None  # handoff required at this phase (if any)\n\ndef get_role_context(role: RoleId) -\u003e RoleContext:\n    \"\"\"Get all protocol context for a role. Used at skill invocation.\"\"\"\n\ndef get_phase_context(phase: PhaseId) -\u003e PhaseContext:\n    \"\"\"Get protocol context for a phase. Used at phase transitions.\"\"\"\n\ndef format_role_context(ctx: RoleContext) -\u003e str:\n    \"\"\"Format role context as markdown for agent prompt injection.\"\"\"\n\ndef format_phase_context(ctx: PhaseContext) -\u003e str:\n    \"\"\"Format phase context as markdown for agent prompt injection.\"\"\"\n```\n\n### File Tree\n\n```\nscripts/\n  aura_protocol/\n    __init__.py                   # Updated exports\n    types.py                      # EXPANDED: +7 new dataclasses, +4 new dicts\n    schema_parser.py              # NEW: schema.xml → SchemaSpec bootstrap parser\n    gen_schema.py                 # NEW: Python → schema.xml generator\n    gen_skills.py                 # NEW: Python → SKILL.md generator (Jinja2)\n    context_injection.py          # NEW: runtime role/phase context extraction\n    state_machine.py              # HOOK: phase transition emits PhaseContext\n    constraints.py                # UNCHANGED\n    workflow.py                   # UNCHANGED\n    interfaces.py                 # UNCHANGED\nskills/\n  templates/                      # NEW directory\n    role_architect.j2             # Jinja2 template for architect role SKILL.md\n    role_supervisor.j2            # Jinja2 template for supervisor role SKILL.md\n    role_worker.j2                # Jinja2 template for worker role SKILL.md\n    role_reviewer.j2              # Jinja2 template for reviewer role SKILL.md\n    command_base.j2               # Base template for command skills\n    _macros.j2                    # Shared macros (constraint list, phase table, etc.)\ntests/\n  test_schema_parser.py           # NEW: parser extracts all entities correctly\n  test_gen_schema.py              # NEW: round-trip Python → XML → validate\n  test_gen_skills.py              # NEW: generated SKILL.md matches expected\n  test_context_injection.py       # NEW: correct context returned per role/phase\n  test_schema_types_sync.py       # UPDATED: becomes round-trip verification test\n  test_aura_types.py              # UPDATED: covers new spec types\n```\n\n### Dependencies\n\n```toml\n# pyproject.toml additions\n[project.optional-dependencies]\ndev = [\"pytest\u003e=8.0\", \"pytest-asyncio\u003e=0.24\", \"jinja2\u003e=3.1\"]\n```\n\nJinja2 is the only new dependency. It's a dev dependency (used by gen_skills.py) — not needed at runtime. The runtime context injection uses Python directly.\n\n## Vertical Slice Decomposition\n\n### SLICE-1: Schema Parser + Type Expansion (Foundation)\nFiles: schema_parser.py, types.py (expanded), test_schema_parser.py, test_aura_types.py\nDepends on: nothing (this is the foundation)\nWorker model: sonnet (complex XML parsing + 7 new dataclasses)\n\n### SLICE-2: Schema.xml Generator (Python → XML)\nFiles: gen_schema.py, test_gen_schema.py, test_schema_types_sync.py (updated)\nDepends on: SLICE-1 (needs expanded types)\nWorker model: sonnet (XML generation + round-trip verification)\n\n### SLICE-3: SKILL.md Generator (Python → SKILL.md)\nFiles: gen_skills.py, skills/templates/*.j2, test_gen_skills.py\nDepends on: SLICE-1 (needs expanded types)\nWorker model: sonnet (Jinja2 templates + marker-based split logic)\n\n### SLICE-4: Runtime Context Injection\nFiles: context_injection.py, test_context_injection.py, state_machine.py (hook)\nDepends on: SLICE-1 (needs expanded types)\nWorker model: sonnet (context extraction + state machine integration)\n\nLayer graph:\n```\nSLICE-1 (Foundation)\n    ├─→ SLICE-2 (gen_schema.py)    [parallel]\n    ├─→ SLICE-3 (gen_skills.py)    [parallel]\n    └─→ SLICE-4 (context_injection)[parallel]\n```\n\n## Validation Checklist\n\n- [ ] SchemaSpec extracts all 12 phases with substeps, transitions, TDD layers\n- [ ] SchemaSpec extracts all 5 roles with invariants, standing teams, owned phases\n- [ ] SchemaSpec extracts all 38 commands with role-ref, phase-refs, creates-labels\n- [ ] SchemaSpec extracts all 26 constraints with Given/When/Then/Should\n- [ ] SchemaSpec extracts all 6 handoffs with required fields\n- [ ] SchemaSpec extracts all 16 labels with phase-ref, substep-ref\n- [ ] SchemaSpec extracts all 3 review axes with key questions\n- [ ] New spec types (CommandSpec, LabelSpec, RoleSpec, etc.) are frozen dataclasses\n- [ ] ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS, REVIEW_AXIS_SPECS are canonical dicts\n- [ ] gen_schema.py produces valid schema.xml that passes validate_schema.py\n- [ ] Round-trip test: Python types → schema.xml → parse → matches original\n- [ ] gen_skills.py generates all role SKILL.md files with correct content\n- [ ] gen_skills.py preserves hand-written body below marker\n- [ ] Jinja2 templates produce correct phase tables, constraint lists, label schemas\n- [ ] get_role_context returns correct constraints/phases/commands per role\n- [ ] get_phase_context returns correct constraints/labels/transitions per phase\n- [ ] format_role_context produces readable markdown for prompt injection\n- [ ] State machine advance() can optionally emit PhaseContext\n- [ ] Existing 554 tests pass (no regressions)\n- [ ] New spec types have enum coverage and completeness tests\n\n## BDD Acceptance Criteria\n\n### AC1: Schema Parser Bootstrap\n**Given** the current schema.xml (1,314 lines) **when** parse_schema() is called **then** returns a SchemaSpec with 12 phases, 5 roles, 38 commands, 26 constraints, 6 handoffs, 16 labels, 3 review axes **should not** silently skip any entity or lose attributes\n\n### AC2: Python as Source of Truth\n**Given** types.py with expanded ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS **when** gen_schema.py runs **then** produces a schema.xml that passes validate_schema.py with 0 errors **should not** require manual editing of the generated XML\n\n### AC3: Round-Trip Consistency\n**Given** Python types.py as input **when** generating schema.xml then parsing it back **then** all entity counts, IDs, and attribute values match the original Python definitions **should not** have lossy conversion in either direction\n\n### AC4: SKILL.md Generation with Markers\n**Given** a role SKILL.md with a hand-written body **when** gen_skills.py runs **then** the generated header between markers is updated but the hand-written body is preserved **should not** overwrite or remove hand-written procedural guidance\n\n### AC5: Role Context Injection\n**Given** role=SUPERVISOR **when** get_role_context is called **then** returns phases p7-p12, relevant constraints (C-supervisor-no-impl, C-supervisor-explore-team, C-slice-leaf-tasks, etc.), supervisor commands, and handoff specs h1-h3 **should not** include constraints/commands for unrelated roles\n\n### AC6: Phase Context Injection\n**Given** phase=P10_CODE_REVIEW **when** get_phase_context is called **then** returns C-severity-eager, C-review-consensus, C-blocker-dual-parent, the review axis specs, and severity labels **should not** include constraints for unrelated phases\n\n### AC7: No Regressions\n**Given** the expanded types.py and new modules **when** running the full test suite **then** all 554 existing tests pass **should not** break state_machine, constraints, workflow, or interfaces\n\n### AC8: Jinja2 Template Quality\n**Given** a role Jinja2 template **when** rendering with StrictUndefined **then** all variables are defined from Python specs **should not** have undefined variable errors or missing context\n\n### AC9: Expanded Type Coverage\n**Given** all new spec types (CommandSpec, LabelSpec, RoleSpec, SubstepSpec, ReviewAxisSpec, TitleConvention, ProcedureStep) **when** tested **then** enum coverage is 100%, all spec dicts have correct entry counts, and all fields are populated **should not** have empty or placeholder values","design":"{\"validation_checklist\":[\"Schema parser extracts all 12 phases with substeps\",\"Schema parser extracts all 5 roles with invariants\",\"Schema parser extracts all 38 commands\",\"Schema parser extracts all 26 constraints\",\"Schema parser extracts all 6 handoffs\",\"Schema parser extracts all 16 labels\",\"Schema parser extracts all 3 review axes\",\"New spec types are frozen dataclasses\",\"gen_schema.py produces valid XML\",\"Round-trip consistency verified\",\"gen_skills.py generates correct content\",\"gen_skills.py preserves manual body\",\"Runtime injection returns correct role context\",\"Runtime injection returns correct phase context\",\"554 existing tests pass\"],\"acceptance_criteria\":[{\"given\":\"schema.xml (1314 lines)\",\"when\":\"parse_schema() called\",\"then\":\"returns SchemaSpec with all entities\"},{\"given\":\"types.py expanded\",\"when\":\"gen_schema.py runs\",\"then\":\"produces valid schema.xml (0 errors)\"},{\"given\":\"role SKILL.md with manual body\",\"when\":\"gen_skills.py runs\",\"then\":\"header updated, manual body preserved\"},{\"given\":\"role=SUPERVISOR\",\"when\":\"get_role_context called\",\"then\":\"returns p7-p12 phases, supervisor constraints/commands/handoffs\"},{\"given\":\"expanded types and new modules\",\"when\":\"full test suite runs\",\"then\":\"all 554 tests pass\"}],\"tradeoffs\":[{\"decision\":\"Python as SoT vs schema.xml as SoT\",\"rationale\":\"User requirement. Python is more expressive, testable, directly usable at runtime\"},{\"decision\":\"Jinja2 vs f-strings for SKILL.md\",\"rationale\":\"Industry standard, StrictUndefined catches errors, supports template inheritance\"},{\"decision\":\"Marker-based split vs full generation\",\"rationale\":\"User chose split for transitional period. Procedures move to Python over time for full generation\"},{\"decision\":\"xml.etree vs lxml\",\"rationale\":\"Stdlib, no new dependency, sufficient for our output needs\"}]}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-a1o4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-1: Schema-driven protocol engine v2 — Python SoT with code generation and runtime injection","updated_at":"2026-02-26T07:22:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:56:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a4226754ffbcfdbf78d51c0e26c1245c026e2ff7d78d61b483f9cc802af895df","created_at":"2026-02-27T06:55:53Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-8lfp\n  review: aura-plugins-qrgx\n---\nBLOCKER findings for SLICE-2 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-a1sz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 BLOCKER","updated_at":"2026-02-27T06:56:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"df4e9b7c5dbcc851e540838c8348e4dbfd6d827ddfe016925f1538f02fc43b27","created_at":"2026-02-22T11:31:46Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis: C (Elegance)\nReviewer: Claude Sonnet 4.6\n\n## Summary\n\nThe proposal is structurally sound and demonstrates proportionate decomposition. 4 slices map to 4 orthogonal modules. The categorized aggregation (4 groups by parameter signature) is a principled and minimal solution to the signature diversity problem — superior to a bloated mega-context object or forcing unrelated constraints into a single signature. The optional timestamp pattern, single audit trail for failed transitions, and conftest.py fixture approach all represent correct minimal choices.\n\n## VOTE: ACCEPT\n\nNo BLOCKER issues. Two non-blocking observations recorded for implementors.\n\n## Observations (Non-Blocking)\n\n### OBS-1: check_all name is now semantically misleading\nThe proposal renames check_state_constraints → check_all, but check_all only covers Group 1 (7 of 22 constraints). Original PROPOSAL-1 described check_all as \"Run all constraint checks against current state.\" The rename is justified (the method does run ALL state-checkable checks), but the name will cause confusion for callers who expect it to cover all 22 C-* constraints.\n\nSuggestion: The module docstring MUST clearly state that check_all(state) means \"all checks that take only EpochState\" — not all 22. The validation checklist item \"check_all(state) aggregates 7+ state-checkable constraints\" captures this but the API name alone does not. Implementors should add a docstring note like: \"Runs all state-only constraint checks (Group 1, 7 checks). For transition checks call check_transition_constraints(); for naming/structural checks call individual methods.\"\n\n### OBS-2: severity_groups uses str keys instead of SeverityLevel enum\nSLICE-1 adds EpochState.severity_groups: dict[str, set[str]]. The proposal rationale says \"level→finding_ids\" but uses bare str for the key instead of SeverityLevel enum. This is inconsistent with the strongly-typed enum invariant that is itself one of the core goals of FR3 (Type Safety Hardening). The rest of the design uses SeverityLevel for all severity-related fields.\n\nSuggestion: Change to dict[SeverityLevel, set[str]] = field(default_factory=dict). This is a one-line change that maintains the typed invariant and enables check_severity_tree() to use SeverityLevel.BLOCKER/IMPORTANT/MINOR directly as keys rather than string literals.\n\n### OBS-3: Group 4 constraint count is stale in proposal description\nThe proposal documents \"Group 4: Structural (specific IDs/params) — 8\" but enumerates 11+ items in the text. This is a documentation inconsistency only, not a code concern. Implementors should verify the actual count when implementing check_structural_constraints().\n\n## Elegance Assessment\n\n| Aspect | Assessment |\n|--------|-----------|\n| Complexity proportionality | PASS — 4 slices for 4 orthogonal problem axes |\n| API cleanliness | PASS with OBS-1 (docstring needed for check_all) |\n| Premature abstractions | NONE FOUND |\n| Backwards compatibility | PASS — deprecated alias kept, optional timestamp |\n| Type consistency | MINOR GAP (OBS-2: severity_groups key type) |\n| Minimal design | PASS — no gold-plating; every change addresses a named finding |\n\nAll 6 end-user alignment criteria satisfied. MVP scope is appropriate — refinements to v1, not new features. Module boundaries unchanged. Public API surface changes are additive only.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-a1t","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_PROPOSAL-1-REVIEW-C-1: aura_protocol v1 follow-up — error handling, constraint coverage, type safety, Temporal sandbox","updated_at":"2026-02-22T17:24:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:57:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"085bd34d1cfab596b87bd1172fb6df017fe349ddc1fe29946a5251a1b43a9495","created_at":"2026-02-26T08:57:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  review_round: 1\n---\nMINOR findings from Reviewer A (Correctness) on FOLLOWUP-SLICE-2.\n\nNo MINOR findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-a1xs","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-REVIEW-A-1 MINOR","updated_at":"2026-02-26T08:57:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"17bae0be87315e7143af46792da354534bb985242d26c56239b463403dc4bc5f","created_at":"2026-02-26T08:38:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Verify fixture scope=module, sys.modules registration/cleanup, and all test cases pass.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-a4oo","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 BLOCKER: Fixture and test validation","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:33:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4320128b8cc3d2b6781aa13854d25fa68f2e33e14b9c6f38fca71704a17a3f2c","created_at":"2026-02-26T08:06:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-t5i9\n  impl_plan: aura-plugins-147m\n---\n## Scope\nImplement all registry CLI functions to make TestRegistryCLI pass.\nAlso update module docstring Usage block.\n\n## Critical UAT Deltas\n1. registry add: Path stored as ABSOLUTE (Path(path_arg).resolve())\n2. registry add on duplicate: print old entry + prompt 'Update? [y/N]', --yes skips\n3. Module docstring updated with 'aura-release registry \u003cinit|add|list|remove\u003e'\n\n## File\n- bin/aura-release","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-a55n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-L3: Impl — cmd_registry + all 4 subcommands + docstring","updated_at":"2026-02-26T08:33:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"06a8ab3bb16fff8e8f46ba2fbfd412a7b94e1027713ea961c6d37abcaae5cd05","created_at":"2026-02-25T22:44:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  review_round: 2\n---\nMINOR findings from Reviewer A (Correctness) on SLICE-1, Round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-a6r9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-2 MINOR","updated_at":"2026-02-25T22:44:23Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:13Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6b4b1a062bc0348afb88252510124a39ad00162d00890a69f355a7254722eb98","created_at":"2026-02-26T08:38:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ag48","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 IMPORTANT: Test Quality","updated_at":"2026-02-26T08:38:13Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"af07dfafea1d98e75104d816d504e3b0bbb0e0840ce955a2335951686fcaf99b","created_at":"2026-02-23T10:40:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Verbatim User Request\n\"Should also be providing the @bin/aura-release as a Flake package.\"\n\"Let's include the aura-release tool as part of the packages.\"\n\n## Context\nThe user has an existing Python script at bin/aura-release that handles automated version bumping, changelog generation, and git tagging for the aura-plugins project. It is currently a standalone script and needs to be exposed as a Nix flake package output.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ai2x","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"REQUEST: Package aura-release as Nix flake output","updated_at":"2026-02-23T10:40:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e2b153bca863440325bef5f088fac70473509d4d94beeeb383fb18de61d5e4cf","created_at":"2026-02-23T04:26:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer B (Test Quality) on SLICE-1 (Schema Parser + Type Expansion + Bootstrap Codegen). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ai8v","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 MINOR","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:17:11Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:46Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-lkz\n  impl_plan: aura-plugins-06g\n---\n## Scope\nWrite test_workflow.py with Temporal sandbox tests covering AC6 (durability) and AC7 (search attributes). Tests use Temporal test environment.\n\n## Files Owned\n- tests/test_workflow.py\n\n## Acceptance Criteria\nGiven test_workflow.py when run in Temporal sandbox then workflow advances via signals, search attrs updated should never mock the workflow itself","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-amx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-L2: Tests — test_workflow.py (AC6, AC7, Temporal sandbox)","updated_at":"2026-02-22T02:17:11Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:09:13Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"82f9b86b90024345ba7653e5c17cbd7bc27463663e04f8d8b52864cd5d48a4df","created_at":"2026-02-26T08:04:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-rien\n  impl_plan: aura-plugins-147m\n  urd: aura-plugins-7oqz\n---\n## Scope\nDefine the fixture API structure: aura_release_mod module-scope fixture and _clear_caches autouse fixture.\nThis is the foundational design that L2/L3 will implement and verify.\n\n## Files Owned\n- tests/test_aura_release.py (fixture section only)\n\n## Deliverable\nModule-scope aura_release_mod fixture + autouse _clear_caches fixture written correctly.\nAll existing fixture calls (_import_aura_release pattern) identified for removal.\n\n## Acceptance Criteria\nGiven tests/test_aura_release.py when reading then aura_release_mod has scope='module' should not use function scope.\nGiven _clear_caches when reading then only calls cache_clear() should not call sys.modules.pop().","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-anjk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-L1: Types — fixture API spec (aura_release_mod + _clear_caches)","updated_at":"2026-02-26T08:09:13Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a74013a0ee563917262dba2fe949bcac38a3f45178ac67d3b86bb980a23d85d5","created_at":"2026-02-26T16:01:50Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-l6n8,aura-plugins-vhtx,aura-plugins-sp6y,aura-plugins-o8va,aura-plugins-w5hi\n  review: aura-plugins-ruvr\n---\nMINOR findings for Elegance review round 1 (Reviewer C)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-aqwq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"ALL-SLICES-REVIEW-C-1 MINOR","updated_at":"2026-02-26T21:03:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9fac9c17f28e7a0ec4202f260c36560c062193e5b4238cf5b37a7689990941ef","created_at":"2026-02-26T23:46:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"**File:** scripts/aura_protocol/__init__.py\n\n**Problem:**\nThe module docstring (lines 85-89) lists Audit Activities:\n  init_audit_trail(trail)  — inject AuditTrail implementation before worker start\n  record_audit_event(event) — @activity.defn: persist AuditEvent via injected trail\n  query_audit_events(epoch_id, phase) — @activity.defn: query AuditEvents by epoch + phase\n  InMemoryAuditTrail       — in-process AuditTrail for testing and local dev\n\nBUT these are NOT imported in __init__.py, and NOT listed in __all__.\n\nThe docstring claims they are part of the public API of aura_protocol, but:\n- `from aura_protocol import init_audit_trail` will fail at runtime.\n- `from aura_protocol import InMemoryAuditTrail` will fail at runtime.\n\nThe docstring says these come from audit_activities.py but there is no corresponding import statement.\n\n**Fix:**\nEither:\na) Add imports from aura_protocol.audit_activities and add to __all__, OR\nb) Update the docstring to say 'import from aura_protocol.audit_activities directly (not re-exported)' and remove them from the public API listing.\n\nOption (b) is lower risk. Option (a) would make the docstring accurate and provide a unified import surface.\n\nAdditionally, the docstring signature for query_audit_events is stale: it shows `query_audit_events(epoch_id, phase)` but the actual signature is `query_audit_events(epoch_id, phase=None, role=None)` (role was added by SLICE-5).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-aszo","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: audit_activities exports documented in __init__.py docstring but not imported or in __all__","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:48:46Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b55e9470296f36cc5829b80c685e4fdc3845424ec505a06d9ce780002d2d814a","created_at":"2026-02-22T12:07:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-cts\n  urd: aura-plugins-s6i\n  proposal: aura-plugins-r1z\n---\n\n## Specification\nRestructure constraint aggregation into categorized group methods. Add severity_tree positive case.\n\n## Changes\n1. Rename check_state_constraints → check_state (keep deprecated alias)\n2. Rename check_transition_constraints → check_transition (keep deprecated alias)\n3. NEW: check_naming(titles: list[str]) → aggregates C-proposal-naming, C-review-naming, C-followup-lifecycle, C-agent-commit, C-actionable-errors\n4. NEW: check_structural(...) → aggregates C-dep-direction, C-review-binary, C-blocker-dual-parent, C-slice-leaf-tasks, C-ure-verbatim, C-followup-timing, C-frontmatter-refs, C-supervisor-no-impl, C-supervisor-explore-team, C-followup-leaf-adoption, C-worker-gates, C-vertical-slices\n5. check_severity_tree() positive case: at P10, severity_groups must have 3 SeverityLevel keys\n6. check_blocker_gate() → use correct constraint_id from schema.xml (not C-worker-gates)\n7. _SAME_ACTOR frozenset → module-level constant\n8. Expand check_state to cover 7 state-checkable constraints (add C-severity-eager positive)\n9. Reviewer B note: tests should assert all 7 constraint_ids, not just count\n\n## Files Owned\n- scripts/aura_protocol/constraints.py\n- tests/test_constraints.py\n\n## Acceptance Criteria\n- AC4: check_state(state) runs 7+ constraint checks (assert all constraint_ids present)\n- AC5: P10 without severity_groups → ConstraintViolation for missing groups\n- AC9: All 475+ existing tests still pass\n\n## Findings Adopted\nyno, jwb, bnr, 947, dvi, qqf, pxo, 0yd","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-atu","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Implementation complete. Categorized group methods added (check_state, check_transition as primaries with deprecated aliases), check_naming and check_structural new aggregation methods, severity_groups positive case in check_severity_tree (C-severity-eager), _SAME_ACTOR moved to module level. Tests: 494 → 550 (+56 new). Production code verified via code inspection — no TODOs, real deps wired.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-2: constraints.py — Categorized Group Methods + Severity Positive Case","updated_at":"2026-02-22T12:48:46Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:36:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"94a9fe616b3b7b0273c7df35c32492d664219e5b10f14d84fb3bdf3a7ec0a51b","created_at":"2026-02-26T08:07:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-3kul\n  impl_plan: aura-plugins-147m\n---\n## Scope\nDefine the argparse additions and call site positions for registry integration.\n\n## Deliverables\n- --plugin NAME flag spec (optional, auto-detect from cwd if omitted)\n- Position in cmd_release() where registry lookup goes (after git commit/tag)\n- --check augmentation spec","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-b0ff","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"--plugin flag added to argparse; registry call sites positioned in cmd_release() AFTER git commit/tag and in cmd_check().","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-L1: Types — --plugin argparse spec + registry integration call sites","updated_at":"2026-02-26T08:36:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:41Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"240a7bf951ee19f5e51213d5f61cba4a8c42dadfc97a2cf4f7e862113590000b","created_at":"2026-02-26T03:31:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  reviewer: cartographer-c\n  round: 1\n---\nBLOCKER findings from Cartographer C (Elegance) on SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-b1oq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 BLOCKER","updated_at":"2026-02-26T03:31:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"694a6d0a2e7a56182a08051f110f76df1dc38c033ea9df8c16096d2952dacec8","created_at":"2026-02-22T17:42:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Currently all Dolt databases live at ~/dotfiles/.beads/dolt/ (accidental - server was started from dotfiles). Should migrate to ~/.beads/dolt/ (or wherever the home-manager module configures). Requires stopping server, moving data, restarting with new WorkingDirectory.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-b5cp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Migrate dolt data directory to managed location","updated_at":"2026-02-22T17:42:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:43Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"952e5e300b447e10b3c2772bf360fbda51a3a309b7f47ec80537156b23a734c5","created_at":"2026-02-25T22:37:37Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-a1bn\n  review_round: 1\n---\nBLOCKER findings from Reviewer A (Correctness) on SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-b5eu","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 BLOCKER","updated_at":"2026-02-25T22:37:43Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:19:38Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:17:50Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-bj1\n  urd: aura-plugins-umi\n  proposal: aura-plugins-gmv\n---\nHandoff from architect to supervisor. See handoff document at\n.git/.aura/handoff/aura-plugins-bj1/architect-to-supervisor.md","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-b5m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"HANDOFF: Architect → Supervisor for REQUEST aura-plugins-bj1","updated_at":"2026-02-22T04:19:38Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"415ba962936fbf2f90c73c882397783a50e29771750a4ae0836d01297112d5b5","created_at":"2026-02-26T18:03:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-9qpq\n  urd: aura-plugins-2ojv\n  uat: aura-plugins-h5db\n---\n## 7 UAT Amendments\n\n1. **owner_roles declaration order**: In SerializablePhaseSpec.from_spec(), change sorted(spec.owner_roles, key=lambda r: r.value) to list(spec.owner_roles) — preserve frozenset iteration order (which is the declaration order from PHASE_SPECS)\n2. **Remove FilePart.mime_type**: Delete mime_type field from FilePart. Keep only FileWithUri.mime_type. Update all call sites and tests.\n3. **ToolCall JSON camelCase aliases**: Add camelCase aliases. Since these are frozen dataclasses (not Pydantic), document the alias convention in docstring and add a to_json_dict() method or use __init_subclass__ pattern if the codebase supports it. At minimum, document the JSON field mapping.\n4. **InMemoryAuditTrail.query_events role typing**: Change role: object = None → role: RoleId | None = None in audit_activities.py\n5. **Refactor test_worker.py to DI-only**: Remove unittest.mock usage. Pass argv as parameter to parse_args, use dict merge for env vars.\n6. **Remove duplicate contract tests**: Remove overlapping tests from test_aura_types.py that duplicate test_serializable_phase_spec.py coverage.\n7. **Rename ReviewAxis enum values**: A→CORRECTNESS, B→TEST_QUALITY, C→ELEGANCE. Update _REVIEW_AXES in state_machine.py. Update all references in workflow.py, test files, conftest.py.\n\n## Files to modify\n- scripts/aura_protocol/types.py (ReviewAxis, SerializablePhaseSpec.from_spec)\n- scripts/aura_protocol/interfaces.py (FilePart.mime_type removal, ToolCall aliases)\n- scripts/aura_protocol/state_machine.py (_REVIEW_AXES update)\n- scripts/aura_protocol/audit_activities.py (role typing)\n- scripts/aura_protocol/workflow.py (ReviewVoteSignal if needed)\n- tests/test_worker.py (DI refactor)\n- tests/test_aura_types.py (remove duplicates)\n- tests/conftest.py (ReviewAxis references)\n- CHANGELOG.md (fix description)\n- All test files referencing ReviewAxis.A/B/C or \"A\"/\"B\"/\"C\" vote axes","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-b5wf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"All 7 UAT amendments applied. 1124 tests pass (4 skipped - Temporal server unavailable). Merged to epic/aura-plugins-eocq.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"UAT-FIX: Apply 7 UAT amendments from Phase 11","updated_at":"2026-02-26T18:34:14Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a54b732576550402d750b6acc37f1c23f889df9b8b7b82d2692cc2ee02f3df92","created_at":"2026-02-22T12:55:17Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer B (Test Quality) on SLICE-2 (constraints.py, test_constraints.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-b6p","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 MINOR","updated_at":"2026-02-22T17:30:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:49:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4ad4555bf4a729d037b2d78c0c6f28b8472dc19d348798038afd712ea5004750","created_at":"2026-02-26T08:39:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  impl_plan: aura-plugins-uvfm\n---\n## Scope (IMPORTANT finding — blocker for epic close)\n\nChange _parse_procedure_steps() in scripts/aura_protocol/schema_parser.py:\n\nBefore (silent):\n  instruction = instr_el.text.strip() if instr_el is not None and instr_el.text else \"\"\n\nAfter (raises):\n  if instr_el is None or not instr_el.text:\n      raise SchemaParseError(\n          f\"Missing required \u003cinstruction\u003e child element on \u003cstep id='{step_id}'\u003e \"\n          f\"in startup-sequence in {path}. \"\n          f\"Instruction is required for all procedure steps. \"\n          f\"Fix: add \u003cinstruction\u003e...\u003c/instruction\u003e as a child element of the \u003cstep\u003e.\"\n      )\n  instruction = instr_el.text.strip()\n\nAdd test to tests/test_schema_parser.py:\n- Construct minimal XML with \u003cstep\u003e that has id and order but NO \u003cinstruction\u003e child\n- Call parse_schema()\n- Assert SchemaParseError is raised\n- Assert message identifies step id\n\n## Files\n- scripts/aura_protocol/schema_parser.py\n- tests/test_schema_parser.py\n\n## Acceptance\nAC-D2-1: SchemaParseError raised with helpful message; no silent empty string return","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ba8q","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-L3: D2 — SchemaParseError on missing \u003cinstruction\u003e in schema_parser.py","updated_at":"2026-02-26T08:49:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6207d33c11297c0d0b62825142ab7368a6f89b67999993d9825f77b4a8f138d2","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-baji","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-2 BLOCKER","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:14Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:19:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-1bm\n---\n\nSingle slice: implement bin/aura-release per PROPOSAL-2.\nOne file to create, no files to modify (version files modified by the tool at runtime, not at build time).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bch","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"IMPL_PLAN: bin/aura-release implementation","updated_at":"2026-02-22T10:40:14Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:56:04Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e0a9def9fd0aae7dea111a5a8f22a9cc51ffcd0e53ce6ab733442d01dc141fbf","created_at":"2026-02-22T12:55:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer A (Correctness) on SLICE-1 (state_machine.py, conftest.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bdp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 BLOCKER","updated_at":"2026-02-22T12:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No MINOR findings — elegance axis clean","closed_at":"2026-02-26T04:30:26Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"fd3d7e92f3133f6ad2314e12a485511fb171bdd75b540b08a73c76825111d708","created_at":"2026-02-26T04:30:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bdss","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-2 MINOR","updated_at":"2026-02-26T04:30:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:20:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T23:50:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  related_epoch: aura-plugins-220\n  variant_rich_paper: /home/minttea/dev/agent-data-leverage/unified-schema/llm/research/variant-rich-paper.pdf\n  agentfilter_project: /home/minttea/codebases/dayvidpham/agentfilter/\n---\n\n## Verbatim User Request\n\n### SessionEntry, session_entries\n\nThe next thing is: the database design and code interface design that can encapsulate all the various steps, constraints, and roles of our PROCESS is going to be tricky. These will inherently be dealing with many variant roles and phases, each with their own schema for their transcripts, entries, tool calls, etc. This problem has a few steps.\n\n1. Part of this is a literature research task: I put a reference paper that deals with how to deal with variant-rich software environments in @llm/research/variant-rich-paper. Find its references and related works, and determine what architectures or solutions the software engineering research community has developed to deal with this problem. We are in a variant-rich software environment because our ingestion pipeline must account for (MANY model harnesses which may have MANY configurations, plugins and also interface with MANY models).\n\n2. There is another research task: we need a standardized, stable, uniform interface that we can use to adapt the transcript entries into. This is essentially the purpose of the Agent Context Protocol (ACP), which has been officially merged into the Agent2Agent Protocol (A2A). These have also been officially donated to the Linux Foundation. These protocols integrate and extend the Model Context Protocol (MCP).\n   * ACP: (https://agentcommunicationprotocol.dev/introduction/welcome) and its official OpenAPI spec (https://raw.githubusercontent.com/i-am-bee/acp/refs/heads/main/docs/spec/openapi.yaml)\n   * A2A: official v1.0 spec (https://a2a-protocol.org/latest/definitions/) ; official A2A Go SDK (https://github.com/a2aproject/a2a-go) ; \n   * MCP: official spec at (https://modelcontextprotocol.io/specification/2025-11-25) and specified as TypeScript (https://raw.githubusercontent.com/modelcontextprotocol/modelcontextprotocol/refs/heads/main/schema/2025-11-25/schema.ts)\nWe should define a database schema and design that is compliant with the A2A and MCP schema. When researching, use these links provided as the official, single source of truth. I have an example of an ACP-compliant Claude Code transcript parser and filtering project at @~/codebases/dayvidpham/agentfilter/ .\n\n### Model Name ID Refactor\n\nLet's also use the database of models at https://github.com/anomalyco/models.dev, since we need a stable model name identifier.\n\n## Classification (4 Axes)\n\n### Scope: LARGE\n- Database schema design for variant-rich transcript storage\n- Protocol compliance with 3 specs (A2A v1.0, ACP, MCP 2025-11-25)\n- Literature survey on variant-rich SPL architectures\n- Model name ID standardization via models.dev\n- Integration with existing agentfilter project patterns\n\n### Complexity: HIGH\n- Multiple protocol specs to reconcile (A2A extends ACP extends MCP)\n- Variant-rich environment: MANY model harnesses × MANY configs × MANY models\n- Must handle variant transcripts per role/phase/tool with different schemas\n- Relevant SPL techniques: Feature Model Synthesis, Constraints Extraction, Variant Integration\n\n### Risk: MEDIUM\n- Research and design phase — not touching production yet\n- Risk of over-engineering the schema if we don't bound scope\n- Risk of protocol spec drift (A2A recently donated to Linux Foundation)\n\n### Domain Novelty: HIGH\n- A2A v1.0 spec released 2025 — cutting edge\n- SPL variant-rich evolution is active research area (Strüber et al. SPLC'19, 35 citations)\n- No existing unified transcript schema standard for multi-harness agent systems","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bj1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"REQUEST: SessionEntry database design — A2A/MCP-compliant variant-rich transcript schema","updated_at":"2026-02-22T04:20:31Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5971705714ee10004b830bc9b605fe084115e980cd38f65eeafb13d7ca0d9a2b","created_at":"2026-02-23T04:23:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/Naming Consistency).\n\nSubstepSpec.type (types.py line 187) is typed as bare str. Valid values seen in schema.xml are: classify, research, explore, elicit, urd, propose, review, uat, ratify, handoff, plan, slice, landing. These are a closed set.\n\nThe existing codebase uses str enums for all other closed sets (PhaseId, Domain, RoleId, ExecutionMode, ContentLevel, ReviewAxis). SubstepSpec.type is the only field in a new dataclass using bare str for what appears to be a closed set.\n\nThis is minor because: (1) SubstepSpec is mainly used in the bootstrap tool and parser, not at runtime; (2) the generator writes these back to XML correctly without validation.\n\nSuggestion: Define a SubstepType enum with the 13 known values. Minor because SubstepSpec is not part of the critical runtime path (context injection, Temporal).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bjal","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1-F4: SubstepSpec.type is bare str — consider SubstepType enum for consistency","updated_at":"2026-02-23T12:46:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f8ccf12325ca7ca632ece0a0eb4dae9e5b7b9a58c65bdd29e18236c904bd06c3","created_at":"2026-02-26T04:02:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-kg25\n  uat: aura-plugins-6p9j\n---\ncontext_injection.py returns structured RoleContext/PhaseContext dataclasses but has no function to serialize them into prompt text.\n\nUser wants:\n1. render_role_context_as_text() — numbered, titled format: '1. C-supervisor-no-impl / given: ... / when: ... / then: ... / should not: ...'\n2. render_role_context_as_xml() — XML format for Claude's structured understanding\n3. Both formats supported from the same data\n\nAll 4 ConstraintContext fields (given, when, then, should_not) must be rendered.\n\nSeverity: BLOCKER — without a renderer, runtime injection into agent prompts cannot happen.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bl50","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"BLOCKER: Missing prompt renderer in context_injection.py","updated_at":"2026-02-26T04:02:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d9ff353f4c7cdc051d6a55212f40fa0991b22db34e744499f7c732750557a99d","created_at":"2026-02-26T08:38:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bm81","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1 MINOR: User-facing error messages","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:21Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:53Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-3 (constraints.py) — IMPORTANT findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bnr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-22T17:24:21Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:48:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cac3dc9d61e7de46a85afb75a8ac9682fb558ec493f1be7c82184dc00645686c","created_at":"2026-02-25T22:48:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No IMPORTANT findings for SLICE-1 Round 3 (Test Quality axis). All cycle 2 findings resolved.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bo00","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-3 IMPORTANT","updated_at":"2026-02-25T22:48:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:17:23Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f3ee735d0b7bc7bc761163f0cc831d366fbd71d145a9df03c8fba3f027e7488b","created_at":"2026-02-27T06:16:45Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-ckg0\n---\n## Questions and Responses\n\n### Round 1: auractl/aurad Architecture\n\n**Q1: How should auractl and aurad split?**\nOptions:\n- aurad = Temporal server, auractl = worker (two separate binaries)\n- aurad = worker process, auractl = CLI tool (three things: server, daemon, CLI)\n- aurad = server + worker combined, auractl = CLI\n\nA: \"I assumed that the Temporal server we'd get out of the box wasn't going to be featureful. What does it handle? What should its usage be? Do we need a wrapper?\"\n\n*Clarification provided: temporal server start-dev is fully featured (full server logic, SQLite instead of Cassandra). No wrapper needed.*\n\n**Q2: Follow-up — Name mapping**\nOptions:\n- auractl = worker, aurad = future CLI\n- auractl = CLI, aurad = worker\n- auractl = both for now\n- Just rename to auractl, skip aurad\n\nA: \"Should have an aurad and an aura-msg that will be used as part of model harness hooks to automatically register themselves, update their work, and integrate programmatically into the aura protocol, as described by the PROCESS.md and the schema.xml.\"\n\n**Q3: Follow-up — Daemon model**\nOptions:\n- Two systemd services (temporal-dev-server + aurad)\n- Single combined service\n- Temporal server only, worker on-demand\n\nA: Two systemd services\n\n**Q4: Architecture confirmation**\nModel: Model harness hook → aura-msg signal vote A ACCEPT → Temporal Client SDK → aurad (EpochWorkflow) receives signal → State machine advances\nA: \"Yes, that's the model\"\n\n**Q5: Epoch scope**\nOptions:\n- This epoch: rename + aurad systemd + stubs only\n- This epoch: full aura-msg MVP\n- Defer aura-msg entirely\n\nA: \"This epoch: rename + aurad systemd + stubs only. Rename worker→aurad, add systemd service, create bin/aura-msg.py as a stub with --help. Full aura-msg implementation is a future epoch.\"\n\n### Round 1 continued: SQLite Path\n\n**Q: SQLite path convention?**\nOptions:\n- $HOME/.local/share/temporal/temporal.db (XDG)\n- $HOME/.aura/temporal.db\n- Let user configure, no default path\n\nA: \"$HOME/.local/share/aura/plugin/temporal.db\"\n\n**Q: Auto-create directory?**\nOptions:\n- Auto-create via ExecStartPre\n- Expect user to create it\n- Use XDG_DATA_HOME resolution\n\nA: \"(1) and (3)\" — Auto-create via ExecStartPre + XDG_DATA_HOME resolution\n\n### Round 2: Signal Progress + Constraint Violations\n\n**Q: SliceWorkflow progress granularity?** (multiSelect)\nOptions:\n- L1/L2/L3 completion\n- Started/completed only\n- Percentage-based\n- Custom stage names\n\nA: L1/L2/L3 completion + Custom stage names. \"A slice can have as many leaf tasks as it needs. Not limited to 3.\"\n\n**Q: Constraint violation fixture axis scope?**\nOptions:\n- 5 implemented only\n- All 23 in YAML, test only 5\n- All 23 with xfail for unimplemented\n\nA: Initially said \"5 implemented only\", then corrected: \"Actually, should have the 23 constraints, but unimplemented will skip.\"\n\n### Round 3: Roadmap + Doc Structure\n\n**Q: Roadmap detail level?**\nOptions:\n- Bullet list of stubs\n- Table with priority + status\n- Full descriptions with design notes\n\nA: Full descriptions with design notes\n\n**Q: Doc structure?**\nOptions:\n- Single docs/aurad.md\n- Split: docs/aurad.md + docs/aura-msg.md\n- Split: docs/architecture.md + docs/aurad.md + docs/aura-msg.md\n\nA: Split: docs/architecture.md + docs/aurad.md + docs/aura-msg.md\n\n**Q: Catch-all**\nA: Nothing else","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bo5x","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"ELICIT: aurad rename + aura-msg stub + UAT follow-ups","updated_at":"2026-02-27T06:17:23Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d63edeb03bae878307042d7e291ae0c7f4ec06ff9bca993e05a36351ef329d22","created_at":"2026-02-22T12:54:17Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In test_workflow.py, the sandbox test methods at lines 846, 902, and 901 use the docstring label 'AC5:' in their descriptions (e.g. 'AC5: WorkflowEnvironment sandbox test — advance_phase signal delivery'). However, AC5 in the ratified proposal (aura-plugins-r1z) is 'Severity Tree Positive Enforcement' — not the sandbox tests. The sandbox tests correspond to AC7 ('Temporal Sandbox End-to-End').\n\nThis is a minor documentation inaccuracy that could mislead future reviewers about which acceptance criterion each test validates.\n\nFix: Change 'AC5:' to 'AC7:' in the three sandbox test docstrings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bo9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4: AC docstring references wrong AC number in sandbox tests","updated_at":"2026-02-22T17:30:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"27c16ec3bce442afb174d57487b1ed7a23d0b58ee8fc13c850a98e0a8e598342","created_at":"2026-02-22T12:52:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer C (Elegance) on SLICE-1 (state_machine.py, conftest.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bsp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:19:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:23:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT\n\n## Review Summary (Reviewer C — Elegance and Complexity Proportionality)\n\nSLICE-1 (types.py + __init__.py) is exemplary in elegance proportionality.\n\n### Strengths\n- The 5-enum set (PhaseId, Domain, RoleId, VoteType, SeverityLevel) maps 1:1 to the 5 distinct conceptual axes in schema.xml. No enum proliferation.\n- str Enum choice is correct: JSON serialization AND Temporal serialization both work natively without custom encoding.\n- frozen=True dataclasses for all spec types is the right choice: immutable protocol definitions that can be safely shared and used as dict keys. No over-engineering via Pydantic; no under-engineering by using plain tuples.\n- PHASE_SPECS, CONSTRAINT_SPECS, HANDOFF_SPECS as module-level dicts are a clean static definition pattern. No runtime construction, no registry, no factory — just data.\n- The event stub types (PhaseTransitionEvent, ConstraintCheckEvent, etc.) bridge the interface gap without adding Pydantic or a separate event bus dependency.\n- __init__.py re-exports are complete and the __all__ list matches. Public API surface is exactly what is needed.\n- PHASE_DOMAIN using frozenset keys is elegant: the COMPLETE sentinel is correctly excluded.\n\n### Minor Finding\n- aura-plugins-n0n: AuditEvent.payload typed as str (JSON-serialized) — minor inconsistency with the typed dataclass pattern used elsewhere.\n\n### Verdict\nNo BLOCKER or IMPORTANT findings. One MINOR. SLICE-1 ACCEPT.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-btb","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1: types.py — Protocol type definitions","updated_at":"2026-02-22T04:19:54Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:59:29Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dc04e8638b412cf9c0a1e819eedde64598b815a0b875541f694cb9d36ec695d4","created_at":"2026-02-27T06:59:14Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-wsys\n  review: aura-plugins-82gp\n---\nBLOCKER findings for SLICE-5 review round A-1","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-bxjj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1 BLOCKER","updated_at":"2026-02-27T06:59:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f266194cb5a45283121f756f1148a284bd0aacff992045c5c67f83d4d4169186","created_at":"2026-02-23T04:22:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer C (Elegance) on SLICE-4. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-c07b","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:19:14Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"df6ed724619a1d0d82fd7316b3906c3511670bf236965214b85a0729454003f0","created_at":"2026-02-26T08:05:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i142\n  impl_plan: aura-plugins-147m\n---\n## Scope\nWrite TestPluginRegistry class with all 8 test cases. Uses monkeypatch to override _registry_path.\nTests import from aura_release_mod fixture.\n\n## Test Cases\n1. test_load_returns_none_if_absent\n2. test_load_exits_on_malformed_json (expects SystemExit(2))\n3. test_load_exits_on_missing_marketplaces_key (expects SystemExit(2))\n4. test_load_warns_and_skips_nonexistent_marketplace\n5. test_load_warns_and_skips_malformed_plugin_entry\n6. test_find_plugin_by_name\n7. test_find_plugin_by_cwd_auto_detect\n8. test_find_plugin_returns_none_when_no_match\n\n## File\n- tests/test_aura_release.py (append TestPluginRegistry class)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-c2ja","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-L2: Tests — TestPluginRegistry (8 test cases)","updated_at":"2026-02-26T08:19:14Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d7a0982f684d359e2660d679e74256fa1fa2f756ed0777310728bef781de5fd0","created_at":"2026-02-23T04:25:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In gen_schema.py, the constraint_order list places C-actionable-errors at index 21 and C-worker-gates at index 22. In CONSTRAINT_SPECS in types.py, C-worker-gates is at index 21 and C-actionable-errors is at index 22. The generated XML will have a different constraint ordering than the Python SoT. This is minor (ordering within XML constraints section has no semantic impact; round-trip tests verify content not ordering). But since Python is the SoT, the schema.xml output ordering should match the Python definition order for maintainability and for consistent diffs.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-c4ud","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: gen_schema constraint_order swaps C-worker-gates and C-actionable-errors vs CONSTRAINT_SPECS ordering","updated_at":"2026-02-23T12:46:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"286520c3269806e0b52023528bce42d6d6d5a62489f5f4b5ce323af5a0eac3a2","created_at":"2026-02-26T03:31:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  reviewer: cartographer-b\n  round: 1\n---\n**File:** tests/test_gen_skills.py, class TestStrictUndefined (line 688)\n\n**Issue:** test_undefined_variable_raises_undefined_error creates its own jinja2.Environment(undefined=StrictUndefined) and verifies that an undefined variable raises UndefinedError. This proves jinja2 itself works correctly, but does NOT verify that gen_skills.py's actual Jinja2 Environment uses StrictUndefined.\n\nIf someone removes `undefined=StrictUndefined` from gen_skills.py's Environment constructor, this test would still pass because it tests a separately-created Environment. The 4 parametrized template rendering tests (test_template_renders_without_error) would also still pass because all template variables ARE defined — they'd only fail if a template had a typo in a variable name.\n\n**Impact:** Regression protection for AC8 (StrictUndefined) is incomplete. A future change removing StrictUndefined from gen_skills.py would not be caught.\n\n**Concrete fix:** Either:\n1. Import gen_skills._env (the actual Environment) and test it directly: `assert isinstance(gen_skills._env.undefined, type(StrictUndefined))`\n2. Or: create a test template with a deliberate undefined variable and render it through gen_skills' actual code path (e.g. by monkeypatching the template loader to inject a bad template)\n3. Or: add `assert gen_skills.Environment is not None` and inspect its undefined attribute\n\nOption 1 is simplest if the Environment is accessible.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-c5nx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"IMPORTANT: StrictUndefined regression test verifies jinja2 behavior, not gen_skills.py's actual Environment","updated_at":"2026-02-26T09:38:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2a40a939f5142c046f8c7aab48a1d134cb09fdaa8ac3fdc4e2470aefcea4ebae","created_at":"2026-02-26T08:38:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-c9gi","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1 BLOCKER: Release integration with registry and error handling","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5298f4510110bb337588d00eea8d035249b9b2ce68a606cfce9efb87a6d51ed8","created_at":"2026-02-26T14:54:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  urd: aura-plugins-2ojv\n  supersedes: aura-plugins-80ac\n---\n\n# PROPOSAL-7: Aura Protocol v3 Temporal Engine\n\nSupersedes PROPOSAL-6 (aura-plugins-80ac). Addresses A-1 and B-1 MUST FIX items from Round 1 review.\n\n## Changes from PROPOSAL-6\n\n### FIX-1 (A-1 MUST FIX): Simplify PhaseInput — remove PhaseSpec\n\nPROPOSAL-6 passed `PhaseInput(phase_spec=PhaseSpec)` across workflow boundaries. PhaseSpec.owner_roles is `frozenset[RoleId]` which is **not JSON-serializable** by Temporal's default data converter — this would raise TypeError at serialize time.\n\n**Fix:** PhaseInput carries only the StrEnum-typed phase_id. Child workflows reconstruct PhaseSpec from the canonical PHASE_SPECS registry (already available at import time, no I/O needed).\n\n```python\n@dataclass(frozen=True)\nclass PhaseInput:\n    epoch_id: str\n    phase_id: PhaseId\n    # NO phase_spec — reconstructed from PHASE_SPECS in child workflow\n\n@dataclass(frozen=True)\nclass PhaseResult:\n    phase_id: PhaseId\n    success: bool\n    blocker_count: int = 0\n    vote_result: VoteType | None = None\n```\n\n**Why this is safe:** PHASE_SPECS is a module-level constant built from canonical Python types. Every worker process loads the same dict at import time — no network I/O, no side effects. Child workflows call `PHASE_SPECS[phase_input.phase_id]` immediately after receiving PhaseInput.\n\n**Rule:** EpochState (mutable runtime state) NEVER crosses workflow boundaries. PhaseInput/PhaseResult carry only primitives and StrEnums.\n\n---\n\n### FIX-2 (B-1 MUST FIX): Structural enforcement of AuditTrail.query_events\n\nPROPOSAL-6 marked `query_events` as ACTIVITY-ONLY via docstring only. Temporal's non-determinism detector won't catch a direct call from workflow context — it will corrupt the audit log silently.\n\n**Fix:** Add a dedicated registered activity:\n\n```python\n# scripts/aura_protocol/audit_activities.py\n\n@activity.defn\nasync def query_audit_events(\n    trail: AuditTrail,\n    epoch_id: str,\n    phase_id: PhaseId | None = None,\n) -\u003e list[AuditEvent]:\n    \"\"\"Registered activity — the ONLY way workflows may read audit events.\"\"\"\n    return await trail.query_events(epoch_id=epoch_id, phase_id=phase_id)\n```\n\n`AuditTrail.query_events()` remains on the Protocol interface for direct use in non-workflow contexts (scripts, tests, adapters). Workflows MUST call `query_audit_events` via `workflow.execute_activity(query_audit_events, ...)`.\n\n**Linting enforcement:** A comment in AuditTrail.query_events warns that direct calls in workflow context are forbidden. A future ast-grep rule can enforce this statically.\n\n---\n\n### FIX-3 (B-1 MUST FIX): Document child workflow join semantics\n\nAdded explicit documentation for how the parent EpochWorkflow awaits child phase workflows:\n\n```python\n# EpochWorkflow (parent):\nresult: PhaseResult = await workflow.execute_child_workflow(\n    ReviewPhaseWorkflow.run,\n    PhaseInput(epoch_id=self._epoch_id, phase_id=PhaseId.P4_REVIEW),\n    id=f\"{self._epoch_id}-p4\",\n)\n# Parent blocks here until child returns PhaseResult.\n# Child independently:\n#   1. Registers signal handlers for PhaseAdvanceSignal + ReviewVoteSignal\n#   2. Drains its signal queue via workflow.wait_condition()\n#   3. Returns PhaseResult when complete\n```\n\nJoin semantics: `workflow.execute_child_workflow()` is an awaitable that resolves only when the child workflow completes and returns. The parent does not poll — it suspends at the await point.\n\n---\n\n## Everything else unchanged from PROPOSAL-6\n\nAll items from PROPOSAL-6 that were not flagged as MUST FIX remain unchanged:\n\n### Scope (R1-R12 + R14 only)\n\nACP-related requirements (R13, R15, R16, R17) deferred to a future `aura-acp` plugin epic (aura-plugins-eocq reference). Core has zero dependency on `agent-client-protocol`.\n\n### 5 Slices (unchanged)\n\n| Slice | Scope |\n|-------|-------|\n| SLICE-1 | PhaseInput + PhaseResult + hybrid topology doc |\n| SLICE-2 | Interface + A2A types (FileWithUri, FilePart, ToolCall renames) |\n| SLICE-3 | AuditTrail + AuditEvent emission + query_audit_events activity |\n| SLICE-4 | Infrastructure: bin/worker.py + nix/temporal-service.nix + NixOS systemd user module |\n| SLICE-5 | Tests: contract tests for all new types + integration baseline |\n\n### Interface types (unchanged from PROPOSAL-6)\n\n**FileWithUri** (A2A spec v0.3.0, PR #663):\n```python\n@dataclass(frozen=True)\nclass FileWithUri:\n    uri: str\n    name: str | None = None\n    mime_type: str | None = None\n```\n\n**FilePart** (updated field):\n```python\n@dataclass(frozen=True)\nclass FilePart:\n    file_with_uri: FileWithUri  # was: file_uri: str\n```\n4 existing tests in test_interfaces.py updated to use FileWithUri.\n\n**ToolCall** (camelCase JSON aliases, R14):\n```python\n@dataclass(frozen=True)\nclass ToolCall:\n    tool_call_id: str   # was: id\n    raw_input: dict     # was: input\n    raw_output: dict    # was: output\n```\n\n**NullTranscriptRecorder** (R12 stub label):\n```python\nclass NullTranscriptRecorder:\n    \"\"\"STUB — Motivation: no-op until harness adapter wired.\n    Added in aura-plugins v3 (epoch: aura-plugins-eocq).\n    Expected implementation: harness-specific plugin epic.\"\"\"\n    async def record_phase_transition(self, event: PhaseTransitionEvent) -\u003e None: ...\n    async def record_constraint_check(self, event: ConstraintCheckEvent) -\u003e None: ...\n    async def record_review_vote(self, event: ReviewVoteEvent) -\u003e None: ...\n```\n\n**NullSecurityGate** (R12 stub label):\n```python\nclass NullSecurityGate:\n    \"\"\"STUB — permissive; allows all tool calls.\n    Added in aura-plugins v3 (epoch: aura-plugins-eocq).\n    Expected implementation: harness-specific plugin epic.\"\"\"\n    async def check_tool_permission(self, req: PermissionRequest) -\u003e PermissionDecision:\n        return PermissionDecision.ALLOW\n```\n\n### EpochStateMachine gate constants made public (unchanged)\n\n_CONSENSUS_GATED → CONSENSUS_GATED\n_BLOCKER_GATED → BLOCKER_GATED\n_REVISE_DRIVES_BACK → REVISE_DRIVES_BACK\n\n### Infrastructure (unchanged)\n\n- bin/worker.py: Temporal worker entry point registering all @workflow.defn and @activity.defn classes\n- nix/temporal-service.nix: systemd user service for Temporal server (self-hosted)\n- NixOS homeManagerModules.temporal-service: user-level systemd module\n\n## SHOULD FIX items addressed\n\nFrom A-1:\n- AuditTrail SA mapping: Temporal search attribute mapping now documented in SLICE-3 spec (index key = 'aura_epoch_id', type = Keyword)\n- Test baseline target: SLICE-5 spec explicitly targets 945 existing tests as the baseline\n\nFrom B-1:\n- Worker signal routing: documented that parent EpochWorkflow re-signals child workflow by child workflow ID (workflow.get_external_workflow_handle)\n- ActivityError catch: documented that signal drain loop wraps execute_activity in try/except ActivityError with exponential backoff\n\n## Decision log\n\nD1: PhaseInput carries phase_id only (not PhaseSpec). PhaseSpec reconstructed from PHASE_SPECS registry. Rationale: PhaseSpec.owner_roles is frozenset — not JSON-serializable. Registry lookup is O(1), no I/O.\nD2: query_audit_events is a registered @activity.defn. AuditTrail.query_events() remains on Protocol for non-workflow use. Workflows always go through the activity.\nD3: Child workflow join = blocking await on workflow.execute_child_workflow(). No polling. Child drains signals before returning.\nD4: ACP requirements (R13, R15-R17) deferred. No agent-client-protocol import in core.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-c9xw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"SUPERSEDED by PROPOSAL-8 (aura-plugins-vt20). Reason: A-1+B-1 MUST FIX — AuditTrail Protocol cannot be passed as Temporal activity argument; B-1 MUST FIX — signal routing race via get_external_workflow_handle.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-7: v3 Temporal engine — PhaseInput fix + query_events structural enforcement","updated_at":"2026-02-26T15:02:21Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:45:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7ab84580bd64afb6c36524a51aece44e3eb99b8f5dff07effcc4a5d5d7f5afdd","created_at":"2026-02-25T22:45:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings. Elegance axis, round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-cejj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-2 BLOCKER","updated_at":"2026-02-25T22:45:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8647cb2f28226ff81eccdb020751006e486b328743307851a09a28aa4f3ce618","created_at":"2026-02-26T23:46:52Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"**File:** scripts/aura_protocol/__init__.py, line ~88\n\n**Problem:**\nThe module docstring lists:\n  query_audit_events(epoch_id, phase) — @activity.defn: query AuditEvents by epoch + phase\n\nThe actual signature after SLICE-5 (aura-plugins-oyxw) fix is:\n  query_audit_events(epoch_id, phase=None, role=None)\n\nThe docstring omits the role parameter, which was the key fix for the silent correctness failure (missing role filter). This means anyone reading the docstring won't know the role filter exists.\n\n**Fix:**\nUpdate docstring to:\n  query_audit_events(epoch_id, phase, role) — @activity.defn: query AuditEvents by epoch + optional phase + optional role","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-cgct","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: __init__.py docstring shows stale query_audit_events(epoch_id, phase) — missing role parameter","updated_at":"2026-02-26T23:46:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6d14736c9c86384c790d818c8b28e35a42828a05ad10f2253fb349f0dcbda07f","created_at":"2026-02-27T05:41:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  prior_followup_epic: aura-plugins-hgki\n  prior_uat: aura-plugins-jnod\n  prior_urd: aura-plugins-gox3\n---\n## Verbatim User Request\n\nLet's create a new epoch to address these requirements:\n\nImplementation UAT: ACCEPTED with 8 follow-up action items:\n\n1. Rename worker → auractl, introduce aurad daemon concept\n2. Persistent SQLite default for temporal-service.nix\n3. Include auractl in packages.default\n4. Rename docs/worker.md → docs/auractl.md + update terminology\n5. Add roadmap section mapping R12 stubs to planned evolution\n6. Signal-based slice progress reporting (SliceWorkflow → parent signals)\n7. Use ReviewAxis/VoteType directly in ReviewPhaseWorkflow._votes (trust StrEnum serialization)\n8. Add constraint violation axis to protocol.yaml test fixtures\n\n## Source\nThese 8 items were captured during the Implementation UAT (Phase 11) of the\nFOLLOWUP epic aura-plugins-hgki. The user ACCEPTED the implementation and\nspecified these as follow-up work.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ckg0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"REQUEST: auractl rename + daemon concept + UAT follow-ups","updated_at":"2026-02-27T05:41:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"76c9cddb2b2c67032f19b8e218abad946eb7d6179a566d092d150eddcccee839","created_at":"2026-02-23T04:26:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer B (Test Quality) on SLICE-4 (Runtime Context Injection with ConstraintContext). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-cmp4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"275cb74c29b2731e557427564c24f3fda14564d396fc468e1047de6efe2a06ad","created_at":"2026-02-26T16:01:17Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-sp6y\n  review: aura-plugins-mwf0\n---\nBLOCKER findings for SLICE-3 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-cnsp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T16:02:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1efa8d51fd2aed8c87162bbc0e3fb011daf8f2910d1e7a6ef7bb1c414bbf5703","created_at":"2026-02-23T13:24:00Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  reviewer: C (Elegance)\n  round: 1\n---\nIMPORTANT findings from Reviewer C on FOLLOWUP epic z8ga.\n\n## C-IMPORTANT-1: SUBSTEP_DATA uses bare strings despite SubstepType enum\n- File: types.py L1594-1718\n- SUBSTEP_DATA type is dict[str, list[dict]] — untyped at value level\n- \"type\" field uses bare strings (\"classify\") not SubstepType.CLASSIFY\n- Inconsistent with the typed-enum principle that SLICE-1 itself introduced\n- Fix: Use SubstepType enum values; add proper TypedDict for entries\n\n## C-IMPORTANT-2: _ROLE_PRIORITY silently excludes RoleId.EPOCH (DEDUP: also A-MINOR-1)\n- File: gen_schema.py L62-84\n- EPOCH omitted from priority tuple with no documentation\n- If EPOCH gains exclusive constraint, it gets role-ref=None silently\n- Fix: Add comment explaining why EPOCH is excluded, or include at lowest priority\n\n## C-IMPORTANT-3: ordered_phase_ids duplicates _PHASE_ORDER — DRY violation\n- File: gen_schema.py L66-70 vs L485-492\n- _build_phases() constructs identical list to _PHASE_ORDER with no-op list comprehension\n- Fix: Use _PHASE_ORDER directly in _build_phases()\n\n## C-IMPORTANT-4: _phase_descriptions dict re-constructed inside loop body\n- File: gen_schema.py L507-521\n- Static dict rebuilt 12 times per call\n- Should be module-level constant\n- Missed opportunity during SLICE-2 DRY refactor","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-coac","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-23T13:24:00Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4341e6ec1a9f40f2cba67e736c6aa3bcb968f2cd9a285404fbdd4725148e7cb7","created_at":"2026-02-26T07:41:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-0biw\n  urd: aura-plugins-7oqz\n  proposal: aura-plugins-iw89\n  uat: aura-plugins-a0x0\n---\nHandoff from architect to supervisor. See handoff document at:\n.git/.aura/handoff/aura-plugins-0biw/architect-to-supervisor.md","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-cq1o","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"HANDOFF: Architect → Supervisor for aura-plugins-0biw","updated_at":"2026-02-26T07:41:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9cf95231309c34830bfcddb8eefea8fc264c057eedb55e7ce43be2238134d8da","created_at":"2026-02-22T12:55:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer B (Test Quality) on SLICE-2 (constraints.py, test_constraints.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-crd","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a2ff6b05704e7388a565246375cb344bf92e2bc2ad880f7ef9c15fa7a1e28318","created_at":"2026-02-25T22:37:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"C-integration-points check_integration_points() not wired into check_structural(). All other constraint checks (C-supervisor-cartographers, C-slice-review-before-close, C-max-review-cycles) are properly wired. This one is standalone-only — callers of check_structural() will never trigger it. Breaks the aggregate pattern.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ct01","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-25T22:37:10Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"305cd2c3b6e7d01abbc1ad61f04291c18aa47fe459db4f75922ffe8425ef6112","created_at":"2026-02-27T06:28:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-wsys\n  impl_plan: aura-plugins-vjsk\n---\n## Scope\nImplement generate_constraint_violation_test_cases() generator in fixture_loader.py.\nPopulate constraint_violations axis data in protocol.yaml with all 23 C-* entries.\n5 constraints have full state snapshots (runnable), 18 have skip_reason.\n\n## Files Owned\n- tests/fixtures/fixture_loader.py (generate_constraint_violation_test_cases implementation)\n- tests/fixtures/protocol.yaml (constraint_violations axis data)\n\n## Acceptance Criteria\nGiven fixture_loader when calling generate_constraint_violation_test_cases() then yields ConstraintViolationTestCase for all 23 constraints\nGiven protocol.yaml when loaded then constraint_violations axis has 23 entries with 5 runnable and 18 skipped","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ctma","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-5-L3: Impl — Constraint violation fixtures","updated_at":"2026-02-27T06:46:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:23:48Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"88b464e03e157cd8aafcc17d9b76c0833acff8f582c6dead7493462c4357b63f","created_at":"2026-02-22T12:06:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-2tj\n  proposal: aura-plugins-r1z\n  urd: aura-plugins-s6i\n  original_urd: aura-plugins-umi\n  handoff: aura-plugins-199\n---\n\n## Vertical Slices (4 total)\n\n### Dependency Graph\n```\nSLICE-1 (state_machine + conftest) ──→ SLICE-2 (constraints)\n                                   └─→ SLICE-4 (workflow)\nSLICE-3 (interfaces) ──→ independent (parallel with SLICE-1)\n```\n\n### Execution Order\n- Wave 1 (parallel): SLICE-1 + SLICE-3\n- Wave 2 (parallel, after SLICE-1): SLICE-2 + SLICE-4\n\n### Slices\n- SLICE-1: state_machine.py — Type Safety + Timestamp + Shared Fixtures\n- SLICE-2: constraints.py — Categorized Group Methods + Severity Positive Case\n- SLICE-3: interfaces.py — Type Precision + Protocol Documentation\n- SLICE-4: workflow.py — Failed Transition Audit + Temporal Sandbox\n\n## Constraints\n- C-backwards: Must not break existing 475 tests\n- C-no-new-deps: No new pip packages\n- C-python-only: All code Python","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-cts","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_IMPL_PLAN: aura_protocol v1 code review follow-up","updated_at":"2026-02-22T17:23:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T04:03:12Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2d241e4b9a2fcd005a5388a311d5a1365e1d6220567c989e74b7089791f082d8","created_at":"2026-02-23T17:57:50Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Seeing a bug here:\n\ndayvidpham/agentfilter [main]\n I  -\u003e cd opencode-security-filter                                                       minttea@desktop\n\nagentfilter/opencode-security-filter [main]\n I  -\u003e aura-release patch --sync                                                         minttea@desktop\nTraceback (most recent call last):\n  File \"/home/minttea/.nix-profile/bin/aura-release\", line 495, in \u003cmodule\u003e\n    sys.exit(main())\n             ~~~~^^\n  File \"/home/minttea/.nix-profile/bin/aura-release\", line 491, in main\n    return cmd_release(args)\n  File \"/home/minttea/.nix-profile/bin/aura-release\", line 348, in cmd_release\n    versions = read_all_versions()\n  File \"/home/minttea/.nix-profile/bin/aura-release\", line 222, in read_all_versions\n    \"pyproject.toml\": read_pyproject_version(),\n                      ~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/minttea/.nix-profile/bin/aura-release\", line 162, in read_pyproject_version\n    text = VERSION_FILES[\"pyproject\"].read_text(encoding=\"utf-8\")\n  File \"/nix/store/f8xmcwbyw8am8ybkdvzsj0ln6mlr559i-python3-3.13.11/lib/python3.13/pathlib/_local.py\", line 546, in read_text\n    return PathBase.read_text(self, encoding, errors, newline)\n           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/nix/store/f8xmcwbyw8am8ybkdvzsj0ln6mlr559i-python3-3.13.11/lib/python3.13/pathlib/_abc.py\", line 632, in read_text\n    with self.open(mode='r', encoding=encoding, errors=errors, newline=newline) as f:\n         ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/nix/store/f8xmcwbyw8am8ybkdvzsj0ln6mlr559i-python3-3.13.11/lib/python3.13/pathlib/_local.py\", line 537, in open\n    return io.open(self, mode, buffering, encoding, errors, newline)\n           ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nFileNotFoundError: [Errno 2] No such file or directory: '/home/minttea/codebases/dayvidpham/agentfilter/pyproject.toml'","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-cuuw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"REQUEST: aura-release reads pyproject.toml from wrong directory","updated_at":"2026-02-26T04:03:12Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No BLOCKER findings — elegance axis clean","closed_at":"2026-02-26T04:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"afe13673ac4fa2c5f82829863cd8e8d69e24d75a481fb820e10f1c5b9d944f49","created_at":"2026-02-26T04:30:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-cvcf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-2 BLOCKER","updated_at":"2026-02-26T04:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f7a8bc0397d3eee419d4d3e1b1e2a66fc6e5a4759092d47cefd157bec15260db","created_at":"2026-02-26T23:45:34Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-hgki\n  followup_urd: aura-plugins-gox3\n  slices:\n    - aura-plugins-rpc4\n    - aura-plugins-zh0j\n    - aura-plugins-xehz\n    - aura-plugins-cz2t\n    - aura-plugins-oyxw\n    - aura-plugins-txgq\n---\nVOTE: REVISE — 1 BLOCKER found (asyncio.wait used instead of workflow.wait inside EpochWorkflow), plus IMPORTANT and MINOR findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-cyc2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-ALL-SLICES-REVIEW-A-1: FOLLOWUP epic aura-plugins-hgki correctness review","updated_at":"2026-02-26T23:45:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cd740119b77787a9679fed6fb5e99b68a98373884c412a74031e68805e5162d4","created_at":"2026-02-27T06:56:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-karq\n  review: aura-plugins-6m2m\n---\nIMPORTANT findings for SLICE-4 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-cyyk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-27T06:56:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"12f05be41111bdb29c3d996e74d23b5a91c1cc85d3ec0813125f875e122a2b09","created_at":"2026-02-26T20:53:52Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"The supervisor implemented EpochWorkflow correctly but did not implement the two child workflow classes required by the ratified PROPOSAL-11 design.\n\n## Critical Gap\nworkflow.py contains only EpochWorkflow. The following child workflow classes are entirely absent:\n- SliceWorkflow: Represents a single P9_SLICE; runs concurrently with other SliceWorkflows\n- ReviewPhaseWorkflow: Represents P10_CODE_REVIEW for a slice; receives ReviewAxis votes via signals\n\n## Requirements (from PROPOSAL-11 / HANDOFF aura-plugins-6zro)\n\n### SliceWorkflow\n- @workflow.defn class\n- Accepts SliceInput (dataclass with epoch_id, slice_id, phase_spec: SerializablePhaseSpec)\n- Executes slice activities (or stubs with R12 docstrings for now)\n- Returns SliceResult (or PhaseResult)\n- Fail-fast: EpochWorkflow must use workflow.wait(slice_handles, return_when=FIRST_EXCEPTION)\n  and cancel remaining handles on first exception\n\n### ReviewPhaseWorkflow\n- @workflow.defn class\n- Accepts ReviewInput (dataclass)\n- @workflow.signal handler for ReviewVoteSignal (axis: ReviewAxis)\n- wait_condition until all 3 ReviewAxis members have voted (using ReviewAxis enum members)\n- try/except ApplicationError around child_handle.signal() calls (race protection)\n- Returns PhaseResult with vote_result\n\n### EpochWorkflow Integration\n- P9_SLICE: start N SliceWorkflow children, then workflow.wait(handles, return_when=FIRST_EXCEPTION)\n  On first exception: cancel pending handles, propagate\n- P10_CODE_REVIEW: start ReviewPhaseWorkflow children; wait for completion\n\n## Acceptance Criteria\n- SliceWorkflow class exists with @workflow.defn\n- ReviewPhaseWorkflow class exists with @workflow.defn + @workflow.signal for ReviewVoteSignal\n- EpochWorkflow.p9_slice_phase() uses workflow.wait(FIRST_EXCEPTION) + cancel-on-failure\n- EpochWorkflow.p10_review_phase() starts ReviewPhaseWorkflow child(ren) and waits\n- asyncio.gather NEVER used — only workflow.wait()\n- Tests: fail-fast behavior verified; signal routing verified\n- No regressions in existing tests","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-cz2t","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPLEMENT: SliceWorkflow + ReviewPhaseWorkflow child workflow classes (fail-fast P9_SLICE)","updated_at":"2026-02-26T23:56:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:44:48Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1e855cb406bdc2a2dc3c740c46ee35d49d1e503bec4188683c80d204a41c20f2","created_at":"2026-02-25T22:44:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-a1bn\n  review_round: 2\n---\nIMPORTANT findings from Reviewer A (Correctness) on SLICE-3, Round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-d07v","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-2 IMPORTANT","updated_at":"2026-02-25T22:44:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:53:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d194e1075b41d6d8d445d4d1ada97c9d7f4845edfc06fd6a5e386cfaeeecf212","created_at":"2026-02-22T12:52:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer C (Elegance) on SLICE-3 (interfaces.py, test_interfaces.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-d1y","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 MINOR","updated_at":"2026-02-22T12:53:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No BLOCKER findings — elegance axis clean","closed_at":"2026-02-26T04:30:26Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"377d3f613fda6855d8baca9050ddcae45ba2e13de17e2116398a5604a7822c55","created_at":"2026-02-26T04:30:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-d7g5","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-2 BLOCKER","updated_at":"2026-02-26T04:30:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:21:20Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:06Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-1 (types.py, __init__.py) — BLOCKER findings. No blockers found.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-d7j","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 BLOCKER","updated_at":"2026-02-22T02:21:20Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:52Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"488d5f01d9fb0a968458fac039665b9772c2d31c189a066af8a3214c18d4cd70","created_at":"2026-02-23T04:22:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer C (Elegance) on SLICE-1. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-d7ki","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-23T12:46:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:38:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9a22d0fd300a31933863ad5f2b107d2bb4b60fe076bdbdbbf86ebea8b1883c67","created_at":"2026-02-25T22:38:52Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No IMPORTANT findings for SLICE-3 from Test Quality axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-d9p4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-25T22:38:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:38:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"34b7d5c0b691f8f71d40321d27120e05fbce5aadec851671322591a5d0883e2f","created_at":"2026-02-25T22:38:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings for SLICE-1 from Test Quality axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ddkg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 MINOR","updated_at":"2026-02-25T22:38:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T23:46:29Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a564d3a06d52411b5d8ff4d1e50525bbe32d4af6fb92140935c7629a97a1b661","created_at":"2026-02-26T23:46:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-qy79\n  followup_epic: aura-plugins-hgki\n---\nBLOCKER findings for FOLLOWUP-REVIEW-C-1 (Elegance axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dgor","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-C-1 BLOCKER","updated_at":"2026-02-26T23:46:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T04:03:12Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"fd17bde327905e200575861aa79f9bc60c7f2930077985b8ba04b09367994c3f","created_at":"2026-02-26T03:52:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dhrs","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Phase 11 Impl UAT for epic aura-plugins-cuuw. Impl covers: (1) dead code deleted (lines 32-57), (2) _CHANGELOG_FILENAME constant, (3) _ScanSpec + _SCAN_SPECS typed discovery spec, (4) discover_version_files() driven by _SCAN_SPECS, (5) tests/test_aura_release.py 4-case TestDiscoverVersionFiles. All 4 tests pass, 898 others pass. Awaiting ACCEPT/REVISE from user.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"aura-plugins-cuuw","updated_at":"2026-02-26T04:03:12Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"03c6e2a078a582f192f38aa1020c89be86b173e44c131aee5be8861a9b31f408","created_at":"2026-02-26T15:33:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Wire all new child workflow types and activities into test worker registration. Create test_audit_activities.py. Verify all 945+ tests pass.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dkwq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-5-L3: Impl — test infrastructure wiring","updated_at":"2026-02-26T18:34:51Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dafe3c0b0279db1430259e226a27f05f83c79e8491b59a69633d3b0f7cd042cb","created_at":"2026-02-22T11:32:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-r1z\n  followup_urd: aura-plugins-s6i\n  original_urd: aura-plugins-umi\n  followup_epic: aura-plugins-2tj\n  reviewer: A (Correctness)\n  round: 1\n---\n\n## VOTE: ACCEPT\n\nThe FOLLOWUP_PROPOSAL-1 (aura-plugins-r1z) faithfully addresses all 4 IMPORTANT themes\nfrom the v1 code review and all requirements in the FOLLOWUP_URD (aura-plugins-s6i).\nNo BLOCKER issues found.\n\n## URD Requirements Coverage\n\n### FR1: Error Handling — Narrow Exception Scope (SLICE-1, SLICE-4)\nCORRECTLY addressed. SLICE-4 specifies:\n- On TransitionError: record failed TransitionRecord in transition_history with condition_met=\"FAILED: {error}\"\n- This satisfies the audit trail requirement from the original URD (R1: forensic auditability)\n- The current code (workflow.py lines 264-274) catches TransitionError and sets last_error but does NOT\n  record to transition_history — the proposal correctly identifies and fixes this gap.\n- SLICE-1 also addresses bare except in test_aura_types.py mutation tests.\n\n### FR2: Constraint Completeness — Full 22 C-* Coverage (SLICE-2)\nCORRECTLY addressed. The proposal's constraint aggregation architecture is sound:\n- Group 1 (state-only) expanded from 5 to 7 (adding C-severity-eager positive case)\n- Groups 2-4 cover remaining constraints with appropriate parameter signatures\n- The rationale for categorized aggregation over a single check_all(state) is technically\n  correct: 22 methods have 4 distinct signatures; a unified interface would require an\n  artificially bloated EpochState or context object.\n- check_severity_tree() positive case enforcement (p10 MUST have 3 keys) requires the new\n  severity_groups field on EpochState — correctly scoped to SLICE-1.\n\n### FR3: Type Safety Hardening (SLICE-1, SLICE-3)\nCORRECTLY addressed:\n- EpochState.current_role: str → RoleId (currently line 47 of state_machine.py is `str = \"epoch\"`)\n- The proposal preserves backwards compatibility: RoleId.EPOCH.value == \"epoch\"\n- interfaces.py dict[str, Any] typing for DataPart.data and ToolCall fields is technically correct\n  improvement — bare `dict` loses key/value type information\n\n### FR4: Temporal Integration Testing — Sandbox End-to-End (SLICE-4)\nCORRECTLY addressed. WorkflowEnvironment.start_time_skipping() tests are the canonical Temporal\nPython SDK approach for integration testing without a running server. The 4 test cases listed\n(advance_phase signal delivery, submit_vote signal delivery, current_state query, search attributes)\ndirectly test the wire-up that was previously untested.\n\n### FR5: MINOR Bundled Cleanup\nAll MINOR findings from the code review are accounted for in their respective slices.\nThe proposal explicitly lists finding IDs for each MINOR item in each slice's \"Findings adopted\" list.\n\n## Slice Architecture Correctness\n\nThe dependency graph is correct:\n- SLICE-1 must complete first (EpochState changes + conftest.py) — SLICE-2 needs severity_groups\n  field; SLICE-4 needs conftest.py shared fixtures\n- SLICE-3 (interfaces.py) is correctly identified as independent — it only touches interfaces.py\n  and its tests, with no cross-slice state dependencies\n- SLICE-2 depends on SLICE-1 for severity_groups; SLICE-4 depends on SLICE-1 for conftest\n\n## Engineering Tradeoffs Assessment\n\nAll 7 tradeoffs are sound:\n\n1. **Categorized aggregation**: Technically correct — 4 distinct method signatures cannot\n   be unified into check_all(state) without distorting the API.\n\n2. **dict[str, set[str]] for severity_groups**: Correct choice. Enables positive case enforcement\n   in check_severity_tree() and supports future analytics.\n\n3. **Optional timestamp with fallback**: Backwards-compatible. The existing 475 tests use\n   advance() without timestamp. Adding Optional parameter with datetime.now() fallback is\n   the correct approach.\n\n4. **Failed transitions in transition_history with marker**: Correct. A separate failed_transitions\n   list would fragment the audit trail, defeating the forensic auditability goal (URD R1).\n\n5. **conftest.py for shared fixtures**: Standard pytest pattern, correct choice over a helper module.\n\n6. **P10→P11 to _CONSENSUS_GATED**: Technically correct — the current state_machine.py (line 88-90)\n   only has P4→P5 in _CONSENSUS_GATED. The constraint layer (check_transition_constraints lines 169-172)\n   already handles P10→P11 consensus, but the state machine layer does not enforce it uniformly.\n   Adding P10→P11 to _CONSENSUS_GATED makes enforcement consistent with P4→P5.\n\n7. **Keep deprecated check_transition alias**: Correct for C-backwards constraint.\n\n## BDD Acceptance Criteria — Testability Assessment\n\nAll 9 ACs are directly testable:\n- AC1 (type safety): isinstance check on state.current_role is runtime-verifiable\n- AC2 (timestamp decoupling): assertEqual(record.timestamp, custom_ts) is verifiable\n- AC3 (P10→P11 consensus): assertRaises(TransitionError) is verifiable\n- AC4 (check_all expanded): len(check_all(state)) \u003e= 7 calls is verifiable via mock state\n- AC5 (severity tree positive): assertIsInstance(result[0], ConstraintViolation) at P10 without groups\n- AC6 (failed transition audit): assert \"FAILED:\" in state.transition_history[-1].condition_met\n- AC7 (Temporal sandbox): WorkflowEnvironment.start_time_skipping() is the standard Temporal test pattern\n- AC8 (Protocol self-check): isinstance(RuntimeConstraintChecker(), ConstraintValidatorInterface)\n- AC9 (backwards compat): uv run pytest — pass/fail is definitive\n\n## Validation Checklist Assessment\n\nThe 16-item checklist is complete and correct. Each item maps directly to a verifiable code state.\nNo items are ambiguous or untestable.\n\n## Constraints Verification\n\n- C-backwards: The proposal correctly maintains existing 475-test baseline. Optional timestamp\n  param preserves existing call signatures. check_state_constraints alias kept.\n- C-no-new-deps: Confirmed — no new pip packages. WorkflowEnvironment is already in temporalio.\n- C-python-only: Confirmed — all changes are Python.\n\n## Non-Blocking Observations (not BLOCKER)\n\n1. The proposal mentions \"23 C-* constraints (22 original + C-actionable-errors)\" in the\n   constraint aggregation architecture section but the URD FR2 says \"Full 22 C-* Coverage\".\n   The proposal correctly includes C-actionable-errors in Group 3 (naming/format checks).\n   This is accurate — C-actionable-errors was added to the protocol during v1 UAT. Not a gap.\n\n2. SLICE-4 adds P10→P11 to _CONSENSUS_GATED but _BLOCKER_GATED already exists for this\n   same transition pair. The proposal is additive (consensus + blocker both apply), which\n   is correct per schema.xml (\"all 3 reviewers ACCEPT, all BLOCKERs resolved\").\n\n3. The proposal's constraint grouping table in \"Constraint Aggregation Architecture\" lists\n   Group 4 as \"8 structural constraints\" but enumerates more than 8 IDs. This is a minor\n   documentation inconsistency in the proposal text, not a correctness issue in the actual\n   slices defined.\n\n## End-User Alignment\n\nThe follow-up addresses the end-user need for a trustworthy, auditable protocol engine:\n- Failed transitions becoming visible in the audit trail (FR1) directly serves forensic queryability\n- Full constraint coverage (FR2) ensures the enforcement surface matches what schema.xml specifies\n- Type safety (FR3) prevents silent runtime errors in protocol-critical state\n- Temporal sandbox tests (FR4) give confidence that the workflow actually works end-to-end\n\nAll changes are refinements to v1 within existing module boundaries. No new features are introduced.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dm4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_PROPOSAL-1-REVIEW-A-1: aura_protocol v1 follow-up — error handling, constraint coverage, type safety, Temporal sandbox","updated_at":"2026-02-22T17:24:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-2 IMPORTANT severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-don","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-22T17:24:22Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"040e0373b1bda089b4f271181993994c90bc9c6580df1aba14e6ce6a93e4a032","created_at":"2026-02-25T22:37:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings for SLICE-3 (PROCESS.md restructure). Elegance axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dpwd","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 MINOR","updated_at":"2026-02-25T22:37:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T04:27:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bcbe7b70665380a6a72ddda2e42dfbd474f50f6bf118ac683dbb94bd4478ade9","created_at":"2026-02-23T04:24:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer A on SLICE-3. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dq02","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 MINOR","updated_at":"2026-02-23T04:27:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:14:00Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7f805756d90fb19b659e2c01af26e673355ff408633998f4c66caba2ccd98b73","created_at":"2026-02-26T07:43:06Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-qfze\n  original_urd: aura-plugins-w07o\n  original_request: aura-plugins-w115\n---\nScoping URE: determine which IMPORTANT/MINOR findings from Protocol Engine v2 code review to address.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dt90","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_URE: Scope Protocol Engine v2 follow-up findings","updated_at":"2026-02-26T08:14:00Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"328b3abee257a65e3a5b5a707be846537907f81b52817a29a550e86f319652ab","created_at":"2026-02-26T16:02:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"scripts/aura_protocol/__init__.py lines 187-190: PhaseInput, PhaseResult, SerializablePhaseSpec, SerializableTransition are appended after VoteType, breaking the alphabetical import ordering convention. Should be inserted in alphabetical position (P before R before S before T before V).\n\nFile: scripts/aura_protocol/__init__.py:187-190\nSlice: aura-plugins-l6n8 (SLICE-1)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dtjt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: __init__.py import ordering broken (SLICE-1)","updated_at":"2026-02-26T21:03:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"faebf2c26f0a90f4bcafef051d3884e9330e13d2397a97c6532357fd285c6e1b","created_at":"2026-02-25T22:37:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  review_round: 1\n---\nBLOCKER findings from Reviewer A (Correctness) on SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dtnu","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 BLOCKER","updated_at":"2026-02-25T22:37:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6207d33c11297c0d0b62825142ab7368a6f89b67999993d9825f77b4a8f138d2","created_at":"2026-02-26T04:30:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dtuz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-2 BLOCKER","updated_at":"2026-02-26T04:30:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"72eaa51fa28c97d31d59bde079669ce100647f0319cf64301f5f77ef7bc873ed","created_at":"2026-02-26T16:01:00Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-w5hi\n  urd: aura-plugins-2ojv\n---\nVOTE: ACCEPT - P9 fail-fast tests (3 tests) correctly test asyncio.wait(FIRST_EXCEPTION) pattern per PROPOSAL-11 UAT-3. Contract tests in test_aura_types.py cover SLICE-1 and SLICE-2 types. However, IMPORTANT finding: significant test duplication with test_serializable_phase_spec.py. MINOR finding: inline imports differ from codebase convention.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-duzp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-B-1: Contract tests + P9 fail-fast test quality","updated_at":"2026-02-26T16:01:00Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:53Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-3 (constraints.py) — MINOR findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dvi","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 MINOR","updated_at":"2026-02-22T17:24:22Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:45:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b67c0c30b7a5c0f5ca418bc2f3039215c0a9d591da885295378d7ab0bf26cbd6","created_at":"2026-02-25T22:45:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings. Elegance axis, round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dvzb","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-2 MINOR","updated_at":"2026-02-25T22:45:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:21:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:00:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - The test strategy is well-designed with strong integration test foundations, proper fixture reuse, and observable-outcome assertions. Minor observations below do not rise to BLOCKER level.\n\n## Axis B: Test Quality Assessment\n\n### 1. Test File Plan Sufficiency\n\nThe 6 test files are well-scoped and properly partitioned:\n\n- **test_aura_types.py** — Enum coverage and spec completeness. This is appropriate: verifying that all PhaseId, Domain, RoleId, VoteType, SeverityLevel values exist and are correctly typed is a foundation test, not a brittle unit test. It tests observable contract (enum membership), not internal state.\n\n- **test_state_machine.py** — Transition validation and review gates. This is the most important test file. The BDD acceptance criteria (AC1-AC4) map directly to observable outcomes: calling advance() either succeeds and records a TransitionRecord, or raises TransitionError with specific violation messages. The SUT (EpochStateMachine) is tested directly — no mocking of the state machine itself.\n\n- **test_constraints.py** — Runtime constraint checking. Tests assert that check_all() and check_transition() return ConstraintViolation lists with constraint_ids and messages. Observable output, not internal state.\n\n- **test_workflow.py** — Temporal workflow sandbox tests. Temporal provides a dedicated test environment (WorkflowEnvironment.start_local()) that runs a real Temporal server in-memory. The SUT is the actual EpochWorkflow — only the Temporal infrastructure is provided by the test harness. This is a proper integration test pattern.\n\n- **test_interfaces.py** — Protocol compliance verification via isinstance() checks on runtime_checkable Protocols. This verifies structural subtyping contracts — exactly what end-users of the interfaces need.\n\n- **test_schema_types_sync.py** — THE critical integration test. Verifies that Python type definitions match schema.xml. This is the gold standard: the SUT is the types.py module, the dependency is schema.xml (parsed fresh), and the assertion is completeness (every schema.xml entity has a corresponding Python type).\n\n**Verdict: SUFFICIENT.** The file plan covers all modules and the most important invariants.\n\n### 2. Integration Test Strategy\n\n**test_schema_types_sync.py** is the linchpin integration test:\n- It verifies Python types match schema.xml entities (PhaseId, Domain, RoleId, VoteType, SeverityLevel)\n- It verifies PHASE_DOMAIN mapping matches _EXPECTED_DOMAINS from validate_schema.py\n- It verifies the transition table covers all schema.xml \u003ctransitions\u003e\n- It ensures the two representations (XML and Python code) cannot drift apart\n\nThis directly extends the existing SchemaFixture mutation testing pattern established in validate_schema.py, which is good continuity. The proposal explicitly states this in the validation checklist (items 1-5 and 17).\n\nThe existing test infrastructure (SchemaFixture, SchemaMutation, parametrized mutation detection) demonstrates the codebase already follows integration-first testing. The proposal correctly extends this pattern.\n\n**Verdict: STRONG integration strategy.**\n\n### 3. BDD Acceptance Criteria Testability\n\nAll 10 acceptance criteria (AC1-AC10) follow Given/When/Then/Should Not format and are testable:\n\n- **AC1 (transitions):** Given/When/Then maps to: create state machine, call advance(), assert TransitionRecord returned, assert error on invalid skip.\n- **AC2 (consensus gate):** Given/When/Then maps to: record 2 of 3 votes, call advance(p5), assert TransitionError.\n- **AC3 (revision loop):** Given/When/Then maps to: record REVISE vote, check available_transitions, assert only p3.\n- **AC4 (BLOCKER gate):** Given/When/Then maps to: set blocker_count \u003e 0, call advance(p11), assert TransitionError.\n- **AC5 (constraint enforcement):** Given/When/Then maps to: create checker, pass violated state, assert ConstraintViolation list.\n- **AC6 (Temporal durability):** Given/When/Then maps to: start workflow in sandbox, send signal, assert state and search attributes updated.\n- **AC7 (forensic query):** Given/When/Then maps to: start workflow at p9, query by search attribute, assert workflow found.\n- **AC8 (schema-types sync):** Given/When/Then maps to: parse schema.xml, compare to Python types, assert complete coverage.\n- **AC9 (interface compliance):** Given/When/Then maps to: create conforming class, assert isinstance() returns True.\n- **AC10 (ModelId parsing):** Given/When/Then maps to: parse valid string, assert fields, assert ValueError on invalid.\n\n**Verdict: ALL criteria are testable and complete.** Each maps to a specific test with observable output (return values, exceptions, or isinstance results). None require inspecting private state.\n\n### 4. Temporal Workflow Testability\n\nThe proposal correctly identifies that Temporal provides a sandbox test environment. The Temporal Python SDK offers:\n- `WorkflowEnvironment.start_local()` for a local in-memory Temporal server\n- Signal/query APIs for driving the workflow from tests\n- Search attribute queries for verifying forensic capabilities\n\nThe key design decision here is sound: the workflow wraps EpochStateMachine (tested separately in test_state_machine.py) and exposes signals/queries. The Temporal test would:\n1. Start the workflow in sandbox\n2. Send PhaseAdvanceSignal\n3. Query current_state() and assert phase changed\n4. Verify search attributes via the Temporal client\n\nThis is an integration test by nature — the real workflow code runs in a real (local) Temporal environment. The SUT (EpochWorkflow) is not mocked. Dependencies (Temporal server) are provided by the test harness.\n\n**Verdict: PROPERLY testable.** Temporal's sandbox testing is the right approach.\n\n### 5. Leverage of Existing Mutation Testing Framework\n\nThe proposal references SchemaFixture in test_schema_types_sync.py's integration test strategy. The existing framework provides:\n- `SchemaFixture` class for loading and mutating schema.xml\n- `SchemaMutation` dataclass for defining specific mutations\n- Parametrized testing for combinatorial coverage\n\nThe proposal's test_schema_types_sync.py would complement this: while SchemaFixture tests that validate_schema.py catches broken schemas, test_schema_types_sync.py tests that the Python type definitions match the valid schema. These are two sides of the same coin.\n\nThe proposal could potentially use SchemaFixture's `fresh_root()` to parse schema.xml in the integration tests, maintaining fixture reuse. This is not explicitly stated but is a natural extension.\n\n**Verdict: GOOD continuity with existing patterns.** The proposal extends rather than duplicates the mutation testing framework.\n\n### End-User Alignment Assessment\n\n1. **Who are the end-users?** Agent developers and protocol maintainers who need the state machine to enforce correct phase transitions.\n2. **What would end-users want?** Confidence that the protocol engine faithfully implements schema.xml rules — the test strategy delivers this via integration tests.\n3. **How would this affect them?** Drift between schema.xml and Python types would silently break protocol enforcement. test_schema_types_sync.py prevents this.\n4. **Are there implementation gaps?** Minor: the proposal does not specify whether test_workflow.py will use shared fixtures for EpochState construction across test files. Recommend a shared factory in tests/fixtures/.\n5. **Does MVP scope make sense?** Yes — the test files cover exactly the 5 modules proposed, plus the critical cross-module integration test.\n6. **Is validation checklist complete?** Yes — 17 items covering all testable properties.\n\n### Minor Observations (Non-Blocking)\n\n1. **Shared fixtures:** The proposal would benefit from an explicit shared fixture plan (e.g., a `tests/fixtures/epoch_fixtures.py` with factory functions for EpochState, PhaseSpec, ConstraintSpec). The existing SchemaFixture pattern shows the codebase values this. Not a blocker because the implementation phase will naturally create these.\n\n2. **Negative test cases for workflow:** AC6 says \"should not allow non-deterministic operations\" but this is hard to test directly (Temporal enforces this via sandbox replay). The AC phrasing is aspirational rather than testable — but the positive case (deterministic signal-driven transitions) is sufficient for v1.\n\n3. **test_constraints.py coverage:** The proposal lists 4 specific constraint checkers (check_review_consensus, check_dep_direction, check_severity_tree, check_handoff_required) but the validation checklist item 9 says \"Constraint checker catches all C-* constraints from schema.xml.\" The test should parametrize over all C-* constraint IDs from schema.xml to ensure completeness. This is an implementation detail best left to the worker, not a plan-level concern.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dwy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-B-1: aura protocol engine v1","updated_at":"2026-02-22T04:21:05Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1fee7e4fa0be7edd8f6aaf5df8581218ab3c5ba83b93a7a11200d1c8b50abdd2","created_at":"2026-02-27T06:28:14Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-wsys\n  impl_plan: aura-plugins-vjsk\n  urd: aura-plugins-7vtb\n---\n## Scope\nDefine ConstraintViolationTestCase frozen dataclass in fixture_loader.py.\nDefine the constraint_violations axis schema in protocol.yaml (all 23 C-* constraints).\n\n## Files Owned\n- tests/fixtures/fixture_loader.py (ConstraintViolationTestCase dataclass only)\n- tests/fixtures/protocol.yaml (constraint_violations axis structure only)\n\n## Acceptance Criteria\nGiven fixture_loader.py when importing ConstraintViolationTestCase then it is a frozen dataclass with fields: constraint_id, description, epoch_state, expected_violation, skip_reason\nGiven protocol.yaml when loading constraint_violations axis then all 23 C-* constraints from CONSTRAINT_SPECS are represented","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dx0e","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-5-L1: Types — Constraint violation fixtures","updated_at":"2026-02-27T06:46:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T07:07:15Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"332a1a8c809dacb348d380a549e9c49e5a1209be5517bd58c2ec9f9217f198a1","created_at":"2026-02-27T06:55:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"nix/temporal-service.nix:86-88 — dbPath option description reads:\n  'Empty string (default) uses in-memory storage (data lost on restart).'\n\nBut the implementation for dbPath=\"\" (lines 155-160) runs xdgResolveScript in\nExecStartPre, which resolves $XDG_DATA_HOME/aura/plugin/temporal.db and passes\n--db-filename $TEMPORAL_DB_PATH to temporal. This is PERSISTENT SQLite at the XDG\npath — not in-memory.\n\nURD R3 explicitly requires 'Persistent SQLite default'. The description directly\ncontradicts both R3 and the actual implementation.\n\nFix: Update dbPath description to:\n  'Path to SQLite database file. When empty (default), resolves to\n   $XDG_DATA_HOME/aura/plugin/temporal.db at runtime (persistent SQLite).\n   Provide an explicit path to override the XDG default.'","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-dzen","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"BLOCKER: temporal-service.nix dbPath description contradicts implementation","updated_at":"2026-02-27T07:07:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:19:47Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:18:30Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-bj1\n  urd: aura-plugins-umi\n  proposal: aura-plugins-gmv\n  impl_plan: aura-plugins-06g\n---\n## Code Review Round 1\n\n### Slices Under Review\n- SLICE-1 (aura-plugins-35d): types.py — Protocol type definitions\n- SLICE-2 (aura-plugins-la6): state_machine.py — 12-phase epoch lifecycle\n- SLICE-3 (aura-plugins-mrm): constraints.py — Runtime constraint validators\n- SLICE-4 (aura-plugins-8i5): interfaces.py — Cross-project integration + A2A types\n- SLICE-5 (aura-plugins-lkz): workflow.py — Temporal workflow wrapper\n\n### Reviewers\n- Reviewer A (Correctness): Spirit and technical accuracy\n- Reviewer B (Test quality): Test coverage, DI, integration focus\n- Reviewer C (Elegance): Complexity proportionality, API design\n\n### Files to Review\n- scripts/aura_protocol/__init__.py\n- scripts/aura_protocol/types.py\n- scripts/aura_protocol/state_machine.py\n- scripts/aura_protocol/constraints.py\n- scripts/aura_protocol/interfaces.py\n- scripts/aura_protocol/workflow.py\n- tests/test_aura_types.py\n- tests/test_schema_types_sync.py\n- tests/test_state_machine.py\n- tests/test_constraints.py\n- tests/test_interfaces.py\n- tests/test_workflow.py\n- pyproject.toml (modified)\n\n### Test Results\n458 tests passing, 0 failures, 0 regressions","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-e0j","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"CODE-REVIEW-ROUND-1: aura_protocol engine v1 MVP","updated_at":"2026-02-22T04:19:47Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:12Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:19:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-bch\n  proposal: aura-plugins-1bm\n---\n\nImplement bin/aura-release per PROPOSAL-2.\nSingle file: bin/aura-release","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-e19","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1: Implement bin/aura-release","updated_at":"2026-02-22T10:40:12Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T04:28:08Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0c1e203bc3c1352ddbd32b2b29a3563cb475862549eef4ea1fbee8a2ec052eba","created_at":"2026-02-23T04:24:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer A on SLICE-4. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-e1vm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-23T04:28:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ef8665d99794e213b5485faa966adfb74cdf6c284b6bda25075fae642b1dccec","created_at":"2026-02-23T08:35:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-z8ga\n  followup_ure: aura-plugins-ikgp\n  original_urd: aura-plugins-w07o\n  original_ratified_proposal: aura-plugins-mg6h\n---\n## Purpose\nUser requirements document for the follow-up scope. Captures which IMPORTANT/MINOR findings from Round 1 review the user wants addressed, plus any new requirements discovered during the URE session.\n\n## Scope (to be filled after URE session)\n[Filled after FOLLOWUP_URE completes]\n\n## References Original URD\nThe original URD (aura-plugins-w07o) remains the primary requirements document for the schema-driven protocol engine. This URD extends it for Round 1 review findings only.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-e28b","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP_URD: Requirements for schema-driven protocol engine v2 follow-up","updated_at":"2026-02-23T08:35:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:57:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1243b5c7fb4e1896d1b5a737a2e37cff8c5efca3d68e5054b73c07722305a33c","created_at":"2026-02-26T08:57:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  review_round: 1\n---\nIMPORTANT findings from Reviewer A (Correctness) on FOLLOWUP-SLICE-2.\n\nNo IMPORTANT findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-e6r4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-26T08:57:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T15:41:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"310afcdcb00d9164246173fd25d461b7380df4f9e34a9a96e437fe6f7aa289e7","created_at":"2026-02-23T15:13:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  uat: aura-plugins-fcrr\n---\n## Problem\nschema.xml constraint elements use single-value role-ref/phase-ref attributes.\nConstraints that apply to multiple roles/phases either get a forced single pick or None.\nUser directed: support comma-separated multi-value.\n\n## Implementation\n1. In gen_schema.py _build_constraint_role_refs(): return ALL matching roles (comma-separated) instead of pick-one-or-None\n2. In gen_schema.py _build_constraint_phase_refs(): return ALL matching phases (comma-separated) instead of chronological-first\n3. Constraints in _GENERAL_CONSTRAINTS get role-ref omitted (applies to all roles)\n4. Constraints in all phases get phase-ref omitted (applies to all phases)\n5. Regenerate schema.xml\n6. Update tests (drift test will catch the change)\n7. Update schema_parser.py if it reads role-ref/phase-ref to handle comma-separated values\n\n## Expected Output\n\u003cconstraint id=\"C-review-consensus\" role-ref=\"reviewer,supervisor,epoch\" phase-ref=\"p4,p10\" .../\u003e\n\u003cconstraint id=\"C-agent-commit\" phase-ref=\"p9,p12\" .../\u003e\n\u003cconstraint id=\"C-ure-verbatim\" role-ref=\"architect\" phase-ref=\"p2\" .../\u003e","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-e6tz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FIX-REVISE: Multi-value role-ref/phase-ref in schema.xml constraints","updated_at":"2026-02-23T15:41:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:02:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b0a43d4390fc449b8b4c8ec525b181f292ea024f2fafed0f528b9c4e4ffa632c","created_at":"2026-02-22T12:02:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-r1z\n  urd: aura-plugins-s6i\n  followup_epic: aura-plugins-2tj\n---\n\n## Components Reviewed\n\n### Component 1: Constraint Aggregation Architecture\n\n**Definition shown:** Three options for check_all API — (A) check_all covers 7, document scope; (B) keep check_state_constraints, add ValidationContext check_all; (C) categorized group methods (check_state, check_transition, check_naming, check_structural) with no check_all.\n\n**Question:** Which naming/API approach for the 22 C-* constraints with 4 distinct parameter signatures?\n\n| Option | Description |\n|--------|-------------|\n| check_all covers 7, document scope | Rename to check_all, expand to 7 state checks. Module docstring documents which 15 are standalone. |\n| Keep check_state_constraints name | Add check_all as NEW method with ValidationContext. |\n| Categorized group methods | No check_all. Explicit groups: check_state(7), check_transition(3), check_naming(5), check_structural(7+). |\n\n**User response:** Categorized group methods. No check_all — caller composes.\n\n**Feedback:** No additional feedback.\n\n---\n\n### Component 2: EpochState Enrichment (severity_groups)\n\n**Definition shown:** severity_groups field options — dict[str, set[str]] vs dict[SeverityLevel, set[str]]\n\n**Question 1:** Which typing for severity_groups keys?\n\n| Option | Description |\n|--------|-------------|\n| dict[SeverityLevel, set[str]] | Consistent with typed enum invariant. Type checker catches typos. |\n| dict[str, set[str]] | Simpler, less coupling to SeverityLevel. |\n\n**User response:** dict[SeverityLevel, set[str]]\n\n**Decision:** Initial REVISE — concern about unclear data lifecycle (when/who populates severity_groups).\n\n**Question 2 (follow-up):** How should severity_groups data flow work?\n\n| Option | Description |\n|--------|-------------|\n| Parameter to check_severity_tree() | Pass at check time. No lifecycle ambiguity. |\n| Auto-populated on P10 entry | State machine auto-creates empty groups on transition to P10. Supervisor fills them. |\n| Signal on Temporal workflow | New register_severity_groups signal. Fully auditable. |\n\n**User response:** Auto-populated on P10 entry. State machine creates empty dict with 3 SeverityLevel keys when transitioning to P10. Supervisor fills finding IDs.\n\n**User also confirmed:** current_role must be RoleId not str.\n\n**Decision:** ACCEPT (after revision to specify auto-population lifecycle)\n\n---\n\n### Component 3: Failed Transition Recording\n\n**Definition shown:** Three approaches to recording failed transitions in audit trail.\n\n**Question:** How should failed transitions be represented in transition_history?\n\n| Option | Description |\n|--------|-------------|\n| TransitionRecord with to_phase=attempted | Reuse existing type. condition_met=\"FAILED: ...\" distinguishes it. No new types. |\n| New FailedTransitionRecord type | Separate frozen dataclass with attempted_phase and error fields. Type-safe isinstance. |\n| Keep last_error only, no audit | Don't add to transition_history. last_error is sufficient. |\n\n**User response:** TransitionRecord with to_phase=attempted. condition_met=\"FAILED: {error}\". Simple, no new types.\n\n**Decision:** ACCEPT\n\n---\n\n### Component 4: P10→P11 Consensus Gating\n\n**Definition shown:** Current inconsistency — P4→P5 consensus checked in state machine, P10→P11 only in constraint layer.\n\n**Question:** Unify P10→P11 consensus enforcement in state machine to match P4→P5?\n\n| Option | Description |\n|--------|-------------|\n| ACCEPT: unify in state machine | Add (P10, P11) to _CONSENSUS_GATED. Both layers enforce. |\n| Keep split | Document intentional split. Different layers, different concerns. |\n\n**User response:** ACCEPT: unify in state machine.\n\n**Catch-all:** Everything covered. No gaps.\n\n## Final Decision\nACCEPT with revisions incorporated:\n1. Categorized group methods (no check_all) — check_state, check_transition, check_naming, check_structural\n2. severity_groups: dict[SeverityLevel, set[str]], auto-populated on P10 entry\n3. Failed transitions as TransitionRecord with condition_met=\"FAILED: ...\"\n4. P10→P11 added to _CONSENSUS_GATED","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-e99","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT-1: Plan acceptance for FOLLOWUP_PROPOSAL-1 aura_protocol v1 follow-up","updated_at":"2026-02-22T12:02:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T09:36:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b054653e1d29c840bec7a9c39ae3c9d8ad3dfbd37e33558c844ad544b2a8d8ab","created_at":"2026-02-26T07:03:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-0biw\n---\n## Questions and Responses\n\n### Marketplace write scope\nQ: When aura-release bumps the version, which entries in marketplace.json should be updated?\nOptions:\n  - metadata.version only (Only the top-level package version — leave plugins[*].version untouched)\n  - metadata.version + matching plugin only (Bump metadata.version AND the plugin whose name matches this repo, leave external plugins alone)\n  - All fields / current impl (Bump metadata.version AND all plugins[*].version — every entry gets the new version)\nA: \"metadata.version only\"\nUser notes: \"How does Claude Code marketplace versioning work? The marketplace has a version too? Each version would have a different tracking version then\"\n\n### Plugin matching / registry\nQ: How should aura-release identify which plugin entry in the array is \"this repo\"?\nOptions:\n  - By name field matching repo name\n  - By source field = \"./\"\n  - N/A — metadata.version only\nA: N/A — user notes: \"I MUST give the plugin name as an argument. Can also specify a --source flag. I should set up an claude-plugin-registry.json in a new folder, under the ~/.local/config/aura/plugins/. It should keep track of which plugin name matches which source, and where the marketplace it belongs to is.\"\n\n### Registry schema\nQ: What would the claude-plugin-registry.json schema look like?\nOptions:\n  - Flat list of plugin entries\n  - Marketplaces as top-level grouping\nA: \"Marketplaces as top-level grouping\"\nUser notes: \"but the source is specified as the filesystem path. it is expected that the plugin will be cloned locally if it is in the registry. so I guess we will have a path and a remote.\"\n\n### MVP scope\nQ: For THIS epic, what is the MVP scope?\nOptions (multiSelect):\n  - Registry file spec only\n  - aura-release reads registry\n  - Registry init/add commands\n  - Follow-up epic items only\nA: \"aura-release reads registry\" + \"Registry init/add commands\"\n\n### Registry location\nQ: Should the plugin registry live only under ~/.local/config/aura/plugins/, or also be discoverable from the repo?\nOptions:\n  - User-global only (~/.local/config/aura/)\n  - Repo-local .aura/registry.json\n  - Both — repo-local overrides global\nA: \"User-global only (~/.local/config/aura/)\"\n\n### Release + registry flow\nQ: When the user runs aura-release from within a plugin repo, what should happen to the user-global marketplace?\nOptions:\n  - Update global marketplace metadata.version too\n  - Registry is a separate registry add/update workflow\nA: \"Update global marketplace metadata.version too\"\nUser notes: \"Wouldn't the marketplace actually be the ./claude-plugin/marketplace.json listed in the local?\"\n\n### Follow-up epic scope\nQ: Should the test quality items from aura-plugins-klac be in scope for THIS epic, or deferred?\nOptions:\n  - Include in this epic\n  - Defer to separate epic\nA: \"Include in this epic\"\n\n### Plugin identity\nQ: How does aura-release know which plugin name to use when reading the registry?\nOptions:\n  - --plugin \u003cname\u003e flag (required when marketplace present)\n  - --plugin \u003cname\u003e flag (optional, auto-detect by source=\"./\" )\nA: \"--plugin \u003cname\u003e flag (optional, auto-detect by source=\"./\" )\"\n\n### Registry CLI scope\nQ: For the registry CLI, which commands are in scope for this epic?\nOptions (multiSelect):\n  - aura-release registry init\n  - aura-release registry add\n  - aura-release registry list\n  - aura-release registry remove\nA: all four (init, add, list, remove)\n\n### Constraints\nQ: Is there anything else we should know about this feature?\nOptions (multiSelect):\n  - Needs to work with --dry-run\n  - Registry should be validated on load\n  - Nothing else\nA: \"Needs to work with --dry-run\" + \"Registry should be validated on load\"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ears","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"ELICIT: Plugin registry + marketplace version update + test quality","updated_at":"2026-02-26T09:36:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:07Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4b8397917d83e9dce3004ca74b0cbdb63c471014496603b7f3ee4c2d829cfef0","created_at":"2026-02-25T22:13:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-24cr\n  request: aura-plugins-xpf1\n---\n## Production Code Path\n\n**End users run:** python -m aura_protocol.gen_schema\n\n## Worker Owns\n\nAfter SLICE-1 (types.py + context_injection.py) is complete:\n1. Run python -m aura_protocol.gen_schema from scripts/ directory\n2. Verify schema.xml contains all 4 new/renamed constraints\n3. Run pytest tests/ to verify round-trip consistency\n4. Fix any test failures\n\n## Key Files\n- skills/protocol/schema.xml (regenerated output)\n- tests/ (round-trip consistency tests)\n\n## Validation Checklist\n- [ ] python -m aura_protocol.gen_schema completes without error\n- [ ] schema.xml contains C-supervisor-cartographers constraint\n- [ ] schema.xml contains C-integration-points constraint\n- [ ] schema.xml contains C-slice-review-before-close constraint\n- [ ] schema.xml contains C-max-review-cycles constraint\n- [ ] pytest tests/ passes with 0 failures","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-eb7q","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: Schema regeneration and test validation","updated_at":"2026-02-25T22:50:07Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d790a80846e5f199111191762893ae56b2eafe2d651ab897182c8c41f1ff5a67","created_at":"2026-02-26T04:02:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  uat: aura-plugins-6p9j\n---\nIMPORTANT findings from Phase 11 UAT on SLICE-2 gen_schema.py.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ed2q","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-UAT-1 IMPORTANT","updated_at":"2026-02-26T09:38:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"160954d07137185af6b7b2083bc13f1ba2bdc5a3737c1a97839098b7ca12f457","created_at":"2026-02-26T23:46:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-qy79\n  followup_epic: aura-plugins-hgki\n---\nIMPORTANT findings for FOLLOWUP-REVIEW-C-1 (Elegance axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-edir","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:05:51Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-mrm\n  impl_plan: aura-plugins-06g\n---\n## Scope\nDefine ConstraintViolation (frozen dataclass) and RuntimeConstraintChecker class skeleton with method signatures.\n\n## Files Owned\n- scripts/aura_protocol/constraints.py (type defs + method stubs)\n\n## Acceptance Criteria\nGiven constraints.py when imported then ConstraintViolation and RuntimeConstraintChecker importable should never have implementations yet","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-eel","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-L1: Types — ConstraintViolation, RuntimeConstraintChecker skeleton","updated_at":"2026-02-22T02:05:51Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:56:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"712491206986cfd1dd709d0a9c6dfae9c19d0f15fa618f1dab8661364d63f322","created_at":"2026-02-27T06:56:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-vf9l\n  review: aura-plugins-ta1k\n---\nIMPORTANT findings for SLICE-3 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-efe3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-27T06:56:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e64012bf1e586ca67a99d57455509eb3f9e42fcf6ca148419e5e441ffb4364f8","created_at":"2026-02-26T03:31:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  reviewer: cartographer-c\n  round: 1\n---\nMINOR findings from Cartographer C (Elegance) on SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ehvg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 MINOR","updated_at":"2026-02-26T09:38:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0e3ee916b6c341f4b9fd4bfb83306aba8dbdc335ee0cbefe9673ffa03ce82459","created_at":"2026-02-26T04:02:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  uat: aura-plugins-6p9j\n---\nBLOCKER findings from Phase 11 UAT on SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ehy0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-UAT-BLOCKER BLOCKER","updated_at":"2026-02-26T04:02:38Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"336601dbd494f477de7c9f44131fc76cd230a0de2ffbbfcd4f46c36c641c1611","created_at":"2026-02-25T22:14:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-a1bn\n  impl_plan: aura-plugins-24cr\n---\n## Scope\n\nRestructure skills/protocol/PROCESS.md Phase 8 (Implementation Plan):\n\n1. Replace \"Standing Explore Team\" narrative with \"Cartographers\" (always 3, dual-role)\n2. Add explicit step: \"Identify horizontal Layer Integration Points\"\n   - Table format: | ID | Contract | Owner (exports) | Consumer(s) (imports) | Merge Timing |\n   - Explain: merge sooner, not later; divergence grows with delay\n3. Add Cartographer setup: TeamCreate with /aura:explore, always 3 regardless of complexity\n4. Emphasize: Cartographers map codebase for workers, persist for full Ride the Wave cycle\n\n## Files Owned\n- skills/protocol/PROCESS.md (Phase 8 section only)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-elbe","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-L1: PROCESS.md Phase 8 — add Cartographers + integration points","updated_at":"2026-02-25T22:50:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a653018edc0d9e7a24bdbf3fe3564f23a91cb8c8aa12859e99ca00d9ca935177","created_at":"2026-02-26T11:21:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Let's plan out the rest of the v3 implementation of the aura protocol.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-eocq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"REQUEST: Plan the rest of v3 implementation of the aura protocol","updated_at":"2026-02-26T18:35:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:43Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5eb3015d835b7d8d2158eafefc9427138f7021fd47a8b235290acc9d0c5f6ffc","created_at":"2026-02-25T22:37:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-a1bn\n  review_round: 1\n---\nIMPORTANT findings from Reviewer A (Correctness) on SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-eozb","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-25T22:37:43Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-23T04:25:49Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1fb5163a762d4e70135b263994c2c586c4b483a4bb9110fdf916aa94ee570146","created_at":"2026-02-23T04:22:33Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer C (Elegance) on SLICE-2. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-eq56","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 BLOCKER","updated_at":"2026-02-23T04:25:49Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:34Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\nIn interfaces.py, three dict fields are unparameterized:\n\n    @dataclass(frozen=True)\n    class DataPart:\n        data: dict   # should be dict[str, Any]\n\n    @dataclass(frozen=True)\n    class ToolCall:\n        tool_input: dict   # should be dict[str, Any]\n        tool_output: dict | None = None   # should be dict[str, Any] | None\n\nUsing bare dict (without type parameters) is less precise than dict[str, Any] and loses information for type checkers. PEP 585 (Python 3.9+) and the existing use of from __future__ import annotations means dict[str, Any] is available without runtime overhead.\n\n## Context\nThe rest of the codebase consistently parameterizes dicts: dict[str, ConstraintSpec], dict[PhaseId, PhaseSpec], dict[str, str] (context field on ConstraintViolation), etc. The unparameterized dict is the exception, not the rule.\n\n## Fix\n    from typing import Any\n    data: dict[str, Any]\n    tool_input: dict[str, Any]\n    tool_output: dict[str, Any] | None = None\n\nNote: dict[str, Any] is not actually more restrictive than Any — it still allows nested Any values. But it communicates the intent (string keys) and satisfies type checkers.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-eqy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1-F1: DataPart.data and ToolCall dict fields unparameterized — should be dict[str, Any]","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No MINOR findings — elegance axis clean","closed_at":"2026-02-26T04:30:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f6464e9db3e6f3037a1971b9ee69bb5c0d53ead826224e08a93c04ff743c11c3","created_at":"2026-02-26T04:30:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-evk2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-2 MINOR","updated_at":"2026-02-26T04:30:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T01:47:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-8i5\n  impl_plan: aura-plugins-06g\n---\n## Scope\nWrite test_interfaces.py testing AC9 (Protocol isinstance checks) and AC10 (ModelId.parse). Tests import from interfaces.py.\n\n## Files Owned\n- tests/test_interfaces.py\n\n## Acceptance Criteria\nGiven test suite when run then Protocol compliance verified, ModelId parsing verified should never accept invalid model IDs","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-exe","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-L2: Tests — test_interfaces.py (AC9, AC10)","updated_at":"2026-02-22T01:47:28Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5d792e8d2bcc695399a26d76e07dc5f01c1adfe96a93bc8761a4d3026ec9247c","created_at":"2026-02-26T04:03:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  uat: aura-plugins-6p9j\n---\nMINOR findings from Phase 11 UAT on SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-eygt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-UAT-1 MINOR","updated_at":"2026-02-26T09:38:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:53:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4a36745c5f89506bad480bde2517b3495b4508d544579418160b0084b4aab43d","created_at":"2026-02-23T03:22:58Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Create skills/templates/*.j2 Jinja2 templates parametrized over roles (supervisor, worker, reviewer, user). StrictUndefined. Add jinja2 to pyproject.toml dev deps. References: slice=aura-plugins-82ya, impl_plan=aura-plugins-94yc","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-f01z","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S3-L2: Jinja2 templates for SKILL.md headers","updated_at":"2026-02-23T03:53:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:13Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"66eb30dc0e02e9cd435ce1be94561f6ae74d30b1dbf75b164d04a4264fbdc70c","created_at":"2026-02-26T08:38:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-f47s","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 BLOCKER: Test Quality","updated_at":"2026-02-26T08:38:13Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"00c1f3d985e2406056692620a354e1d8dbb80b29bdc36266fb831c468104b593","created_at":"2026-02-23T04:27:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In test_gen_schema.py::TestDiffOutput::test_diff_shown_when_file_exists_and_changed (line 112), the assertion checks for '---' OR '+++' OR 'diff' in the captured stdout. The production code (gen_schema.py line 1740) prints a header 'f\"\\n--- Unified diff for {output} ---\"' which contains '---' regardless of the actual diff content. While the production code only prints this header when diff_lines is non-empty (line 1739), the test assertion would trivially pass by matching the header string even if the body difflib.unified_diff output was absent.\n\nSimilarly, test_diff_output_is_unified_format accepts 'No changes' as valid, which means a test run where content is already identical would not catch a missing diff.\n\nRemediation: The test should assert that at least one line starts with '+' or '-' (excluding the '---'/'+++' file headers), confirming that real changed lines are present in the diff body. This makes the test verify the substance of the diff, not just the header.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-f4n2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S2-B1-MINOR: Diff presence test relies on wrapper header string, not actual diff content","updated_at":"2026-02-23T12:46:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:37:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f38d9a29774fc2f9ddfd2a46d80b949db8a31c4296e79d06de5b5356e5a2f72d","created_at":"2026-02-23T03:21:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  impl_plan: aura-plugins-94yc\n---\n## Scope\nCreate scripts/aura_protocol/schema_parser.py:\n- SchemaSpec dataclass: root container with phases, roles, commands, constraints, handoffs, labels, review_axes, title_conventions\n- SchemaParseError(Exception) for malformed input\n- parse_schema(path: Path) → SchemaSpec: extracts ALL entities from schema.xml into typed Python specs\n- Reuse validate_schema.py traversal patterns (element iteration, nested loops, dict construction)\n\n## Files Owned\n- scripts/aura_protocol/schema_parser.py (create)\n\n## Acceptance Criteria\nGiven schema.xml when parse_schema() called then returns SchemaSpec with 12 phases, 5 roles, 35 commands, 23 constraints, 6 handoffs, 21 labels, 3 review axes should never silently skip entities\nGiven malformed XML when parse_schema() called then raises SchemaParseError should never return partial results silently","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-f5l7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S1-L3: Schema parser — schema_parser.py with parse_schema() → SchemaSpec","updated_at":"2026-02-23T03:37:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T09:09:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8656b97fa70c2f8f89856658a047aa478efb13c17758d0d042453db48094c694","created_at":"2026-02-23T09:04:34Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from impl UAT Round 1. UAT paused until resolved.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-f6tk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT-ROUND-1 BLOCKER: impl UAT escalation","updated_at":"2026-02-23T09:09:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1844d8def0b77e0c901042025853352f9e3ce394a609040e6accc1170faccee8","created_at":"2026-02-22T12:52:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer C (Elegance) on SLICE-4 (workflow.py, test_workflow.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-f6u","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:44:42Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8686aa765c8623e69f2eba6baa4d3ad911b48008eaa4339cc105231e0b291f0c","created_at":"2026-02-25T22:44:34Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No IMPORTANT findings for SLICE-1 Round 2 (Test Quality axis). All cycle 1 findings resolved.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-f9ar","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-2 IMPORTANT","updated_at":"2026-02-25T22:44:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T15:41:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7e35958fcb10519ebb641df02e3ed2d0635c612cab433b91a25ef4ddc3f5ebf2","created_at":"2026-02-23T15:13:17Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-94yc\n  urd: aura-plugins-w07o\n  epic: aura-plugins-z8ga\n---\n## Components Demonstrated\n\n### Component 1: gen_schema.py DRY refactor\n**Shown:** 4 static dicts (~400 lines) consolidated to derive from context_injection.py/types.py.\nRole-ref/phase-ref now computed at import time. Example: C-review-consensus role-ref was 'reviewer' (hand-picked), now None (multi-match).\n\n**Question:** DRY refactor trades semantic precision on 2 attributes for ~400 lines of duplication elimination. Acceptable?\n**Options:** ACCEPT as-is | Add override dict | Use priority-first\n**User response:** \"REVISE now\" — wants multi-value role-ref/phase-ref implemented, not as follow-up.\n\n**Follow-up question:** User asked \"Why can't the constraints apply to multiple roles, or phases?\" — clarified that role-ref/phase-ref are single-value XML attributes (documentation metadata), while runtime injection already supports many-to-many. User directed: \"Yes, it should support multi-value role-ref and phase-ref.\"\n\n**Question:** ACCEPT DRY refactor with multi-value as follow-up?\n**Options:** ACCEPT + follow-up | REVISE now\n**User response:** \"REVISE now\"\n\n**Decision: REVISE** — multi-value role-ref/phase-ref must be implemented before accepting.\n\n### Component 2: Constraint rendering (skill_header.j2)\n**Shown:** OLD inline run-on vs NEW structured bullets for C-supervisor-explore-team.\n**Question:** Which format? Options: Bullets (new) | Inline (old) | Hybrid\n**User response:** \"Bullets (new)\"\n**Decision: ACCEPT**\n\n### Component 3: SubstepType enum + error handling\n**Shown:** SubstepType StrEnum (13 values), SubstepSpec.type changed from str to SubstepType, _build_constraint_contexts fail-fast KeyError.\n**Question:** ACCEPT both changes?\n**User response:** ACCEPT. No additional feedback.\n**Decision: ACCEPT**\n\n### Component 4: Test suite improvements (887→898)\n**Shown:** 6 key test additions (drift test, positive inclusion, field-by-field, per-class frozen, AC10 pipeline, KeyError). Known gaps: StrictUndefined false positive, next_state omitted, tautological tests.\n**Question:** ACCEPT test improvements?\n**User response:** ACCEPT. No additional feedback.\n**Decision: ACCEPT**\n\n### Component 5: schema.xml regeneration + BLOCKER fix\n**Shown:** in_all check fix, 128-line schema.xml regeneration, drift test.\n**Question:** ACCEPT?\n**User response:** ACCEPT. All requirements reflected.\n**Decision: ACCEPT**\n\n### Catch-all\n**Question:** Anything from URD R1-R7 not reflected?\n**User response:** \"All requirements reflected\"\n\n## Final Decision\n4 ACCEPT, 1 REVISE (multi-value role-ref/phase-ref for gen_schema.py)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-fcrr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT: Implementation acceptance for FOLLOWUP z8ga","updated_at":"2026-02-23T15:41:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T07:07:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"60f150c75d0c75a64ee603e1e3ad8d7e3c6feac48156e8d8530daf987018e055","created_at":"2026-02-27T06:58:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6m2m\n  review: aura-plugins-6m2m\n---\nworkflow.py:633-642 — SliceWorkflow.run() calls workflow.execute_activity() and then signals the parent workflow, but there is no try/except around the parent_handle.signal() call.\n\nIf the parent EpochWorkflow has already completed or been terminated before the child slice signals it, the signal will raise an exception that propagates uncaught, causing SliceWorkflow to fail with an unhandled error rather than a clean SliceResult(success=False, error=...).\n\nRelevant code (workflow.py ~line 633):\n    parent_handle = workflow.get_external_workflow_handle(input.parent_workflow_id)\n    await parent_handle.signal(\n        EpochWorkflow.slice_progress,\n        SliceProgressSignal(...),\n    )\n\nThe parent workflow could reasonably complete or fail before all child slices finish signaling. Without a try/except, this causes an uncontrolled exception in the child rather than a graceful failure result.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-fdim","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"IMPORTANT: SliceWorkflow.run() no error handling on parent_handle.signal() call","updated_at":"2026-02-27T07:07:16Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"907cdf91c147e2132c808444a75613ac836872d50e2a27fd6fd92bdeabbbff9f","created_at":"2026-02-26T15:33:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Define FileWithUri frozen dataclass, ReviewAxis StrEnum, rename ToolCall fields (raw_input, raw_output, tool_call_id), rename _REVISE_DRIVES_BACK→_REVISE_DRIVES_BACK_PHASES, NullTranscriptRecorder, NullSecurityGate with R12 labels.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-fflf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-2-L1: Types — FileWithUri, ReviewAxis, ToolCall renames, NullStubs","updated_at":"2026-02-26T18:34:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8b7200b2504ff62914c2170eeb0c96e29fdaf9cf6d78bd400373a15684902d8e","created_at":"2026-02-22T12:56:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: tests/test_constraints.py, lines 68-74\n\nSLICE-1 created tests/conftest.py with a shared _make_state() helper to eliminate duplication. The SLICE-2 specification states 'Import _advance_to from conftest.py (remove local duplicate)' — however test_constraints.py still defines its own _make_state() (lines 68-74) independently of the conftest.py version (lines 86-102).\n\nWhile _advance_to IS imported from conftest in test_constraints.py (via 'from conftest import _advance_to' at line 767 inside a test), the _make_state helper is NOT — the file has its own local definition that diverges.\n\nThe two definitions:\n- conftest._make_state(phase, epoch_id, **kwargs) — module-level\n- test_constraints._make_state(phase, epoch_id, **kwargs) — local identical copy\n\nThis means the consolidation goal of SLICE-2 was only partially achieved. If conftest._make_state is updated (e.g., to add a default severity_groups argument for P10 states), test_constraints.py will not benefit.\n\nCorrection: remove the local _make_state from test_constraints.py and add 'from conftest import _make_state' at the top-level import.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-fgb3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: test_constraints.py retains local _make_state() duplicate not consolidated into conftest.py","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ff5bb44ca8c746ec6d56787c7f38b9e7c9022e7c3518efbaa51bc4e7ce837c44","created_at":"2026-02-23T13:24:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  reviewer: B (Test Quality)\n  round: 1\n---\nMINOR findings from Reviewer B on FOLLOWUP epic z8ga.\n\n## B-MINOR-1: No targeted test for EPOCH C-dep-direction removal\n- File: tests/test_context_injection.py\n- C-dep-direction removed from EPOCH explicit set; still inherited via _GENERAL_CONSTRAINTS\n- No specific test verifies EPOCH still gets it\n\n## B-MINOR-2: AC10 pipeline step 2 (gen_types) output discarded\n- File: tests/test_gen_schema.py L702-754\n- gen_types output doesn't feed gen_schema — pipeline test is aspirational, not causal\n\n## B-MINOR-3: Frozen class set hardcoded in test\n- File: tests/test_gen_types.py L166-201\n- expected_frozen_classes is static 9-element set; requires manual maintenance on gen_types changes\n\n## B-MINOR-4: Positive inclusion tests lack absence assertions\n- File: tests/test_context_injection.py L581-632\n- TestGetRoleContextReviewer/Architect/Epoch test inclusion only, no exclusion tests","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-fkmj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-B-1 MINOR","updated_at":"2026-02-23T13:24:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6e7a32126eb7fb9aaf69465b85af213a477b53fec56a49a2c2e709d5b1fa4289","created_at":"2026-02-27T06:24:59Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Rename test file, update WORKER_PATH→AURAD_PATH, _load_worker→_load_aurad, all internal references.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-fkou","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-1-L2: Rename tests/test_worker.py→tests/test_aurad.py","updated_at":"2026-02-27T06:38:17Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"48b69b6b6c732d9a4fdbca92046e08eeecefe683d9805e73067d46c377bb840c","created_at":"2026-02-23T04:22:33Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer C (Elegance) on SLICE-2. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-fpby","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 MINOR","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d80149ac6cf1403461ebde53a8fb8a43ae8b5c0930f7d14ebfd1d2c28d1c2e25","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-fqpx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-2 IMPORTANT","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T13:23:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"969ba1a474d956b029d79a84f4d0120c3d29541343ac524c051babb0a8b59183","created_at":"2026-02-23T13:23:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer B on FOLLOWUP epic z8ga. EMPTY — no blockers found.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ft9t","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-B-1 BLOCKER","updated_at":"2026-02-23T13:23:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:20Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d2876b6d8d6364ea0275ccffbd3232322e0298494b46162b3f37d778608140b9","created_at":"2026-02-26T09:38:19Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-w115\n  followup_epic: aura-plugins-qfze\n  followup_urd: aura-plugins-wloc\n  impl_plan: aura-plugins-uvfm\n---\n## Components Reviewed\n\n### Component 1 — A1: StrictUndefined test isolation\n**Shown:** Test now calls generate_skill() with skill_header.j2 template + valid SKILL.md markers. Exercises gen_skills.py's actual Environment.\n**Question:** Does A1 fix match intent — test goes through generate_skill() not own jinja2.Environment?\n**User response:** ACCEPT. Note: markers use GENERATED_BEGIN/GENERATED_END constants (correct), not hardcoded wrong literals.\n\n### Component 2 — A2: EPOCH Ride the Wave constraint tests\n**Shown:** TestEpochRideTheWaveConstraints with 4 individual tests, each asserting one constraint by .id via get_role_context(RoleId.EPOCH).\n**Question:** Do 4 individual EPOCH constraint tests match intent?\n**User response:** ACCEPT. No additional feedback.\n\n### Component 3 — B1-B4: ProcedureStep coverage\n**Shown:** B1 (SkillRef.SUPERVISOR typed assertion), B2 (backtick/em-dash regex on generate_skill output), B3 (6-field supervisor round-trip + explicit None for worker), B4 (id assertion + docstring fix).\n**Question:** Do B1-B4 tests use public interfaces only?\n**User response:** REVISE on B1 — stringly-typed 'Skill(/aura:supervisor)'. 'This is why agents SHOULD NOT use stringly-typed APIs.' Also: 'Need to define StringEnums. This is a parser after all.' Also: 'There is literally StrEnum these days.'\n**Fix applied:** Added SkillRef(StrEnum) + StepSlug with nested StrEnums to types.py. All (str, Enum) converted to StrEnum throughout. B1 now asserts SkillRef.SUPERVISOR.\n**Re-presented:** ACCEPT on revised B1.\n\n### Component 4 — C1, C2, D1, D2, D3: Code clarity + parser correctness\n**Shown:** C1 rename (_CONSTRAINT_TO_ROLE_REF), D1 slug pins, D2 SchemaParseError, D3 comments.\n**Question:** Do C+D changes match intent?\n**User response:** REVISE on D1 — 'should be s.id == StepSlug.Supervisor.CallSkill'.\n**Fix applied:** D1 tests now use StepSlug.Supervisor.CallSkill etc. PROCEDURE_STEPS uses StepSlug.* for ids.\n**Re-presented:** ACCEPT on revised D1.\n\n## Final Decision\nACCEPT — all components accepted after StrEnum refactor.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-fu5c","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT: Implementation acceptance for Protocol Engine v2 FOLLOWUP","updated_at":"2026-02-26T09:38:20Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:56:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"37c83bccc15643916f93663f60a3d1ee780f0642d7eae83bac1d4ca2448222f1","created_at":"2026-02-27T06:56:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-vf9l\n  review: aura-plugins-ta1k\n---\nBLOCKER findings for SLICE-3 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-fxjq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 BLOCKER","updated_at":"2026-02-27T06:56:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:57:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c6391c49604cac14955206f0349c23b2b88bf95678abfc8b9d6dc1c64fb0b264","created_at":"2026-02-22T12:55:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer B (Test Quality) on SLICE-3 (interfaces.py, test_interfaces.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-fy5","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 MINOR","updated_at":"2026-02-22T12:57:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-23T02:57:42Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c98d52b3737492efc7645640dbcd87b129a7b6e71cc7dae4456b65a967a5d988","created_at":"2026-02-22T23:26:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - Entity counts verified against schema.xml (12 phases, 5 roles, 35 commands, 23 constraints, 6 handoffs, 21 labels, 3 axes — all correct). Integration architecture accurately reflects existing code: workflow.py, state_machine.py, constraints.py, interfaces.py are genuinely unchanged by new type additions. Temporal compatibility confirmed: HandoffSpec is not passed to any Temporal activity and is therefore not serialized; all six Temporal-serialized types (EpochState, TransitionRecord, EpochInput, EpochResult, PhaseAdvanceSignal, ReviewVoteSignal) are unmodified. HandoffSpec.content_level str→ContentLevel change is non-breaking because ContentLevel inherits from str Enum — existing string equality assertions in test_aura_types.py and test_schema_types_sync.py remain valid. Gap analysis fidelity is high: no schema_parser.py, gen_schema.py, gen_skills.py, or context_injection.py partial implementations exist; no Jinja2 templates directory exists; no SKILL.md markers exist. Minor discrepancies found but none are blockers: (1) existing foundation table says '22 C-* validators' but actual count is 23 (stale docstring in constraints.py — schema.xml and types.py both have 23); (2) proposal says '6 missing enums' but listing includes 7 (ExecutionMode, ContentLevel, 4 Classification enums, plus ResearchDepth); (3) validate_schema.py line count 768 vs actual 767 (trivial off-by-one); (4) 'ReviewVoteEvent.axis should use axis type' gap is identified but the concrete type (a new ReviewAxis enum or Literal) is not listed in the new additions — minor implementation ambiguity resolvable during SLICE-1. AC1 through AC11 are all testable and sufficient. AC11 (Temporal Isolation) is properly scoped and verifiable by running existing workflow tests after types.py expansion. ACCEPT with confidence: all BLOCKER-level concerns from Reviewer A perspective are addressed.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-g064","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-3-REVIEW-A-1: Schema-driven v2 — Correctness","updated_at":"2026-02-23T02:57:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T01:42:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:37Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-35d\n  impl_plan: aura-plugins-06g\n---\n## Scope\nWrite test_aura_types.py (enum completeness, spec freezing, PHASE_DOMAIN mapping) and test_schema_types_sync.py (integration test: Python types match schema.xml entities).\n\n## Files Owned\n- tests/test_aura_types.py\n- tests/test_schema_types_sync.py\n\n## Acceptance Criteria\nGiven test suite when run then all tests pass, enum completeness verified, schema.xml sync verified should never allow drift between Python types and schema.xml","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-g2a","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-TESTS: test_aura_types.py + test_schema_types_sync.py","updated_at":"2026-02-22T01:42:53Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:44:42Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cc6045d01216161dfd77469f8ee86ce8ff9dc8df7bcbf6dc35a5268106e04964","created_at":"2026-02-25T22:44:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings for SLICE-3 Round 2 (Test Quality axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-g3u8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-2 BLOCKER","updated_at":"2026-02-25T22:44:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"85942dbf0b81b33c254ebda611390edd733fd6a8f4b604c22ce61fa68026434a","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-g503","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-2 IMPORTANT","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1951f31f4fec4ee0bc60f57062f75d9fb82b74164394d4867d315b22b0634f29","created_at":"2026-02-26T16:01:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Contract tests in test_aura_types.py use inline imports within each test method:\n  def test_serializable_transition_exists(self):\n      from aura_protocol.types import SerializableTransition\n      ...\n\nThis pattern differs from the codebase convention where all other test files use top-level imports (see test_interfaces.py, test_audit_activities.py, test_workflow.py, etc.).\n\nFiles: tests/test_aura_types.py (new contract test classes)\n\nImpact: Minor consistency issue. The inline import pattern may be intentional for contract tests (verifying importability as an assertion), but it's not documented as a deliberate choice.\n\nRecommendation: If intentional, add a module-level comment explaining the inline import convention for contract tests. If unintentional, refactor to top-level imports for consistency.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-g5xp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"MINOR: Contract tests use inline imports instead of top-level imports","updated_at":"2026-02-26T18:40:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:21:06Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T00:38:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-bj1\n---\n\n## Questions and Responses\n\n### Round 1: End Vision\nQ: What is the end vision for transcript data? What will consumers DO with stored TranscriptEntries?\nOptions: Agent observability (Debug agent behavior), Analytics pipeline (Aggregate metrics), Training/fine-tuning data (Export for ML), Audit trail / compliance (Immutable record)\nA: ALL OF THE ABOVE. User notes: \"The exact end-goal vision is at ~/dev/agent-data-leverage/david-data-ingestion-typescript-pipeline/initial-collaboration-protocol.md and ~/dev/agent-data-leverage/david-data-ingestion-typescript-pipeline/nlp-project-proposal.md\"\n\n### Round 1: MVP Harnesses\nQ: Which model harnesses should the MVP support?\nOptions: Claude Code (JSONL transcripts), OpenCode (ACP messages), Generic JSON-RPC/MCP (future harnesses), Raw transcript files (heuristic parsing)\nA: Generic JSON-RPC/MCP, OpenCode, Claude Code. User notes: \"I already have an ACP compliant JSON-RPC 2.0 tool call filterer at ~/codebases/dayvidpham/agentfilter. However, this transcript parser is WIP and being built by me and others separately at ~/dev/agent-data-leverage/unified-schema, we can delegate to their implementation. We don't need to support transcript parsing so much, just orchestration. For the orchestration aspect, we can utilize some prior work done at ~/codebases/dayvidpham/nix-openclaw-vm/docs/research/temporal*.Rmd. They also have some usage of Temporal already.\"\n\n### Round 2: Orchestration Scope\nQ: What does 'orchestration' mean concretely here?\nOptions: Aura protocol workflow engine (12-phase machine-executable), Multi-harness pipeline coordinator (Temporal activities for ingestion), SessionEntry enrichment pipeline (post-ingestion tagging), Cross-project integration layer (bridge all projects)\nA: Aura protocol workflow engine + Cross-project integration layer. User notes: \"The cross-project integration layer is the end-goal vision, with a completely auditable agent workflow to improve open-source development, affecting the future of work for developers, and establishing a better integration layer for agents in the knowledge commons.\"\n\n### Round 2: Code Location\nQ: Where should the SessionEntry database design live?\nOptions: unified-schema (extend existing), aura-plugins (new module), New repo, nix-openclaw-vm (extend Temporal)\nA: unified-schema (extend existing). User notes: \"So because their team is handling it, we don't have to worry about it here. Should NOT modify any files outside of this repo.\"\n\n### Round 2: Schema Strategy\nQ: For the variant-rich schema problem: extend typed enum or delta composition?\nOptions: Extend typed enum (pragmatic), Delta composition (research-informed), Hybrid (recommended by research)\nA: Hybrid (recommended by research)\n\n### Round 3: MVP for Machine-Executable Protocol\nQ: What is the MVP for making the 12-phase protocol machine-executable?\nOptions: Constraint validator + state machine, Temporal workflow engine, Code generation from schema.xml, Schema.xml → runtime context injection\nA: User specified a 3-version roadmap:\n  v1: Constraint validator + state machine, built with Temporal (Python SDK)\n  v2: Schema.xml → runtime context injection (single source of truth, no SKILL.md drift)\n  v3: Full Temporal workflow engine (phases as workflows, handoffs as signals, constraints as activity guards)\nUser notes: \"Temporal used throughout though.\"\n\n### Round 3: Catch-All\nQ: Anything else about end vision, constraints, or integration points?\nOptions: Temporal is the target runtime, Must stay Python-only in aura-plugins, Beads is the task coordination layer, Nothing else\nA: Temporal is the target runtime + Must stay Python-only. User notes: \"Temporal has a Python SDK as well. Beads is what we will use for now. Eventually, should be superseded by our own solution that may utilize the APIs we develop. Temporal natively interfaces with a database for its audit trail and logging, so will be very useful here.\"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gbr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"ELICIT: SessionEntry orchestration — A2A/MCP-compliant protocol engine","updated_at":"2026-02-22T04:21:06Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:10Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-5 IMPORTANT severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gdx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-22T17:24:10Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2a245a1b9e9df670c6c81eec057fdeb760823c515bb654b3ed514feb1a75b30f","created_at":"2026-02-26T04:02:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-kg25\n  uat: aura-plugins-6p9j\n---\nBLOCKER findings from Phase 11 UAT on SLICE-4.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ghxm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-4-UAT-BLOCKER BLOCKER","updated_at":"2026-02-26T04:02:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:53:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c36fcbf2107a2de5ddb1232fe30fe9adf7ece8976facb766c3c48b061d666b37","created_at":"2026-02-22T12:52:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer C (Elegance) on SLICE-3 (interfaces.py, test_interfaces.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gm8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-22T12:53:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:21:06Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T00:58:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-bj1\n  urd: aura-plugins-umi\n  elicit: aura-plugins-gbr\n  related_epoch: aura-plugins-220\n---\n\n## Problem Space\n\n**Axes:** state machine (sequential with branching), constraint enforcement (transition-time), durability (Temporal), forensic queryability (search attributes), variant-rich integration (typed protocol/ABC interfaces)\n\n**Has-a / Is-a relationships:**\n- Epoch HAS-A state machine (12-phase lifecycle)\n- State machine HAS-A transition table (derived from schema.xml phase/transition definitions)\n- Epoch HAS-MANY constraint validators (structural, referential, semantic, runtime)\n- Temporal workflow IS-A durable wrapper around the state machine\n- PhaseId IS-A str Enum; Domain IS-A str Enum; RoleId IS-A str Enum (all typed)\n- ConstraintValidator IS-A Protocol (integration interface for cross-project)\n\n**Key insight:** The transition rules already exist in schema.xml (each `\u003cphase\u003e` has `\u003ctransitions\u003e` with `to-phase` and `condition`). For v1, we codify these as Python typed enums and a transition table. For v2, we parse schema.xml at runtime.\n\n## Engineering Tradeoffs\n\n| Decision | Options | Choice | Rationale |\n|----------|---------|--------|-----------|\n| State machine library | `transitions` lib / hand-rolled / `statemachine` lib | Hand-rolled dataclass + dict | Schema.xml defines exactly 12 phases with known transitions. A library adds dependency weight with no benefit for a fixed-topology machine. Simpler to test. |\n| Temporal workflow granularity | One workflow per epoch / one per phase | One per epoch (v1) | Per-epoch is sufficient for v1. Signals handle phase advances. Per-phase parallelism is v3 scope. |\n| Schema-to-code derivation | Parse schema.xml at runtime (v2) / codify transitions in Python (v1) | Python typed enums + frozen dataclass specs (v1) | Runtime parsing is v2 scope. For v1, we define the transition table as code, validated against schema.xml by integration tests. |\n| Constraint enforcement timing | Transition-time only / continuous polling | Transition-time only (v1) | Simpler, deterministic, sufficient. Constraints are checked when `advance_phase()` is called. |\n| Type system | Pydantic / dataclasses / attrs | dataclasses (frozen) | No Pydantic dependency currently. Frozen dataclasses provide immutability + type safety. Temporal SDK works with dataclasses natively. |\n| Package location | `scripts/aura_protocol/` / `src/aura_protocol/` | `scripts/aura_protocol/` | Consistent with existing `pythonpath = [\"scripts\"]` in pyproject.toml. `validate_schema` already lives in `scripts/`. |\n| Integration interfaces | Abstract Base Classes / `typing.Protocol` | `typing.Protocol` (runtime_checkable) | Structural subtyping — external projects don't need to inherit from our base classes. More Pythonic, better for cross-repo integration where we can't control the other side. |\n| A2A/MCP types scope | Full A2A type hierarchy / minimal content types | Minimal: Part union + TaskState + tool call types | v1 needs just enough for interface definitions. Full hierarchy is v2/v3 scope. |\n\n## MVP Milestone (v1)\n\n### Scope\n5 Python modules + corresponding tests, extending the existing validate_schema.py patterns:\n\n### Module 1: `scripts/aura_protocol/types.py` — Protocol Type Definitions\nTyped enums and frozen dataclass specs for all protocol entities. Derived from schema.xml but codified in Python.\n\n```python\nclass Domain(str, Enum):\n    USER = \"user\"\n    PLAN = \"plan\"\n    IMPL = \"impl\"\n\nclass PhaseId(str, Enum):\n    P1_REQUEST = \"p1\"\n    P2_ELICIT = \"p2\"\n    P3_PROPOSE = \"p3\"\n    P4_REVIEW = \"p4\"\n    P5_UAT = \"p5\"\n    P6_RATIFY = \"p6\"\n    P7_HANDOFF = \"p7\"\n    P8_IMPL_PLAN = \"p8\"\n    P9_SLICE = \"p9\"\n    P10_CODE_REVIEW = \"p10\"\n    P11_IMPL_UAT = \"p11\"\n    P12_LANDING = \"p12\"\n    COMPLETE = \"complete\"\n\nclass RoleId(str, Enum):\n    EPOCH = \"epoch\"\n    ARCHITECT = \"architect\"\n    REVIEWER = \"reviewer\"\n    SUPERVISOR = \"supervisor\"\n    WORKER = \"worker\"\n\nclass VoteType(str, Enum):\n    ACCEPT = \"ACCEPT\"\n    REVISE = \"REVISE\"\n\nclass SeverityLevel(str, Enum):\n    BLOCKER = \"BLOCKER\"\n    IMPORTANT = \"IMPORTANT\"\n    MINOR = \"MINOR\"\n\n# Phase-domain mapping (from schema.xml semantic rule _EXPECTED_DOMAINS)\nPHASE_DOMAIN: dict[PhaseId, Domain]\n\n# Frozen spec dataclasses\n@dataclass(frozen=True)\nclass Transition:\n    to_phase: PhaseId\n    condition: str\n    action: str | None = None\n\n@dataclass(frozen=True)\nclass PhaseSpec:\n    id: PhaseId\n    number: int\n    domain: Domain\n    name: str\n    owner_roles: frozenset[RoleId]\n    transitions: tuple[Transition, ...]\n\n@dataclass(frozen=True)\nclass ConstraintSpec:\n    id: str\n    given: str\n    when: str\n    then: str\n    should_not: str\n\n@dataclass(frozen=True)\nclass HandoffSpec:\n    id: str\n    source_role: RoleId\n    target_role: RoleId\n    at_phase: PhaseId\n    content_level: str\n    required_fields: tuple[str, ...]\n\n# Canonical protocol definition — the transition table\nPHASE_SPECS: dict[PhaseId, PhaseSpec]\nCONSTRAINT_SPECS: dict[str, ConstraintSpec]\nHANDOFF_SPECS: dict[str, HandoffSpec]\n```\n\n### Module 2: `scripts/aura_protocol/state_machine.py` — 12-Phase State Machine\nManages epoch lifecycle state and validates transitions against the protocol.\n\n```python\n@dataclass\nclass EpochState:\n    \"\"\"Mutable epoch runtime state.\"\"\"\n    current_phase: PhaseId\n    completed_phases: set[PhaseId]\n    review_votes: dict[str, VoteType]  # \"{axis}\" -\u003e vote\n    blocker_count: int\n    current_role: RoleId\n    epoch_id: str\n    transition_history: list[TransitionRecord]\n\n@dataclass(frozen=True)\nclass TransitionRecord:\n    from_phase: PhaseId\n    to_phase: PhaseId\n    timestamp: datetime\n    triggered_by: str  # role or signal name\n    condition_met: str\n\nclass TransitionError(Exception):\n    \"\"\"Raised when a transition is invalid.\"\"\"\n    violations: list[str]\n\nclass EpochStateMachine:\n    def __init__(self, epoch_id: str, specs: dict[PhaseId, PhaseSpec] | None = None): ...\n    \n    def advance(self, to_phase: PhaseId, *, triggered_by: str, condition_met: str) -\u003e TransitionRecord:\n        \"\"\"Advance to next phase. Raises TransitionError if invalid.\"\"\"\n    \n    def validate_advance(self, to_phase: PhaseId) -\u003e list[str]:\n        \"\"\"Dry-run: returns list of violation messages (empty = valid).\"\"\"\n    \n    def record_vote(self, axis: str, vote: VoteType) -\u003e None:\n        \"\"\"Record a reviewer vote (p4 or p10).\"\"\"\n    \n    def has_consensus(self) -\u003e bool:\n        \"\"\"True if all 3 review axes have ACCEPT votes.\"\"\"\n    \n    def record_blocker(self, *, resolved: bool = False) -\u003e None:\n        \"\"\"Track BLOCKER count for code review gating.\"\"\"\n    \n    @property\n    def state(self) -\u003e EpochState: ...\n    \n    @property\n    def available_transitions(self) -\u003e list[Transition]: ...\n```\n\n### Module 3: `scripts/aura_protocol/constraints.py` — Runtime Constraint Validators\nExtends the validate_schema.py pattern for runtime state checking.\n\n```python\n@dataclass(frozen=True)\nclass ConstraintViolation:\n    constraint_id: str\n    message: str\n    context: dict[str, str]\n\nclass RuntimeConstraintChecker:\n    \"\"\"Checks protocol constraints against current epoch state.\"\"\"\n    \n    def __init__(self, constraint_specs: dict[str, ConstraintSpec] | None = None): ...\n    \n    def check_all(self, state: EpochState) -\u003e list[ConstraintViolation]:\n        \"\"\"Run all constraint checks against current state.\"\"\"\n    \n    def check_transition(self, state: EpochState, to_phase: PhaseId) -\u003e list[ConstraintViolation]:\n        \"\"\"Check constraints specific to a proposed transition.\"\"\"\n    \n    def check_review_consensus(self, state: EpochState) -\u003e list[ConstraintViolation]:\n        \"\"\"C-review-consensus: all 3 must ACCEPT.\"\"\"\n    \n    def check_dep_direction(self, parent_id: str, child_id: str) -\u003e list[ConstraintViolation]:\n        \"\"\"C-dep-direction: parent blocked-by child.\"\"\"\n    \n    def check_severity_tree(self, state: EpochState) -\u003e list[ConstraintViolation]:\n        \"\"\"C-severity-eager: 3 groups must exist for p10.\"\"\"\n    \n    def check_handoff_required(self, from_phase: PhaseId, to_phase: PhaseId) -\u003e list[ConstraintViolation]:\n        \"\"\"C-handoff-skill-invocation: handoff doc required for actor changes.\"\"\"\n```\n\n### Module 4: `scripts/aura_protocol/workflow.py` — Temporal Workflow Definition\nDurable execution wrapper around the state machine.\n\n```python\nfrom temporalio import workflow, activity\nfrom temporalio.common import SearchAttributeKey, TypedSearchAttributes\n\n# Search attributes for forensic queries (R4)\nSA_EPOCH_ID = SearchAttributeKey.for_text(\"AuraEpochId\")\nSA_PHASE = SearchAttributeKey.for_keyword(\"AuraPhase\")\nSA_ROLE = SearchAttributeKey.for_keyword(\"AuraRole\")\nSA_STATUS = SearchAttributeKey.for_keyword(\"AuraStatus\")\nSA_DOMAIN = SearchAttributeKey.for_keyword(\"AuraDomain\")\n\n@dataclass(frozen=True)\nclass EpochInput:\n    epoch_id: str\n    request_description: str\n\n@dataclass(frozen=True) \nclass EpochResult:\n    epoch_id: str\n    final_phase: PhaseId\n    transition_count: int\n    constraint_violations_total: int\n\n@dataclass(frozen=True)\nclass PhaseAdvanceSignal:\n    to_phase: PhaseId\n    triggered_by: str\n    condition_met: str\n\n@dataclass(frozen=True)\nclass ReviewVoteSignal:\n    axis: str  # \"A\", \"B\", \"C\"\n    vote: VoteType\n    reviewer_id: str\n\n@workflow.defn\nclass EpochWorkflow:\n    \"\"\"Temporal workflow for a single epoch lifecycle.\n    \n    The workflow wraps EpochStateMachine and exposes:\n    - Signals for phase advances and review votes\n    - Queries for current state\n    - Search attributes for forensic queries\n    \"\"\"\n    \n    @workflow.run\n    async def run(self, input: EpochInput) -\u003e EpochResult:\n        \"\"\"Wait for signals to advance through phases until COMPLETE.\"\"\"\n    \n    @workflow.signal\n    async def advance_phase(self, signal: PhaseAdvanceSignal) -\u003e None:\n        \"\"\"Signal to advance to the next phase.\"\"\"\n    \n    @workflow.signal\n    async def submit_vote(self, signal: ReviewVoteSignal) -\u003e None:\n        \"\"\"Signal to record a review vote.\"\"\"\n    \n    @workflow.query\n    def current_state(self) -\u003e EpochState:\n        \"\"\"Query current epoch state.\"\"\"\n    \n    @workflow.query\n    def available_transitions(self) -\u003e list[Transition]:\n        \"\"\"Query available transitions from current phase.\"\"\"\n\n@activity.defn\nasync def check_constraints(state: EpochState, to_phase: PhaseId) -\u003e list[ConstraintViolation]:\n    \"\"\"Activity to run constraint checks (allows retry on transient failures).\"\"\"\n\n@activity.defn\nasync def record_transition(record: TransitionRecord) -\u003e None:\n    \"\"\"Activity to persist transition to audit trail.\"\"\"\n```\n\n### Module 5: `scripts/aura_protocol/interfaces.py` — Cross-Project Integration Interfaces\nPython Protocols for variant-rich integration.\n\n```python\nfrom typing import Protocol, runtime_checkable\n\n@runtime_checkable\nclass ConstraintValidatorInterface(Protocol):\n    \"\"\"Any constraint validator must implement this.\"\"\"\n    def validate(self, state: EpochState) -\u003e list[ConstraintViolation]: ...\n\n@runtime_checkable\nclass TranscriptRecorder(Protocol):\n    \"\"\"Interface for unified-schema integration (transcript recording).\n    \n    Implementors live in unified-schema; we only define the contract.\n    \"\"\"\n    async def record_phase_transition(self, event: PhaseTransitionEvent) -\u003e None: ...\n    async def record_constraint_check(self, event: ConstraintCheckEvent) -\u003e None: ...\n    async def record_review_vote(self, event: ReviewVoteEvent) -\u003e None: ...\n\n@runtime_checkable\nclass SecurityGate(Protocol):\n    \"\"\"Interface for agentfilter integration (permission checking).\n    \n    Implementors live in agentfilter; we only define the contract.\n    \"\"\"\n    async def check_tool_permission(self, request: ToolPermissionRequest) -\u003e PermissionDecision: ...\n\n@runtime_checkable\nclass AuditTrail(Protocol):\n    \"\"\"Interface for the audit trail backend.\n    \n    v1: backed by Beads (bd CLI).\n    v2+: backed by Temporal event history + search attributes.\n    \"\"\"\n    async def record_event(self, event: AuditEvent) -\u003e None: ...\n    async def query_events(self, *, phase: PhaseId | None = None, role: RoleId | None = None) -\u003e list[AuditEvent]: ...\n\n# A2A-compatible content types (minimal subset for v1)\n@dataclass(frozen=True)\nclass TextPart:\n    \"\"\"A2A TextPart — text content.\"\"\"\n    text: str\n\n@dataclass(frozen=True)\nclass FilePart:\n    \"\"\"A2A FilePart — file content reference.\"\"\"\n    file_uri: str\n    mime_type: str | None = None\n\n@dataclass(frozen=True)\nclass DataPart:\n    \"\"\"A2A DataPart — structured data.\"\"\"\n    data: dict\n\nPart = TextPart | FilePart | DataPart  # A2A Part discriminated union\n\n@dataclass(frozen=True)\nclass ToolCall:\n    \"\"\"MCP-compatible tool call representation.\"\"\"\n    tool_name: str\n    tool_input: dict\n    tool_output: dict | None = None\n\n@dataclass(frozen=True)\nclass ModelId:\n    \"\"\"models.dev composite identifier: {provider_id}/{model_id}.\"\"\"\n    provider: str\n    model: str\n    \n    def __str__(self) -\u003e str:\n        return f\"{self.provider}/{self.model}\"\n    \n    @classmethod\n    def parse(cls, s: str) -\u003e \"ModelId\":\n        provider, _, model = s.partition(\"/\")\n        if not model:\n            raise ValueError(f\"Invalid model ID: {s!r} (expected 'provider/model')\")\n        return cls(provider=provider, model=model)\n```\n\n### File Tree (New Files)\n\n```\nscripts/\n  aura_protocol/                  # NEW package\n    __init__.py                   # Re-exports public API\n    types.py                      # Typed enums, frozen dataclass specs\n    state_machine.py              # EpochStateMachine + EpochState\n    constraints.py                # RuntimeConstraintChecker\n    workflow.py                   # Temporal EpochWorkflow + activities\n    interfaces.py                 # Protocol/ABC for cross-project integration\ntests/\n  test_aura_types.py              # NEW: enum coverage, spec completeness\n  test_state_machine.py           # NEW: transition validation, review gates\n  test_constraints.py             # NEW: runtime constraint checking\n  test_workflow.py                # NEW: Temporal workflow (sandbox tests)\n  test_interfaces.py              # NEW: Protocol compliance verification\n  test_schema_types_sync.py       # NEW: integration test — Python types match schema.xml\n```\n\n### Dependencies\n\n```toml\n# pyproject.toml additions\n[project]\ndependencies = [\"temporalio\u003e=1.9.0\"]\n\n[project.optional-dependencies]\ndev = [\"pytest\u003e=8.0\", \"pytest-asyncio\u003e=0.24\"]\n```\n\n## Validation Checklist\n\n- [ ] All PhaseId enum values match schema.xml `\u003cphase\u003e` elements (integration test)\n- [ ] All Domain enum values match schema.xml `\u003cenum name=\"DomainType\"\u003e` (integration test)\n- [ ] All RoleId enum values match schema.xml `\u003crole\u003e` elements (integration test)\n- [ ] PHASE_DOMAIN mapping matches schema.xml semantic rule _EXPECTED_DOMAINS\n- [ ] Transition table covers all transitions in schema.xml `\u003ctransitions\u003e`\n- [ ] State machine rejects invalid transitions (not in transition table)\n- [ ] Review consensus gate requires exactly 3 ACCEPT votes (axes A, B, C)\n- [ ] BLOCKER resolution gate blocks p10→p11 transition\n- [ ] Constraint checker catches all C-* constraints from schema.xml\n- [ ] Temporal workflow advances state via signals only (deterministic)\n- [ ] Search attributes updated on every phase transition\n- [ ] Temporal queries return correct current state\n- [ ] All Protocol interfaces are runtime_checkable\n- [ ] ModelId.parse() validates provider/model format\n- [ ] A2A Part union covers TextPart, FilePart, DataPart\n- [ ] Existing validate_schema.py tests still pass (no regressions)\n- [ ] Integration test: Python PhaseSpec transitions match schema.xml transitions\n\n## BDD Acceptance Criteria\n\n### AC1: State Machine Transitions\n**Given** an epoch in phase P1 **when** advance(\"p2\") is called with valid context **then** state transitions to P2 and transition is recorded **should not** allow skipping phases (e.g., p1→p8)\n\n### AC2: Review Consensus Gate\n**Given** an epoch in phase P4 with votes {A: ACCEPT, B: ACCEPT} **when** advance(\"p5\") is called **then** TransitionError is raised with \"consensus\" violation **should not** proceed without all 3 ACCEPT votes\n\n### AC3: Review Revision Loop\n**Given** an epoch in phase P4 with any REVISE vote **when** checking available transitions **then** only p3 (create new proposal) is available **should not** allow advance to p5\n\n### AC4: BLOCKER Resolution Gate\n**Given** an epoch in phase P10 with blocker_count \u003e 0 **when** advance(\"p11\") is called **then** TransitionError is raised **should not** proceed to UAT with unresolved BLOCKERs\n\n### AC5: Constraint Enforcement\n**Given** a RuntimeConstraintChecker with all schema.xml constraints **when** checking state with a violation **then** returns ConstraintViolation with the constraint_id and descriptive message **should not** silently pass violations\n\n### AC6: Temporal Workflow Durability\n**Given** a running EpochWorkflow **when** advance_phase signal is received **then** state machine transitions and search attributes are updated atomically **should not** allow non-deterministic operations in workflow code\n\n### AC7: Forensic Query via Search Attributes\n**Given** a running EpochWorkflow at phase P9 **when** querying Temporal with filter AuraPhase=\"p9\" **then** the workflow is returned in results **should not** have stale search attributes\n\n### AC8: Schema-Types Synchronization\n**Given** the Python type definitions in types.py **when** compared against schema.xml entities **then** every PhaseId, Domain, RoleId, VoteType, and SeverityLevel has a corresponding schema.xml element **should not** drift from schema.xml\n\n### AC9: Integration Interface Compliance\n**Given** a class implementing TranscriptRecorder Protocol **when** checked with isinstance() **then** returns True if all methods match **should not** require subclassing (structural subtyping)\n\n### AC10: Model ID Parsing\n**Given** ModelId.parse(\"anthropic/claude-opus-4-6\") **when** parsed **then** provider=\"anthropic\" and model=\"claude-opus-4-6\" **should not** accept strings without \"/\" separator","design":"{\"validation_checklist\":[\"PhaseId matches schema.xml phases\",\"Domain matches DomainType enum\",\"RoleId matches schema.xml roles\",\"Transition table covers all schema.xml transitions\",\"Review consensus requires 3 ACCEPT votes\",\"BLOCKER gate blocks p10-\u003ep11\",\"Constraint checker covers all C-* constraints\",\"Temporal workflow uses signals only\",\"Search attributes updated on transitions\",\"Protocol interfaces are runtime_checkable\",\"ModelId validates provider/model format\",\"Existing tests pass (no regressions)\",\"Integration test: Python specs match schema.xml\"],\"acceptance_criteria\":[{\"given\":\"epoch in phase P1\",\"when\":\"advance(p2) with valid context\",\"then\":\"transitions to P2, records transition\"},{\"given\":\"epoch in P4 with 2 of 3 ACCEPT\",\"when\":\"advance(p5)\",\"then\":\"TransitionError raised\"},{\"given\":\"epoch in P10 with blockers\",\"when\":\"advance(p11)\",\"then\":\"TransitionError raised\"},{\"given\":\"RuntimeConstraintChecker\",\"when\":\"checking violated state\",\"then\":\"returns ConstraintViolation list\"},{\"given\":\"running EpochWorkflow\",\"when\":\"advance_phase signal\",\"then\":\"state and search attributes updated atomically\"},{\"given\":\"Python types\",\"when\":\"compared to schema.xml\",\"then\":\"all enums have corresponding elements\"}],\"tradeoffs\":[{\"decision\":\"Hand-rolled state machine vs library\",\"rationale\":\"Fixed 12-phase topology, library adds unnecessary dependency\"},{\"decision\":\"One workflow per epoch vs per phase\",\"rationale\":\"Per-epoch simpler for v1, per-phase is v3\"},{\"decision\":\"dataclasses vs Pydantic\",\"rationale\":\"No Pydantic dep, Temporal SDK native dataclass support\"},{\"decision\":\"typing.Protocol vs ABC\",\"rationale\":\"Structural subtyping for cross-repo integration\"}]}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gmv","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-1: Machine-executable aura protocol engine v1 MVP — state machine + Temporal + constraint validators","updated_at":"2026-02-22T04:21:06Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a18fc404d9580f94c5129ff8be776bb3a68a54a7d9c3ce335f3bfc69f6e4ac57","created_at":"2026-02-26T12:28:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  elicit: aura-plugins-ollt\n  urd: aura-plugins-2ojv\n  supersedes: aura-plugins-mwdv\n---\n## 1. Executive Summary\n\nSame scope as PROPOSAL-1, revised to address all MUST FIX and SHOULD FIX findings from reviewers A, B, and C. Key changes:\n- ACP Python package explicitly identified: agent-client-protocol (PyPI); acp.schema module\n- AcpRawSignal frozen dataclass at Temporal signal boundary (Pydantic never crosses workflow boundary)\n- AcpEventMapper runs inside a Temporal activity, not in the signal handler\n- AuditTrail.query_events() enforced as activity-only with InMemoryAuditTrail test stub\n- Gate constants: exact public names specified; import chain confirmed\n- AcpTranscriptRecorder uses ACP Agent side (pushes to Agentfilter); NOT wrapping acp.Client\n- FileWithUri(uri, mime_type) wrapper dataclass; FilePart.file_with_uri: FileWithUri\n- AcpContentBlock removed as public type — private adapter functions inside activities only\n- AcpEventMapper is @runtime_checkable Protocol (consistent with interfaces.py)\n- AcpSecurityGate stub uses acp.schema types directly (no unverified contrib submodule)\n- P9SliceWorkflow: max_concurrent_slices cap (default 20)\n\n---\n\n## 2. Architecture\n\n### 2.1 Workflow topology (hybrid — unchanged from PROPOSAL-1)\n\n```\nEpochWorkflow (orchestrator — keeps EpochStateMachine)\n  │\n  ├── Sequential phases P1–P3, P5–P8, P11–P12\n  │     → run_sequential_phase(@activity.defn) — bounded, no inbound signals\n  │\n  ├── P4_REVIEW → P4ReviewWorkflow(@workflow.defn, child)\n  │     - submit_vote signal received directly (not routed via parent)\n  │     - gates on CONSENSUS_GATED (all 3 axes ACCEPT)\n  │     - returns PhaseResult\n  │\n  ├── P9_SLICE → [P9SliceWorkflow(@workflow.defn, child) × N] (parallel)\n  │     - asyncio.gather fan-out; max_concurrent_slices cap (default 20)\n  │     - each child carries SA_EPOCH_ID for forensic linkability\n  │     - returns PhaseResult\n  │\n  └── P10_CODE_REVIEW → P10CodeReviewWorkflow(@workflow.defn, child)\n        - submit_vote signal received directly\n        - tracks blocker_count (gates P10→P11 on blocker_count == 0)\n        - returns PhaseResult(phase_id, success, blocker_count)\n```\n\n### 2.2 ACP signal boundary (FIX for B1)\n\nACP Pydantic types MUST NOT cross Temporal signal/activity boundaries (D4).\nacp_session_update signal accepts a frozen dataclass:\n\n```python\n@dataclass(frozen=True)\nclass AcpRawSignal:\n    \"\"\"Frozen wrapper for an inbound ACP SessionUpdate at the Temporal boundary.\n\n    payload_json: JSON-serialized acp.schema.SessionUpdate.\n    Deserialization into Pydantic types happens inside map_acp_event activity.\n    \"\"\"\n    session_id: str\n    event_type: str        # discriminator from the ACP event\n    payload_json: str      # full event as JSON string\n\n@workflow.signal\ndef acp_session_update(self, raw: AcpRawSignal) -\u003e None:\n    self._pending_acp_raw.append(raw)  # enqueue frozen dataclass only\n```\n\nIn run() loop, drain _pending_acp_raw via map_acp_event activity:\n```python\nmapped = await workflow.execute_activity(\n    map_acp_event, args=[raw], start_to_close_timeout=timedelta(seconds=10)\n)\n# mapped is AcpMappedSignal(advance: PhaseAdvanceSignal | None, vote: ReviewVoteSignal | None)\nif mapped.advance: self._pending_advance.append(mapped.advance)\nif mapped.vote:    self._pending_votes.append(mapped.vote)\n```\n\n@activity.defn async def map_acp_event(raw: AcpRawSignal) -\u003e AcpMappedSignal:\n    update = acp.schema.SessionUpdate.model_validate_json(raw.payload_json)\n    return DefaultAcpEventMapper().map_to_signal(update)\n\n@dataclass(frozen=True)\nclass AcpMappedSignal:\n    advance: PhaseAdvanceSignal | None = None\n    vote: ReviewVoteSignal | None = None\n\n### 2.3 ACP bidirectional data flow\n\n```\nINBOUND (ACP events → Temporal signals):\n  External ACP session (Claude Code, etc.) emits SessionUpdate as JSON\n    → EpochWorkflow.acp_session_update(AcpRawSignal) [@workflow.signal, frozen]\n      → _pending_acp_raw queue\n        → map_acp_event(@activity.defn) — deserializes JSON → acp.schema.SessionUpdate\n          → DefaultAcpEventMapper.map_to_signal() → AcpMappedSignal\n            → _pending_advance / _pending_votes queues (existing mechanism)\n\nOUTBOUND (Temporal activities → ACP events via Agent side):\n  record_transition(@activity.defn) [was no-op, now real]\n    → constructs acp.schema.SessionUpdate internally\n      → AcpTranscriptRecorder.record_phase_transition()\n        → ACP agent-side connection pushes SessionUpdate TOWARD Agentfilter (ACP Client)\n\n  emit_constraint_check_event(@activity.defn)\n    → AcpTranscriptRecorder.record_constraint_check()\n      → ACP agent-side push to Agentfilter\n```\n\n### 2.4 AcpTranscriptRecorder — Agent side, not Client side (FIX for C1 + A2)\n\nAcpTranscriptRecorder implements the existing TranscriptRecorder Protocol (3 domain methods unchanged).\nInternally, it uses acp.Agent / agent-side ACP Connection to PUSH events to Agentfilter (which acts as ACP Client/receiver). AcpTranscriptRecorder does NOT wrap acp.Client.\n\n```python\n# In interfaces.py — TranscriptRecorder unchanged (3 methods preserved)\nclass TranscriptRecorder(Protocol):\n    async def record_phase_transition(self, event: PhaseTransitionEvent) -\u003e None: ...\n    async def record_constraint_check(self, event: ConstraintCheckEvent) -\u003e None: ...\n    async def record_review_vote(self, event: ReviewVoteEvent) -\u003e None: ...\n\n# AcpTranscriptRecorder: concrete implementation using ACP Agent side\nclass AcpTranscriptRecorder:\n    \"\"\"TranscriptRecorder implementation that pushes events as ACP SessionUpdate\n    notifications toward an ACP-compatible client (e.g., Agentfilter).\n\n    STUB — Motivation: emit Epoch lifecycle events as ACP SessionUpdate notifications\n    from the Agent side of the ACP protocol. Agentfilter receives these as the ACP\n    Client. Added in aura-plugins v3 (epoch: aura-plugins-eocq).\n    Expected implementation: when an ACP agent-side connection to Agentfilter is\n    configured and available (acp.Agent / acp.connection.Connection from\n    agent-client-protocol SDK).\n    \"\"\"\n    async def record_phase_transition(self, event: PhaseTransitionEvent) -\u003e None:\n        # Stub: construct acp.schema.SessionUpdate from event; push via agent connection\n        ...\n\n    async def record_constraint_check(self, event: ConstraintCheckEvent) -\u003e None:\n        ...\n\n    async def record_review_vote(self, event: ReviewVoteEvent) -\u003e None:\n        ...\n```\n\n### 2.5 FileWithUri wrapper + full A2A hierarchy (FIX for C2)\n\n```python\n@dataclass(frozen=True)\nclass FileWithUri:\n    \"\"\"A2A file reference with URI (aligned to A2A spec nested object structure).\"\"\"\n    uri: str\n    mime_type: str | None = None\n\n@dataclass(frozen=True)\nclass FilePart:\n    \"\"\"A2A FilePart — file content reference. file_with_uri is a FileWithUri object\n    (NOT a bare string) per A2A spec.\"\"\"\n    file_with_uri: FileWithUri  # was: file_uri: str (flat string — now corrected)\n\n# Full A2A hierarchy (was 'v2/v3 scope', now implemented):\n@dataclass(frozen=True) class ThinkingPart: thinking: str\n@dataclass(frozen=True) class ImagePart: data: str; mime_type: str; source_type: str = 'base64'\n@dataclass(frozen=True) class AudioPart: data: str; mime_type: str\n@dataclass(frozen=True) class ResourceLinkPart: uri: str; title: str | None = None; mime_type: str | None = None\n# Note: ACP 'resource' (embedded context, requires embeddedContext capability)\n# is intentionally deferred — stub label in ResourceLinkPart docstring.\n\nPart = TextPart | FilePart | DataPart | ThinkingPart | ImagePart | AudioPart | ResourceLinkPart\n```\n\n### 2.6 AcpEventMapper as @runtime_checkable Protocol (FIX for C4)\n\n```python\n# In interfaces.py — consistent with existing Protocol pattern\n@runtime_checkable\nclass AcpEventMapper(Protocol):\n    \"\"\"Maps ACP SessionUpdate to Temporal signals for EpochWorkflow.\n\n    Returns None for unknown or unmappable events — no crash, forward-compatible.\n    DefaultAcpEventMapper in acp_mapper.py is the concrete implementation.\n    \"\"\"\n    def map_to_signal(\n        self, update: Any  # acp.schema.SessionUpdate inside activity context only\n    ) -\u003e AcpMappedSignal:\n        ...\n```\n\n### 2.7 AuditTrail.query_events() — activity-only (FIX for B2)\n\nAuditTrail.query_events() performs network I/O (Temporal Visibility API). Must NEVER be\ncalled from workflow code.\n\n```python\nclass AuditTrail(Protocol):\n    async def record_event(self, event: AuditEvent) -\u003e None: ...\n\n    async def query_events(\n        self,\n        *,\n        phase: PhaseId | None = None,\n        role: RoleId | None = None,\n    ) -\u003e list[AuditEvent]:\n        \"\"\"Query audit events.\n\n        IMPORTANT — ACTIVITY-ONLY: This method performs network I/O (Temporal\n        Visibility API query). It MUST only be called from @activity.defn context.\n        Calling this method directly from workflow code is a Temporal determinism\n        violation and will cause non-deterministic replay failures.\n        Wrap in workflow.execute_activity() when needed from workflow code.\n        \"\"\"\n        ...\n```\n\nInMemoryAuditTrail provided for tests (no I/O, stores events in list).\n\n### 2.8 Gate constants — exact public names (FIX for B3)\n\nstate_machine.py: rename private to public:\n  _CONSENSUS_GATED  → CONSENSUS_GATED   (line 99)\n  _BLOCKER_GATED    → BLOCKER_GATED     (line 108)\n  _REVISE_DRIVES_BACK → REVISE_DRIVES_BACK (line 115)\n\nImport chain (no circular imports):\n  phase_workflows.py  → state_machine.py (direct — safe)\n  phase_activities.py → state_machine.py (direct — safe)\n  workflow.py         → state_machine.py (already exists — unchanged)\n  workflow.py does NOT import from phase_workflows.py (prevents circular)\n\n### 2.9 AcpContentBlock — private, not public (FIX for C3)\n\nAcpContentBlock removed as a public interface type.\nTranslation happens via private module-level functions in phase_activities.py:\n  _part_to_acp_content_block(part: Part) -\u003e acp.schema.ContentBlock\n  _acp_content_block_to_part(cb: acp.schema.ContentBlock) -\u003e Part\nThese are private to the activity module. No public wrapper type.\n\n### 2.10 AcpSecurityGate — no unverified contrib import (FIX for C5)\n\nAcpSecurityGate uses acp.schema.RequestPermissionRequest/Response directly.\nDoes NOT import from acp.contrib.permission_brokers (path unverified).\nStub label: 'Expected implementation: verify acp.contrib.permission_brokers submodule\npath in installed agent-client-protocol SDK version before wiring.'\n\n---\n\n## 3. Files (same as PROPOSAL-1, updated)\n\n### New\n| File | Purpose |\n|------|---------|\n| scripts/aura_protocol/phase_workflows.py | P4ReviewWorkflow, P9SliceWorkflow (with max_concurrent_slices cap), P10CodeReviewWorkflow |\n| scripts/aura_protocol/phase_activities.py | run_sequential_phase, map_acp_event, emit_* activities; private _part_to/from_acp functions |\n| scripts/aura_protocol/audit_trail.py | TemporalAuditTrail + InMemoryAuditTrail (test stub) |\n| scripts/aura_protocol/acp_mapper.py | DefaultAcpEventMapper (implements AcpEventMapper Protocol) |\n| bin/worker.py | Production worker registration |\n| nix/temporal-service.nix | home-manager module for temporal server start-dev |\n| tests/test_phase_workflows.py | Child workflow tests |\n| tests/test_audit_trail.py | TemporalAuditTrail + InMemoryAuditTrail tests |\n| tests/test_acp_mapper.py | DefaultAcpEventMapper tests |\n\n### Modified\n| File | Changes |\n|------|---------|\n| scripts/aura_protocol/workflow.py | acp_session_update signal (AcpRawSignal); _pending_acp_raw queue; run() drains via map_acp_event activity; record_transition real |\n| scripts/aura_protocol/interfaces.py | FileWithUri dataclass; FilePart.file_with_uri: FileWithUri; full A2A hierarchy; AcpTranscriptRecorder stub (Agent side); AcpSecurityGate stub; AcpEventMapper @runtime_checkable Protocol; AuditTrail.query_events docstring |\n| scripts/aura_protocol/state_machine.py | Make CONSENSUS_GATED, BLOCKER_GATED, REVISE_DRIVES_BACK public |\n| pyproject.toml | Add agent-client-protocol\u003e=0.1; version → 0.7.0 |\n| flake.nix | Add homeManagerModules.temporal-dev-server |\n| tests/test_workflow.py | Update worker registration for child workflow types |\n| CHANGELOG.md | v0.7.0 entry |\n\n---\n\n## 4. Slices (6 vertical) with explicit ordering\n\nOrdering (for parallel workers):\n  SLICE-1 first (topology foundation)\n  SLICE-2 after SLICE-1 (ACP types needed by SLICE-3 and SLICE-4)\n  SLICE-3 and SLICE-4 after SLICE-2 (parallel with each other)\n  SLICE-5 and SLICE-6 after SLICE-3+4 (parallel with each other)\n\n### SLICE-1: PhaseInput + topology refactor\nFiles: workflow.py, state_machine.py, phase_workflows.py (new), phase_activities.py (new)\nDeliverables:\n- PhaseInput(frozen=True): epoch_id, phase_id, phase_spec\n- PhaseResult(frozen=True): phase_id, success, blocker_count, vote_result\n- AcpRawSignal(frozen=True): session_id, event_type, payload_json\n- AcpMappedSignal(frozen=True): advance: PhaseAdvanceSignal | None, vote: ReviewVoteSignal | None\n- P4ReviewWorkflow: submit_vote signal; CONSENSUS_GATED gate; returns PhaseResult\n- P10CodeReviewWorkflow: submit_vote signal; BLOCKER_GATED + CONSENSUS_GATED; returns PhaseResult\n- P9SliceWorkflow: slice execution; max_concurrent_slices=20 default; returns PhaseResult\n- run_sequential_phase(@activity.defn)\n- EpochWorkflow: acp_session_update signal (AcpRawSignal); _pending_acp_raw queue; run() drains via map_acp_event activity; dispatch to child workflows or activities\n- CONSENSUS_GATED, BLOCKER_GATED, REVISE_DRIVES_BACK made public in state_machine.py\nAC: All 973 tests pass. Full 12-phase hybrid run completes in Temporal sandbox.\n\n### SLICE-2: ACP SDK + type alignment\nFiles: interfaces.py, pyproject.toml, uv.lock\nACP Python package: agent-client-protocol (pip install agent-client-protocol).\nModule: acp.schema (Pydantic models). Dep: pydantic\u003e=2.7 (transitive via agent-client-protocol).\nD4 properly enforced (no Pydantic at Temporal boundaries) means pydantic_data_converter NOT required.\nDeliverables:\n- Add agent-client-protocol\u003e=0.1 to pyproject.toml [project.dependencies]\n- FileWithUri(frozen=True): uri: str, mime_type: str | None\n- FilePart: file_with_uri: FileWithUri (was file_uri: str)\n- ToolCall: raw_input, raw_output, tool_call_id (camelCase JSON aliases: rawInput, rawOutput, toolCallId)\n- Full A2A hierarchy: ThinkingPart, ImagePart, AudioPart, ResourceLinkPart (ResourcePart deferred, stub-labeled)\n- Private _part_to_acp_content_block() and _acp_content_block_to_part() in phase_activities.py (NOT public)\n- AcpEventMapper @runtime_checkable Protocol in interfaces.py\n- AcpMappedSignal frozen dataclass (needed by map_acp_event activity)\n- map_acp_event(@activity.defn) in phase_activities.py\nAC: FilePart.file_with_uri: FileWithUri accessible. ToolCall.raw_input/raw_output/tool_call_id. agent-client-protocol importable. Full A2A hierarchy present. isinstance(DefaultAcpEventMapper(), AcpEventMapper) is True.\n\n### SLICE-3: AuditTrail + event emission\nFiles: audit_trail.py (new), workflow.py, interfaces.py\nDeliverables:\n- TemporalAuditTrail: record_event() [upserts SA]; query_events() [Temporal Visibility API — ACTIVITY-ONLY, docstring enforced]\n- InMemoryAuditTrail: no-I/O list-backed test stub; satisfies AuditTrail Protocol\n- AuditTrail.query_events() docstring: ACTIVITY-ONLY warning\n- record_transition activity: now calls TemporalAuditTrail.record_event() (not a no-op)\n- emit_constraint_check_event(@activity.defn)\n- emit_review_vote_event(@activity.defn)\nAC: record_transition not a no-op (test asserts). InMemoryAuditTrail.query_events() returns correct events. AuditTrail docstring warns activity-only.\n\n### SLICE-4: SecurityGate + TranscriptRecorder + AcpMapper\nFiles: interfaces.py, acp_mapper.py (new)\nDeliverables:\n- AcpTranscriptRecorder implements TranscriptRecorder (3 existing domain methods preserved):\n  - Uses ACP Agent-side (acp.Agent / acp.connection.Connection) to push SessionUpdate to Agentfilter\n  - Stub label: 'Motivation: push Epoch lifecycle events as ACP SessionUpdate notifications (Agent side) to Agentfilter (ACP Client). Added in aura-plugins v3 (epoch: aura-plugins-eocq). Expected implementation: when ACP agent-side connection to Agentfilter configured.'\n- AcpSecurityGate implements SecurityGate:\n  - Uses acp.schema.RequestPermissionRequest/Response directly (no acp.contrib submodule)\n  - Stub label: 'Motivation: wire EpochWorkflow tool permission checks to Agentfilter ACP RequestPermission. Added in aura-plugins v3 (epoch: aura-plugins-eocq). Expected implementation: verify acp.contrib.permission_brokers path in SDK and wire to Agentfilter endpoint.'\n- DefaultAcpEventMapper in acp_mapper.py: handles known ACP event types → AcpMappedSignal; unknown → AcpMappedSignal(None, None)\nAC: isinstance(AcpTranscriptRecorder(), TranscriptRecorder) True. isinstance(AcpSecurityGate(), SecurityGate) True. isinstance(DefaultAcpEventMapper(), AcpEventMapper) True. DefaultAcpEventMapper(unknown_event) returns AcpMappedSignal(None, None) (no crash). Existing TranscriptRecorder 4 tests still pass (interface unchanged).\n\n### SLICE-5: Temporal infrastructure (worker + Nix)\nFiles: bin/worker.py, nix/temporal-service.nix, flake.nix\nDeliverables:\n- bin/worker.py: registers EpochWorkflow + P4ReviewWorkflow + P9SliceWorkflow + P10CodeReviewWorkflow + all activities; env-var + CLI config; SIGTERM shutdown\n- nix/temporal-service.nix options: enable, port (7233), ui-port (8080), namespace ('default'), db-filename (''), backend ('dev-server'|'docker-compose'|'native')\n- systemd.user.services.temporal-dev-server: temporal server start-dev command\n- flake.nix: homeManagerModules.temporal-dev-server\nAC: bin/worker.py --help clean. nix/temporal-service.nix evaluates. homeManagerModules.temporal-dev-server exported.\n\n### SLICE-6: Tests + version bump + CHANGELOG\nFiles: tests/test_workflow.py, tests/test_phase_workflows.py, tests/test_audit_trail.py, tests/test_acp_mapper.py, pyproject.toml, CHANGELOG.md\nDeliverables:\n- test_workflow.py: worker registration includes all child workflow types; AcpRawSignal signal test\n- test_phase_workflows.py: P4 consensus, P10 blocker gate, P9 parallel; max_concurrent_slices enforcement\n- test_audit_trail.py: InMemoryAuditTrail round-trip; TemporalAuditTrail never called from workflow code (static analysis or design doc note)\n- test_acp_mapper.py: known event → AcpMappedSignal; unknown → AcpMappedSignal(None, None)\n- pyproject.toml: version = '0.7.0'\n- CHANGELOG.md: v0.7.0 section\nAC: All tests pass. Version 0.7.0.\n\n---\n\n## 5. Key Design Decisions (updated)\n\nD1: PhaseInput never contains EpochState. Parent retains canonical EpochStateMachine.\nD2: Gate constants public: CONSENSUS_GATED, BLOCKER_GATED, REVISE_DRIVES_BACK. Import: phase_workflows.py and phase_activities.py → state_machine.py (direct). workflow.py does NOT import from phase_workflows.py (prevents circular).\nD3: DefaultAcpEventMapper returns AcpMappedSignal(None, None) for unknown events — no crash, forward-compatible.\nD4: acp.schema Pydantic types ONLY inside activity function bodies. Signal boundary: AcpRawSignal (frozen). Activity return: AcpMappedSignal (frozen). pydantic_data_converter NOT required.\nD5: Stub labels carry: Motivation + epoch ID (aura-plugins-eocq) + expected implementation trigger.\nD6: home-manager backend option (dev-server|docker-compose|native) for future expansion.\nD7: AcpTranscriptRecorder implements TranscriptRecorder (3 domain methods); uses ACP Agent side to push events. acp.Client NOT used (receiver side — wrong direction).\nD8: FileWithUri is a frozen dataclass wrapper (uri, mime_type). FilePart.file_with_uri: FileWithUri. Not a bare string.\nD9: AcpContentBlock is NOT a public type. Translations are private functions in phase_activities.py.\nD10: AcpEventMapper is @runtime_checkable Protocol in interfaces.py (consistent with module pattern). DefaultAcpEventMapper in acp_mapper.py is the concrete implementation.\n\n---\n\n## 6. Acceptance Criteria (updated)\n\nAC1: All 973 existing tests pass after topology refactor.\nAC2: New child workflow tests (P4, P9, P10) pass with Temporal sandbox.\nAC3: isinstance(AcpSecurityGate(), SecurityGate) and isinstance(AcpTranscriptRecorder(), TranscriptRecorder) both True.\nAC4: ToolCall.raw_input, ToolCall.raw_output, ToolCall.tool_call_id accessible.\nAC5: FilePart.file_with_uri is FileWithUri instance (not str). FileWithUri.uri accessible.\nAC6: agent-client-protocol importable from project venv.\nAC7: bin/worker.py --help exits cleanly.\nAC8: nix/temporal-service.nix homeManagerModules.temporal-dev-server exported in flake.\nAC9: record_transition activity is not a no-op (test asserts PhaseTransitionEvent emitted).\nAC10: All stub classes carry structured stub labels (motivation, epoch, expected implementation).\nAC11: pyproject.toml version = '0.7.0'; CHANGELOG has v0.7.0 section.\nAC12: DefaultAcpEventMapper returns AcpMappedSignal(None, None) for unknown ACP events.\nAC13: isinstance(DefaultAcpEventMapper(), AcpEventMapper) is True.\nAC14: Existing TranscriptRecorder 4 tests still pass (interface signature unchanged).\nAC15: AuditTrail.query_events() docstring contains ACTIVITY-ONLY warning.\nAC16: P9SliceWorkflow fan-out respects max_concurrent_slices cap (default 20).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gnks","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-2: Protocol Engine v3 — Temporal Child Workflow Decomposition + ACP Integration","updated_at":"2026-02-26T12:28:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"090c19500d969fa2cf5cf6370a6bbcff2b6a82ec048ac9156d470ae102b45bb7","created_at":"2026-02-26T20:45:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-hgki\n  original_urd: aura-plugins-2ojv\n  followup_ure: aura-plugins-o2pp\n---\n## R1: __init__.py cleanups\n- R1a: Fix import ordering — insert SLICE-1 types (PhaseInput, PhaseResult, SerializablePhaseSpec, SerializableTransition) in alphabetical position. Finding: aura-plugins-dtjt\n- R1b: Add audit_activities to module docstring. Finding: aura-plugins-ntoe\n- R1c: Remove mid-section '# Cross-workflow boundary types' comment from __all__. Finding: aura-plugins-wiow\n\n## R2: Nix-package bin/worker.py\n- Add worker.py to flake.nix packages section\n- Handle temporalio Python dependency (may need writeShellApplication or similar)\n- Match pattern of existing bin/ scripts (aura-parallel, aura-swarm, aura-release)\n- Finding: aura-plugins-1w3u\n\n## R3: docs/worker.md (combined dev + ops guide)\n- Developer section: architecture overview, how activities register, how to add new activities, testing approach\n- Operator section: CLI args (--namespace, --task-queue, --server-address), env var fallbacks, systemd service setup via nix/temporal-service.nix\n- Integration: how worker.py connects to EpochWorkflow, audit trail initialization\n\n## R4: Test fixtures.yaml + combinatorial testing\n- Define common test fixtures (phase specs, epoch states, transitions) in a YAML file\n- Load fixtures in conftest.py for reuse across test files\n- Enable combinatorial testing patterns (parameterize over fixture combinations)\n- User quote from UAT: \"Should probably use common set of test fixtures defined in some kind of fixtures.yaml and combinatorial testing\"\n\n## Acceptance Criteria\n- Given __init__.py, when inspected, then imports are alphabetically ordered, docstring mentions audit_activities, __all__ has no sub-section comments\n- Given flake.nix, when evaluated, then packages.worker exists and runs bin/worker.py\n- Given docs/worker.md, when read, then covers both development and operations\n- Given tests/, when test fixtures loaded, then common state objects come from fixtures.yaml\n- All 1017+ tests pass","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gox3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_URD: Requirements for v3 follow-up","updated_at":"2026-02-26T20:49:37Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:56Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"59c05c287cc2969745f852eeff732adc47602d58390dca5fecd39426163545c6","created_at":"2026-02-26T04:30:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gqz7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-2 IMPORTANT","updated_at":"2026-02-26T04:30:56Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"77f4bfed442e767257cf5c670a1ab5fda894ea4847e78ce4dba01084b9550830","created_at":"2026-02-26T23:47:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: scripts/aura_protocol/__init__.py, line 88\n\nCurrent docstring:\n  query_audit_events(epoch_id, phase) — @activity.defn: query AuditEvents by epoch + phase\n\nActual signature (after aura-plugins-oyxw fix):\n  query_audit_events(epoch_id, phase=None, role=None)\n\nThe role parameter was added by aura-plugins-oyxw but the __init__.py docstring\nwas not updated to reflect the new signature. This is doubly confusing because\nthe symbols aren't even importable from aura_protocol (see IMPORTANT finding).\n\nFix (if/when the import is added): update line 88 to:\n  query_audit_events(epoch_id, phase=None, role=None) — @activity.defn: query AuditEvents by epoch, phase, and role\n\nSlice: aura-plugins-rpc4 (docstring) / aura-plugins-oyxw (role param added)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gtbu","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: __init__.py module docstring shows stale query_audit_events signature (missing role parameter)","updated_at":"2026-02-26T23:47:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:37:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f5aecc806dd56882373fc5d176ed9074496f3fc3ecdea9aec4541406c7db14e7","created_at":"2026-02-26T09:15:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  slice3: aura-plugins-6v80\n  impl_plan: aura-plugins-uvfm\n---\n## UAT Feedback\n\nB1 and D1 both use stringly-typed literals in assertions. User requires StringEnum constants.\n\n## Changes Required\n\n### 1. types.py — add StepSlug nested StrEnum\n\n```python\nimport enum\n\nclass StepSlug:\n    \"\"\"Typed namespace for ProcedureStep.id slug constants.\"\"\"\n\n    class Supervisor(str, enum.Enum):\n        CallSkill       = \"S-supervisor-call-skill\"\n        ReadPlan        = \"S-supervisor-read-plan\"\n        Cartographers   = \"S-supervisor-cartographers\"\n        DecomposeSlices = \"S-supervisor-decompose-slices\"\n        CreateLeafTasks = \"S-supervisor-create-leaf-tasks\"\n        SpawnWorkers    = \"S-supervisor-spawn-workers\"\n\n    class Worker(str, enum.Enum):\n        Types = \"S-worker-types\"\n        Tests = \"S-worker-tests\"\n        Impl  = \"S-worker-impl\"\n```\n\n### 2. types.py — add SkillRef StrEnum for skill invocation commands\n\n```python\nclass SkillRef(str, enum.Enum):\n    \"\"\"Skill invocation strings for ProcedureStep.command.\"\"\"\n    SUPERVISOR = \"Skill(/aura:supervisor)\"\n    WORKER     = \"Skill(/aura:worker)\"\n```\n\n### 3. types.py — update PROCEDURE_STEPS to use typed constants\n\nReplace all raw string id literals with StepSlug.* and skill command literals with SkillRef.*:\n- id=\"S-supervisor-call-skill\" → id=StepSlug.Supervisor.CallSkill\n- id=\"S-supervisor-read-plan\"  → id=StepSlug.Supervisor.ReadPlan\n- (and all remaining supervisor + worker slugs)\n- command=\"Skill(/aura:supervisor)\" → command=SkillRef.SUPERVISOR\n\n### 4. tests/test_schema_types_sync.py — B1 fix\n\nReplace:\n  assert any(s.command == \"Skill(/aura:supervisor)\" for s in steps)\n\nWith:\n  from aura_protocol.types import SkillRef\n  assert any(s.command == SkillRef.SUPERVISOR for s in steps)\n\n### 5. tests/test_gen_schema.py — D1 fix\n\nReplace:\n  assert any(s.id == \"S-supervisor-call-skill\" for s in ...)\n  assert any(s.id == \"S-supervisor-cartographers\" for s in ...)\n  assert any(s.id == \"S-worker-types\" for s in ...)\n\nWith:\n  from aura_protocol.types import StepSlug\n  assert any(s.id == StepSlug.Supervisor.CallSkill for s in ...)\n  assert any(s.id == StepSlug.Supervisor.Cartographers for s in ...)\n  assert any(s.id == StepSlug.Worker.Types for s in ...)\n\n### 6. Export StepSlug + SkillRef from aura_protocol.__init__ if not already exported\n\nCheck __init__.py and add exports if needed.\n\n## Quality Gate\n\n```bash\nuv run pytest tests/ -q\n# Expect: 945+ passed, 0 failed\n\ngrep -r 'S-supervisor-\\|S-worker-' tests/  # should return nothing (all replaced with StepSlug.*)\ngrep '\"Skill(/aura:supervisor)\"' tests/  # should return nothing\n```","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gthc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-REVISE: StringEnums for StepSlug + SkillRef (B1, D1 UAT feedback)","updated_at":"2026-02-26T09:37:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:57:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"be0325bc50b6e353ec3655fb8b68643452ff23173e719f347cb6412a9b3879fd","created_at":"2026-02-22T12:55:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer A (Correctness) on SLICE-4 (workflow.py, test_workflow.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-guwd","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 BLOCKER","updated_at":"2026-02-22T12:57:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:13:11Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c293dc9bc958588ba47a01cd4fb493edd78078cef523d3808baeac9e9d9f84ea","created_at":"2026-02-26T03:11:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-7iy2\n  proposal: aura-plugins-pcs6\n---\nImportant (non-blocking) findings from code review.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gwx9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"IMPL-REVIEW-IMPORTANT: aura-release dead code + test","updated_at":"2026-02-26T03:13:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:41Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8c7df3e390beabe5f65bd3a3964556554170009a23b30e5d5685a85e176b968e","created_at":"2026-02-26T03:31:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-kg25\n  reviewer: cartographer-c\n  round: 1\n---\nBLOCKER findings from Cartographer C (Elegance) on SLICE-4.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gxju","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 BLOCKER","updated_at":"2026-02-26T03:31:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"db59ce723026673f9e6adedd22c1b57242b03a838d4120e6de4efa3285c35ce8","created_at":"2026-02-23T13:23:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  reviewer: A (Correctness)\n  round: 1\n---\nIMPORTANT findings from Reviewer A on FOLLOWUP epic z8ga.\n\n## A-IMPORTANT-1: _build_constraint_phase_refs in_all check broken by PhaseId.COMPLETE\n- File: gen_schema.py L88-107, context_injection.py L310\n- PhaseId.COMPLETE: frozenset() makes no constraint satisfy in_all==True\n- Currently harmless (caught by _GENERAL_CONSTRAINTS check first), but latent bug\n- Fix: Filter COMPLETE from in_all check\n\n## A-IMPORTANT-2: TestStrictUndefined false positive (DEDUP: also B-IMPORTANT-1, C-MINOR-3)\n- File: tests/test_gen_skills.py L688-702\n- Test creates standalone jinja2.Environment, not gen_skills.py production Environment\n- If gen_skills removes StrictUndefined, this test still passes — zero regression protection\n- Fix: Use generate_skill() with template referencing undefined variable\n\n## A-IMPORTANT-3: schema.xml not regenerated after DRY refactor\n- File: skills/protocol/schema.xml (not modified), gen_schema.py\n- DRY refactor changed role-ref/phase-ref computation for 4 constraints\n- 52 lines differ between stored schema.xml and generator output\n- Fix: Regenerate schema.xml and/or add freshness test","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-gyzs","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-23T13:23:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a5b54856e71bce4cc395bba4591d116d622867c60ace2cd2a59d097aed8adf5d","created_at":"2026-02-26T04:30:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-h08d","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-2 MINOR","updated_at":"2026-02-26T04:30:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:21:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-1 (types.py, __init__.py) — MINOR findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-h21","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 MINOR","updated_at":"2026-02-22T02:21:39Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T08:39:06Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1691a0d44536cf75dfbbe0659b477a8196773a93a23a34398cb46112105a5614","created_at":"2026-02-23T04:23:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/Type Consistency).\n\nAll other SchemaSpec fields return rich typed dataclasses (RoleSpec, CommandSpec, HandoffSpec, LabelSpec, ReviewAxisSpec). But SchemaSpec.constraints uses dict[str, tuple[str, str, str, str]] — a raw 4-tuple of strings.\n\nThis breaks consistency of the API surface. Callers of parse_schema() must know the tuple field order (given, when, then, should_not) as a convention rather than getting named field access. Every other entity in SchemaSpec has a typed dataclass — constraints should too.\n\nThe existing ConstraintSpec dataclass is already defined in types.py and has exactly these 4 fields. The parser currently creates tuples instead of ConstraintSpec instances (schema_parser.py line 371: result[cid] = (given, when, then, should_not)).\n\nFix: Change _parse_constraints() return type to dict[str, ConstraintSpec] and return ConstraintSpec(id=cid, given=given, when=when, then=then, should_not=should_not). Update SchemaSpec.constraints field type annotation accordingly.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-h369","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1-F1: SchemaSpec.constraints type is dict[str, tuple[str,str,str,str]] not dict[str, ConstraintSpec]","updated_at":"2026-02-23T08:39:06Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:56Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4bc05890d2fa4d4df6cdb29d2680056937d84261d2dcda393d967d191cc48531","created_at":"2026-02-26T04:30:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-h44x","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-2 BLOCKER","updated_at":"2026-02-26T04:30:56Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"be61d21bb5eb54d9ce30ef6932614add6eca572ec43d9bcd12baa4ed710f844b","created_at":"2026-02-23T04:24:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/DRY — the most significant elegance concern across all 4 slices).\n\nBoth gen_schema.py (lines 49-99) and context_injection.py (lines 140-311) define:\n  - _ROLE_CONSTRAINTS: dict[RoleId|str, ...]\n  - _PHASE_CONSTRAINTS: dict[PhaseId|str, ...]\n\nThese two dicts represent the same domain knowledge: which constraints apply to which roles and phases. They exist in two different modules for two different purposes:\n  - gen_schema.py uses them to emit role-ref/phase-ref attributes in schema.xml (str-keyed)\n  - context_injection.py uses them to build ConstraintContext objects at runtime (PhaseId/RoleId-keyed)\n\nThe proposal docstring in context_injection.py (line 28-29) even acknowledges: 'gen_schema.py (SLICE-2) reads _ROLE_CONSTRAINTS and _PHASE_CONSTRAINTS to emit role-ref and phase-ref attributes into schema.xml (UAT-3).'\n\nBut gen_schema.py defines its own separate copies\\! If someone adds a new constraint in types.py and updates context_injection.py's mappings, they must also update gen_schema.py's mappings, or schema.xml will be out of sync with the runtime context.\n\nFix: Consolidate. context_injection.py should be the single definition of these mappings. gen_schema.py should import _ROLE_CONSTRAINTS and _PHASE_CONSTRAINTS from context_injection.py, or both should be moved to a shared types.py location. The direction Python→schema.xml should read from the same Python definitions that the runtime injection uses.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-h4wl","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1-F6: _ROLE_CONSTRAINTS and _PHASE_CONSTRAINTS duplicated between gen_schema.py and context_injection.py","updated_at":"2026-02-23T12:46:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T10:12:57Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"febfd79ae0787caea91bb4e7e9aad36a6f46b0eb28e32cead253bd81d003b028","created_at":"2026-02-23T09:49:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  uat: aura-plugins-sm9c\n---\nUser explicitly requires ConstraintContext to include ALL four ConstraintSpec fields, not just id/when/then.\n\n## Fix\n- types.py: Add given: str and should_not: str to ConstraintContext frozen dataclass\n- context_injection.py: Populate given + should_not when building ConstraintContext from ConstraintSpec\n- Any template (skill_header.j2) that renders ConstraintContext fields: add given + should_not to template\n\n## Rationale\ngiven provides context for when the constraint applies.\nshould_not is the anti-pattern guard — the most actionable field for preventing mistakes at runtime.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-h55f","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT-BLOCKER-2: ConstraintContext must include given + should_not fields","updated_at":"2026-02-23T10:12:57Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"439c690edfbceb8f109c4279e4a11a5961cb473f51e8d5daf0de69c3f4e06ea0","created_at":"2026-02-26T18:03:25Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  urd: aura-plugins-2ojv\n  impl_plan: aura-plugins-9qpq\n  proposal: aura-plugins-6zbz\n---\n## Components Demonstrated + User Responses (verbatim)\n\n### Component 1: Cross-workflow boundary types\n- PhaseInput full spec: ACCEPT\n- owner_roles sort: REVISE — \"Preserve declaration order\" (not alphabetical)\n- Feedback: No additional\n\n### Component 2: Interface + A2A types\n- Dual mime_type: \"Remove FilePart.mime_type\" (keep only FileWithUri.mime_type)\n- JSON aliases: \"Need JSON aliases now\" (R14 camelCase)\n- Feedback: No additional\n\n### Component 3: AuditTrail singleton\n- Singleton DI: ACCEPT\n- Role typing: \"Fix to RoleId | None\"\n- Feedback: No additional\n\n### Component 4: Infrastructure\n- Mock convention: \"Refactor to DI-only\"\n- Nix packaging: \"Defer to follow-up\"\n- Feedback: No additional\n\n### Component 5: Tests + Version bump\n- Test overlap: \"Remove duplicates from contract tests\"\n- CHANGELOG/ReviewAxis: \"Actually rename enum values\" (A/B/C → CORRECTNESS/TEST_QUALITY/ELEGANCE)\n- URD gaps: \"Should probably use common set of test fixtures defined in some kind of fixtures.yaml and combinatorial testing.\" — deferred to FOLLOWUP\n\n## Final Decision: REVISE (apply 7 amendments, then re-present)\n\n### UAT Amendments\n1. owner_roles: preserve declaration order (not alphabetical)\n2. Remove FilePart.mime_type (keep only FileWithUri.mime_type)\n3. Add JSON camelCase aliases to ToolCall\n4. Fix InMemoryAuditTrail.query_events role: object → RoleId | None\n5. Refactor test_worker.py to DI-only (remove unittest.mock)\n6. Remove duplicate contract tests from test_aura_types.py\n7. Rename ReviewAxis: A/B/C → CORRECTNESS/TEST_QUALITY/ELEGANCE\n\n### Deferred to FOLLOWUP\n- Nix packaging of worker.py\n- Common test fixtures.yaml + combinatorial testing","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-h5db","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"UAT: Implementation — v3 Temporal Engine (7 amendments)","updated_at":"2026-02-26T18:34:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:57:52Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c986ec97d2fa49da8a5c9f8f69daf28b84e8fcf5c94897e0a67636aad42457e7","created_at":"2026-02-22T12:55:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer B (Test Quality) on SLICE-1 (state_machine.py, conftest.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-h7r","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 BLOCKER","updated_at":"2026-02-22T12:57:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-1 MINOR severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-h7x","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 MINOR","updated_at":"2026-02-22T17:24:22Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9928ad350ffec51fd025aed86a7f43f37c72b427da0e02988b8218064808831c","created_at":"2026-02-25T22:37:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings for SLICE-1 (Python constraints). Elegance axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-h8pk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 BLOCKER","updated_at":"2026-02-25T22:37:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:53:01Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e68fef3d0c1434365af3466634323796e1a327b3b81e95b75eba39767eed950f","created_at":"2026-02-22T12:52:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer C (Elegance) on SLICE-1 (state_machine.py, conftest.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-h9r","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 BLOCKER","updated_at":"2026-02-22T12:53:01Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7b9ac4a506f7bef6563b124df0b1980b550527d8820905a0b63cf41236610116","created_at":"2026-02-22T12:53:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In constraints.py, check_followup_lifecycle() (line 1084) defines _FOLLOWUP_PREFIXES as a local tuple inside the method body on every call. Like _IMPL_ACTIONS, this is inconsistent with the module-level constant pattern established in this PR for _SAME_ACTOR, _REVIEW_AXES, _SEVERITY_TREE_PHASES, etc.\n\nFix: Move '_FOLLOWUP_PREFIXES: tuple[str, ...] = (...)' to module level, following the established pattern.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-hb6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: _FOLLOWUP_PREFIXES tuple defined inside check_followup_lifecycle() — should be module-level","updated_at":"2026-02-22T17:30:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"96980d88a2c814d3511d9126cb3a33469bd0235e1e4ed76e530784b6b9bac368","created_at":"2026-02-26T16:03:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  urd: aura-plugins-2ojv\n  review_round: aura-plugins-ruvr, aura-plugins-4rj7, aura-plugins-mip5, aura-plugins-mwf0, aura-plugins-zd9p, aura-plugins-duzp\n---\nAggregated IMPORTANT and MINOR findings from v3 Temporal Engine code review (Cycle 1).\n\n## IMPORTANT findings (6, with overlaps):\n1. unittest.mock in test_worker.py breaks DI-only convention (Reviewer B)\n2. Test duplication between contract tests and dedicated test file (Reviewer B)\n3. __init__.py import ordering broken for SLICE-1 types (Reviewer C)\n4. FilePart.mime_type redundant with FileWithUri.mime_type (Reviewer A+C)\n5. InMemoryAuditTrail.query_events role param typed object not RoleId|None (Reviewer A+C)\n6. CHANGELOG ReviewAxis description inaccurate (Reviewer A+C)\n\n## MINOR findings (7, with overlaps):\n1. CHANGELOG semantic names claim (Reviewer A)\n2. FilePart duplicate mime_type (Reviewer A)\n3. InMemoryAuditTrail role type (Reviewer A)\n4. Inline imports in contract tests (Reviewer B)\n5. __init__.py __all__ sub-section comment (Reviewer C)\n6. __init__.py docstring missing audit_activities (Reviewer C)\n7. bin/worker.py not Nix-packaged (Reviewer C)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-hgki","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":3,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP: Non-blocking improvements from v3 Temporal Engine code review","updated_at":"2026-02-26T23:56:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"965a3f3cfac2639263121344cbd4a8a9ee29ead75e783444afa0d779f0582588","created_at":"2026-02-23T04:28:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"test_context_injection.py has dedicated positive inclusion test classes for SUPERVISOR (TestGetRoleContextSupervisor) and WORKER (TestGetRoleContextWorker), but NO equivalent for REVIEWER, ARCHITECT, or EPOCH roles.\n\nThe TestConstraintContextFields class parametrizes over all roles to verify id/when/then are non-empty, but does NOT verify WHICH constraints are present for these roles.\n\nWithout positive inclusion tests for REVIEWER:\n- No test asserts get_role_context(REVIEWER).constraints contains 'C-severity-eager'\n- No test asserts REVIEWER has 'C-review-binary', 'C-review-consensus', 'C-blocker-dual-parent'\nThese are the constraints that define the REVIEWER role and are the basis for AC5a absence tests for SUPERVISOR.\n\nA regression that strips C-severity-eager from _ROLE_CONSTRAINTS[REVIEWER] would not be caught by any existing test.\n\nRemediation: Add TestGetRoleContextReviewer with positive inclusion assertions for at minimum C-severity-eager, C-review-binary, and C-review-consensus. Optionally add TestGetRoleContextArchitect for C-proposal-naming.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-hirz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S4-B1-IMPORTANT: REVIEWER, ARCHITECT, EPOCH roles have no positive constraint inclusion tests","updated_at":"2026-02-23T12:46:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:08Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"adbbc892efbf7a4a67d9f0f1ef5e34a19602d6a3eaccfff5d83e5f01703cb613","created_at":"2026-02-26T16:01:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-l6n8\n  review: aura-plugins-4rj7\n---\nMINOR findings for SLICE-1 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-hj2c","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 MINOR","updated_at":"2026-02-26T16:02:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:24:33Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\n### Location\n`scripts/aura_protocol/interfaces.py`, `FilePart` dataclass (lines 157-162):\n\n```python\n@dataclass(frozen=True)\nclass FilePart:\n    '''A2A FilePart — file content reference by URI.'''\n    file_uri: str\n    mime_type: str | None = None\n```\n\n### Description\nThe proposal (RATIFIED_PLAN aura-plugins-gmv) specifies:\n\n```python\n@dataclass(frozen=True)\nclass FilePart:\n    '''A2A FilePart — file content reference.'''\n    file_uri: str\n    mime_type: str | None = None\n```\n\nThe actual A2A v1.0 spec (https://a2a-protocol.org/latest/definitions/) defines FilePart differently — it uses a `file` field (not `file_uri`) with a nested `FileWithBytes` or `FileWithUri` object. The proposal deliberately chose a simplified form.\n\nHowever, the field name `file_uri` is not aligned with the A2A spec's actual structure, which uses `file.uri`. This is noted in the proposal as a 'minimal v1 subset' — so the deviation is intentional and documented.\n\n### Risk\nMINOR — this is a known tradeoff documented in the proposal ('minimal v1 subset'). The field name deviation from the actual A2A spec means future migration to full A2A compliance will require a field rename. Given that the proposal rationale explicitly says 'Full hierarchy is v2/v3 scope,' this is appropriate for v1.\n\n### Suggestion\nAdd a TODO comment in the FilePart docstring: 'v1 simplification: uses flat file_uri field. Full A2A compliance (v2) requires nested FileWithUri structure per A2A spec.'  This makes the migration cost visible to future implementors.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-hls","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 MINOR: FilePart uses file_uri field name instead of A2A spec file_with_uri","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a7d2fe8219ef05f522eaad24cc5a1baa727857f090e9aa8076c3b37ade02c7a4","created_at":"2026-02-26T23:48:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: tests/conftest.py, line 40; tests/test_protocol_combinatorial.py, line 44\n\nconftest.py defines:\n    _PROTOCOL_FIXTURE = ProtocolFixture()  # module-level singleton\n\ntest_protocol_combinatorial.py imports it as:\n    from conftest import _PROTOCOL_FIXTURE\n\nThe leading underscore is a Python convention for 'implementation detail, do not import'.\nBut _PROTOCOL_FIXTURE is explicitly designed for import: the docstring says\n'Module-level fixtures (import directly): _PROTOCOL_FIXTURE — ProtocolFixture singleton'.\n\nThis creates a naming incoherence: the name signals private, the usage is public.\n\nFix: rename to PROTOCOL_FIXTURE (no underscore) since it is explicitly part of\nthe test module's shared public surface. The underscore on _advance_to and _make_state\nis also worth reviewing for the same reason — these are also explicitly designed for\nimport.\n\nSlice: aura-plugins-xehz","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ho6x","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: conftest.py exports _PROTOCOL_FIXTURE with leading underscore (private convention) but uses it as cross-module public singleton","updated_at":"2026-02-26T23:48:21Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:45:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cf0341d10205f2c36ea8a6db2541de33e4c1f350eaf9050c344cb565280d1c7f","created_at":"2026-02-25T22:45:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No IMPORTANT findings. Elegance axis, round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ho7h","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-2 IMPORTANT","updated_at":"2026-02-25T22:45:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:44:42Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"41637703da05f1fde417c180efbf4d7c1412747eb5f3d6cdfbc6d02e02a42bc8","created_at":"2026-02-25T22:44:37Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No IMPORTANT findings for SLICE-3 Round 2 (Test Quality axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-hokt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-2 IMPORTANT","updated_at":"2026-02-25T22:44:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"28580a79c58fdc8323699cbf5f26b790135531e146eb809e98edee0385c54ff3","created_at":"2026-02-26T08:38:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-hqsi","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 IMPORTANT: find_plugin correctness across marketplaces","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3d9e10472c21c11988a696ea06c3a8f64be2aa5033b8825ea5f603ea8e8549eb","created_at":"2026-02-23T04:22:33Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer C (Elegance) on SLICE-2. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-hqzj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"389e8d3dce7503f1c2599f6f6312e9132e37d267e9fd06fdfa2f9dc85515c123","created_at":"2026-02-23T04:24:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/API Clarity).\n\nThe signature of generate_schema() (gen_schema.py line 1600) is:\n  def generate_schema(output: Path, diff: bool = True) -\u003e str | None\n\nThe docstring says 'Returns None only if an unexpected internal error occurs (should not happen in normal use).'\n\nHowever, looking at the actual function body (lines 1600-1751), there is no code path that returns None. The function always returns 'content' which is a str. The None case in the return type annotation is phantom — it was likely written defensively but never actually used.\n\nA return type of str | None forces every caller to handle the None case (or use an assertion), even though it never occurs. The main() CLI even guards against it with 'if content is None: return 1' — an unnecessary defensive check.\n\nFix: Change return type to str (remove | None). Remove the None guard in main(). The function raises OSError on write failure, which is the correct error path for OS-level problems. The docstring should reflect this.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-hv4d","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1-F8: generate_schema() return type str | None but None is never actually returned","updated_at":"2026-02-23T12:46:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-1","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:43:06Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"59844ed2293a217777c6a297537df37e6aff197b80f937c04e4ceeeccdd432f6","created_at":"2026-02-26T08:37:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-uvfm\n  followup_urd: aura-plugins-wloc\n  proposal: aura-plugins-9e68\n---\n## Findings in Scope\n- A2 (aura-plugins-rthn): EPOCH Ride the Wave constraints lack direct inclusion tests\n\n## Files Owned\n- tests/test_context_injection.py\n\n## Specification\nAdd `TestEpochRideTheWaveConstraints` class with 4 tests (one per constraint):\n- C-supervisor-cartographers\n- C-integration-points\n- C-slice-review-before-close\n- C-max-review-cycles\n\nEach test calls `get_role_context(RoleId.EPOCH)` and asserts the constraint appears in `RoleContext.constraints` by `.id`.\n\n## Acceptance Criteria\nAC-A2-1: Given test_context_injection.py and the 4 Ride the Wave constraints in EPOCH's role-scoped mapping, when get_role_context(RoleId.EPOCH) is called, then each of the 4 constraint IDs appears in the returned RoleContext.constraints checked by .id. Should not rely on indirect XML assertions or count comparisons alone.\n\n## Validation Checklist\n- [ ] TestEpochRideTheWaveConstraints class added to test_context_injection.py\n- [ ] 4 parametrized (or 4 individual) tests, one per Ride the Wave constraint id\n- [ ] Each test calls get_role_context(RoleId.EPOCH) and checks .constraints by id\n- [ ] get_role_context is a public function (imported from aura_protocol.context_injection)\n- [ ] All existing tests still pass (pytest tests/test_context_injection.py)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-i08u","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-1: EPOCH Ride the Wave constraint tests (A2)","updated_at":"2026-02-26T08:43:06Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-23T04:25:49Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2b5f24c39ee9eccf2416e173d27ccc90d9d96cab62069c7cb18c1861171b81f1","created_at":"2026-02-23T04:22:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer C (Elegance) on SLICE-4. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-i0nc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 BLOCKER","updated_at":"2026-02-23T04:25:49Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-3","await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:19:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5fcb810183068527d33984d651dce2ecbc6372f8a799cb3152d15cfc862fe9e9","created_at":"2026-02-26T08:05:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-147m\n  urd: aura-plugins-7oqz\n  proposal: aura-plugins-iw89\n  predecessor: aura-plugins-xkuw\n---\n## Scope\nAdd frozen dataclasses, _registry_path() lazy function, and PluginRegistry methods.\n\n## Files Owned\n- bin/aura-release (new dataclasses + methods)\n- tests/test_aura_release.py (TestPluginRegistry class)\n\n## Types (bin/aura-release)\n\n```python\ndef _registry_path() -\u003e Path:\n    return Path.home() / '.local' / 'config' / 'aura' / 'plugins' / 'claude-plugin-registry.json'\n\n@dataclass(frozen=True)\nclass PluginEntry:\n    name: str\n    path: Path        # absolute\n    remote: str | None\n\n@dataclass(frozen=True)\nclass MarketplaceEntry:\n    path: Path\n    plugins: tuple[PluginEntry, ...]\n\n@dataclass(frozen=True)\nclass PluginRegistry:\n    marketplaces: tuple[MarketplaceEntry, ...]\n    # Methods: load(), save(), find_plugin(), with_plugin_added(), with_plugin_removed()\n```\n\n## PluginRegistry.load() Validation Rules\n- File absent → return None (no error)\n- Invalid JSON → print error + sys.exit(2)\n- Missing 'marketplaces' key → print error + sys.exit(2)\n- marketplace.path does not exist → warn + skip\n- plugin entry missing name/path → warn + skip\n\n## PluginRegistry.find_plugin()\n```python\ndef find_plugin(self, name: str | None, cwd: Path) -\u003e tuple[PluginEntry, MarketplaceEntry] | None:\n    resolved_cwd = cwd.resolve()\n    for marketplace in self.marketplaces:\n        for plugin in marketplace.plugins:\n            if name:\n                if plugin.name == name: return plugin, marketplace\n            else:\n                if plugin.path.resolve() == resolved_cwd: return plugin, marketplace\n    return None\n```\n\n## TestPluginRegistry Tests\n- test_load_returns_none_if_absent\n- test_load_exits_on_malformed_json\n- test_load_exits_on_missing_marketplaces_key\n- test_load_warns_and_skips_nonexistent_marketplace\n- test_load_warns_and_skips_malformed_plugin_entry\n- test_find_plugin_by_name\n- test_find_plugin_by_cwd_auto_detect\n- test_find_plugin_returns_none_when_no_match\n\n## Validation Checklist\n- [ ] _registry_path() is a function (not module-level constant)\n- [ ] PluginEntry.path: Path (not str)\n- [ ] MarketplaceEntry.path: Path (not str)\n- [ ] PluginRegistry.load() validates JSON + marketplaces key → exit 2\n- [ ] load() warns + skips nonexistent marketplace (continue loading)\n- [ ] load() warns + skips malformed plugin entries (continue loading)\n- [ ] find_plugin() uses .resolve() on both entry.path and cwd\n- [ ] All 8 TestPluginRegistry tests pass","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-i142","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3: Registry types + load/save/find + TestPluginRegistry","updated_at":"2026-02-26T08:19:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-23T04:25:49Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a72ac7ed19f6d044a859ebea32d17bb755e7fe279fa855639cde88d5697473cc","created_at":"2026-02-23T04:22:37Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer C (Elegance) on SLICE-3. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-i1ea","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 BLOCKER","updated_at":"2026-02-23T04:25:49Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:21:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:58Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\nIn workflow.py, the advance_phase processing loop uses a bare Exception catch (lines 269-272):\n\n    try:\n        record = self._sm.advance(...)\n    except Exception:\n        # TransitionError from invalid advance — skip, stay in current phase.\n        # The violation is already counted from the constraint check.\n        continue\n\nThis silently swallows the TransitionError and continues the loop. The caller (whoever sent the advance_phase signal) receives NO feedback that their signal was rejected. From the caller's perspective, the signal was delivered, but nothing happened — the workflow stays at the current phase with no indication of why.\n\n## Elegance Problem\nThis is a significant complexity-hiding design issue:\n1. The signal pattern (fire-and-forget) is correct for Temporal, but there is no mechanism to surface rejection back to the caller\n2. The comment 'The violation is already counted from the constraint check' conflates two separate concerns: (a) constraint checking before advance, and (b) state machine validation INSIDE advance. These can diverge (constraint checker checks a subset; state machine checks the full transition table).\n3. A caller who sends an invalid signal gets no acknowledgment. This makes debugging harder — was the signal received? Did it fail? Is the workflow stuck?\n\n## Impact\n- During p4 review with a REVISE vote, if a caller mistakenly signals advance to p5, the signal is silently dropped. The caller must query current_state() to discover nothing changed.\n- This violates the design goal of explicit error handling: the URD requires 'forensic queryability' but a failed transition is not recorded anywhere in the audit trail (transition_history only records successes).\n\n## Fix\nOne of:\n1. Add a separate signal (e.g. advance_rejected signal) that the workflow emits when a transition is rejected, so callers have a feedback mechanism\n2. Catch and re-raise as a more specific exception, or log the rejection at ERROR level with the specific violations\n3. Record failed transition attempts in a separate rejected_advances list on EpochState for audit purposes\n\nOption 3 requires the least structural change: add rejected_advances: list[RejectedAdvanceRecord] to EpochState and populate it in the except block. This satisfies the forensic audit requirement.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-i2g","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-C-1-F1: Bare except Exception in workflow.run() silently discards TransitionError with no caller feedback","updated_at":"2026-02-22T04:21:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T03:33:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-06g\n  urd: aura-plugins-umi\n---\n## UAT Revision: Actionable Error Messages\n\nUser requirement (verbatim): \"Also need to make sure all errors and messages are actionable. They describe: what went wrong, why, what that means for them, and how they should fix it if they want to.\"\n\nFollow-up (verbatim): \"In these criteria: include the WHERE and WHEN it failed (file location, step, time)\"\n\n## Constraint C-actionable-errors\n\nEvery error must describe:\n1. What went wrong\n2. Why it happened\n3. Where it failed (file location, module, or function)\n4. When it failed (step, operation, or timestamp)\n5. What it means for the caller\n6. How to fix it\n\n## Files to Update\n\n### state_machine.py\n- TransitionError: violations list is the message, but TransitionError.__str__ should format violations actionably\n- ValueError in record_vote(): \"Invalid review axis\" — add where (state_machine.record_vote), when, meaning, fix\n- EpochState.last_error: when set in workflow, should include actionable context\n\n### interfaces.py\n- ValueError in ModelId.parse(): \"Invalid model ID\" — add where (ModelId.parse), meaning for caller, how to fix\n\n### workflow.py\n- RuntimeError in current_state()/available_transitions(): \"Workflow not yet initialized\" — add where, meaning, fix\n- TransitionError catch → last_error string: should format actionably\n\n### constraints.py\n- ~35 ConstraintViolation messages across all check methods\n- Many already include constraint_id and context dict\n- Ensure each message follows the 6-point template:\n  - Where: which constraint checker method\n  - When: during which operation (state check vs transition check)\n  - How to fix: specific remediation steps\n\n## Testing\n- Existing tests may assert on exact error message strings — update those too\n- All 475 tests must pass after changes","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-i2n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"FIX: Apply C-actionable-errors to all error messages in aura_protocol","updated_at":"2026-02-22T10:40:02Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8a14ecad51f93d409d2db37ba06250e41f0bfafedc2787c5c8d0cec243d52eae","created_at":"2026-02-26T08:54:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i08u\n  review_round: 1\n---\nBLOCKER findings from Reviewer B (Test Quality) on FOLLOWUP-SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-i3n2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-1-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T08:55:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"85b08624ddb09aa5d3ff05816e0cf27280e20dad05e50e8ef24abb69fe6160b8","created_at":"2026-02-26T23:47:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-rpc4\n  review: aura-plugins-uvgb\n  files:\n    - scripts/aura_protocol/__init__.py\n    - tests/ (no corresponding test file)\n---\n## Finding\n\nSLICE-1 (aura-plugins-rpc4) made three __init__.py cleanups:\n1. Alphabetical import ordering (PhaseInput, PhaseResult, SerializablePhaseSpec, SerializableTransition moved)\n2. Docstring addition mentioning audit_activities.py\n3. Removal of '# Cross-workflow boundary types' sub-section comment from __all__\n\nNone of these changes are verified by any test. The import changes are cosmetic and unlikely to regress, but the __all__ comment removal and alphabetical ordering could drift silently in future refactors.\n\nThe existing tests that import from aura_protocol verify that the named symbols exist (e.g. test_serializable_phase_spec.py imports PhaseInput, SerializablePhaseSpec) but do not verify ordering or docstring content.\n\n## Impact\n\nLow — these are mechanical cleanups with no runtime behavior change. If a future contributor re-adds a sub-section comment to __all__, no test will catch it.\n\n## Suggestion\n\nA single test like:\n```python\ndef test_all_has_no_sub_section_comments():\n    # __all__ is a list of strings — no comments are possible at runtime,\n    # but we can check for the sentinel pattern or rely on code review.\n    import aura_protocol\n    # All items in __all__ are non-empty strings\n    assert all(isinstance(s, str) and s for s in aura_protocol.__all__)\n```\n\nOr a doctest/inspection approach for the docstring. This is low-priority but would catch regressions automatically.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-i491","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: SLICE-1 (__init__.py cleanups) has no regression test verifying alphabetical ordering or __all__ comment removal","updated_at":"2026-02-26T23:47:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:19:59Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ac7cf3ac43c36f953b40399fe3e864413524d017bf64f3dfb660a3feef6fef48","created_at":"2026-02-23T04:23:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/Type Safety).\n\nRoleSpec.owned_phases is typed as frozenset[str] (types.py line 205). All other cross-references in the data model use the strongly-typed enum: PhaseSpec.id is PhaseId, HandoffSpec.at_phase is PhaseId, ConstraintContext uses typed fields.\n\nfrozenset[str] means callers must remember that valid values are PhaseId.value strings. No type checker can catch a typo like owned_phases={'p1', 'p13'} at definition time. PhaseId is a str enum so frozenset[PhaseId] is directly JSON-serializable and backward-compatible.\n\nThis is a consistency gap. PhaseSpec uses PhaseId throughout. PHASE_DOMAIN uses dict[PhaseId, Domain]. The ROLE_SPECS dict already uses RoleId for the key. Owned phases should use PhaseId too.\n\nFix: Change RoleSpec.owned_phases annotation to frozenset[PhaseId]. Update ROLE_SPECS data to use PhaseId enum members (e.g., frozenset({PhaseId.P1_REQUEST, ...})). Update _parse_roles() in schema_parser.py to convert collected string refs to PhaseId instances.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-i6wh","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1-F3: RoleSpec.owned_phases uses frozenset[str] instead of frozenset[PhaseId]","updated_at":"2026-02-23T12:19:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b4936ef9a0764559bfb0d6c5bcee0e121568ff7fcb34d9426b3e7fea62a2f894","created_at":"2026-02-26T08:38:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-iamf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 IMPORTANT: CLI subcommand error handling","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"afa698a44e4e7ecc14a88444203d1068f6e32c123c7b39daa4592ecba0826309","created_at":"2026-02-27T06:57:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"tests/test_aura_msg.py:72 — @pytest.fixture(scope=\"module\") loads the aura_msg module once for the entire test module.\n\nThis deviates from the established codebase convention in tests/test_aurad.py where _load_aurad() is called per-test for strong per-test isolation.\n\nImpact today: None — aura-msg.py has no module-level mutable state, all tests call stateless build_parser() / parse_args().\n\nFuture risk: When stub subcommands are implemented (start-epoch, signal-vote, etc.), any module-level state (e.g. cached parsers, registered handlers, global registries) would leak between tests due to the shared module instance.\n\nRecommended fix: Change to scope=\"function\" (default) so each test gets a fresh module, matching the test_aurad.py convention.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ib09","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: test_aura_msg.py aura_msg fixture uses scope=\"module\" — deviates from per-test isolation convention","updated_at":"2026-02-27T06:57:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:57:52Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ea4c3d03d732ca4967d612afb7c0074eb2e2b37702762ac058bf524e74b7c48f","created_at":"2026-02-22T12:55:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer B (Test Quality) on SLICE-1 (state_machine.py, conftest.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ibw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-22T12:57:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7f5a6dc78f7f908de4c93d85ef98d3c22648c552d7bcbb869d561e71921936a9","created_at":"2026-02-25T22:19:55Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  impl_plan: aura-plugins-24cr\n---\n## Scope\n\nCartographer A found: constraints.py has a 1:1 method per constraint pattern.\nMultiple test files also reference the old constraint ID by string.\n\n### constraints.py changes\n\n1. Rename `check_supervisor_explore_team()` → `check_supervisor_cartographers()`\n   - Update method name\n   - Update returned `constraint_id` string to \"C-supervisor-cartographers\"\n   - Update docstring to reflect Cartographers (dual-role, always-3, never-shut-down)\n\n2. Add 3 new check methods:\n   - `check_integration_points()` for C-integration-points\n   - `check_slice_review_before_close()` for C-slice-review-before-close\n   - `check_max_review_cycles()` for C-max-review-cycles\n\n   Each check method validates the GIVEN/WHEN/THEN/SHOULD_NOT pattern.\n   Follow the 1:1 pattern of existing check methods.\n\n### Test file updates (from Cartographer A's findings)\n\nRename/update references to \"C-supervisor-explore-team\" in:\n\n1. `tests/test_constraints.py`\n   - Rename class `TestCheckSupervisorExploreTeam` → `TestCheckSupervisorCartographers`\n   - Update all string assertions containing \"C-supervisor-explore-team\"\n   - Add test class for each new constraint (TestCheckIntegrationPoints, etc.)\n   - Update integration test `check_structural` if it counts constraints by name\n\n2. `tests/test_context_injection.py` (line 176)\n   - Update the WORKER exclusion assertion to use \"C-supervisor-cartographers\"\n\n3. `tests/test_gen_schema.py` (line 316)\n   - Update supervisor_constraints list: \"C-supervisor-explore-team\" → \"C-supervisor-cartographers\"\n   - Add the 3 new constraint IDs to supervisor_constraints assertions\n\n## Files Owned\n- scripts/aura_protocol/constraints.py\n- tests/test_constraints.py\n- tests/test_context_injection.py\n- tests/test_gen_schema.py\n\n## Key Design Notes (from Cartographer A)\n- Constraint IDs must match: dict key in types.py == id field == string in all references\n- context_injection.py has hand-authored comment rationale per constraint\n- check methods follow `check_{constraint_name_with_underscores}()` pattern\n\n## Acceptance Criteria\n- `check_supervisor_cartographers()` exists, `check_supervisor_explore_team()` removed\n- 3 new check methods exist (one per new constraint)\n- All test files reference \"C-supervisor-cartographers\" (not old name)\n- Tests added for 3 new constraints\n- pytest tests/ passes: 0 failures (run AFTER SLICE-2 completes schema regen)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ik5v","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-L3: constraints.py + test updates — rename checker + add new check methods","updated_at":"2026-02-25T22:50:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8893e457930d2c9d3ab1e25c95fde1fa84f42c057ac2f648621ccf6e1087a442","created_at":"2026-02-23T08:35:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-z8ga\n  original_urd: aura-plugins-w07o\n  original_ratified_proposal: aura-plugins-mg6h\n---\n## Purpose\nUser scoping session: determine which IMPORTANT/MINOR findings from Round 1 code review to address in the follow-up epic.\n\n## IMPORTANT Findings to Scope\n14 IMPORTANT findings across 4 slices (see aura-plugins-z8ga for full list):\n- Type consistency: frozenset[PhaseId], SubstepType enum\n- Test coverage: field-by-field assertions, missing AC10 e2e, StrictUndefined negative path\n- Elegance: duplicated constraint dicts, O(n*m) loop, ALL constraints to every role\n- Silent failures: _build_constraint_contexts drops unknown IDs\n\n## MINOR Findings to Scope\n12+ MINOR findings across 4 slices:\n- Stale docstrings (22 vs 23 constraints, inverted SoT claim)\n- Return type str | None when None never returned\n- skill_header.j2 inline run-on constraint text\n- Missing PhaseId.COMPLETE in _PHASE_CONSTRAINTS\n- Diff tests checking headers not content\n\n## Questions for User\n1. Which IMPORTANT findings are highest priority?\n2. Are the type-strictness improvements (PhaseId enum, SubstepType enum) desired?\n3. Should the O(n*m) loop be fixed now or deferred?\n4. Is the duplicated constraint dict consolidation desired?","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ikgp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP_URE: Scope follow-up for schema-driven protocol engine v2","updated_at":"2026-02-23T08:35:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9be3faeb28210f529c81e497cd3c1a2327036a776a850d9a964d9baf960d6947","created_at":"2026-02-26T15:33:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Wire SerializablePhaseSpec into __init__.py exports. Verify from_spec works against all PHASE_SPECS entries.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ikli","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-1-L3: Impl — SerializablePhaseSpec wiring","updated_at":"2026-02-26T18:34:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:37Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6f9b3366cf8dc6a974f5941750c8d808eb1dc49e2a55de1bbada07bf392026b2","created_at":"2026-02-23T04:28:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In test_gen_skills.py::TestDiffOutput::test_diff_printed_when_content_changes (line 354), the assertion checks that captured stdout is non-empty AND that at least one line starts with '---', '+++', '@@', '-', or '+'. The file header lines in a unified diff also start with '---' and '+++', so this check would pass even if only the file path headers were printed without actual change lines.\n\nThe test does verify non-empty stdout which is a good baseline. However, a more robust check would verify that at least one line starts with a single '-' or '+' (not '--' or '++'), confirming real change lines are present.\n\nRemediation: Tighten the assertion to check for lines that start exactly with '-' or '+' followed by a non-dash/non-plus character, distinguishing changed lines from file header lines. Low risk — the production code uses difflib.unified_diff correctly.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-il7q","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S3-B1-MINOR: No test verifies gen_skills diff output contains actual changed lines (vs just headers)","updated_at":"2026-02-23T12:46:37Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f6f4b248e53e6e6e0b00b3358bc3d0a7ff7285ed9c1a40d3c9151e48ff017ff1","created_at":"2026-02-22T12:56:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"tests/test_constraints.py lines 68-74 define a local _make_state() helper that is functionally identical to the shared _make_state() in tests/conftest.py. Finding 0yd was supposed to eliminate local helper duplicates, but the conftest.py shared helper for _make_state is not imported by test_constraints.py. Instead a local copy persists. This violates the shared-fixtures design principle established in SLICE-1. Fix: Remove local _make_state() definition and import from conftest.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ilgw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"test_constraints.py defines local _make_state() duplicate instead of importing from conftest.py","updated_at":"2026-02-22T17:30:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\nIn constraints.py, check_severity_tree() only enforces the NEGATIVE case:\n- If at p4 (plan review), severity trees MUST NOT exist\n\nIt does NOT enforce the POSITIVE case:\n- If at p10 (code review), severity trees MUST be created eagerly\n\nThe docstring explicitly admits this:\n    'Note: EpochState does not have a severity_groups field in v1. This\n    check validates the protocol invariant: p4 must NOT have severity groups\n    (C-severity-eager), and p10 MUST have them (C-severity-eager).\n    The presence check at p10 requires external enforcement.'\n\nThe method name is check_severity_tree and is listed under 'Named Constraint Checks', implying it handles C-severity-eager. But it silently returns [] for p10 state (test_p10_returns_empty asserts this as CORRECT behavior, which confirms the gap).\n\n## Impact\n- C-severity-eager is only half-enforced: the negative rule (p4 prohibition) is checked, but the positive rule (p10 mandate) is not\n- A reviewer at p10 who forgets to create severity groups will not be caught by check_all()\n- The method name and its position in the public API implies full coverage, which is misleading\n\n## Fix\nTwo options:\n1. (Preferred) Add a severity_groups: frozenset[str] field to EpochState (empty by default) and check that it contains {BLOCKER, IMPORTANT, MINOR} when at p10\n2. Rename the method to check_severity_not_plan() to accurately reflect what it actually validates, and create a separate (incomplete/documented) check_severity_eager() stub\n\nOption 1 is more correct but requires an EpochState field change. Option 2 preserves v1 scope but fixes the misleading API surface.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-in8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1-F1: check_severity_tree does not validate p10 eager-creation positive case","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"548feacb77025ded042f56c77bc4e1ca3fda9e9d0a50451e6f213f15550e4ad2","created_at":"2026-02-26T08:55:05Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i08u\n  review_round: 1\n---\nMINOR findings from Reviewer C (Elegance) on FOLLOWUP-SLICE-1. No findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ioki","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-1-REVIEW-C-1 MINOR","updated_at":"2026-02-26T08:55:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"366680653ebfd9e63b7ce2fb00e16370a6714e1ff933e84dde9f003809f7b375","created_at":"2026-02-27T06:58:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6m2m\n  review: aura-plugins-6m2m\n---\nworkflow.py — SliceWorkflow class docstring describes the workflow but does not mention the parent_workflow_id field added in SLICE-4 (R7).\n\nSliceInput now has a required parent_workflow_id: str field, and SliceWorkflow.run() uses it to signal the parent EpochWorkflow via get_external_workflow_handle(). This behavior is not documented in the class docstring.\n\nSuggestion: Add a note explaining that parent_workflow_id is required and used to signal EpochWorkflow.slice_progress on completion.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ip41","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: SliceWorkflow class docstring does not mention parent_workflow_id field","updated_at":"2026-02-27T06:58:49Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\n### Location\n`scripts/aura_protocol/state_machine.py` — `advance()` method (line 221-232).\n`scripts/aura_protocol/workflow.py` — `run()` method (lines 276-285).\n\n### Description\nThe `EpochStateMachine.advance()` method creates a `TransitionRecord` using `datetime.now(tz=timezone.utc)` (non-deterministic) and appends it to `self._state.transition_history`. The workflow layer in `workflow.py` then REPLACES the last element in `transition_history` with a new `TransitionRecord` bearing `workflow.now()`:\n\n```python\n# workflow.py lines 284-285\nif self._sm.state.transition_history:\n    self._sm.state.transition_history[-1] = deterministic_record\n```\n\n### Problem\nThis creates a design seam where the state machine's internal audit trail (transition_history) can be post-hoc modified by the workflow layer without the state machine's knowledge or consent. The state machine's public API guarantees that appended TransitionRecords are as-returned from advance(), but the workflow mutates this directly.\n\nAdditionally, if the workflow logic between 'sm.advance() records timestamp' and 'workflow.now() replacement' is replayed by Temporal, the state machine will have already appended the real-time record. The replacement is correct in the fast path, but the design allows the state machine's audit trail to diverge from what advance() recorded if the replacement never runs (e.g., an exception between lines 264 and 285).\n\n### Risk\nThis is IMPORTANT (not BLOCKER) because: (1) the current tests pass and the happy path is correct; (2) the architecture decision to use datetime.now() in state_machine.py is documented as being overridden by the workflow layer; (3) no test exercises the exception path between advance() and the timestamp replacement.\n\n### Suggestion\nTwo cleaner approaches:\n1. **Preferred:** Remove `datetime.now()` from `EpochStateMachine.advance()` — accept an optional `timestamp` parameter (defaulting to `datetime.now()` only when not in a workflow context). The workflow would pass `workflow.now()` explicitly. This eliminates the post-hoc mutation entirely.\n2. **Alternative:** Move timestamp responsibility entirely to the workflow. State machine's `TransitionRecord` gets a sentinel timestamp; workflow replaces before appending to history. But this still requires mutation access.\n\nApproach 1 keeps the audit trail immutable at the state machine level and makes the seam explicit.\n\n### Impact\nAffects SLICE-2 (state_machine.py) and SLICE-5 (workflow.py). Primary ownership is SLICE-2 since advance() would need a timestamp param.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ipj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 IMPORTANT: advance() timestamp can be silently overwritten by workflow layer","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:44:42Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"50fce8ebaa897ece14461cf9f7c556dbf1a87c59f3b610e1fba8359c29e41ccb","created_at":"2026-02-25T22:44:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings for SLICE-3 Round 2 (Test Quality axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-iq0p","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-2 MINOR","updated_at":"2026-02-25T22:44:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"07f723d0e27035558c16d69a5850092fe2a1b9ec839194080dc344efe0a6fd2c","created_at":"2026-02-27T06:54:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"nix/aurad-service.nix:28 vs nix/hm-module.nix config section\n\naurad-service.nix line 28:\n  systemStr = pkgs.stdenv.hostPlatform.system;\n\nThe established pattern in hm-module.nix uses pkgs.system (the shorter idiomatic form).\nBoth evaluate to the same string, but the inconsistency is a minor style issue.\n\nFix: use pkgs.system directly (or inline) instead of the stdenv.hostPlatform.system alias.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ishd","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: aurad-service.nix uses pkgs.stdenv.hostPlatform.system; hm-module.nix uses pkgs.system","updated_at":"2026-02-27T06:54:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:13Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3d321689479ed394ea697acb7ec0a141262fde220810dd86ff04db5fefeab51a","created_at":"2026-02-26T08:38:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ivl1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 MINOR: Test Quality","updated_at":"2026-02-26T08:38:13Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T09:36:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ecfaa38e7904d02970b0e96d48f51953ea65d3ec36aaa4c83bb934888e12bd7f","created_at":"2026-02-26T07:10:55Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-0biw\n  urd: aura-plugins-7oqz\n  supersedes: aura-plugins-7ome\n  review_a: aura-plugins-qrm4\n  review_b: aura-plugins-9mch\n  review_c: aura-plugins-odb3\n---\n\n## Changes from PROPOSAL-1\n\nAll 3 reviewers voted REVISE. This proposal addresses every blocker:\n\n| Fix | Blocker source |\n|-----|---------------|\n| `PluginEntry.path: Path`, `MarketplaceEntry.path: Path` | Reviewer C #1 |\n| `_registry_path() -\u003e Path` lazy function (not module-level constant) | Reviewer C #3 |\n| Concrete double-bump guard: `resolved_mp not in {vf.path for vf in files}` | Reviewers A #1, C #2 |\n| Entry-level deserialization: missing name/path → warn + skip | Reviewer A #2 |\n| Registry write moved AFTER git commit/tag (no rollback needed) | Reviewer A #3 |\n| Fixture: module-scope import + autouse cache-clear only (no sys.modules teardown per test) | Reviewer B #1 |\n| Test: MarketplaceVersionFile.write() leaves plugins[*].version unchanged | Reviewer B #2 |\n| Test cases specified for all registry CLI commands and PluginRegistry.load/find_plugin | Reviewer B #3 |\n| Test: --dry-run skips registry writes | Reviewer B #4 |\n| --help / module docstring updated for registry subcommand | Reviewer C #5 |\n| autouse fixture clears repo_root lru_cache between tests | Reviewer C #4 |\n\n---\n\n## Problem Space\n\n**Axes:** single-process, sequential, user-global config, single-file mutations\n**Has-a:** PluginRegistry has-a tuple[MarketplaceEntry]; MarketplaceEntry has-a tuple[PluginEntry]\n**Is-a:** MarketplaceVersionFile is-a VersionFile\n\n---\n\n## SLICE-1: Test quality (tests/test_aura_release.py)\n\n### Fixture design (corrected)\n\n```python\n@pytest.fixture(scope=\"module\")\ndef aura_release_mod():\n    \"\"\"Import aura-release once per module. Cleans sys.modules at module teardown.\"\"\"\n    loader = SourceFileLoader(\"aura_release\", str(BIN_PATH / \"aura-release\"))\n    spec = importlib.util.spec_from_loader(\"aura_release\", loader)\n    mod = importlib.util.module_from_spec(spec)\n    sys.modules[\"aura_release\"] = mod  # must register before exec (see lines 29-33)\n    spec.loader.exec_module(mod)\n    yield mod\n    sys.modules.pop(\"aura_release\", None)\n\n@pytest.fixture(autouse=True)\ndef _clear_caches(aura_release_mod):\n    \"\"\"Clear lru_cache on repo_root between tests (prevents cwd leakage).\"\"\"\n    yield\n    aura_release_mod.repo_root.cache_clear()\n```\n\n**Rationale:** Module-scope import persists for the full module (sys.modules stays registered, module reference remains valid). Function-scope autouse ONLY clears repo_root lru_cache — it does NOT pop sys.modules. Teardown is handled by the module-scope fixture after all tests.\n\n### New test case E\n\n```python\ndef test_case_e_root_pyproject_without_version_key(\n    self, tmp_path: Path, aura_release_mod\n) -\u003e None:\n    \"\"\"Root-level pyproject.toml with only [tool.*] section is excluded.\n\n    Guards the _has_pyproject_version() filter at root level (lines 264-266),\n    which is distinct from the subdir path tested in test_case_d.\n    \"\"\"\n    (tmp_path / \"pyproject.toml\").write_text(_TOOL_ONLY_PYPROJECT)\n    results = aura_release_mod.discover_version_files(tmp_path)\n    assert results == []\n```\n\nAll existing test methods (A-D) updated to accept `aura_release_mod` parameter.\n\n### Update TestDiscoverVersionFiles docstring\n\n```python\nclass TestDiscoverVersionFiles:\n    \"\"\"discover_version_files() driven by _SCAN_SPECS.\n\n    Covers pyproject.toml discovery only (package.json / plugin.json /\n    marketplace.json are out of scope for this class — see TestVersionFileWrites).\n    Root and subdirectory paths are exercised; version-key filter is verified\n    at both levels.\n    \"\"\"\n```\n\n---\n\n## SLICE-2: Fix MarketplaceVersionFile.write() + test\n\n### Code fix\n\n```python\ndef write(self, version: str, *, dry_run: bool = False) -\u003e None:\n    data = json.loads(self.path.read_text(encoding=\"utf-8\"))\n    data[\"metadata\"][\"version\"] = version\n    # plugins[*].version intentionally NOT updated — each plugin manages its own version\n    if not dry_run:\n        self.path.write_text(json.dumps(data, indent=2) + \"\\n\", encoding=\"utf-8\")\n```\n\n### New test class: TestVersionFileWrites\n\n```python\nclass TestVersionFileWrites:\n    \"\"\"write() behaviour for VersionFile subclasses.\"\"\"\n\n    def test_marketplace_write_updates_only_metadata_version(\n        self, tmp_path: Path, aura_release_mod\n    ) -\u003e None:\n        \"\"\"write() bumps metadata.version only; plugins[*].version unchanged.\"\"\"\n        marketplace = {\n            \"metadata\": {\"version\": \"1.0.0\"},\n            \"plugins\": [\n                {\"name\": \"aura\", \"version\": \"1.0.0\"},\n                {\"name\": \"agentfilter\", \"version\": \"0.3.0\"},\n            ],\n        }\n        mp = tmp_path / \"marketplace.json\"\n        mp.write_text(json.dumps(marketplace, indent=2) + \"\\n\", encoding=\"utf-8\")\n\n        mod = aura_release_mod\n        vf = mod.MarketplaceVersionFile(name=\"marketplace.json\", path=mp)\n        vf.write(\"1.0.1\")\n\n        data = json.loads(mp.read_text(encoding=\"utf-8\"))\n        assert data[\"metadata\"][\"version\"] == \"1.0.1\"        # bumped\n        assert data[\"plugins\"][0][\"version\"] == \"1.0.0\"      # unchanged (aura)\n        assert data[\"plugins\"][1][\"version\"] == \"0.3.0\"      # unchanged (agentfilter)\n\n    def test_marketplace_write_dry_run_does_not_write(\n        self, tmp_path: Path, aura_release_mod\n    ) -\u003e None:\n        \"\"\"write(dry_run=True) must not modify the file.\"\"\"\n        marketplace = {\"metadata\": {\"version\": \"1.0.0\"}, \"plugins\": []}\n        mp = tmp_path / \"marketplace.json\"\n        mp.write_text(json.dumps(marketplace, indent=2) + \"\\n\", encoding=\"utf-8\")\n\n        mod = aura_release_mod\n        vf = mod.MarketplaceVersionFile(name=\"marketplace.json\", path=mp)\n        vf.write(\"1.0.1\", dry_run=True)\n\n        data = json.loads(mp.read_text(encoding=\"utf-8\"))\n        assert data[\"metadata\"][\"version\"] == \"1.0.0\"  # unchanged\n```\n\n---\n\n## SLICE-3: Registry types, lazy path, loading (bin/aura-release)\n\n### Lazy path function (replaces eager constant)\n\n```python\ndef _registry_path() -\u003e Path:\n    \"\"\"Return the user-global plugin registry path. Lazy: testable via monkeypatch.\"\"\"\n    return Path.home() / \".local\" / \"config\" / \"aura\" / \"plugins\" / \"claude-plugin-registry.json\"\n```\n\n### Dataclasses (Path fields throughout)\n\n```python\n@dataclass(frozen=True)\nclass PluginEntry:\n    name: str\n    path: Path        # absolute local path to plugin repo\n    remote: str | None\n\n@dataclass(frozen=True)\nclass MarketplaceEntry:\n    path: Path                        # absolute path to marketplace.json\n    plugins: tuple[PluginEntry, ...]\n\n@dataclass(frozen=True)\nclass PluginRegistry:\n    marketplaces: tuple[MarketplaceEntry, ...]\n\n    @classmethod\n    def load(cls, registry_path: Path | None = None) -\u003e PluginRegistry | None:\n        \"\"\"Load and validate registry. Returns None if absent.\n\n        Validation:\n        - File absent → return None (no error)\n        - Invalid JSON → print error + sys.exit(2)\n        - Missing \"marketplaces\" key → print error + sys.exit(2)\n        - marketplace.path does not exist → warn + skip (continue loading)\n        - plugin entry missing name or path → warn + skip (continue loading)\n        \"\"\"\n        path = registry_path or _registry_path()\n        if not path.exists():\n            return None\n        try:\n            data = json.loads(path.read_text(encoding=\"utf-8\"))\n        except json.JSONDecodeError as e:\n            print(f\"Error: registry at {path} is malformed: {e}\", file=sys.stderr)\n            sys.exit(2)\n        if \"marketplaces\" not in data:\n            print(f\"Error: registry at {path} missing marketplaces key\", file=sys.stderr)\n            sys.exit(2)\n        marketplaces = []\n        for m in data[\"marketplaces\"]:\n            mp_path = Path(m.get(\"path\", \"\")).expanduser().resolve()\n            if not mp_path.exists():\n                print(f\"Warning: marketplace not found: {mp_path}\", file=sys.stderr)\n                continue\n            plugins = []\n            for p in m.get(\"plugins\", []):\n                if \"name\" not in p or \"path\" not in p:\n                    print(f\"Warning: skipping malformed plugin entry: {p}\", file=sys.stderr)\n                    continue\n                plugins.append(PluginEntry(\n                    name=p[\"name\"],\n                    path=Path(p[\"path\"]).expanduser().resolve(),\n                    remote=p.get(\"remote\"),\n                ))\n            marketplaces.append(MarketplaceEntry(\n                path=mp_path,\n                plugins=tuple(plugins),\n            ))\n        return cls(marketplaces=tuple(marketplaces))\n\n    def save(self, registry_path: Path | None = None, *, dry_run: bool = False) -\u003e None:\n        \"\"\"Serialise registry to JSON. Creates parent dirs if needed.\"\"\"\n        ...\n\n    def find_plugin(\n        self, name: str | None, cwd: Path\n    ) -\u003e tuple[PluginEntry, MarketplaceEntry] | None:\n        \"\"\"Find by explicit name, or auto-detect by matching entry.path to cwd.resolve().\"\"\"\n        resolved_cwd = cwd.resolve()\n        for marketplace in self.marketplaces:\n            for plugin in marketplace.plugins:\n                if name:\n                    if plugin.name == name:\n                        return plugin, marketplace\n                else:\n                    if plugin.path.resolve() == resolved_cwd:\n                        return plugin, marketplace\n        return None\n\n    def with_plugin_added(...) -\u003e PluginRegistry: ...\n    def with_plugin_removed(...) -\u003e PluginRegistry: ...\n```\n\n### Registry tests (new class: TestPluginRegistry)\n\n```\ntest_load_returns_none_if_absent\ntest_load_exits_on_malformed_json\ntest_load_exits_on_missing_marketplaces_key\ntest_load_warns_and_skips_nonexistent_marketplace\ntest_load_warns_and_skips_malformed_plugin_entry\ntest_find_plugin_by_name\ntest_find_plugin_by_cwd_auto_detect\ntest_find_plugin_returns_none_when_no_match\n```\n\n---\n\n## SLICE-4: Registry CLI (bin/aura-release)\n\n### Dispatch (backward-compatible prefix check)\n\n```python\ndef main() -\u003e int:\n    if len(sys.argv) \u003e 1 and sys.argv[1] == \"registry\":\n        return cmd_registry(sys.argv[2:])\n    # existing argparse unchanged …\n```\n\nUpdate module docstring Usage block to mention `aura-release registry \u003cinit|add|list|remove\u003e`.\n\n### Registry subcommand implementation\n\n`cmd_registry_init`: create `_registry_path().parent` + write `{\"marketplaces\": []}`. Error if file already exists.\n`cmd_registry_add \u003cname\u003e [--path \u003clocal-path\u003e] [--remote \u003curl\u003e] --marketplace \u003cmp-path\u003e`: loads or creates empty, adds PluginEntry, saves.\n`cmd_registry_list`: loads, prints `\u003cmarketplace-path\u003e → \u003cname\u003e (\u003cplugin-path\u003e)` per entry.\n`cmd_registry_remove \u003cname\u003e`: loads, removes all PluginEntry matching name, saves.\n\n### Registry CLI tests (new class: TestRegistryCLI, using tmp_path + monkeypatch for _registry_path)\n\n```\ntest_registry_init_creates_empty_registry\ntest_registry_init_errors_if_already_exists\ntest_registry_add_creates_entry\ntest_registry_add_defaults_path_to_cwd\ntest_registry_list_output_format\ntest_registry_remove_by_name\ntest_registry_remove_noop_if_absent\n```\n\n---\n\n## SLICE-5: Release integration — --plugin flag (bin/aura-release)\n\n### New flag\n\n```python\nparser.add_argument(\"--plugin\", metavar=\"NAME\",\n    help=\"Plugin name for registry lookup; auto-detected from cwd if omitted\")\n```\n\n### Integration in cmd_release() — AFTER git commit/tag (no rollback needed)\n\n```python\n# ── After commit and tag ───────────────────────────────────────────\nregistry = PluginRegistry.load()\nif registry:\n    match = registry.find_plugin(getattr(args, \"plugin\", None), root)\n    if match:\n        plugin_entry, marketplace_entry = match\n        resolved_mp = marketplace_entry.path.resolve()\n        discovered_paths = {vf.path.resolve() for vf in files}\n        if resolved_mp not in discovered_paths:          # double-bump guard\n            if dry_run:\n                print(f\"[dry-run] Would update marketplace {resolved_mp}: \"\n                      f\"metadata.version -\u003e {new_version_str}\")\n            else:\n                mp_vf = MarketplaceVersionFile(\n                    name=str(resolved_mp), path=resolved_mp\n                )\n                mp_vf.write(new_version_str)\n```\n\n**Why after commit:** The registry marketplace write is the last side-effect. If it fails, the release is already committed and tagged locally; the user can manually fix the external marketplace file. This avoids rollback complexity entirely.\n\n**Double-bump guard:** `resolved_mp not in {vf.path.resolve() for vf in files}` — if `.claude-plugin/marketplace.json` was already discovered and bumped by `_SCAN_SPECS`, the guard prevents a second write to the same file.\n\n### --dry-run registry test\n\n```python\ndef test_release_dry_run_skips_registry_write(tmp_path, aura_release_mod, monkeypatch):\n    \"\"\"--dry-run must not write to the registry marketplace.\"\"\"\n    # Set up a minimal registry pointing to a marketplace file\n    # Run cmd_release with dry_run=True\n    # Assert marketplace file is unchanged\n```\n\n---\n\n## Validation Checklist\n\n- [ ] test_case_e added (root-level [tool.*]-only → excluded)\n- [ ] aura_release_mod module-scope fixture present\n- [ ] _clear_caches autouse fixture clears repo_root.cache_clear() only (does NOT pop sys.modules)\n- [ ] TestDiscoverVersionFiles docstring updated with scope note\n- [ ] MarketplaceVersionFile.write() removes plugins[*].version loop\n- [ ] test_marketplace_write_updates_only_metadata_version passes\n- [ ] test_marketplace_write_dry_run_does_not_write passes\n- [ ] _registry_path() is a lazy function (not a module-level constant)\n- [ ] PluginEntry.path: Path, MarketplaceEntry.path: Path\n- [ ] PluginRegistry.load() validates JSON + marketplaces key → exit 2\n- [ ] PluginRegistry.load() warns + skips nonexistent marketplace paths\n- [ ] PluginRegistry.load() warns + skips malformed plugin entries (missing name/path)\n- [ ] PluginRegistry.find_plugin() uses .resolve() for both entry.path and cwd\n- [ ] aura-release registry init creates empty registry; errors if exists\n- [ ] aura-release registry add creates entry; --path defaults to cwd\n- [ ] aura-release registry list prints correct format\n- [ ] aura-release registry remove removes by name; no-op if absent\n- [ ] Module docstring Usage block mentions registry subcommand\n- [ ] --plugin flag accepted by main argparse\n- [ ] Double-bump guard: resolved_mp not in {vf.path.resolve() for vf in files}\n- [ ] Registry write occurs AFTER git commit/tag\n- [ ] --dry-run prints [dry-run] message and skips write\n- [ ] All existing tests still pass\n- [ ] TestPluginRegistry and TestRegistryCLI test classes present\n\n## BDD Acceptance Criteria\n\n**Given** root pyproject.toml with only [tool.*] **when** discover_version_files() **then** excluded **should not** appear in results\n\n**Given** valid registry + --plugin aura **when** aura-release patch runs **then** marketplace metadata.version bumped **should not** update plugins[*].version\n\n**Given** marketplace already in _SCAN_SPECS **when** registry also references same path **then** write occurs exactly once **should not** double-bump\n\n**Given** malformed registry JSON **when** aura-release loads registry **then** clear error + exit 2 **should not** crash with traceback\n\n**Given** registry entry missing name or path **when** load() parses it **then** warn + skip that entry **should not** exit 2 or crash\n\n**Given** no registry file **when** aura-release patch runs **then** proceeds normally **should not** error or warn\n\n**Given** --dry-run **when** registry marketplace write would occur **then** print [dry-run] message **should not** write to disk\n\n**Given** aura-release registry init **when** registry already exists **then** error and exit **should not** overwrite\n\n## Proposed Slices (for Supervisor)\n\n| Slice | Scope | Files |\n|-------|-------|-------|\n| SLICE-1 | Test quality (fixtures + case E + docstring) | tests/test_aura_release.py |\n| SLICE-2 | Fix MarketplaceVersionFile.write() + TestVersionFileWrites | bin/aura-release + tests/ |\n| SLICE-3 | Registry types + load/save + TestPluginRegistry | bin/aura-release + tests/ |\n| SLICE-4 | Registry CLI + TestRegistryCLI | bin/aura-release + tests/ |\n| SLICE-5 | Release integration + --plugin flag | bin/aura-release + tests/ |","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-iw89","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-2: Plugin registry + marketplace fix + test quality","updated_at":"2026-02-26T09:36:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T11:23:58Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:27:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-2tj\n  original_urd: aura-plugins-umi\n  original_request: aura-plugins-bj1\n  code_review_round: aura-plugins-e0j\n---\n\n## Questions and Responses\n\n### Round 1, Q1: Theme Scope (multiSelect)\n\n**Q:** Which follow-up themes should be IN SCOPE for this follow-up epic? (The 11 IMPORTANT findings deduplicate to 4 themes below)\n\n| # | Option | Description |\n|---|--------|-------------|\n| Q1.1 | Error handling (Recommended) | Bare except Exception in workflow.run() swallows TransitionError silently + bare except in mutation test. 3 findings across all 3 reviewers. Highest consensus — clear correctness gap. |\n| Q1.2 | Constraint completeness | check_all() only aggregates 5 of 22 C-* constraints + check_severity_tree() missing positive case. 4 findings. Architectural gap in constraint enforcement surface. |\n| Q1.3 | Type safety hardening | EpochState.current_role is str instead of RoleId + TYPE_CHECKING Protocol docs. 3 findings. Breaks the strongly-typed enum invariant established everywhere else. |\n| Q1.4 | Temporal integration testing | No WorkflowEnvironment sandbox test + timestamp coupling. 2 findings. AC6/AC7 currently tested via state machine only, not actual Temporal signal delivery. |\n\n**A:** ALL FOUR THEMES: Error handling, Constraint completeness, Type safety hardening, Temporal integration testing.\n\n---\n\n### Round 1, Q2: MINOR Finding Scope (singleSelect)\n\n**Q:** Should the 8+ MINOR findings (test helpers, dict typing, field naming, etc.) be included in this follow-up or deferred?\n\n| # | Option | Description |\n|---|--------|-------------|\n| Q2.1 | Bundle with IMPORTANT | Address MINOR findings alongside their IMPORTANT siblings in the same slices — less overhead, one pass. |\n| Q2.2 | Defer to later | Keep MINOR severity groups open but do not plan work for them now. Address opportunistically or in a future pass. |\n| Q2.3 | Close as won't-fix | Close MINOR severity groups — these are polish items that do not affect correctness or architecture. |\n\n**A:** Bundle with IMPORTANT. Address MINOR findings alongside their IMPORTANT siblings in the same slices — less overhead, one pass.\n\n---\n\n### Round 1, Q3: Constraint Coverage Target (singleSelect)\n\n**Q:** For constraint completeness: check_all() only covers 5/22 constraints. What coverage target do you want?\n\n| # | Option | Description |\n|---|--------|-------------|\n| Q3.1 | All 22 C-* constraints | Full coverage — check_all() aggregates every constraint defined in schema.xml. Most thorough but largest scope. |\n| Q3.2 | Transition-relevant subset | Only add constraints that are checkable against EpochState at transition time. Some C-* constraints are documentation-level and may not map to runtime checks. |\n| Q3.3 | Keep 5, document gap | Keep current 5 methods, add docstring/comment explaining which constraints are not runtime-checkable and why. Smallest scope. |\n\n**A:** All 22 C-* constraints. Full coverage — check_all() aggregates every constraint defined in schema.xml.\n\n---\n\n### Round 1, Q4: Catch-All (multiSelect)\n\n**Q:** Anything else about the follow-up scope, constraints, or priorities?\n\n| # | Option | Description |\n|---|--------|-------------|\n| Q4.1 | Must not break 475 tests | All changes must be backwards-compatible with existing test suite. |\n| Q4.2 | Minimize new dependencies | No new pip packages — only stdlib + existing deps (temporalio, pytest). |\n| Q4.3 | Nothing else | Covered everything above. |\n\n**A:** Must not break 475 tests + Minimize new dependencies. No new pip packages — only stdlib + existing deps (temporalio, pytest).\n","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-j02","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_URE: Scope follow-up for aura_protocol v1 improvements","updated_at":"2026-02-22T12:06:19Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6b727785a273bec55fdf976a2966ea02e72b661de1ad598baea3073842bc8873","created_at":"2026-02-26T16:01:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-o8va\n  review: aura-plugins-zd9p\n---\nMINOR findings for SLICE-4 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-j28y","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 MINOR","updated_at":"2026-02-26T16:02:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:10:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nverbatim_request: \"I need automated release tagging and version bumping for the Claude Code plugin.\"\nclassification:\n  scope: medium\n  complexity: medium\n  risk: low\n  domain_novelty: low\n---\n\n## User Request (Verbatim)\n\n\"I need automated release tagging and version bumping for the Claude Code plugin.\"\n\n## Phase 1 Findings\n\n### s1_1-classify\nScope: medium | Complexity: medium | Risk: low | Domain Novelty: low\n\n### s1_2-research\n- Git tag convention: vX.Y.Z (annotated tags) is industry standard\n- Semver: major, minor, patch\n- Pre-release checks: clean working tree, version consistency across files\n- Single Python script with argparse is sufficient for small projects\n- CHANGELOG: Keep a Changelog format\n- Post-release: push tag, optionally gh release create\n\n### s1_3-explore\n- 3 files need version updates: pyproject.toml, plugin.json, marketplace.json\n- marketplace.json has 2 version fields (metadata.version + plugins[0].version)\n- plugins[1].version (agentfilter) is external, must NOT be bumped\n- Currently out of sync: marketplace.json at 0.2.1, others at 0.2.2\n- No git tags exist\n- bin/ tools, flake.nix, README.md have no hardcoded versions","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-j2k","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"REQUEST: Automated release tagging and version bumping for aura-plugins","updated_at":"2026-02-22T10:40:32Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d5452f762acf95fd3d1aec7c82fe1e054479715bd0e38ed896abbab2293427cb","created_at":"2026-02-26T08:38:30Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-j3y1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 BLOCKER: Test Quality","updated_at":"2026-02-26T08:38:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:22:40Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-4 (interfaces.py) blocker-level findings.\n\n## Finding Summary\n\nNO BLOCKER findings for SLICE-4.\n\n- Tests import from production modules (aura_protocol.interfaces, aura_protocol.types).\n- SUT (Protocol interfaces, ModelId, Part types, ToolCall) are NOT mocked.\n- AC9 (isinstance structural subtyping) tested with concrete inline classes that inherit only from object — verifies no subclassing required.\n- AC10 (ModelId.parse) tested with 11 cases covering valid, invalid, edge cases, roundtrip, equality, and hashability.\n- Event stub re-exports verified as importable and frozen.\n- TYPE_CHECKING guard in interfaces.py means ConstraintViolation and EpochState are not imported at runtime — test_interfaces.py does NOT import these via aura_protocol.interfaces, which is the correct behavior.\n\nThis group is empty and will be closed immediately.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-j6h","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 BLOCKER","updated_at":"2026-02-22T02:22:40Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7e12f830c5801abc216bc35611b1138b1f2c1da5d95ce53a0143a21cdffffc23","created_at":"2026-02-26T04:30:45Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-j7k9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-2 MINOR","updated_at":"2026-02-26T04:30:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0b888d5700638c656b854034b649f43051aa350f6898981064860c8eb0cb904f","created_at":"2026-02-22T11:32:06Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT\n\n## Test Quality Review — FOLLOWUP_PROPOSAL-1 (aura-plugins-r1z)\n\n### Summary\n\nThe proposal's test strategy is sound and addresses all four IMPORTANT themes from the follow-up URD. Each acceptance criterion maps to a concrete testable outcome. DI patterns are maintained throughout. The existing test infrastructure (conftest.py, _advance_to, _make_state) is already partially in place; the proposal correctly identifies the remaining gaps and closes them.\n\n---\n\n### Axis B: Test Quality Assessment\n\n#### 1. Integration over unit — PASS\n\nThe existing tests correctly prioritize observable outcomes over internal state:\n- test_constraints.py and test_workflow.py test through the public API (EpochStateMachine, RuntimeConstraintChecker) against observable results (constraint_id, message, context).\n- AC7 (Temporal sandbox) is the only area currently using structural introspection (__temporal_signal_definition), and the proposal correctly identifies this as insufficient — it defers to WorkflowEnvironment.start_time_skipping() for actual signal delivery end-to-end.\n- The new Temporal sandbox tests (SLICE-4) assert observable outcomes: state transitions after signal, search attributes after signal. This is the correct pattern.\n\n#### 2. SUT not mocked — PASS\n\nThe proposal uses DI injection (custom specs for EpochStateMachine, custom constraint_specs for RuntimeConstraintChecker) to isolate configuration, not to mock the SUT. The ActivityEnvironment tests run the actual activity functions in-process. WorkflowEnvironment.start_time_skipping() runs the actual EpochWorkflow. No proposal change mocks the SUT itself.\n\n#### 3. Shared fixtures — PASS with one observation\n\nThe proposal promotes _advance_to and _make_state to conftest.py. This is correct — the current code has identical implementations duplicated in test_state_machine.py (lines 41-85) and test_workflow.py (lines 74-109), which the proposal correctly flags as finding sk6/0yd. The conftest.py already exists and has sm, sm_at_p4 fixtures; expanding it with the shared helpers is the right structural move. \n\nOne observation (not a blocker): the proposal says \"Import _advance_to from conftest.py (remove local duplicate)\" — but conftest.py fixtures use pytest fixture injection, while _advance_to is a module-level helper function called directly, not a fixture. The architecture should clarify whether _advance_to becomes a plain importable function in conftest.py or a pytest fixture. Either works; the former is simpler and consistent with the existing test_constraints.py pattern (_make_state, _make_checker as plain functions). This is an implementation detail that the architect should confirm in SLICE-1 but does not block the proposal.\n\n#### 4. Assert observable outcomes, not internal state — PASS\n\nThe new ACs all target observable outputs:\n- AC1 (current_role is RoleId): asserts type(state.current_role) is RoleId — a public field type, not internal mechanism.\n- AC2 (timestamp decoupling): asserts TransitionRecord.timestamp == custom_ts — observable record field.\n- AC5 (severity tree positive enforcement): asserts check_severity_tree returns ConstraintViolation — public method return value.\n- AC6 (failed transition audit): asserts transition_history contains a record with condition_met=\"FAILED: ...\" — observable audit field.\n- AC7 (Temporal sandbox): asserts state.current_phase after signal, search attributes after signal — externally visible state.\n- AC8 (Protocol self-check): asserts isinstance(RuntimeConstraintChecker(), ConstraintValidatorInterface) — public API contract.\n\nAll new assertions are over public observable state, not workflow internals.\n\n#### 5. Acceptance criteria map to testable outcomes — PASS\n\nEach AC has a clear Given/When/Then with a falsifiable assertion:\n\n| AC | Given | When | Then (testable) |\n|----|-------|------|-----------------|\n| AC1 | EpochState construction | accessed | type is RoleId (not str) |\n| AC2 | advance(timestamp=custom) | transition succeeds | record.timestamp == custom |\n| AC3 | P10 with 2/3 ACCEPT | advance(P11) | TransitionError raised |\n| AC4 | check_all(state) | called | runs 7+ checks (count verifiable) |\n| AC5 | P10 without severity_groups | check_severity_tree | ConstraintViolation returned |\n| AC6 | invalid advance in workflow | TransitionError caught | record in transition_history |\n| AC7 | WorkflowEnvironment sandbox | advance_phase signal | state transitions end-to-end |\n| AC8 | RuntimeConstraintChecker | isinstance check | True |\n| AC9 | all changes | existing tests run | 475+ pass |\n\nAC4 (\"runs 7+ checks\") is verifiable via assertion on len(violations) for states known to violate all 7, or via inspecting the aggregation directly. The proposal should include a test asserting check_all returns violations for a state that violates all 7 state-checkable constraints, not just that it \"runs more\" — but this is an implementation concern for SLICE-2, not a proposal-level gap.\n\n#### 6. DI patterns maintained — PASS\n\nThe proposal explicitly preserves all DI injection points:\n- EpochStateMachine(specs=custom_specs) — unchanged\n- RuntimeConstraintChecker(constraint_specs=custom, handoff_specs=custom) — unchanged\n- New advance(timestamp=custom_ts) optional param — backwards-compatible with None fallback\n- WorkflowEnvironment.start_time_skipping() — the correct DI mechanism for Temporal workflow testing\n\nThe test for TestDependencyInjection in test_state_machine.py (lines 615-663) remains intact and the proposal does not touch it.\n\n#### 7. Coverage of identified gaps — PASS\n\nThe proposal covers all gaps from the follow-up URD:\n- FR1 (error handling): AC6 + failed transition recording in transition_history — verifiable\n- FR2 (constraint completeness): AC4 + AC5 — check_all 7+ checks + severity_tree positive case\n- FR3 (type safety): AC1 + AC8 — RoleId field type + Protocol isinstance\n- FR4 (Temporal sandbox): AC7 — WorkflowEnvironment end-to-end\n\nMINOR bundled cleanup (conftest dedup, dict[str,Any] typing, _SAME_ACTOR constant, etc.) is addressed within each slice alongside its IMPORTANT sibling — this is correct per the URD's bundling requirement.\n\n#### 8. One gap noted — not a blocker\n\nThe existing test_workflow.py has a `TestLastErrorObservability` class that manually sets `sm.state.last_error = str(e)` inside the test rather than calling through the workflow (lines 638-640, 658-660). With SLICE-4's change (workflow catches TransitionError and records in transition_history), the new test for AC6 should be a Temporal sandbox test that sends an invalid advance_phase signal and then queries transition_history — not a state-machine-level simulation. The proposal specifies this correctly in the SLICE-4 changes. The existing last_error tests can remain as regression coverage.\n\n---\n\n### Validation Checklist Assessment\n\nAll 16 checklist items map directly to the ACs and are verifiable:\n- Items 1-4: State machine tests (SLICE-1)\n- Items 5-8: Constraint tests (SLICE-2)\n- Items 9-11: Interface tests (SLICE-3)\n- Items 12-14: Workflow sandbox tests (SLICE-4)\n- Items 15-16: Cross-cutting (all slices)\n\nNo checklist item is ambiguous or untestable.\n\n---\n\n### Conclusion\n\nVOTE: ACCEPT — Test strategy is integration-first, DI patterns are maintained, all 9 ACs map to observable falsifiable assertions, and the conftest.py consolidation correctly addresses the shared fixture gap. The minor implementation question about pytest fixture vs. plain function for _advance_to in conftest.py can be resolved at SLICE-1 implementation time.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-j9v","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_PROPOSAL-1-REVIEW-B-1: aura_protocol v1 follow-up — error handling, constraint coverage, type safety, Temporal sandbox","updated_at":"2026-02-22T17:24:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d9947bc43cf7b81a1578fa1c5768397904a76a73abe85450ae2691c55d2572bd","created_at":"2026-02-23T04:24:19Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer A on SLICE-2. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jb3m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 MINOR","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:21:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:00:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - The design demonstrates proportionate complexity across all dimensions.\n\n## Axis C (Elegance) Assessment\n\n### Module Decomposition (5 modules): APPROPRIATE\nThe 5-module split (types, state_machine, constraints, workflow, interfaces) maps to 5 orthogonal concerns in the problem domain. No redundancy, no missing axis. Minor observation: A2A content types (TextPart/FilePart/DataPart/ToolCall/ModelId) in interfaces.py are data types, not interfaces — they could live in types.py. Not a structural issue.\n\n### Typed Enum Approach: EXACTLY RIGHT\nstr Enum provides forward-compatible serialization (strings serialize trivially to JSON/Temporal payloads) while maintaining compile-time type safety. The transition table as dict[PhaseId, PhaseSpec] with frozen dataclasses matches the fixed 12-phase topology without library overhead.\n\n### Integration Interfaces (typing.Protocol): CORRECT CHOICE\nruntime_checkable Protocol is the right abstraction for cross-repo integration where we don't control the other side. Avoids forcing inheritance. 4 Protocol definitions with zero implementation weight — just contracts.\n\n### A2A Content Types Subset: WELL-SCOPED\nTextPart/FilePart/DataPart/Part union/ToolCall/ModelId covers what v1 needs per URD R5. Omitting ResourceLinkPart is appropriate (MCP-specific, not needed for orchestration). ModelId with parse()/str() is clean.\n\n### Package Layout: CONSISTENT\nscripts/aura_protocol/ respects existing pythonpath = [\"scripts\"] in pyproject.toml. Test files follow existing flat tests/ convention.\n\n### Premature Abstractions: MINIMAL\nHandoffSpec and SecurityGate are the most \"premature\" elements, but they are lightweight declarations (frozen dataclass, Protocol) with zero implementation burden. Acceptable as forward-looking documentation.\n\n### Under-Specification: TWO MINOR ITEMS\n1. Event types for integration protocols (PhaseTransitionEvent, ConstraintCheckEvent, ReviewVoteEvent, AuditEvent, ToolPermissionRequest, PermissionDecision) are referenced but not defined. Should be listed as stub dataclasses.\n2. EpochState.review_votes key format is ambiguous — should clarify that axis letter (\"A\"/\"B\"/\"C\") is the canonical key (matches PROPOSAL-1-REVIEW-{axis}-{round} naming convention).\n\n### Conclusion\nNo over-engineering: no generic FSM library, no schema parser for v1, no Pydantic dependency. No under-engineering: frozen dataclasses for immutability, runtime_checkable for structural subtyping, integration test against schema.xml for drift detection. Complexity is proportional to the innate 12-phase, 5-role, 3-domain protocol structure. The two under-specification items are minor enough to resolve during implementation (L1: types layer) rather than requiring a proposal revision.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jd9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-C-1: aura protocol engine v1","updated_at":"2026-02-22T04:21:05Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"00e811b0de3a8b449dcd6ac666afddac3ab20af5aa00c80daae5ccea85d45b8f","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jf3l","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-2 MINOR","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"304c240107da4212b858169c46039b56a3d8041fbec81cde3dad05482f03e557","created_at":"2026-02-26T15:33:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Define SerializableTransition, SerializablePhaseSpec (list[RoleId], list[SerializableTransition]), from_spec(), PhaseInput(epoch_id, phase_spec), PhaseResult. All frozen, Temporal-serializable.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jfgi","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-1-L1: Types — SerializablePhaseSpec + PhaseInput + PhaseResult","updated_at":"2026-02-26T18:34:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T10:12:58Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"794c5d92ba59151877d637434ff55856e2417cca6c6f7232f83138846791af78","created_at":"2026-02-23T09:49:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  uat: aura-plugins-sm9c\n  original_finding: aura-plugins-wt8f\n---\ngen_skills.py currently calls _constraints_for_role() which returns list(CONSTRAINT_SPECS.values()) — all 23 constraints for every role. This ignores the role-scoping already implemented in context_injection.py.\n\n## Fix\n- gen_skills.py: Replace _constraints_for_role() with get_role_context(role_id).constraints\n- skill_header.j2 template may need updating if ConstraintContext fields change (see UAT-BLOCKER-2)\n- gen_skills.py must import get_role_context from context_injection\n\n## Expected outcome\n- Supervisor SKILL.md header: 15 role-scoped constraints\n- Worker SKILL.md header: 7 role-scoped constraints\n- Not all 23 for every role","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jify","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT-BLOCKER-3: gen_skills.py must use get_role_context() not all CONSTRAINT_SPECS","updated_at":"2026-02-23T10:12:58Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c4b10b46900c29664237cd869a543476fd3f9d72ecfbdc0fa11f54aff502e853","created_at":"2026-02-22T12:52:56Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"_FORWARD_PHASES at line 35-49 of conftest.py is a manually-maintained ordered list of PhaseId values. It is subtly different from just iterating PHASE_SPECS.keys() because it encodes forward-only ordering. A single-line comment explaining why this is manually listed (rather than derived from PHASE_SPECS) would prevent future maintainers from 'fixing' it to a dict key iteration and breaking _advance_to.\n\nFix: Add a comment like '# Manually ordered — must match the canonical forward path; not derivable from PHASE_SPECS dict order' above the list.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jj4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1: _FORWARD_PHASES list in conftest.py lacks derivation comment","updated_at":"2026-02-22T17:30:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:08Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:23:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-e19\n---\n\n## Review Findings (all resolved)\n\n### BLOCKER (fixed)\n1. rollback() had `or True` guard causing git checkout on non-existent files → removed\n\n### IMPORTANT (fixed)\n2. --sync + --no-commit leaves files dirty → added warning message\n3. cmd_check drift marker compared to first dict value → now uses pyproject.toml as canonical reference\n4. write_pyproject_version raised false RuntimeError on re-run → switched to pre-check regex match\n\n### MINOR (acknowledged)\n5. commits_since drops commit bodies/trailers → documented limitation, spec does not require trailers\n6. working_tree_dirty drops old rename path → extremely unlikely scenario\n\nAll BLOCKER and IMPORTANT findings resolved in the implementation.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jjo","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW: Code review for bin/aura-release","updated_at":"2026-02-22T10:40:08Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"22e2ea6e3bf6ea1e62c98b9d3a743b2eaf4f754b5e21ce305cad153d72488f18","created_at":"2026-02-26T23:47:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-cz2t\n  review: aura-plugins-uvgb\n  files:\n    - tests/test_workflow.py (TestReviewPhaseWorkflowSignalLogic, lines 1353-1466)\n---\n## Finding\n\nTestReviewPhaseWorkflowSignalLogic manually creates event loops to drive async signal coroutines:\n\n```python\ndef test_submit_vote_accumulates_votes(self) -\u003e None:\n    wf = ReviewPhaseWorkflow()\n    import asyncio as _asyncio\n    loop = _asyncio.new_event_loop()\n    try:\n        loop.run_until_complete(\n            wf.submit_vote(...)\n        )\n    finally:\n        loop.close()\n    ...\n\ndef test_submit_vote_overwrites_duplicate_axis(self) -\u003e None:\n    wf = ReviewPhaseWorkflow()\n    import asyncio as _asyncio\n    loop = _asyncio.new_event_loop()\n    ...\n```\n\nThis is necessary because the test methods are not marked @pytest.mark.asyncio, so they cannot directly await async methods. However, creating new event loops manually is fragile:\n1. Python 3.10+ deprecates asyncio.get_event_loop() in non-async contexts; asyncio.new_event_loop() is fine but verbose.\n2. The tests could simply be marked @pytest.mark.asyncio and use await directly, which is the codebase's established pattern (every other async test uses @pytest.mark.asyncio).\n\nThe third test (test_vote_completeness_check) creates TWO separate event loops for two separate signal calls, adding complexity and potential for subtle state leaks if loop2.close() errors.\n\nAlso note: the inline 'import asyncio as _asyncio' inside each test method body is inconsistent with the top-level 'import asyncio' on line 36 of the file.\n\n## Fix\n\nMark all three methods @pytest.mark.asyncio and convert them to async def with direct await:\n\n```python\n@pytest.mark.asyncio\nasync def test_submit_vote_accumulates_votes(self) -\u003e None:\n    wf = ReviewPhaseWorkflow()\n    await wf.submit_vote(ReviewVoteSignal(...))\n    await wf.submit_vote(ReviewVoteSignal(...))\n    assert wf._votes[ReviewAxis.CORRECTNESS.value] == VoteType.ACCEPT.value\n    assert wf._votes[ReviewAxis.TEST_QUALITY.value] == VoteType.REVISE.value\n```\n\nThis removes the manual loop management, the inline import, and the risk of partially-closed loops.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jjy8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: TestReviewPhaseWorkflowSignalLogic uses asyncio.new_event_loop() directly instead of @pytest.mark.asyncio","updated_at":"2026-02-26T23:47:57Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:41Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a12e1ce39a0b7e38fa23565809a7809659009140e8d3806816453b1d4e5acad2","created_at":"2026-02-26T03:31:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  reviewer: cartographer-c\n  round: 1\n---\nBLOCKER findings from Cartographer C (Elegance) on SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jkcg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 BLOCKER","updated_at":"2026-02-26T03:31:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T05:32:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f26a14afa9ecfec05b7aacd97548af58e38bf6540ade595b7895e19f56b8d366","created_at":"2026-02-27T05:32:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  urd: aura-plugins-gox3\n  followup_epic: aura-plugins-hgki\n  impl_plan: aura-plugins-q00q\n---\n## Components Demonstrated\n\n### Component 1: Child Workflows (SliceWorkflow + ReviewPhaseWorkflow)\n**Code shown:**\n- _run_p9_slices() fail-fast fan-out with workflow.wait(FIRST_EXCEPTION)\n- ReviewPhaseWorkflow: signal-driven, workflow.wait_condition() for 3-axis vote\n- SliceWorkflow: R12 stub returning success\n\n**Q1: Slice progress reporting**\nOptions: Pass/fail only (current) | Heartbeat progress | Signal-based progress\n**User response:** Signal-based progress — slices signal parent with stage updates\n\n**Q2: ReviewPhaseWorkflow vote storage (str vs enum)**\nOptions: str keys are correct | Use ReviewAxis/VoteType directly\n**User response:** Use ReviewAxis/VoteType directly — trust StrEnum serialization\n\n**Q3: Additional feedback**\n**User response:** No additional feedback\n\n---\n\n### Component 2: __init__.py Cleanups + Nix Packaging\n**Shown:** Import ordering fixes, audit_activities NOT re-exported docstring, writeShellApplication worker package, temporal-service.nix home-manager module\n\n**Q1: Temporal dev server persistence default**\nOptions: In-memory default (current) | Persistent SQLite default | Depends on variant\n**User response:** Persistent SQLite default\n\n**Q2: Worker in packages.default**\nOptions: Separate only (current) | Include in default\n**User response:** Include in default\n\n**Q3: Additional feedback**\n**User response:** \"Should rename the worker script to aura-ctl\" → then corrected: \"Crap, actually rename it to auractl. There should be an auractl and an aurad (aura daemon) that we'll need to manage.\"\n\n---\n\n### Component 3: docs/worker.md\n**Shown:** 509-line combined dev+ops guide structure (architecture, module layout, activities, DI, testing, CLI, systemd)\n\n**Q1: Doc rename**\nOptions: Rename to docs/aura-ctl.md | Keep docs/worker.md\n**User response:** Rename to docs/aura-ctl.md (will become docs/auractl.md per naming correction)\n\n**Q2: Roadmap section**\nOptions: As-built only (current) | Add roadmap section\n**User response:** Add roadmap section — map R12 stubs to planned evolution\n\n**Q3: Additional feedback**\n**User response:** \"Crap, actually rename it to auractl. There should be an auractl and an aurad (aura daemon) that we'll need to manage.\"\n\n---\n\n### Component 4: Test Fixtures + Combinatorial Testing\n**Shown:** protocol.yaml (4 axes: phase_specs, epoch_states, vote_combinations, audit_events), ProtocolFixture class, 152 new tests\n\n**Q1: Constraint violation axis**\nOptions: Current axes are sufficient | Add constraint violation axis\n**User response:** Add constraint violation axis — explicit C-* constraint violation fixtures\n\n**Q2: Loading strategy**\nOptions: Eager singleton (current) | Lazy per-axis\n**User response:** Eager singleton (current) — YAML is small, optimize later if needed\n\n**Q3: Additional feedback**\n**User response:** No additional feedback\n\n---\n\n### Component 5: Type Fixes (role filter + review_votes)\n**Shown:** query_audit_events role parameter addition, EpochState.review_votes dict[str, VoteType] → dict[ReviewAxis, VoteType]\n\n**Q1: More str→enum opportunities**\n**User response:** \"Not sure. Will have to see.\"\n\n**Q2: Additional feedback**\n**User response:** No additional feedback\n\n---\n\n## UAT Action Items (tracked as follow-up)\n1. Rename worker → auractl, introduce aurad concept\n2. Persistent SQLite default for temporal-service.nix\n3. Include worker (auractl) in packages.default\n4. Rename docs/worker.md → docs/auractl.md + update terminology\n5. Add roadmap section to docs\n6. Signal-based slice progress reporting (SliceWorkflow)\n7. Use ReviewAxis/VoteType directly in ReviewPhaseWorkflow._votes\n8. Add constraint violation axis to protocol.yaml fixtures\n\n## Final Decision\nACCEPT — proceed to Phase 12 (landing). UAT findings tracked as follow-up.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jnod","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_UAT: Implementation acceptance for v3 Temporal followup","updated_at":"2026-02-27T05:32:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:46Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"90a0fcb31848080d2bf566f89ea3c36b28fb89a493b06f06c05e29d3ae22077f","created_at":"2026-02-26T03:31:25Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-kg25\n  reviewer: cartographer-b\n  round: 1\n---\nBLOCKER findings from Cartographer B (Test quality) on SLICE-4.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jumq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T03:31:46Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:23:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\n### Location\n`scripts/aura_protocol/constraints.py`, `check_severity_tree()` method (lines 260-301).\n\n### Description\nThe proposal's validation checklist specifies:\n\u003e C-severity-eager: 3 groups must exist for p10\n\nThe URD (aura-plugins-umi) requirement R1 states the constraint validator should enforce workflow state transitions.\n\nThe CONSTRAINT_SPECS correctly defines C-severity-eager as:\n\u003e given: code review round (p10 only), when: starting review, then: ALWAYS create 3 severity group tasks (BLOCKER, IMPORTANT, MINOR) immediately\n\nHowever, `check_severity_tree()` for `PhaseId.P10_CODE_REVIEW` returns an **empty list** (no violation). The implementation documents this as intentional:\n\n```python\ndef test_p10_returns_empty(self) -\u003e None:\n    '''p10 is the correct phase for severity trees — no violation from check_severity_tree.'''\n    # check_severity_tree doesn't mandate creation — it prevents severity trees in p4\n    violations = checker.check_severity_tree(state)\n    assert violations == []\n```\n\n### Problem\nThe method is named `check_severity_tree` and belongs to the class `RuntimeConstraintChecker`. C-severity-eager mandates CREATION of 3 groups at p10. The implementation only prevents severity trees at p4 (C-severity-not-plan). The positive check — 'we ARE at p10, do the 3 groups exist?' — is entirely absent and delegated to 'external enforcement.'\n\nEpochState has no `severity_groups` field, so there is no way for the runtime checker to enforce C-severity-eager even if it wanted to. This is the root gap.\n\n### Risk\nIMPORTANT (not BLOCKER) because: (1) the code comment in the test accurately documents this design limitation; (2) reviewers using the constraint checker at p10 will not be alerted if they forget to create the 3 severity groups; (3) AC5 (RuntimeConstraintChecker returns ConstraintViolation for violations) is met for all OTHER constraints.\n\n### Suggestion\nAdd `severity_groups: frozenset[str] = field(default_factory=frozenset)` to `EpochState` in state_machine.py. Then `check_severity_tree` at p10 can check whether all 3 required groups are present. This would allow the constraint system to enforce C-severity-eager programmatically and makes the check complete.\n\nAlternatively, document explicitly that C-severity-eager is a procedural (process-level) constraint enforced only by the reviewer skill instructions, not by the runtime checker — but this should be called out in the constraint spec itself.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jwb","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 IMPORTANT: check_severity_tree does not enforce C-severity-eager (p10 must have 3 groups)","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T10:13:03Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d6b15fa57fbcd478f44502d068ca0377b7028453ae7cc0846f53bb67637326ba","created_at":"2026-02-23T10:03:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from impl UAT Round 3 (Component 5).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jwlp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT-ROUND-3 BLOCKER: ProcedureStep + template fixes","updated_at":"2026-02-23T10:13:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"97f20dba53c97e1a7307b8a6bb79efeba27df5db79d84e085c148814e88f4f67","created_at":"2026-02-26T03:31:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  reviewer: cartographer-c\n  round: 1\n---\n## Issue\n\n`gen_skills.py:_constraints_for_role()` (line 99) uses a lazy import:\n\n```python\ndef _constraints_for_role(role_id: RoleId) -\u003e list[ConstraintContext]:\n    from aura_protocol.context_injection import get_role_context\n    return list(get_role_context(role_id).constraints)\n```\n\nThere is no circular import risk here:\n- gen_skills.py → aura_protocol.types (module-level)\n- context_injection.py → aura_protocol.types (module-level)\n- Neither imports gen_skills.py\n- __init__.py does not import gen_skills\n\nA module-level import would be clearer and avoid per-call import overhead.\n\n## Concrete Fix (deferred)\n\nMove the import to module-level alongside other imports:\n\n```python\nfrom aura_protocol.context_injection import get_role_context\n```\n\nAnd simplify the function body.\n\n## Severity Rationale\n\nMINOR: The lazy import works correctly and doesn't cause bugs. It slightly obscures the module dependency graph and adds negligible per-call overhead.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jwoo","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"MINOR: Unnecessary lazy import in _constraints_for_role() in gen_skills.py","updated_at":"2026-02-26T09:38:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:49:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"443450de8e102cfba88c7983e5bab24a2be89c240840182eacb2c20cf3a9171a","created_at":"2026-02-26T08:39:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  impl_plan: aura-plugins-uvfm\n---\n## Scope\nAdd inline comments at the point where next-state is handled in both files.\n\nIn scripts/aura_protocol/gen_schema.py:\n  # next-state is optional — only emitted when next_state is not None\n  if step.next_state is not None:\n      step_el.set('next-state', step.next_state)\n\nIn scripts/aura_protocol/schema_parser.py:\n  # next-state is optional — attribute may be absent; None if not present\n  next_state_raw = step_el.get('next-state')\n\n## Files\n- scripts/aura_protocol/gen_schema.py\n- scripts/aura_protocol/schema_parser.py\n\n## Acceptance\nAC-D3-1: inline comments present in both files at the next-state handling point","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jwoz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-L4: D3 — document next-state optionality in gen_schema.py + schema_parser.py","updated_at":"2026-02-26T08:49:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"072c69a8fd58035f235c53c2755da4d4e60555cacb29d775639b62cbbf2d0d3d","created_at":"2026-02-26T16:02:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"scripts/aura_protocol/interfaces.py:242: FilePart has its own mime_type field while the nested FileWithUri (line 223) also has mime_type. This is ambiguous — which takes precedence? The A2A spec uses the nested object's mime_type. Either remove FilePart.mime_type or document the override semantics.\n\nFile: scripts/aura_protocol/interfaces.py:242\nSlice: aura-plugins-vhtx (SLICE-2)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-jxv4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: FilePart redundant mime_type field (SLICE-2)","updated_at":"2026-02-26T18:40:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d76b76ffad5f51a74430c29e88a6a58b1fff1c8511d0922e6cce9f15e5691fb3","created_at":"2026-02-26T03:31:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-kg25\n  reviewer: cartographer-b\n  round: 1\n---\nIMPORTANT findings from Cartographer B (Test quality) on SLICE-4.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-k1m9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T09:38:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7ac5a156fe90131519fd58ddbf48cc3f044215c6235e42057af9f84018f44095","created_at":"2026-02-23T13:24:33Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  reviewer: C (Elegance)\n  round: 1\n---\nMINOR findings from Reviewer C on FOLLOWUP epic z8ga.\n\n## C-MINOR-1: _build_constraint_role_refs and _build_constraint_phase_refs lack docstrings\n- File: gen_schema.py L74, L88\n- Only builder functions without docstrings; all others have them\n\n## C-MINOR-2: Substep ID parsed from label_ref via string splitting\n- File: gen_schema.py L140-144\n- Fragile split-on-'s' heuristic; no structural validation\n\n## C-MINOR-3: TestStrictUndefined tests Jinja2 library (DEDUP: also A-IMPORTANT-2, B-IMPORTANT-1)\n- See A-IMPORTANT-2\n\n## C-MINOR-4: Redundant local import in AC10 pipeline test\n- File: tests/test_gen_schema.py L739\n- RoleId already imported at module level","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-k637","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-C-1 MINOR","updated_at":"2026-02-23T13:24:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-23T02:57:42Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"182004210a1ce154b47f74d11868b5220b938472f4ac685da6c1cbfaa65c67f5","created_at":"2026-02-22T23:26:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-mg6h\n  urd: aura-plugins-w07o\n  followup_urd: aura-plugins-s6i\n  prior_review_b_r2: aura-plugins-qt1p\n---\nVOTE: ACCEPT — Test strategy is comprehensive and well-grounded in existing project conventions. All 7 review focus areas are satisfied.\n\n## Review Summary (Axis B — Test Quality)\n\n### 1. Test Strategy Sufficiency\n\nThe 4 new test files (test_schema_parser.py, test_gen_schema.py, test_gen_skills.py, test_context_injection.py) plus extensions to test_schema_types_sync.py provide complete coverage mapped to all new modules. Each new module has a dedicated test file. The mapping is 1:1 with module boundaries (schema_parser ↔ test_schema_parser, gen_schema ↔ test_gen_schema, gen_skills ↔ test_gen_skills, context_injection ↔ test_context_injection). This aligns with the existing pattern (constraints.py ↔ test_constraints.py, state_machine.py ↔ test_state_machine.py). No module is untested.\n\nASSESSMENT: ADEQUATE.\n\n### 2. Error Path Coverage\n\nAC1a specifies 3+ error-path tests for SchemaParseError with named failure inputs: malformed XML (truncated), missing required sections (e.g. `\u003cphases\u003e`), and missing required attributes. SchemaParseError is defined as a proper exception class with a clear docstring. The validation checklist has a dedicated entry.\n\nAC4a specifies three distinct marker edge cases for MarkerError: (1) missing END marker → raise, (2) missing both markers → generate full content (clean path), (3) reversed markers → raise. The \"should not silently discard body on any boundary error\" invariant is the correct safety clause. MarkerError is defined as a ValueError subclass.\n\nTogether these are 6+ named error scenarios across 2 error types. The mutation-based approach from test_validate_schema.py provides a strong conceptual model that test_schema_parser.py can follow (inject bad inputs, assert specific exception with correct type).\n\nASSESSMENT: ADEQUATE.\n\n### 3. Round-Trip Test Design\n\nAC3 specifies \"field-by-field comparison\" and the validation checklist says \"(not count-only)\". The existing test_schema_types_sync.py at lines 294-308 (TestConstraintSpecsMatchSchema.test_constraint_given_when_then_match_schema) already demonstrates the correct pattern: iterate schema elements, look up the Python spec by ID, and assert each field individually (given, when, then). This is the exact model for AC3.\n\nThe proposal names specific fields per entity type in AC3: ConstraintSpec.given/when/then/should_not, HandoffSpec.required_fields, SubstepSpec.startup_sequence. These are concrete anchors that prevent count-only assertions. The test_gen_schema round-trip direction is: types.py → gen_schema → parse_schema → field-level comparison, which is a true integration test of two new modules working together. The prior Round 2 review B (aura-plugins-qt1p) correctly identified that AC3 should cover should_not (missing from the existing test_schema_types_sync.py pattern) — and the proposal now includes it explicitly.\n\nASSESSMENT: ADEQUATE. The model is demonstrated in the existing codebase and the proposal correctly extends it.\n\n### 4. Absence Testing\n\nAC5a names concrete constraint IDs: C-worker-gates must NOT appear in get_role_context(SUPERVISOR); C-supervisor-no-impl must NOT appear in get_role_context(WORKER). AC6a: C-severity-eager must NOT appear in get_phase_context(P4_REVIEW); C-review-consensus must NOT appear in get_phase_context(P9_SLICE).\n\nThese are precise, falsifiable assertions against specific string identifiers. They test the SUT's output (the returned frozenset), not internal state. They follow the project's convention of asserting observable outcomes. The validation checklist has two dedicated entries (\"get_role_context does NOT include irrelevant constraints\", \"get_phase_context does NOT include irrelevant constraints\").\n\nOne observation: these absence tests rely on the static _ROLE_CONSTRAINTS and _PHASE_CONSTRAINTS dicts in context_injection.py being correctly populated. Since these dicts are hand-authored (not derived from schema.xml structurally), the tests need to be robust enough that they catch errors in that hand-authored data. The named constraint IDs (C-worker-gates, C-supervisor-no-impl) provide exactly the right anchors.\n\nASSESSMENT: ADEQUATE.\n\n### 5. Regression Safety\n\nAC7 states \"all 554 existing tests pass\" and AC11 (Temporal Isolation) states \"all sandbox tests pass unchanged\" with an explicit enumeration of the 6 Temporal-serialized types that must NOT be modified (EpochState, TransitionRecord, EpochInput, EpochResult, PhaseAdvanceSignal, ReviewVoteSignal). The \"unchanged\" files list explicitly includes state_machine.py, constraints.py, workflow.py, interfaces.py — all of which have comprehensive existing tests (test_state_machine.py ~120, test_constraints.py ~180, test_workflow.py ~60, test_interfaces.py ~40).\n\nThe HandoffSpec.content_level str→ContentLevel change (the one non-additive modification) is correctly called out in the proposal as requiring test_schema_types_sync.py to update (line 346 comparison `spec.content_level == h.get(\"content-level\")` will need to compare the enum value string, not the enum itself).\n\nOne specific gap: the proposal does not explicitly call out that test_schema_types_sync.py's TestHandoffSpecsMatchSchema.test_handoff_roles_match_schema will need updating for the content_level field after the str→ContentLevel change. This is a valid implementation concern but it is traceable from the validation checklist (\"test_schema_types_sync.py covers all new canonical dicts\") and the \"modified files\" table (test_schema_types_sync.py listed as modified). A worker reading both sections can connect the dots.\n\nASSESSMENT: ADEQUATE. The regression strategy is sound. The one gap (content_level comparison update) is traceable from proposal text.\n\n### 6. Integration Test Coverage\n\nAC10 specifies the end-to-end pipeline test: parse_schema → populate types → gen_schema → validate_schema → gen_skills. This exercises all 4 new modules in sequence plus the existing validate_schema.py. This is a true integration test — not a mock-based test — because it runs the actual parsing, generation, and validation logic. It follows the project's convention (test_validate_schema.py already tests validate_schema.py via both the library API and subprocess CLI).\n\nThe prior Round 2 Review B (aura-plugins-qt1p) noted the \"pipeline direction ambiguity\" in AC10 (bootstrap vs. steady-state) as an IMPORTANT finding. PROPOSAL-3 does not resolve this ambiguity — AC10 still reads \"parse_schema → populate types → gen_schema → validate_schema → gen_skills\" which mixes bootstrap (schema→Python) and steady-state (Python→schema) steps. The validation checklist uses the slightly different phrasing \"parse → gen_schema → validate → gen_skills\" which omits \"populate types\".\n\nThis is the same IMPORTANT finding from Round 2 — not a new BLOCKER. Workers can resolve it by reading both documents together, and the checklist phrasing is the more actionable guide. Both pipeline directions are valid to test.\n\nASSESSMENT: ADEQUATE for a plan-review vote. The ambiguity is pre-existing, documented, and not a blocker.\n\n### 7. Existing Test Pattern Alignment\n\nReading conftest.py and test_schema_types_sync.py reveals the following conventions:\n- Class-per-concern grouping (TestPhaseIdMatchesSchema, TestConstraintSpecsMatchSchema, etc.)\n- Module-scoped fixtures for expensive resources (schema_root fixture with scope=\"module\")\n- Field-level assertions with informative error messages (f-string showing both sides)\n- pytest.mark.parametrize for combinatorial coverage (mutation tests, template rendering across 4 roles)\n- from __future__ import annotations at the top\n- Absolute Path construction via Path(__file__).resolve().parent\n\nThe proposal's test design aligns well with these conventions:\n- AC8 uses pytest.mark.parametrize over 4 role templates (aligns with TestMutationDetection pattern)\n- AC3 round-trip uses field-level assertions (aligns with test_constraint_given_when_then_match_schema pattern)\n- test_schema_parser.py error paths can use SchemaFixture-style mutation injection\n- The module-scoped schema_root fixture from test_schema_types_sync.py should be shared or replicated in test_gen_schema.py — the proposal does not explicitly specify this, but it is implied by the existing pattern\n\nOne alignment gap: the proposal does not specify whether the new test files should use module-scoped fixtures for the parse_schema() call (expensive XML parse). This is a minor implementation detail the worker should follow from convention, not a plan-level concern.\n\nASSESSMENT: ADEQUATE. Proposal aligns with existing conventions.\n\n## Verdict\n\nAll 7 review focus areas are satisfied. The test strategy is comprehensive, well-anchored in named failure inputs and named constraint IDs, field-level comparison is modelled on existing code, regression safety is explicitly scoped, and integration coverage exercises all 4 new modules end-to-end. No new blockers identified beyond the pre-existing AC10 direction ambiguity (already documented in prior Round 2 review as IMPORTANT, not BLOCKER).\n\nVOTE: ACCEPT","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-k7de","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-3-REVIEW-B-1: Schema-driven v2 — Test Quality","updated_at":"2026-02-23T02:57:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-2","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:44:04Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"148c2305a2ffaf2eaf40e1d7f4a78d86de79c260501e67dc674f12c1428b6f24","created_at":"2026-02-26T08:37:59Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-uvfm\n  followup_urd: aura-plugins-wloc\n  proposal: aura-plugins-9e68\n---\n## Findings in Scope\n- A1 (aura-plugins-c5nx): StrictUndefined test creates own Environment — fix to call generate_skill()\n- B1: test_schema_types_sync.py: add command/context value assertions for ProcedureStep\n- B2: test_gen_skills.py: add test asserting backtick command and em-dash italic context in rendered output\n- B3: test_gen_schema.py round-trip: extend to assert all 6 ProcedureStep fields\n- B4: test_schema_types_sync.py: fix test_supervisor_steps_from_schema docstring vs reality\n\n## Files Owned\n- tests/test_gen_skills.py       (A1, B2)\n- tests/test_schema_types_sync.py (B1, B4)\n- tests/test_gen_schema.py        (B3)\n\n## CRITICAL — Public interface only\nTests must target public interfaces and observable behaviour only.\n- No inspecting jinja2.Environment directly\n- No accessing private template variables\n- All assertions via public API: generate_skill(), PROCEDURE_STEPS, parsed_spec fixture\n\n## Key Risk (A1)\nThe template file MUST be named skill_header.j2 — this is the exact filename loaded by _render_header() via env.get_template('skill_header.j2'). Any other filename causes TemplateNotFound instead of UndefinedError. SKILL.md must also have valid BEGIN/END markers.\n\n## Acceptance Criteria\nAC-A1-1: Given (a) temp template dir with skill_header.j2 containing {{ undefined_var }}, AND (b) valid SKILL.md with BEGIN/END markers, when generate_skill(RoleId.SUPERVISOR, skill_path, template_dir=\u003ctemp dir\u003e) is called, then jinja2.UndefinedError is raised. Should not create jinja2.Environment in test body; must go through generate_skill().\n\nAC-B1-1: Given PROCEDURE_STEPS[RoleId.SUPERVISOR], when values are inspected directly, then at least one step has .command == 'Skill(/aura:supervisor)' and at least one step has non-None .context string. Should not inspect internal types.py private variables or go through XML.\n\nAC-B2-1: Given a valid SKILL.md with markers, when generate_skill(RoleId.SUPERVISOR, ..., diff=False, write=False) is called, then the returned string contains backtick pattern (`...`) and em-dash italic pattern ( — _..._). Should not inspect template source code or Jinja2 AST.\n\nAC-B3-1 (supervisor 6-field round-trip): Given parsed_spec fixture, when procedure_steps[RoleId.SUPERVISOR] compared against PROCEDURE_STEPS[RoleId.SUPERVISOR], then all 6 fields match field-by-field. Should not skip any field.\n\nAC-B3-2 (worker 3-field round-trip): Given parsed_spec fixture, when procedure_steps[RoleId.WORKER] compared, then (a) id/order/instruction match; (b) command/context/next_state are each explicitly asserted to be None for worker steps.\n\nAC-B4-1: Given test_supervisor_steps_from_schema in TestProcedureStepsMatchSchema, when the test runs, then body asserts step.id == xml_step.get('id') for each supervisor step AND docstring accurately describes what is tested.\n\n## Validation Checklist\n- [ ] TestStrictUndefined.test_undefined_variable_raises_undefined_error calls generate_skill() (not creates own Environment)\n- [ ] Test provides BOTH: temp dir with skill_header.j2 containing {{ undefined_var }}, AND valid SKILL.md with BEGIN/END markers\n- [ ] test_schema_types_sync.py asserts .command == 'Skill(/aura:supervisor)' for at least one supervisor step\n- [ ] test_schema_types_sync.py asserts non-None .context for at least one supervisor step\n- [ ] test_gen_skills.py has new test asserting backtick-wrapped command in rendered output\n- [ ] test_gen_skills.py has new test asserting em-dash italic context in rendered output\n- [ ] test_gen_schema.py round-trip asserts all 6 ProcedureStep fields for supervisor steps\n- [ ] test_gen_schema.py round-trip explicitly asserts command=None, context=None, next_state=None for worker steps\n- [ ] test_supervisor_steps_from_schema body asserts step.id == xml_step.get('id') + docstring fixed\n- [ ] All 934 existing tests still pass","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-k85y","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2: Test isolation + ProcedureStep coverage (A1, B1-B4)","updated_at":"2026-02-26T08:44:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a43af49f3e4e86966b3f7bf59a6ee793539b3cde1fc649561d0ef68c5009f354","created_at":"2026-02-22T12:55:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer B (Test Quality) on SLICE-4 (workflow.py, test_workflow.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-k9k","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:18Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5a3581b13aa551ac7a069078464e155500040cc3ec64d42fd190eae9a244b2b6","created_at":"2026-02-22T18:11:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Reviewer B — Test Quality Axis\n\n**VOTE: REVISE**\n\n### Summary\n\nThe 9 BDD acceptance criteria and the 4 proposed test files are structurally sound and cover the happy paths. However, there are critical gaps in the test strategy that leave key risk surfaces untested. The proposal reads more as a list of features to test than a strategy that gives confident coverage of error paths, round-trip consistency under failure, Jinja2 rendering correctness, and context-injection accuracy at the boundary level.\n\n---\n\n### Finding 1 (BLOCKER): Round-trip test covers only counts and IDs — field-level loss is undetected\n\nAC3 says: \"all entity counts, IDs, and attribute values match.\" The validation checklist says \"Round-trip test: Python types → schema.xml → parse → matches original.\" But the existing test_schema_types_sync.py pattern shows that without explicit field-level equality checks, a round-trip test verifies only that IDs survive serialization — not that rich attributes (given/when/then/should_not for constraints, content_level and required_fields for handoffs, substep startup sequences, TDD layer content, procedure text) also survive intact. The proposal does not specify that field-level equality is required in verify_round_trip(), only \"entity counts, IDs, and attribute values.\" A lossy serializer that drops required_fields or truncates given/then text will pass a count-only round-trip test. The test strategy must explicitly require field-level equality assertions per entity type.\n\n**Suggested fix:** AC3 should be expanded to: \"all entity counts, IDs, AND all non-None field values are bit-for-bit identical after round-trip.\" test_gen_schema.py must include at least one full-depth equality check per entity type (ConstraintSpec.given/when/then/should_not, HandoffSpec.required_fields, SubstepSpec.startup_sequence, etc.).\n\n---\n\n### Finding 2 (BLOCKER): No test coverage for error paths in schema_parser.py\n\nAC1 only defines the happy path: parse_schema() returns all entities. There is no acceptance criterion for what happens when schema.xml is malformed, missing elements, or has unexpected structure. The should_not clause says \"should not silently skip any entity\" — but there is no test that exercises silent-skip behaviour with a deliberately truncated schema.xml. Without these tests, the parser can silently swallow parsing failures and return an incomplete SchemaSpec with zero test signal. Given the bootstrap is a one-time operation, a silent failure here is particularly dangerous.\n\n**Suggested fix:** Add at least one negative test to test_schema_parser.py: given a schema.xml with a missing \u003crole\u003e section, parse_schema() should raise a descriptive error (linking to C-actionable-errors constraint). AC1 should gain a \"should raise SchemaParseError with actionable message when required sections are absent\" clause.\n\n---\n\n### Finding 3 (BLOCKER): No test coverage for marker-boundary edge cases in gen_skills.py\n\nAC4 defines the happy path: \"generated header is updated, hand-written body is preserved.\" There is no test for: (a) a SKILL.md where the END marker is missing (what does the generator do?), (b) a SKILL.md where the BEGIN marker is absent (brand-new file vs corrupt file), (c) a SKILL.md where both markers are absent (initial generation), (d) a SKILL.md where the markers are reversed or nested. The marker-based split is the primary mechanism protecting hand-written procedural guidance across all 38 SKILL.md files. A generator that silently discards the manual body on marker boundary error would destroy irreplaceable procedural content. This is the highest-impact failure mode in the entire proposal and it has no error-path coverage.\n\n**Suggested fix:** Add three negative-path test cases to test_gen_skills.py: (1) missing END marker → raise GeneratorError with actionable message, (2) missing both markers → generate full header, no preservation error, (3) reversed markers → raise GeneratorError. AC4 should gain a \"should raise GeneratorError with actionable message if marker structure is invalid\" clause.\n\n---\n\n### Finding 4 (BLOCKER): context_injection tests assert role-level correctness against hand-coded expected values — but the expected values come from the same source being tested\n\nAC5 and AC6 specify exact expected outputs (e.g. \"returns phases p7-p12, relevant constraints C-supervisor-no-impl, C-supervisor-explore-team, C-slice-leaf-tasks...\"). If these expected values are written as literals in the test, they replicate the logic of the filter and do not verify that the filter is correct relative to the schema. The correct approach for context injection tests is to assert that the returned context is a SUBSET of the total SchemaSpec AND contains all items where the schema's role_ref or phase_ref matches the requested role/phase. Without this structural assertion, a context injector that returns ALL constraints for every role will pass the test as long as the expected constraints appear somewhere in the result.\n\n**Suggested fix:** test_context_injection.py should: (a) assert that get_role_context(SUPERVISOR).constraints is a strict subset of all constraints, (b) assert that no item in get_role_context(WORKER).constraints has a role_ref pointing to SUPERVISOR-only phases, (c) assert that the count of returned items is less than the count in the full spec dict (exclusion test). AC5 and AC6 should require both presence AND absence assertions.\n\n---\n\n### Finding 5 (IMPORTANT): AC8 (Jinja2 template quality) is untestable as stated\n\nAC8 says \"when rendering with StrictUndefined, all variables are defined from Python specs, should not have undefined variable errors.\" This is a property of the renderer executing, not a standalone test. Unless there is a dedicated test that renders every template with a real (or complete minimal) RoleSpec/PhaseSpec and asserts the output structure (presence of phase table, constraint list, label schema section), this criterion is verified only incidentally by the test for a single role in test_gen_skills.py. With 4 role templates + 1 command base template + 1 macros template, a partial template error may not surface unless each is exercised. Suggest adding a parametrized test: `@pytest.mark.parametrize(\"role\", list(RoleId))` that renders the template for each role and asserts non-empty output and absence of \"Undefined\" in the rendered string.\n\n---\n\n### Finding 6 (IMPORTANT): No integration test connecting the full pipeline end-to-end\n\nThe 4 test files are organized by module (parser, generator, skills, injection). There is no integration test that exercises the full pipeline: SchemaSpec from parse_schema() → gen_schema() → gen_skills() → validate_schema(). The proposal treats modules as independently testable units but the composition of the pipeline (schema data flows from parser → types → generators) is the primary risk surface. A single integration test in a new test_pipeline.py that runs the full chain on the actual schema.xml and asserts that validate_schema passes at the end would catch cross-module data-loss bugs that unit tests on each module miss.\n\n---\n\n### Finding 7 (IMPORTANT): AC7 (no regressions) is a meta-criterion with no new fixture coverage\n\nAC7 requires \"554 existing tests pass.\" This is a necessary condition but the proposal does not address whether the new ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS dicts will be verified by the updated test_schema_types_sync.py. The current test_schema_types_sync.py verifies PhaseId, Domain, RoleId, VoteType, SeverityLevel, PHASE_DOMAIN, PHASE_SPECS, CONSTRAINT_SPECS, HANDOFF_SPECS against schema.xml. The proposal adds ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS, REVIEW_AXIS_SPECS as new canonical dicts. These should be added to the round-trip verification test (or the test file should be updated to cover them). AC7 should explicitly call out that test_schema_types_sync.py is updated to cover all new canonical dicts.\n\n---\n\n### Concrete Test Structure Suggestions\n\n```python\n# test_schema_parser.py — add negative path\ndef test_parse_schema_raises_on_missing_roles_section(tmp_path):\n    xml = \"\u003cprotocol\u003e\u003cphases\u003e...\u003c/phases\u003e\u003c/protocol\u003e\"  # no \u003croles\u003e\n    path = tmp_path / \"schema.xml\"\n    path.write_text(xml)\n    with pytest.raises(SchemaParseError, match=\"roles\"):\n        parse_schema(path)\n\n# test_gen_schema.py — field-level round-trip\ndef test_round_trip_constraint_fields_are_lossless():\n    for cid, spec in CONSTRAINT_SPECS.items():\n        parsed = parse_schema(gen_schema_output)\n        rt = parsed.constraints[cid]\n        assert rt.given == spec.given\n        assert rt.when == spec.when\n        assert rt.then == spec.then\n        assert rt.should_not == spec.should_not\n\n# test_gen_skills.py — marker edge cases\n@pytest.mark.parametrize(\"content,error_match\", [\n    (\"\u003c!-- BEGIN GENERATED FROM schema --\u003e\\nheader\\n\", \"END marker\"),\n    (\"no markers at all\", None),  # new file → generate clean\n])\ndef test_marker_edge_cases(tmp_path, content, error_match):\n    ...\n\n# test_context_injection.py — absence assertions\ndef test_get_role_context_supervisor_excludes_worker_only_constraints():\n    ctx = get_role_context(RoleId.SUPERVISOR)\n    worker_constraint_ids = {c.id for c in ctx.constraints if \"worker\" in c.id.lower()}\n    # C-worker-gates is worker-only; should NOT appear in supervisor context\n    assert \"C-worker-gates\" not in {c.id for c in ctx.constraints}\n```\n\n---\n\n### Verdict\n\nThe proposal's test plan covers the happy paths adequately. The BDD criteria are specific and verifiable where they exist. However, four BLOCKER gaps — (1) lossy round-trip not caught, (2) parser error paths absent, (3) marker-boundary edge cases uncovered, (4) context injection tests can false-positive — must be addressed before the plan can be accepted. The 9 BDD criteria should be revised to add \"should raise actionable error when...\" clauses for the error-path cases identified above.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-k9mx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-B-1: v2 schema-driven engine","updated_at":"2026-02-26T07:22:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:45:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d6a8978cfdd3ae548214fe587a850b2d0606284375917ab42187ea9c5ca7f9e3","created_at":"2026-02-25T22:45:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No IMPORTANT findings. Elegance axis, round 2. Exit conditions table fix verified — complete and unambiguous.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kamx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-2 IMPORTANT","updated_at":"2026-02-25T22:45:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-4","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"36255f499f5330395de125af678769b16639ca19d6925dc558281d147c45b125","created_at":"2026-02-27T06:25:34Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-vjsk\n  urd: aura-plugins-7vtb\n---\n## Specification\nSignal-based slice progress + ReviewAxis/VoteType in ReviewPhaseWorkflow.\n\n## Files Owned (exclusive)\n- scripts/aura_protocol/workflow.py:\n  - SliceInput: add parent_workflow_id: str\n  - New SliceProgressSignal(slice_id: str, stage: str, completed: bool)\n  - EpochWorkflow: @workflow.signal slice_progress, @workflow.query slice_progress_state\n  - SliceWorkflow.run(): signal parent via get_external_workflow_handle(input.parent_workflow_id)\n  - ReviewPhaseWorkflow._votes: dict[str,str] → dict[ReviewAxis, VoteType]\n  - ReviewPhaseResult.vote_result: dict[str,str] → dict[ReviewAxis, VoteType]\n  - submit_vote: store ReviewAxis key, VoteType value\n  - wait_condition: check ReviewAxis set\n- tests/test_workflow.py: update _votes assertions, add SliceProgressSignal tests\n\n## Acceptance Criteria\nGiven SliceWorkflow when runs then signals parent with SliceProgressSignal per leaf task\nGiven ReviewPhaseWorkflow when votes then _votes uses ReviewAxis keys and VoteType values\nGiven test assertions when checking _votes then use ReviewAxis.CORRECTNESS (not .value)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-karq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Implementation complete. All 3 layers done. 1207→1233 tests passing (+26 new tests). Production code verified via code inspection: no TODOs in critical paths, real deps wired. SliceProgressSignal + parent_workflow_id + ReviewAxis _votes + EpochWorkflow slice_progress signal/query all implemented.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-4: Workflow signals + ReviewAxis type fix","updated_at":"2026-02-27T06:45:00Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7a29db586fca1455de600ddb12ce2237fe8508b2c96e3ce19925349428dd356f","created_at":"2026-02-26T23:46:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"**File:** docs/worker.md\n\n**Problems (two related inaccuracies):**\n\n1. **Architecture Overview diagram** (line ~35): Only shows EpochWorkflow. Does NOT show SliceWorkflow or ReviewPhaseWorkflow, which were added in SLICE-4 (aura-plugins-cz2t) and are now registered in bin/worker.py.\n\n   Actual bin/worker.py registers:\n     workflows=[EpochWorkflow, SliceWorkflow, ReviewPhaseWorkflow]\n\n   Docs diagram only shows:\n     ├── EpochWorkflow\n\n2. **Activity table** (line ~151): query_audit_events description says 'Query AuditEvent records by epoch_id with optional phase filter' — does NOT mention the role filter added by SLICE-5 (aura-plugins-oyxw).\n\n   Actual signature: query_audit_events(epoch_id, phase=None, role=None)\n\n3. **'Adding a New Activity' example** shows workflows=[EpochWorkflow] in the code snippet. Should show all three workflow types.\n\n**Impact:** An operator reading the docs will not know that SliceWorkflow and ReviewPhaseWorkflow need to be registered, and will not know the role filter exists on query_audit_events. The docs were written before SLICE-4 and SLICE-5 completed, and were not updated afterward.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kczs","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: docs/worker.md architecture diagram and activity table are stale after SLICE-4","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ce60664cf7840c56f6119b0a0df21298e9c8f0bb7ca0f68b245ee7955df955d3","created_at":"2026-02-26T08:55:06Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  review_round: 1\n---\nBLOCKER findings from Reviewer C (Elegance) on FOLLOWUP-SLICE-2. No findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kekn","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-REVIEW-C-1 BLOCKER","updated_at":"2026-02-26T08:55:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-4","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:21:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"44dc2ee4af70ea3bf2fdf36d040b485624d8463bddd47c253a3d12754f9cda14","created_at":"2026-02-23T03:09:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-mg6h\n  impl_plan: aura-plugins-94yc\n  depends_on_slice: aura-plugins-9suu\n---\n\n## Scope\n\nPure lookup module for runtime constraint/role/phase context injection.\n\n### Files Created\n- scripts/aura_protocol/context_injection.py — get_role_context(RoleId) → RoleContext, get_phase_context(PhaseId) → PhaseContext. Returns frozen dataclasses with ConstraintContext objects (typed when+then, UAT-4). Static _ROLE_CONSTRAINTS and _PHASE_CONSTRAINTS dicts (Python is SoT; gen_schema.py in SLICE-2 exports as role-ref/phase-ref). No side effects, no Temporal dependency.\n- tests/test_context_injection.py — Role context correctness (AC5), role context absence (AC5a), phase context correctness (AC6), phase context absence (AC6a), ConstraintContext field verification\n\n### Acceptance Criteria\n- AC5: get_role_context(SUPERVISOR) returns RoleContext with p7-p12 phases, ConstraintContext objects with typed when+then, relevant commands (UAT-4)\n- AC5a: SUPERVISOR context does NOT include C-worker-gates. WORKER context does NOT include C-supervisor-no-impl.\n- AC6: get_phase_context(P10_CODE_REVIEW) returns PhaseContext with ConstraintContext objects with typed when+then, severity constraints, review axes (UAT-4)\n- AC6a: P4_REVIEW context does NOT include C-severity-eager. P9_SLICE context does NOT include C-review-consensus.\n- AC7: All 554 existing tests pass\n\n### Implementation Notes\n- context_injection.py is a pure lookup module — reads from canonical dicts in types.py, returns frozen dataclasses\n- _ROLE_CONSTRAINTS: dict[RoleId, frozenset[str]] — hand-authored from constraint given: text\n- _PHASE_CONSTRAINTS: dict[PhaseId, frozenset[str]] — hand-authored from constraint given: text\n- ConstraintContext(id, when, then) — populated by looking up ConstraintSpec from CONSTRAINT_SPECS\n- Invertible pattern: PHASE_SPECS[phase].owner_roles gives role→phase mapping\n- Called at skill invocation time (role-level baseline) and at phase transition time (phase-level enrichment)\n- NOT called from Temporal workflow — called from prompt construction layer","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kg25","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4: Runtime Context Injection with ConstraintContext","updated_at":"2026-02-26T07:21:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No BLOCKER findings for SLICE-4 test quality","closed_at":"2026-02-26T04:30:56Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d71296f0f41024dd67aabf5f7cc31755eedd6bd0cbebb364b3d69b85c3e67ea3","created_at":"2026-02-26T04:30:45Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kg25.1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-2 BLOCKER","updated_at":"2026-02-26T04:30:56Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No IMPORTANT findings for SLICE-4 test quality","closed_at":"2026-02-26T04:30:57Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a8344b980093da6c00df56f70343858d17dca9a7e82c1c23b32e1d5aecefd409","created_at":"2026-02-26T04:30:45Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kg25.2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-2 IMPORTANT","updated_at":"2026-02-26T04:30:57Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No MINOR findings for SLICE-4 test quality","closed_at":"2026-02-26T04:30:58Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8de37bc10e0fd4f7d914f8665e632ab6d95884c0ac4b8e5a25e629e304f7a867","created_at":"2026-02-26T04:30:46Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kg25.3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-2 MINOR","updated_at":"2026-02-26T04:30:58Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:43:59Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5b47c526dfe17b9cb3188e0cc0d253e3c14771f8e471011ffa54440267c20546","created_at":"2026-02-27T06:25:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Update _votes assertions, add SliceProgressSignal decorator/structural tests.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kg8l","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-L2: Tests for signal progress + ReviewAxis votes","updated_at":"2026-02-27T06:43:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:43:59Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a5cb8a962022e799fb0e9ba2eebd2d66b962ff8d0c702fa625a55b3ffdc14304","created_at":"2026-02-27T06:25:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Wire slice_progress signal handler on EpochWorkflow, implement SliceWorkflow signaling parent.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kixh","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-L3: Impl — EpochWorkflow signal handler + SliceWorkflow parent signal","updated_at":"2026-02-27T06:43:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"84975f066a24c2d7d5c8b2bbc0ba7cfa7a0b84507569c0ceeca5b286d74879b1","created_at":"2026-02-23T04:26:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer B (Test Quality) on SLICE-3 (SKILL.md Generator with Diff + MarkerError). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kjtp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"66dee0e61424b0d0534d1a6299671a754b79f3ed59de8e2796839666dd6c69d4","created_at":"2026-02-26T03:14:06Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-cuuw\n  review_important: aura-plugins-gwx9\n  review_minor: aura-plugins-5nec\n---\nAggregated IMPORTANT and MINOR findings from code review (Phase 10).\n\n## IMPORTANT findings (aura-plugins-gwx9)\n- Missing root-level exclusion regression: no test for root-level pyproject.toml with only [tool.*] section (no [project] key). The _has_pyproject_version() guard applies at root too (bin/aura-release line 216) but only the subdir path is covered by tests.\n\n## MINOR findings (aura-plugins-5nec)\n- sys.modules leak: no teardown clears sys.modules['aura_release'] after each test; stale entry persists for the session\n- Per-test re-import: _import_aura_release() called 4x with no shared session-scoped fixture (minor overhead)\n- Undocumented scope: class docstring does not document that package.json/plugin.json/marketplace.json are out of scope for this test class","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-klac","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":3,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP: Non-blocking improvements from code review (aura-release test)","updated_at":"2026-02-26T03:14:06Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b7357ec7fd735c0af7b66706ab308f2561a55c1e6c4acc9efd9a7700ecacad40","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-klhx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-2 MINOR","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:57:26Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2cf79f75909ed7118f3c3cc6747317a096f9f9dd531ec7b0fd1bc3c98b2f1f02","created_at":"2026-02-26T08:57:06Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i08u\n  review_round: 1\n---\nBLOCKER findings from Reviewer A (Correctness) on FOLLOWUP-SLICE-1.\n\nNo BLOCKER findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-knux","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-1-REVIEW-A-1 BLOCKER","updated_at":"2026-02-26T08:57:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"48d818c903cc14dedc73b8383fc9d7fbeaaa35865781c3dd74c8e8bf5a68d69d","created_at":"2026-02-25T22:37:17Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings for SLICE-2 (Schema regen). Elegance axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kq0l","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 MINOR","updated_at":"2026-02-25T22:37:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0b8df57e52f5939871c0d6b9c65f326b882ef082f35eb7fee6d4832daed77d80","created_at":"2026-03-01T05:24:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nverbatim_request: |\n  Refactor bin/aura-parallel and bin/aura-swarm scripts and their related skills into a unified aura-swarm script.\n  New flags: --swarm-mode (worktree|intree), --tmux-dest (session|window, default window).\n  State dir: XDG_STATE_HOME/aura/swarm/. Permission inheritance: bypassPermissions propagates to children.\nclassification:\n  scope: medium\n  complexity: medium\n  risk: medium\n  domain_novelty: low\n---\nMerge bin/aura-parallel and bin/aura-swarm into a single unified aura-swarm script with:\n1. --swarm-mode {worktree,intree} to select isolation strategy\n2. --tmux-dest {session,window} with window as new default\n3. State directory at $XDG_STATE_HOME/aura/swarm/ (XDG-compliant, env var not hardcoded)\n4. Permission inheritance: bypassPermissions propagates to children\n5. Merge skills/parallel/ + skills/swarm/ into skills/swarm/\n6. Update Nix packaging, HM module, CLAUDE.md references\n7. Remove bin/aura-parallel after merge","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kqtf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"REQUEST: Refactor aura-parallel + aura-swarm into unified aura-swarm","updated_at":"2026-03-01T05:24:12Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:57:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2d2f75138de528d5bfe058c7c2bf1af736662031293c8d9a1d0a1f67fe3c5350","created_at":"2026-02-22T12:55:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer B (Test Quality) on SLICE-3 (interfaces.py, test_interfaces.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-krh","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 BLOCKER","updated_at":"2026-02-22T12:57:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"973b05147b2c97e18f6a0ccbc53eba8f5a7e9fc8e3f8656064f1de5854b274ef","created_at":"2026-02-26T20:50:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Create tests/fixtures/fixture_loader.py with ProtocolFixture class. Generators for combinatorial test cases. Tests for the loader itself.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kv55","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-3-L2: ProtocolFixture loader + tests","updated_at":"2026-02-26T21:03:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:16:40Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"68875cedb5e905601a70fc986f977842a63aaefa417e22007c6633d27cf71ead","created_at":"2026-02-22T12:07:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-cts\n  urd: aura-plugins-s6i\n  proposal: aura-plugins-r1z\n---\n\n## Specification\nHarden dict typing, document TYPE_CHECKING Protocol limitations, add Protocol self-check test.\n\n## Changes\n1. DataPart.data: dict → dict[str, Any]\n2. ToolCall.tool_input: dict → dict[str, Any]\n3. ToolCall.tool_output: dict | None → dict[str, Any] | None\n4. Add module docstring documenting TYPE_CHECKING Protocol limitations (isinstance checks only method name presence, not full signature)\n5. FilePart.file_uri → add migration note docstring (A2A spec uses file_with_uri)\n6. AuditEvent.payload: str → dict[str, Any]\n7. Add test: isinstance(RuntimeConstraintChecker(...), ConstraintValidatorInterface) must pass\n8. ToolCall hashability test documentation (why dict fields prevent hashing)\n\n## Files Owned\n- scripts/aura_protocol/interfaces.py\n- tests/test_interfaces.py\n\n## Acceptance Criteria\n- AC8: isinstance(RuntimeConstraintChecker(...), ConstraintValidatorInterface) returns True\n- AC9: All 475+ existing tests still pass\n\n## Findings Adopted\nngd, 5zf, 7d2, hls, utj, eqy, 4u1, h7x","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kv9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Implementation complete. All 8 changes delivered. 476 tests pass (475 original + 1 new AC8 test). Resolved leaf tasks: ngd, 5zf, 7d2, hls, utj, eqy, 4u1, h7x.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-3: interfaces.py — Type Precision + Protocol Documentation","updated_at":"2026-02-22T12:16:40Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"56280fd136fd681e94dedd6336957ce40c39ebfb115aa96acea0985f2240606d","created_at":"2026-02-23T04:22:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer C (Elegance) on SLICE-1. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kxt5","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 MINOR","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:03Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"18b016adffcf73452674ffef2dc4a8393ad5cf2ab08d2191077e1bb41a9bfd36","created_at":"2026-02-26T08:38:00Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-kzcj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 MINOR: Test Quality","updated_at":"2026-02-26T08:38:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4d5f837096e2d2395c86b4baec9274648f81057deada433053bab60449e35509","created_at":"2026-02-26T23:47:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"**File:** flake.nix, line ~72\n\n**Problem:**\nThe `packages.default` uses symlinkJoin to combine aura-parallel, aura-swarm, and aura-release. The newly added `packages.worker` is NOT included in `packages.default`.\n\nThis means `nix run .` or any tooling that uses the default package will not include the worker binary.\n\n**Current:**\n  default = pkgs.symlinkJoin {\n    name = \"aura-plugins\";\n    paths = [\n      self.packages.${system}.aura-parallel\n      self.packages.${system}.aura-swarm\n      self.packages.${system}.aura-release\n    ];\n  };\n\n**Fix:**\nAdd worker to paths:\n  paths = [\n    ...\n    self.packages.${system}.worker\n  ];\n\nThis is MINOR because `nix run .#worker` works correctly; only the default bundle is missing the worker.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-l1lk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: flake.nix packages.worker not included in packages.default (symlinkJoin)","updated_at":"2026-02-26T23:47:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"062cded7d3d00c3a8bad2f08aa17c3ccf0e2bfdcb64568e0897f536583e73854","created_at":"2026-02-23T04:27:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In test_gen_schema.py::TestRoundTripConsistency::test_roundtrip_procedure_steps_supervisor (line 596) and test_roundtrip_procedure_steps_worker (line 605), the tests only assert len(parsed_steps) == len(python_steps). This does not verify that step descriptions or order values survive the round-trip correctly.\n\nAll other round-trip tests in TestRoundTripConsistency compare individual fields: constraint given/when/then/should_not, handoff source/target/phase/content_level, label value/special, role name/owned_phases. ProcedureStep is the only entity type with count-only round-trip verification.\n\nA bug that corrupts step descriptions (e.g., truncation or wrong field in gen_schema.py XML output) would not be caught.\n\nRemediation: Extend both test methods to compare each step's description (and optionally order) field-by-field between python_steps and parsed_steps, mirroring the pattern used in test_roundtrip_constraint_fields_match.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-l4ih","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S2-B1-IMPORTANT: Round-trip procedure_steps test checks count only, not step descriptions","updated_at":"2026-02-23T12:46:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:57:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2020e49ac74f0ff49b883e0f6bdf2f2133ff5f8dd208fc3d68ebd2458976c165","created_at":"2026-02-22T12:55:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer B (Test Quality) on SLICE-1 (state_machine.py, conftest.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-l4o","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 MINOR","updated_at":"2026-02-22T12:57:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-1","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1fe693194e1a5828aabfb4ad98658c684b14fd8b05d25f0751b7b211d721dabb","created_at":"2026-02-26T15:32:05Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-9qpq\n  urd: aura-plugins-2ojv\n  proposal: aura-plugins-6zbz\n---\n## Specification\nIntroduce frozen, JSON-serializable types for cross-workflow boundaries per PROPOSAL-11 UAT-1:\n\n1. SerializableTransition(to_phase: PhaseId, condition: str, action: str | None = None)\n2. SerializablePhaseSpec(id, number, domain, name, owner_roles: list[RoleId], transitions: list[SerializableTransition])\n   - @staticmethod from_spec(PhaseSpec) → SerializablePhaseSpec\n   - owner_roles: sorted list (not frozenset), transitions: list (not tuple)\n3. PhaseInput(epoch_id: str, phase_spec: SerializablePhaseSpec)\n4. PhaseResult(phase_id: PhaseId, success: bool, blocker_count: int = 0, vote_result: VoteType | None = None)\n\nAll fields: StrEnum, str, int, list — fully JSON-serializable via Temporal DataConverter.\n\n## Files Owned\n- scripts/aura_protocol/types.py (add new dataclasses near existing PhaseSpec)\n\n## Integration Points\n- IP-1 OWNER: SerializablePhaseSpec consumed by SLICE-3 (PhaseInput in audit activities) and SLICE-5 (tests)\n- IP-2 CONSUMER: ReviewAxis enum from SLICE-2 may be used in PhaseResult\n\n## Validation Checklist\n- [ ] SerializableTransition frozen dataclass defined\n- [ ] SerializablePhaseSpec frozen dataclass with list[RoleId] (not frozenset)\n- [ ] from_spec static method converts PhaseSpec → SerializablePhaseSpec\n- [ ] PhaseInput frozen dataclass with epoch_id + phase_spec\n- [ ] PhaseResult frozen dataclass\n- [ ] All fields Temporal-serializable (no frozenset, no tuple, no set, no dict)\n- [ ] Tests written and passing\n- [ ] Existing 945 tests unbroken","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-l6n8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Implementation complete. 68 new tests all passing. 1041 total tests pass (0 regressions). Production code: SerializableTransition, SerializablePhaseSpec (with from_spec static method), PhaseInput, PhaseResult all added to types.py and exported from __init__.py. All fields Temporal DataConverter-safe (no frozenset/tuple/set/dict). owner_roles sorted by .value.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-1: SerializablePhaseSpec + PhaseInput + PhaseResult (cross-workflow boundary types)","updated_at":"2026-02-26T18:34:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"77e453bbde98b86d60e5a34dbfe3c767a00ed95d82aa54749a3766cd08a8ce65","created_at":"2026-02-22T17:42:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Epic tracking all work from the Beads Dolt backend investigation and fixes. Covers: JSONL→Dolt import pipeline, getStore() fix for bd dolt subcommands, home-manager modules for beads+dolt-server, and JSONL backup exports.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-l6z1","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Beads Dolt backend: import, fixes, and NixOS integration","updated_at":"2026-02-22T17:42:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f0f932f8227f92e2bcc8e9a1ab4d0c57644eec0560cde6ab0185736eebf48a67","created_at":"2026-02-23T04:24:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/Code Organization).\n\nIn gen_schema.py _serialize_tree() (line 1589), 'import io' is written inline inside the function body rather than at the module's top-level import block. This is against standard Python style and makes it harder to see the module's dependencies at a glance.\n\nio is a stdlib module that imposes no cost at import time. There is no valid reason for the deferred import here (it's not optional, not slow, not a circular import).\n\nFix: Move 'import io' to the top of the file alongside the other stdlib imports (difflib, xml.etree.ElementTree, pathlib).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-l7wf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1-F7: gen_schema.py _serialize_tree uses deferred import of io module","updated_at":"2026-02-23T12:46:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:48:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7659d32822ede40cf97cc3f615d382818b8be3eed61f1084978e20179f01f8fc","created_at":"2026-02-25T22:48:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  review_round: 3\n---\nMINOR findings from Reviewer A (Correctness) on SLICE-1, Round 3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-l8tw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-3 MINOR","updated_at":"2026-02-25T22:48:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-2","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T01:50:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:31:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-06g\n  urd: aura-plugins-umi\n  proposal: aura-plugins-gmv\n---\n## Specification\nManage epoch lifecycle state and validate transitions against the protocol. Pure Python — no Temporal dependency.\n\n### Key Types\n- EpochState (mutable runtime state)\n- TransitionRecord (frozen, immutable audit entry)\n- TransitionError (exception with violations list)\n- EpochStateMachine (main class)\n\n### Key Behaviors\n- advance(to_phase) — validates and executes transitions\n- validate_advance(to_phase) — dry-run validation\n- record_vote(axis, vote) — record reviewer votes\n- has_consensus() — check 3/3 ACCEPT\n- record_blocker(resolved) — track BLOCKER count\n- available_transitions property\n\n### Transition Rules (from schema.xml)\n- Sequential forward: p1→p2→p3→p4→p5→p6→p7→p8→p9→p10→p11→p12→complete\n- Review revision loops: p4→p3 (REVISE), p10→p9 (BLOCKER fix)\n- Consensus gate: p4→p5 requires 3 ACCEPT, p5→p6 requires UAT pass\n- BLOCKER gate: p10→p11 requires blocker_count == 0\n\n## Files Owned\n- scripts/aura_protocol/state_machine.py (NEW)\n- tests/test_state_machine.py (NEW)\n\n## Acceptance Criteria\n- AC1: Given epoch in P1 when advance(p2) then transitions, records transition should not allow p1→p8\n- AC2: Given epoch in P4 with 2/3 ACCEPT when advance(p5) then TransitionError should not proceed without consensus\n- AC3: Given epoch in P4 with REVISE when checking transitions then only p3 available\n- AC4: Given epoch in P10 with blockers when advance(p11) then TransitionError should not proceed to UAT\n\n## Validation Checklist\n- [ ] EpochState dataclass defined\n- [ ] TransitionRecord frozen dataclass\n- [ ] TransitionError with violations list\n- [ ] EpochStateMachine class with all methods\n- [ ] Tests cover AC1-AC4\n- [ ] Transition table covers all schema.xml transitions","design":"{\"validation_checklist\":[\"State transitions validated\",\"Review consensus gate works\",\"BLOCKER resolution gate works\",\"Transition history recorded\"],\"acceptance_criteria\":[{\"given\":\"epoch in P1\",\"when\":\"advance(p2)\",\"then\":\"transitions to P2\"},{\"given\":\"epoch in P4 with 2/3 ACCEPT\",\"when\":\"advance(p5)\",\"then\":\"TransitionError raised\"},{\"given\":\"epoch in P10 with blockers\",\"when\":\"advance(p11)\",\"then\":\"TransitionError raised\"}],\"ratified_plan\":\"aura-plugins-gmv\"}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-la6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: state_machine.py — 12-phase epoch lifecycle","updated_at":"2026-02-22T01:50:55Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e472dafc4fa9c47b7934e131ac709c3319e40c9d6d3a485aa1386263cbc9965e","created_at":"2026-02-26T20:50:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Update tests/conftest.py to load fixtures. Add parametrized tests using generated test cases with pytest.param(id=...).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-lbq9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-3-L3: conftest.py integration + parametrized tests","updated_at":"2026-02-26T21:03:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T04:25:45Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bc6a1d788c51062c9af8eb7afd8bebffc6bf7ff142480c09994f573dedccc7a7","created_at":"2026-02-23T04:24:19Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer A on SLICE-2. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-lfsy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 BLOCKER","updated_at":"2026-02-23T04:25:45Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"20ff5fc7cd149382ad842afb856d17812a0eda884f466c311950fcb5fae804ce","created_at":"2026-02-26T15:33:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Tests for from_spec() conversion, serialization roundtrip, frozen compliance. Import from types.py. Tests MUST fail until L3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-lg5b","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-1-L2: Tests — SerializablePhaseSpec + PhaseInput + PhaseResult","updated_at":"2026-02-26T18:34:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T23:48:57Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bc57fa2e398ca36a7450e8558552bc1b9f33519d80192a3e1b1345034c29859a","created_at":"2026-02-26T23:46:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-uvgb\n  followup_epic: aura-plugins-hgki\n---\nBLOCKER findings for FOLLOWUP-REVIEW-B-1 (test quality axis). No BLOCKERs found.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-lgjf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T23:48:57Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:40Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"00a2bb59e6bcd310eb79c34e796e9356dec605f5a2987de627b0de517acafd0f","created_at":"2026-02-26T08:38:37Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-lgmd","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-B-1 BLOCKER: Test Quality","updated_at":"2026-02-26T08:38:40Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-28T20:02:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e9d99a40163a53485f31c2072939703dfe3a016a53de2c0e4896359505c35fea","created_at":"2026-02-28T20:02:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  commit: 9626f36\n---\n## Components Demonstrated\n\n### Component: SKILL.md file structure (heading placement)\n\n**What was shown:**\n\nBEFORE (TUI showed comment as description):\n\n    \u003c!-- BEGIN GENERATED FROM aura schema --\u003e   \u003c- line 1, TUI read this\n    # Worker Agent                               \u003c- line 2, never reached\n    **Role:** `worker` | **Phases owned:** p9-worker-slices\n    ...\n    \u003c!-- END GENERATED FROM aura schema --\u003e\n\nAFTER (TUI shows heading as description):\n\n    # Worker Agent                               \u003c- line 1, TUI reads \"Worker Agent\"\n\n    \u003c!-- BEGIN GENERATED FROM aura schema --\u003e   \u003c- line 3\n    **Role:** `worker` | **Phases owned:** p9-worker-slices\n    ...\n    \u003c!-- END GENERATED FROM aura schema --\u003e\n\n**Consequence explained:** The `# {Role} Agent` heading is now hand-authored content (lives in the prefix, never regenerated). If a role's display name changed in types.py, the SKILL.md heading would need a manual update.\n\n**Question asked:** \"The heading ('# Worker Agent', '# Supervisor Agent', etc.) is now hand-authored content that lives before the BEGIN marker. This means: (1) the generator never overwrites it, (2) if a role's name changes in types.py, the SKILL.md heading won't auto-update. Which tradeoff is acceptable?\"\n\n**Options presented:**\n- Hand-authored is fine (current) — Role names are stable; a one-time manual update if a name ever changes is acceptable. Generator stays simpler.\n- Generator should own it — Move the heading inside the markers so it regenerates automatically.\n\n**User response (verbatim):** \"Generator should own it\"\n\n**Follow-up user message (verbatim):** \"Okay, it's fine then. Doesn't matter: let's just have the weird header. Isn't there some kind of frontmatter we could write that the Claude Code TUI uses?\"\n\n## Final Decision\nACCEPT — current heading-before-BEGIN implementation is accepted as-is.\n\n## Follow-up\nInvestigate whether SKILL.md `description` frontmatter field controls TUI autocomplete display (tracked separately).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-li5n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT: TUI skill description fix — gen_skills heading placement","updated_at":"2026-02-28T20:02:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\nIn constraints.py, check_handoff_required() defines _SAME_ACTOR as a local variable inside the method:\n\n    def check_handoff_required(self, from_phase: PhaseId, to_phase: PhaseId) -\u003e ...:\n        _SAME_ACTOR: frozenset[tuple[PhaseId, PhaseId]] = frozenset(\n            {\n                (PhaseId.P5_UAT, PhaseId.P6_RATIFY),\n                (PhaseId.P6_RATIFY, PhaseId.P7_HANDOFF),\n            }\n        )\n\nThis frozenset is recreated on every call to check_handoff_required(). Compare with the module-level _HANDOFF_REQUIRED_TRANSITIONS and _REVIEW_PHASES constants which are correctly defined at module scope.\n\n## Contrast\nAll other similar constants in constraints.py are module-level (lines 57-79):\n- _REVIEW_AXES: frozenset[str] = frozenset({'A', 'B', 'C'})\n- _REVIEW_PHASES: frozenset[PhaseId] = frozenset(...)\n- _HANDOFF_REQUIRED_TRANSITIONS: frozenset[...] = frozenset(...)\n\n_SAME_ACTOR should follow the same pattern.\n\n## Fix\nMove _SAME_ACTOR to module scope:\n    _SAME_ACTOR_TRANSITIONS: frozenset[tuple[PhaseId, PhaseId]] = frozenset(\n        {(PhaseId.P5_UAT, PhaseId.P6_RATIFY), (PhaseId.P6_RATIFY, PhaseId.P7_HANDOFF)}\n    )\nConsistent naming with _HANDOFF_REQUIRED_TRANSITIONS.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-lkk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1-F1: _SAME_ACTOR defined as local frozenset inside check_handoff_required method body","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-5","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:17:12Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:31:30Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-06g\n  urd: aura-plugins-umi\n  proposal: aura-plugins-gmv\n---\n## Specification\nTemporal workflow wrapping EpochStateMachine with durable execution. Signals for mutations, queries for reads, search attributes for forensics.\n\n### Key Types\n- EpochInput, EpochResult (frozen dataclasses)\n- PhaseAdvanceSignal, ReviewVoteSignal (frozen signal types)\n- Search attribute keys: SA_EPOCH_ID, SA_PHASE, SA_ROLE, SA_STATUS, SA_DOMAIN\n\n### Workflow\n- EpochWorkflow (@workflow.defn)\n  - run(input) — wait for signals, advance through phases\n  - advance_phase(signal) — signal handler\n  - submit_vote(signal) — signal handler\n  - current_state() — query\n  - available_transitions() — query\n\n### Activities\n- check_constraints(state, to_phase) — activity\n- record_transition(record) — activity\n\n### pyproject.toml Changes\n- Add temporalio\u003e=1.9.0 to [project].dependencies\n- Add pytest\u003e=8.0, pytest-asyncio\u003e=0.24 to [project.optional-dependencies].dev\n\n## Files Owned\n- scripts/aura_protocol/workflow.py (NEW)\n- tests/test_workflow.py (NEW)\n- pyproject.toml (MODIFY — add dependencies)\n\n## Acceptance Criteria\n- AC6: Given running EpochWorkflow when advance_phase signal then state + search attrs updated atomically should not have non-deterministic ops\n- AC7: Given workflow at P9 when querying AuraPhase=\"p9\" then workflow returned should not have stale attrs\n\n## Validation Checklist\n- [ ] EpochWorkflow with signals, queries, search attrs\n- [ ] Activities for constraint checking and transition recording\n- [ ] Temporal sandbox tests pass\n- [ ] pyproject.toml deps added\n- [ ] Search attributes updated on every transition","design":"{\"validation_checklist\":[\"Temporal workflow uses signals only\",\"Search attributes updated\",\"Sandbox tests pass\",\"pyproject.toml updated\"],\"acceptance_criteria\":[{\"given\":\"running EpochWorkflow\",\"when\":\"advance_phase signal\",\"then\":\"state and search attrs updated atomically\",\"should_not\":\"non-deterministic ops\"},{\"given\":\"workflow at P9\",\"when\":\"query AuraPhase=p9\",\"then\":\"workflow returned\",\"should_not\":\"stale search attrs\"}],\"ratified_plan\":\"aura-plugins-gmv\"}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-lkz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5: workflow.py — Temporal workflow wrapper","updated_at":"2026-02-22T02:17:12Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6d658529bd3ddd4c4e0f11cd60903d58506b8ebd2dd2b2655c413eb9e36bf8ac","created_at":"2026-02-26T16:01:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-o8va\n  review: aura-plugins-zd9p\n---\nIMPORTANT findings for SLICE-4 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-llh1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T18:40:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"53746af335806248d3d8e5db3110d86d672275ed322e5bf6e1d15ebc2a621613","created_at":"2026-02-26T03:08:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-cuuw\n  urd: aura-plugins-s7l0\n  proposal: aura-plugins-pcs6\n---\nHandoff from architect to supervisor. See handoff document at\n.git/.aura/handoff/aura-plugins-cuuw/architect-to-supervisor.md","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-lnce","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"HANDOFF: Architect → Supervisor for aura-release dead code + test","updated_at":"2026-02-26T03:08:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"55967ba1760889a3c522c575b94cf64eebdab62577b3eec672bea810c58653ec","created_at":"2026-02-26T12:39:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  elicit: aura-plugins-ollt\n  urd: aura-plugins-2ojv\n  supersedes: aura-plugins-gnks\n---\n## 1. Executive Summary\n\nRevised from PROPOSAL-2. Addresses all MUST FIX items from reviewers B-2 and C-2, and SHOULD FIX items from all three reviewers.\n\nChanges from PROPOSAL-2:\n- FileWithUri gains `name: str | None = None` field (A2A spec: uri, name, mimeType — 3 fields, C-2 MUST FIX #1)\n- pyproject.toml explicitly declares BOTH agent-client-protocol\u003e=0.1 AND pydantic\u003e=2.7 (B-2 MUST FIX #1)\n- map_acp_event activity catches pydantic.ValidationError → returns AcpMappedSignal.noop() (B-2 MUST FIX #2)\n- run() drain loop wraps execute_activity(map_acp_event) in try/except ActivityError (B-2 MUST FIX #3)\n- AcpMappedSignal: add `__post_init__` validation + `noop()` classmethod factory (C-2 SHOULD FIX #3)\n- AcpRawSignal.event_type: AcpEventType(StrEnum) — not bare str (B-2 SHOULD FIX #4)\n- AcpTranscriptRecorder stub label: reference AgentSideConnection.session_update() from acp.agent (C-2 SHOULD FIX #2)\n- AC14 corrected to 3 (not 4): TestTranscriptRecorderProtocol has 3 test methods (A-2 SHOULD FIX #1)\n- FilePart test migration explicitly in scope: 2 existing tests must be updated for R7 (A-2 SHOULD FIX #2)\n\nAll items from PROPOSAL-2 not listed above are carried forward unchanged.\n\n---\n\n## 2. Architecture\n\n### 2.1 Workflow topology (unchanged from PROPOSAL-2)\n\nSee PROPOSAL-2 section 2.1 — no changes.\n\n### 2.2 ACP signal boundary — typed enum + error handling (FIXES for B-2 MUST FIX + B-2 SHOULD FIX #4)\n\nAcpEventType is a StrEnum (per project standard). AcpRawSignal.event_type uses it:\n\n```python\nclass AcpEventType(StrEnum):\n    \"\"\"Discriminator for inbound ACP SessionUpdate event types.\"\"\"\n    PHASE_ADVANCE = 'phase_advance'\n    REVIEW_VOTE   = 'review_vote'\n    # Forward-compatible: DefaultAcpEventMapper returns noop() for unknown values\n\n@dataclass(frozen=True)\nclass AcpRawSignal:\n    \"\"\"Frozen wrapper for an inbound ACP SessionUpdate at the Temporal boundary.\"\"\"\n    session_id:   str\n    event_type:   AcpEventType   # was: str — now strongly typed StrEnum\n    payload_json: str             # full event as JSON string\n\n@workflow.signal\ndef acp_session_update(self, raw: AcpRawSignal) -\u003e None:\n    self._pending_acp_raw.append(raw)\n```\n\nmap_acp_event activity — ValidationError guard (B-2 MUST FIX #2):\n\n```python\n@activity.defn\nasync def map_acp_event(raw: AcpRawSignal) -\u003e AcpMappedSignal:\n    try:\n        update = acp.schema.SessionUpdate.model_validate_json(raw.payload_json)\n    except pydantic.ValidationError:\n        # Non-transient — malformed ACP payload. Return noop (no retry will fix this).\n        return AcpMappedSignal.noop()\n    return DefaultAcpEventMapper().map_to_signal(update)\n```\n\nrun() drain loop — ActivityError guard (B-2 MUST FIX #3):\n\n```python\n# Inside run() loop, draining _pending_acp_raw:\nfor raw in draining_list:\n    try:\n        mapped = await workflow.execute_activity(\n            map_acp_event, args=[raw],\n            start_to_close_timeout=timedelta(seconds=10),\n        )\n    except ActivityError:\n        # Permanently-failed activity (non-retryable or exhausted retries).\n        # Log and skip — preserve epoch liveness. Same pattern as TransitionError.\n        workflow.logger.warning(\n            'map_acp_event permanently failed for session=%s event_type=%s — skipping',\n            raw.session_id, raw.event_type,\n        )\n        continue\n    if mapped.advance: self._pending_advance.append(mapped.advance)\n    if mapped.vote:    self._pending_votes.append(mapped.vote)\n```\n\n### 2.3 AcpMappedSignal — noop() factory + __post_init__ guard (C-2 SHOULD FIX #3)\n\n```python\n@dataclass(frozen=True)\nclass AcpMappedSignal:\n    \"\"\"Result of mapping an inbound ACP event to Temporal domain signals.\n    \n    Exactly one of advance or vote must be set, OR use AcpMappedSignal.noop()\n    to represent an intentional no-op (unknown/unmappable event).\n    \"\"\"\n    advance: PhaseAdvanceSignal | None = None\n    vote:    ReviewVoteSignal | None   = None\n    _is_noop: bool = False  # private sentinel; use noop() factory, not direct field\n\n    def __post_init__(self) -\u003e None:\n        if not self._is_noop and self.advance is None and self.vote is None:\n            raise ValueError(\n                'AcpMappedSignal must carry at least one signal. '\n                'Use AcpMappedSignal.noop() for intentional no-ops.'\n            )\n\n    @classmethod\n    def noop(cls) -\u003e 'AcpMappedSignal':\n        \"\"\"Return a sentinel no-op instance (unknown/unmappable ACP event).\"\"\"\n        return cls(_is_noop=True)\n```\n\n### 2.4 FileWithUri — 3 fields per A2A spec (C-2 MUST FIX #1 + A-2 SHOULD FIX #3)\n\n```python\n@dataclass(frozen=True)\nclass FileWithUri:\n    \"\"\"A2A file reference. Aligns to A2A spec v0.3.0 fileWithUri object (3 fields).\n    \n    A2A spec: { uri: string (required), name: string? (optional), mimeType: string? (optional) }\n    Confirmed via A2A PR #663 (merged). name carries the human-readable filename (e.g. 'report.pdf').\n    \"\"\"\n    uri:       str           # required\n    name:      str | None = None   # optional — human-readable filename\n    mime_type: str | None = None   # optional — MIME type\n\n@dataclass(frozen=True)\nclass FilePart:\n    \"\"\"A2A FilePart with FileWithUri nested object (corrected from flat file_uri: str).\"\"\"\n    file_with_uri: FileWithUri\n```\n\n### 2.5 AcpTranscriptRecorder stub label — Agent side, correct API reference (C-2 SHOULD FIX #2)\n\n```python\nclass AcpTranscriptRecorder:\n    \"\"\"TranscriptRecorder implementation that pushes events as ACP SessionUpdate\n    notifications toward an ACP-compatible client (e.g., Agentfilter).\n\n    STUB — Motivation: emit Epoch lifecycle events as ACP SessionUpdate notifications\n    from the Agent side of the ACP protocol. Agentfilter receives these as the ACP\n    Client. Added in aura-plugins v3 (epoch: aura-plugins-eocq).\n    Expected implementation: use AgentSideConnection.session_update(session_id, update)\n    from acp.agent (NOT acp.connection.Connection — raw transport layer).\n    AgentSideConnection is the typed agent-side API that accepts SessionUpdate\n    and pushes to the ACP Client (Agentfilter endpoint).\n    \"\"\"\n    async def record_phase_transition(self, event: PhaseTransitionEvent) -\u003e None: ...\n    async def record_constraint_check(self, event: ConstraintCheckEvent) -\u003e None: ...\n    async def record_review_vote(self, event: ReviewVoteEvent) -\u003e None: ...\n```\n\n### 2.6–2.10 (unchanged from PROPOSAL-2)\n\nSee PROPOSAL-2 sections 2.3–2.10 for: AcpTranscriptRecorder overall design, AuditTrail activity-only, gate constants, AcpContentBlock private, AcpSecurityGate.\n\n---\n\n## 3. Files (updated from PROPOSAL-2)\n\n### New (same as PROPOSAL-2)\n| File | Purpose |\n|------|---------|\n| scripts/aura_protocol/phase_workflows.py | P4ReviewWorkflow, P9SliceWorkflow, P10CodeReviewWorkflow |\n| scripts/aura_protocol/phase_activities.py | run_sequential_phase, map_acp_event (with ValidationError guard), emit_* activities |\n| scripts/aura_protocol/audit_trail.py | TemporalAuditTrail + InMemoryAuditTrail |\n| scripts/aura_protocol/acp_mapper.py | DefaultAcpEventMapper; returns AcpMappedSignal.noop() for unknown events |\n| bin/worker.py | Production worker registration |\n| nix/temporal-service.nix | home-manager module for temporal server start-dev |\n| tests/test_phase_workflows.py | Child workflow tests |\n| tests/test_audit_trail.py | TemporalAuditTrail + InMemoryAuditTrail tests |\n| tests/test_acp_mapper.py | DefaultAcpEventMapper tests; includes noop() for unknown events |\n\n### Modified (updated from PROPOSAL-2)\n| File | Changes |\n|------|---------|\n| scripts/aura_protocol/workflow.py | acp_session_update signal (AcpRawSignal with AcpEventType); _pending_acp_raw queue; run() drains via map_acp_event with ActivityError guard |\n| scripts/aura_protocol/interfaces.py | FileWithUri (3 fields: uri, name, mime_type); FilePart.file_with_uri: FileWithUri; AcpMappedSignal with __post_init__ + noop(); AcpRawSignal.event_type: AcpEventType; AcpTranscriptRecorder stub (AgentSideConnection ref); AcpSecurityGate; AcpEventMapper @runtime_checkable Protocol; AuditTrail.query_events docstring |\n| scripts/aura_protocol/state_machine.py | Make CONSENSUS_GATED, BLOCKER_GATED, REVISE_DRIVES_BACK public |\n| scripts/aura_protocol/types.py | Add AcpEventType(StrEnum) |\n| pyproject.toml | Add BOTH agent-client-protocol\u003e=0.1 AND pydantic\u003e=2.7 to [project.dependencies]; version → 0.7.0 |\n| flake.nix | Add homeManagerModules.temporal-dev-server |\n| tests/test_interfaces.py | Update TestA2APartTypes.test_file_part_creation + test_file_part_optional_mime_type for FileWithUri; add TestFileWithUri covering 3-field construction (uri, name, mime_type) |\n| tests/test_workflow.py | Worker registration for child workflow types; AcpRawSignal signal test; AcpMappedSignal noop() test |\n| CHANGELOG.md | v0.7.0 entry |\n\n---\n\n## 4. Slices (6 vertical — updated)\n\n### SLICE-1: PhaseInput + topology refactor (UPDATED — AcpEventType + error handling)\nFiles: workflow.py, state_machine.py, types.py, phase_workflows.py (new), phase_activities.py (new)\nDeliverables (additions to PROPOSAL-2 SLICE-1):\n- AcpEventType(StrEnum) in types.py: PHASE_ADVANCE, REVIEW_VOTE\n- AcpRawSignal.event_type: AcpEventType (not str)\n- AcpMappedSignal: __post_init__ validation + noop() classmethod\n- run() drain loop: try/except ActivityError around map_acp_event dispatch; log session_id + event_type + skip\nAll other SLICE-1 deliverables unchanged from PROPOSAL-2.\nAC: All 973 tests pass. AcpMappedSignal(advance=None, vote=None) raises ValueError. AcpMappedSignal.noop() succeeds. ActivityError in map_acp_event skips signal, epoch continues.\n\n### SLICE-2: ACP SDK + type alignment (UPDATED — pydantic dep + FileWithUri name + ValidationError)\nFiles: interfaces.py, types.py, pyproject.toml, uv.lock, tests/test_interfaces.py\nDeliverables (changes from PROPOSAL-2 SLICE-2):\n- pyproject.toml [project.dependencies]: add agent-client-protocol\u003e=0.1 AND pydantic\u003e=2.7 (both explicit)\n- FileWithUri(frozen=True): uri: str, name: str | None = None, mime_type: str | None = None\n- FilePart: file_with_uri: FileWithUri (unchanged from P2 except FileWithUri now has 3 fields)\n- map_acp_event catches pydantic.ValidationError → returns AcpMappedSignal.noop()\n- Test migrations (A-2 SHOULD FIX #2): TestA2APartTypes.test_file_part_creation + test_file_part_optional_mime_type updated to use FileWithUri wrapper; new TestFileWithUri class covering 3-field construction\n- AcpEventType(StrEnum) added to types.py (if not already done in SLICE-1)\nAll other SLICE-2 deliverables unchanged from PROPOSAL-2.\nAC: FileWithUri(uri='...', name='report.pdf', mime_type='application/pdf') constructed. FileWithUri(uri='...') constructed (name+mime_type default to None). pydantic.ValidationError in map_acp_event returns noop(), does not retry. Both existing test_file_part_* tests pass with new FileWithUri structure.\n\n### SLICE-3: AuditTrail + event emission (unchanged from PROPOSAL-2)\nSee PROPOSAL-2 SLICE-3.\n\n### SLICE-4: SecurityGate + TranscriptRecorder + AcpMapper (UPDATED — stub label + noop)\nFiles: interfaces.py, acp_mapper.py (new)\nChanges from PROPOSAL-2 SLICE-4:\n- AcpTranscriptRecorder stub label: references AgentSideConnection.session_update() from acp.agent\n- DefaultAcpEventMapper.map_to_signal() for unknown events: returns AcpMappedSignal.noop() (not AcpMappedSignal(None, None))\nAll other SLICE-4 deliverables unchanged.\nAC: isinstance(AcpTranscriptRecorder(), TranscriptRecorder) True. isinstance(AcpSecurityGate(), SecurityGate) True. isinstance(DefaultAcpEventMapper(), AcpEventMapper) True. DefaultAcpEventMapper(unknown_event) returns AcpMappedSignal.noop() (not bare None, None). Existing 3 TranscriptRecorder tests still pass.\n\n### SLICE-5: Temporal infrastructure (unchanged from PROPOSAL-2)\nSee PROPOSAL-2 SLICE-5.\n\n### SLICE-6: Tests + version bump + CHANGELOG (unchanged from PROPOSAL-2)\nSee PROPOSAL-2 SLICE-6.\n\n---\n\n## 5. Key Design Decisions (additions to PROPOSAL-2)\n\nD11: AcpMappedSignal.noop() is the canonical no-op factory. No direct (None, None) construction — __post_init__ rejects it. _is_noop sentinel is private (not part of public API).\nD12: map_acp_event catches pydantic.ValidationError before the Temporal retry loop. ValidationError is non-transient (bad JSON won't be fixed by retry). Return noop() immediately.\nD13: run() drain loop catches ActivityError around map_acp_event dispatch — same pattern as TransitionError at workflow.py:284-299. Log session_id + event_type. Epoch liveness preserved on permanently-failed activities.\nD14: AcpEventType is StrEnum in types.py (not interfaces.py) — consistent with PhaseId, RoleId placement. DefaultAcpEventMapper returns noop() for values not in AcpEventType.\nD15: FileWithUri.name carries human-readable filename (e.g. 'report.pdf'). Optional per A2A spec. mime_type also optional. uri is required. All 3 fields per A2A v0.3.0 spec (PR #663).\n\n---\n\n## 6. Acceptance Criteria (updated from PROPOSAL-2)\n\nAC1: All 973 existing tests pass after topology refactor.\nAC2: New child workflow tests (P4, P9, P10) pass with Temporal sandbox.\nAC3: isinstance(AcpSecurityGate(), SecurityGate) and isinstance(AcpTranscriptRecorder(), TranscriptRecorder) both True.\nAC4: ToolCall.raw_input, ToolCall.raw_output, ToolCall.tool_call_id accessible.\nAC5: FilePart.file_with_uri is FileWithUri instance. FileWithUri.uri accessible. FileWithUri.name and FileWithUri.mime_type default to None.\nAC6: agent-client-protocol importable from project venv. pydantic importable from project venv.\nAC7: bin/worker.py --help exits cleanly.\nAC8: nix/temporal-service.nix homeManagerModules.temporal-dev-server exported in flake.\nAC9: record_transition activity is not a no-op (test asserts PhaseTransitionEvent emitted).\nAC10: All stub classes carry structured stub labels (motivation, epoch, expected implementation).\nAC11: pyproject.toml version = '0.7.0'; CHANGELOG has v0.7.0 section.\nAC12: DefaultAcpEventMapper returns AcpMappedSignal.noop() for unknown ACP events.\nAC13: isinstance(DefaultAcpEventMapper(), AcpEventMapper) is True.\nAC14: Existing 3 TranscriptRecorder tests (TestTranscriptRecorderProtocol) still pass.\nAC15: AuditTrail.query_events() docstring contains ACTIVITY-ONLY warning.\nAC16: P9SliceWorkflow fan-out respects max_concurrent_slices cap (default 20).\nAC17: AcpMappedSignal(advance=None, vote=None) raises ValueError. AcpMappedSignal.noop() returns valid instance.\nAC18: pydantic.ValidationError in map_acp_event returns AcpMappedSignal.noop() without retrying.\nAC19: ActivityError from map_acp_event is caught in run() drain loop; epoch workflow continues (liveness test).\nAC20: AcpRawSignal.event_type is AcpEventType (StrEnum), not str.\nAC21: FileWithUri(uri='test.txt', name='report.pdf') constructed without error. FileWithUri(uri='test.txt') (name+mime_type omitted) constructed without error.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-lnua","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-3: Protocol Engine v3 — ACP error handling + FileWithUri name field + typed enums","updated_at":"2026-02-26T12:39:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8d4e0347ca22f585ce8ef00f37437a0d50ddda59a474b27b0facba18f7317f0e","created_at":"2026-02-27T06:54:19Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"docs/aurad.md:117-198\n\nThe 'systemd User Service' section of the operator guide documents only the Temporal dev server\n(temporal-service.nix). There is NO documentation for nix/aurad-service.nix — the systemd module\nadded in SLICE-2 (R2) that runs aurad itself as a daemon.\n\nA user reading aurad.md to set up aurad as a systemd service would find only the Temporal server\nsetup and no guidance at all for running aurad via systemd.\n\nThe roadmap section (lines 343-360) compounds the problem by saying:\n  'There is no dedicated systemd user service for aurad itself yet.'\nThis is factually wrong — aurad-service.nix was just implemented in SLICE-2.\n\nFix:\n1. Add a subsection under 'systemd User Service' (or a new top-level section) documenting aurad-service.nix:\n   - imports = [ inputs.aura-plugins.homeManagerModules.aurad-service ];\n   - services.aurad.enable + options table\n   - Service management commands (systemctl --user status aurad, etc.)\n   - Note: After= temporal-dev-server.service dependency\n2. Remove or rewrite the stale roadmap section (lines 343-360) to describe aurad-service as implemented.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ltcs","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"IMPORTANT: docs/aurad.md systemd section missing aurad-service.nix documentation","updated_at":"2026-02-27T06:54:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6b655cc5ec6697bf14815e2acf6d723e0ae971067d1ee269f17fdfcba911019b","created_at":"2026-02-26T23:46:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-uvgb\n  followup_epic: aura-plugins-hgki\n---\nMINOR findings for FOLLOWUP-REVIEW-B-1 (test quality axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ltvf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-B-1 MINOR","updated_at":"2026-02-26T23:46:24Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e61e70d20f01163890916b1a38b6073d2317aea2a07a3dfde811ae02fcdad3df","created_at":"2026-02-26T08:37:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-lvm7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 BLOCKER: Fixture and test case verification","updated_at":"2026-02-26T08:37:49Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c519f9ec05ff6e3e9b8bd5d7e5bda176daddf4acb96297cc6b98ab0c70099c33","created_at":"2026-02-22T17:42:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"PR the fix from branch fix/dolt-subcommand-store-init to the upstream beads repo (github.com/steveyegge/beads). The fix exempts commit/push/pull from the noDbCommands parent-name skip in PersistentPreRun.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-m4i3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Upstream getStore() fix to beads repo","updated_at":"2026-02-22T17:42:57Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:44:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dccf0d8b3c661c164eea1ae4112e2dcfa09527aed9fbb9debda8485a7da42cf9","created_at":"2026-02-25T22:44:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  review_round: 2\n---\nIMPORTANT findings from Reviewer A (Correctness) on SLICE-1, Round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-m4mq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-2 IMPORTANT","updated_at":"2026-02-25T22:44:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:23:04Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-1 IMPORTANT severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-m5o","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-22T02:23:04Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:20:06Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"81f7b09d2271cd807af484cc529d6c8d681dbf9074550aea981a41bf33681cf2","created_at":"2026-02-23T04:22:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer C (Elegance) on SLICE-3. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-m6w0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-23T12:20:06Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"epoch","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"be4cb539550b440aa2e37ba2842760693fb11045910e36fa84ab18bb82f1ba70","created_at":"2026-02-26T15:18:45Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  urd: aura-plugins-2ojv\n  proposal: aura-plugins-vbrj\n---\n\nPlan UAT for PROPOSAL-10: Aura Protocol v3 Temporal Engine.\n\nRatified design to be validated by the user before handoff to supervisor for implementation.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-m9p1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"UAT: Plan — Aura Protocol v3 Temporal Engine (PROPOSAL-10)","updated_at":"2026-02-26T15:18:45Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c790694e3924d746767adafaa25656ab07fe0381c7ed260e81c40cb4c0e7c97a","created_at":"2026-02-25T22:37:05Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  review_round: 1\n---\nMINOR findings from Reviewer A (Correctness) on SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mc88","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 MINOR","updated_at":"2026-02-25T22:37:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ac0ea956558b13082ddbac02a48d294a6a1d3995df25084962f2d45443d6fc13","created_at":"2026-02-26T04:30:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mdj4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-2 IMPORTANT","updated_at":"2026-02-26T04:30:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"22fc2bd60b57d70171b286e4044b35ee147f5ed3cec3900557e4dd28b45d8a91","created_at":"2026-02-26T07:12:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - All 3 round-1 blockers are resolved:\n\n1. PATH TYPING: PluginEntry.path: Path and MarketplaceEntry.path: Path are specified in SLICE-3. Both fields are explicitly typed as Path throughout, consistent with VersionFile.path and _ScanSpec. Blocker 1 resolved.\n\n2. DOUBLE-BUMP DEDUPLICATION: SLICE-5 now specifies the concrete guard — resolved_mp not in {vf.path.resolve() for vf in files} — and it is in the validation checklist. The mechanism is explicit and correct. Blocker 2 resolved.\n\n3. LAZY _registry_path(): SLICE-3 specifies def _registry_path() -\u003e Path (lazy function, not module-level constant). Docstring calls out 'Lazy: testable via monkeypatch.' Blocker 3 resolved.\n\nON TESTABILITY APPROACH: PluginRegistry.load(registry_path: Path | None = None) is the right pattern. It makes the dependency explicit in the signature, lets tests pass tmp_path directly without any patching, and uses _registry_path() only as the default. This is cleaner than pure monkeypatching (no module-global state mutation needed in tests). The two-layer design — explicit parameter for tests, lazy function as default — is idiomatic and elegant.\n\nRESIDUAL MINOR (not a blocker): In SLICE-5, MarketplaceVersionFile is instantiated as MarketplaceVersionFile(name=str(resolved_mp), path=resolved_mp). Using str(resolved_mp) as the name field is cosmetically inconsistent with the short-name convention used elsewhere (e.g., '.claude-plugin/marketplace.json'). Does not affect correctness or testability. Can be addressed in implementation without a PROPOSAL-3.\n\nOverall: design is clean, complexity matches the problem domain, all round-1 elegance concerns are addressed.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mdyr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-2-REVIEW-C-2: Plugin registry + marketplace fix + test quality","updated_at":"2026-02-26T07:12:21Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:11Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4ae3634ccbdd02985bd6751378f03274b3dde280d2f19fd0aba1d6a9c59c5ea3","created_at":"2026-02-22T18:32:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-w115\n  urd: aura-plugins-w07o\n  supersedes: aura-plugins-v01u\n  original_urd: aura-plugins-umi\n  original_proposal: aura-plugins-gmv\n  followup_urd: aura-plugins-s6i\n  v1_elicit: aura-plugins-gbr\n  review_a_r2: aura-plugins-mu1e\n  review_b_r2: aura-plugins-qt1p\n  review_c_r2: aura-plugins-6hmr\n  uat: aura-plugins-tvkz\nstatus: RATIFIED\n---\n\n## Ratification Summary\n\nPROPOSAL-3 achieved 3/3 ACCEPT consensus (Round 3) and Plan UAT ACCEPT with 6 revisions. This is the ratified version incorporating all UAT decisions.\n\n### UAT Revisions (from aura-plugins-tvkz)\n1. **Bootstrap: Hybrid codegen + manual polish** — gen_types.py generates a draft; developer reviews and merges into types.py\n2. **Diff output required** — gen_schema.py and gen_skills.py must show a diff of what changed\n3. **Constraint→role in schema.xml** — Static dicts in Python generate role-ref/phase-ref attributes into schema.xml\n4. **ConstraintContext dataclass** — Typed frozen dataclass with when+then fields replaces frozenset[str] in RoleContext/PhaseContext\n5. **MarkerError on missing markers** — gen_skills.py raises MarkerError if SKILL.md has no markers (no silent prepending)\n6. **ProcedureStep POC** — Populate PROCEDURE_STEPS for supervisor + worker roles as proof of concept\n\n### Changes from PROPOSAL-2 (aura-plugins-v01u)\n\nPROPOSAL-2 achieved 3/3 ACCEPT consensus. This revision preserves all acceptance criteria and adds:\n\n1. **Existing Foundation inventory** — full accounting of what v1+followup built (554 tests, 6 modules, 4 dicts, 23 C-\\* validators)\n2. **Integration architecture** — explicit mapping of how new v2 modules connect to existing code\n3. **Temporal compatibility** — new types are additive only; no breaking changes to serialized types\n4. **Modified vs new files** — clear delineation\n5. **Gap analysis findings** — explorer-types, explorer-parser, explorer-constraints, explorer-skills results integrated\n6. **README.md and AGENTS.md updates** — document the aura_protocol package\n\n---\n\n## Existing Foundation (v1 + followup = v0.4.3)\n\n### Modules (6 files in scripts/aura_protocol/)\n| Module | Lines | Purpose |\n|--------|-------|---------|\n| types.py | 682 | 5 enums, 10 frozen dataclasses, 4 canonical dicts |\n| state_machine.py | 389 | EpochStateMachine — 12-phase lifecycle with consensus/blocker gates |\n| constraints.py | ~1400 | RuntimeConstraintChecker — all 23 C-\\* validators |\n| workflow.py | 382 | Temporal workflow wrapper (signals, queries, search attributes) |\n| interfaces.py | 295 | 4 Protocol interfaces + A2A types + ModelId |\n| __init__.py | 150 | Public API re-exports |\n\n### Existing Types (already in types.py)\n- **Enums (5):** PhaseId, Domain, RoleId, VoteType, SeverityLevel\n- **Spec dataclasses (4):** Transition, PhaseSpec, ConstraintSpec, HandoffSpec\n- **Event stubs (6):** PhaseTransitionEvent, ConstraintCheckEvent, ReviewVoteEvent, AuditEvent, ToolPermissionRequest, PermissionDecision\n- **Canonical dicts (4):** PHASE_SPECS (12), CONSTRAINT_SPECS (23), HANDOFF_SPECS (6), PHASE_DOMAIN (12)\n\n### Tests (554 passing, 7 files)\n| File | Tests | Covers |\n|------|-------|--------|\n| test_aura_types.py | ~80 | Enum completeness, frozen dataclass immutability, dict coverage |\n| test_schema_types_sync.py | ~50 | Field-level Python↔schema.xml sync (phases, constraints, handoffs) |\n| test_state_machine.py | ~120 | State machine transitions, consensus gates, blocker gates |\n| test_constraints.py | ~180 | All 23 C-\\* runtime validators, BDD-style class-per-constraint |\n| test_workflow.py | ~60 | Temporal sandbox: signals, queries, search attributes, failed transitions |\n| test_interfaces.py | ~40 | Protocol satisfaction, A2A types, ModelId parsing |\n| test_validate_schema.py | ~24 | CLI validation, mutation testing |\n\n### Supporting Infrastructure\n- validate_schema.py (768 lines) — 3-layer XML validation with SchemaIndex\n- tests/fixtures/ — schema_valid_minimal.xml, SchemaFixture mutation framework\n- conftest.py — _advance_to(), _make_state(), sm/sm_at_p4 fixtures\n\n---\n\n## Gap Analysis Summary (from 4 explore agents)\n\n### What's genuinely new (100% greenfield)\n- 8 new dataclasses: SubstepSpec, RoleSpec, DelegateSpec, CommandSpec, LabelSpec, ReviewAxisSpec, TitleConvention, ProcedureStep\n- 5 new canonical dicts: ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS, REVIEW_AXIS_SPECS, TITLE_CONVENTIONS\n- 7 missing enums from schema.xml: ExecutionMode, ContentLevel, Classification{Scope,Complexity,Risk,Novelty}, ResearchDepth\n- schema_parser.py, gen_types.py, gen_schema.py, gen_skills.py, context_injection.py — no partial implementations exist\n- 0 SKILL.md markers, 0 Jinja2 templates, 0 generation scripts\n\n### What's reusable from v1\n- validate_schema.py traversal patterns (~60% of schema_parser.py logic derivable)\n- test_schema_types_sync.py field-level comparison pattern (model for AC3)\n- SchemaFixture mutation framework (model for AC1a error-path tests)\n- constraints.py phase-specific constants (_REVIEW_PHASES, _SEVERITY_TREE_PHASES)\n- PHASE_SPECS.owner_roles (invertible to role→phases for context_injection.py)\n\n### Existing type-safety gaps to fix in this epoch\n- HandoffSpec.content_level is bare str (should be ContentLevel enum)\n- ReviewVoteEvent.axis is bare str (should use ReviewAxis enum)\n\n---\n\n## Integration Architecture\n\n### How v2 modules connect to v1 code\n\n```\n                     ┌──────────────────────────┐\n                     │   skills/protocol/       │\n                     │   schema.xml (1,314 lines)│\n                     └──────────┬───────────────┘\n                                │ ONE-TIME BOOTSTRAP\n                                ▼\n┌──────────────────────────────────────────────────────┐\n│              schema_parser.py (NEW)                    │\n│  parse_schema(path) → SchemaSpec                      │\n│  Reuses validate_schema.py traversal patterns         │\n│  Raises SchemaParseError on malformed input           │\n└──────────┬────────────────────────────────────────────┘\n           │ feeds into\n           ▼\n┌──────────────────────────────────────────────────────┐\n│              gen_types.py (NEW — UAT revision 1)       │\n│  Generates draft Python source from SchemaSpec         │\n│  Developer reviews, edits, merges into types.py        │\n│  One-time bootstrap tool; not used in steady state     │\n└──────────┬────────────────────────────────────────────┘\n           │ developer merges into\n           ▼\n┌──────────────────────────────────────────────────────┐\n│  types.py (MODIFIED — additions only)                  │\n│                                                        │\n│  EXISTING (unchanged):                                 │\n│    PhaseId, Domain, RoleId, VoteType, SeverityLevel    │\n│    PhaseSpec, ConstraintSpec, HandoffSpec, Transition   │\n│    PHASE_SPECS, CONSTRAINT_SPECS, HANDOFF_SPECS        │\n│    Event stubs, PHASE_DOMAIN                           │\n│                                                        │\n│  NEW additions:                                        │\n│    ExecutionMode, ContentLevel, ReviewAxis enums        │\n│    SubstepSpec, RoleSpec, DelegateSpec, CommandSpec     │\n│    LabelSpec, ReviewAxisSpec, TitleConvention           │\n│    ProcedureStep (populated for supervisor+worker POC) │\n│    ConstraintContext (typed when+then for injection)    │\n│    ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS              │\n│    REVIEW_AXIS_SPECS, TITLE_CONVENTIONS                │\n│    PROCEDURE_STEPS (supervisor+worker populated)       │\n│                                                        │\n│  FIXED (non-breaking):                                 │\n│    HandoffSpec.content_level: str → ContentLevel       │\n└───────┬──────────┬──────────┬────────────────────────┘\n        │          │          │\n        │          │          │ SOURCE OF TRUTH\n        ▼          ▼          ▼\n┌──────────┐ ┌──────────┐ ┌──────────────────┐\n│gen_schema│ │gen_skills│ │context_injection │\n│.py (NEW) │ │.py (NEW) │ │.py (NEW)         │\n│          │ │          │ │                  │\n│Python →  │ │Python →  │ │get_role_context()│\n│schema.xml│ │SKILL.md  │ │get_phase_context│\n│(export)  │ │(headers) │ │                  │\n│+role-ref │ │+diff out │ │+ConstraintContext│\n│+phase-ref│ │          │ │ (when+then)      │\n│+diff out │ │          │ │                  │\n└────┬─────┘ └────┬─────┘ └────────┬─────────┘\n     │            │                │\n     ▼            ▼                │\n  validates    38 SKILL.md         │ RUNTIME INTEGRATION\n  against      files               │\n  existing     (markers            ▼\n  validate_    required)   ┌────────────────────┐\n  schema.py                │ EXISTING CONSUMERS  │\n                           │                    │\n                           │ constraints.py     │\n                           │  (23 C-* validators │\n                           │   — unchanged)      │\n                           │                    │\n                           │ workflow.py        │\n                           │  (Temporal wrapper  │\n                           │   — unchanged)      │\n                           │                    │\n                           │ state_machine.py   │\n                           │  (12-phase FSM     │\n                           │   — unchanged)      │\n                           └────────────────────┘\n```\n\n### Temporal Compatibility\n\n**No breaking changes to Temporal-serialized types.** The Temporal workflow (workflow.py) serializes:\n- EpochState (contains PhaseId, RoleId, VoteType, SeverityLevel)\n- TransitionRecord (contains PhaseId)\n- EpochInput, EpochResult, PhaseAdvanceSignal, ReviewVoteSignal\n\nNone of these types are modified. New types (RoleSpec, CommandSpec, ConstraintContext, etc.) are NOT used by Temporal — they're for code generation and context injection only.\n\n**HandoffSpec.content_level str→ContentLevel change:** This is safe because HandoffSpec is NOT serialized by Temporal. It's only used in constraints.py for validation and in types.py as a static definition.\n\n### context_injection.py Integration Points\n\ncontext_injection.py is a pure lookup module — no side effects, no Temporal dependency:\n- Reads from PHASE_SPECS, CONSTRAINT_SPECS, HANDOFF_SPECS (existing), ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS (new)\n- Called at skill invocation time (not from Temporal workflow)\n- Called at phase transition time for prompt enrichment (not from Temporal workflow)\n- Static mappings for constraint→role and constraint→phase (Python is SoT; gen_schema.py exports as role-ref/phase-ref into schema.xml)\n- Returns frozen RoleContext / PhaseContext dataclasses with ConstraintContext (typed when+then)\n\n---\n\n## Problem Space\n\n**Axes:** code generation (schema → code, code → schema), drift elimination (38 SKILL.md files × 1 schema.xml), runtime context injection (role-level + phase-level), source-of-truth inversion (schema.xml → Python types.py)\n\n## Engineering Tradeoffs\n\n| Decision | Choice | Rationale |\n|----------|--------|-----------|\n| Source of truth | Python types.py | User requirement. Directly usable at runtime. |\n| Bootstrap | Hybrid codegen + manual polish (UAT-1) | gen_types.py generates draft; developer reviews and merges. Saves transcription, retains control. |\n| Template engine | Jinja2 (dev-only dep) | Industry standard. StrictUndefined catches errors. |\n| XML generation | xml.etree.ElementTree | Stdlib, no new dependency |\n| SKILL.md split | Marker-based (markers required) (UAT-5) | gen_skills.py raises MarkerError if no markers found. No silent prepending. |\n| ProcedureStep | Populated for supervisor+worker POC (UAT-6) | Proves the pattern end-to-end. Other roles deferred. |\n| content_level typing | ContentLevel enum (from str) | Type safety; non-breaking (not Temporal-serialized) |\n| Constraint→role mapping | Static dicts in Python → role-ref/phase-ref in XML (UAT-3) | Python is SoT; gen_schema.py exports structural attributes into schema.xml |\n| Context injection types | ConstraintContext frozen dataclass (UAT-4) | Typed when+then fields, not bare strings. Strongly-typed throughout. |\n| Generation diff output | gen_schema + gen_skills show diff (UAT-2) | User requirement: must see what changed on each generation run. |\n\n## MVP Milestone\n\n### Architecture Overview\n```\n== BOOTSTRAP (one-time) ==\nschema.xml → [schema_parser.py] → SchemaSpec\n         → [gen_types.py] → draft Python source\n         → developer reviews + merges → types.py\n\n== STEADY STATE (ongoing) ==\ntypes.py (SOURCE OF TRUTH)\n    ├─→ [gen_schema.py] → schema.xml (with role-ref/phase-ref, diff shown, validated by validate_schema.py)\n    ├─→ [gen_skills.py] → SKILL.md (generated headers with markers, diff shown)\n    └─→ [context_injection.py] → runtime role/phase context with ConstraintContext (for prompt enrichment)\n```\n\n### Module 1: schema_parser.py — Bootstrap Schema Parser\n\n```python\n@dataclass\nclass SchemaSpec:\n    phases: dict[str, PhaseSpec]\n    roles: dict[str, RoleSpec]\n    commands: dict[str, CommandSpec]\n    constraints: dict[str, ConstraintSpec]\n    handoffs: dict[str, HandoffSpec]\n    labels: dict[str, LabelSpec]\n    review_axes: dict[str, ReviewAxisSpec]\n    title_conventions: list[TitleConvention]\n\nclass SchemaParseError(Exception):\n    \"\"\"Raised when schema.xml is malformed or missing required sections.\"\"\"\n\ndef parse_schema(path: Path) -\u003e SchemaSpec:\n    \"\"\"Parse schema.xml into typed Python specs.\n    Reuses validate_schema.py traversal patterns.\n    Raises SchemaParseError on malformed input.\"\"\"\n```\n\n### Module 1b: gen_types.py — Bootstrap Codegen (UAT revision 1)\n\n```python\ndef generate_types_source(spec: SchemaSpec) -\u003e str:\n    \"\"\"Generate draft Python source code for new types/dicts from SchemaSpec.\n    Output is a draft file for developer review and manual merge into types.py.\n    One-time bootstrap tool; not used in steady state.\"\"\"\n```\n\n### Module 2: Expanded types.py — Protocol Types (SoT)\n\n**Existing types unchanged.** New additions only:\n- New enums: ExecutionMode, ContentLevel, ReviewAxis\n- New dataclasses: SubstepSpec, RoleSpec, DelegateSpec, CommandSpec, LabelSpec, ReviewAxisSpec, TitleConvention, ProcedureStep, ConstraintContext\n- New canonical dicts: ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS, REVIEW_AXIS_SPECS, TITLE_CONVENTIONS, PROCEDURE_STEPS (supervisor+worker populated)\n- Fix: HandoffSpec.content_level str → ContentLevel enum\n- Fix: ReviewVoteEvent.axis str → ReviewAxis enum\n\n### Module 3: gen_schema.py — Python → schema.xml Generator (UAT revisions 2, 3)\n\n```python\ndef generate_schema(output: Path, *, diff: bool = True) -\u003e str | None:\n    \"\"\"Generate schema.xml from Python types.\n    Includes role-ref/phase-ref attributes on \u003cconstraint\u003e elements (UAT-3).\n    When diff=True, prints unified diff of changes before writing (UAT-2).\n    Output must pass existing validate_schema.py with 0 errors.\n    Uses xml.etree.ElementTree (stdlib).\"\"\"\n```\n\n### Module 4: gen_skills.py — Python → SKILL.md Generator (UAT revisions 2, 5)\n\n```python\nGENERATED_BEGIN = \"\u003c!-- BEGIN GENERATED FROM schema --\u003e\"\nGENERATED_END = \"\u003c!-- END GENERATED --\u003e\"\n\nclass MarkerError(ValueError):\n    \"\"\"Raised when SKILL.md markers are malformed or missing.\n    Missing markers = MarkerError (UAT-5): no silent prepending.\"\"\"\n\ndef generate_skill(..., diff: bool = True) -\u003e str:\n    \"\"\"Generate SKILL.md content. Preserves hand-written body below markers.\n    Raises MarkerError if no markers found — developer must place markers first.\n    When diff=True, prints unified diff of changes (UAT-2).\"\"\"\n```\n\n### Module 5: context_injection.py — Runtime Context Injection (UAT revisions 3, 4)\n\n```python\n@dataclass(frozen=True)\nclass ConstraintContext:\n    \"\"\"Typed constraint with when/then clauses for prompt injection (UAT-4).\"\"\"\n    id: str               # C-* identifier\n    when: str             # trigger condition\n    then: str             # the rule\n\n@dataclass(frozen=True)\nclass RoleContext:\n    role: RoleId\n    phases: frozenset[PhaseId]\n    constraints: frozenset[ConstraintContext]    # typed, not frozenset[str] (UAT-4)\n    commands: tuple[str, ...]\n    handoffs: tuple[str, ...]\n\n@dataclass(frozen=True)\nclass PhaseContext:\n    phase: PhaseId\n    constraints: frozenset[ConstraintContext]    # typed, not frozenset[str] (UAT-4)\n    labels: tuple[str, ...]\n    transitions: tuple[Transition, ...]\n\n# Static mappings — constraint→role and constraint→phase\n# Python is SoT; gen_schema.py exports as role-ref/phase-ref into schema.xml (UAT-3)\n_ROLE_CONSTRAINTS: dict[RoleId, frozenset[str]] = { ... }\n_PHASE_CONSTRAINTS: dict[PhaseId, frozenset[str]] = { ... }\n\ndef get_role_context(role: RoleId) -\u003e RoleContext: ...\ndef get_phase_context(phase: PhaseId) -\u003e PhaseContext: ...\n```\n\n---\n\n## File Inventory\n\n### Modified (existing files, additions only)\n| File | Changes |\n|------|---------|\n| scripts/aura_protocol/types.py | +9 dataclasses (incl ConstraintContext), +6 dicts (incl PROCEDURE_STEPS), +3 enums, fix content_level+axis |\n| scripts/aura_protocol/__init__.py | Re-export new types |\n| tests/test_schema_types_sync.py | Extend sync tests for new dicts |\n| pyproject.toml | Add jinja2 to dev deps |\n\n### New files\n| File | Purpose |\n|------|---------|\n| scripts/aura_protocol/schema_parser.py | Bootstrap parser |\n| scripts/aura_protocol/gen_types.py | Bootstrap codegen draft (UAT-1) |\n| scripts/aura_protocol/gen_schema.py | Python → schema.xml with diff + role-ref/phase-ref (UAT-2,3) |\n| scripts/aura_protocol/gen_skills.py | Python → SKILL.md with diff + MarkerError (UAT-2,5) |\n| scripts/aura_protocol/context_injection.py | Runtime context with ConstraintContext (UAT-4) |\n| tests/test_schema_parser.py | Parser tests + error paths |\n| tests/test_gen_types.py | Bootstrap codegen tests |\n| tests/test_gen_schema.py | Round-trip + validation + diff output |\n| tests/test_gen_skills.py | Marker tests + template tests + MarkerError on missing |\n| tests/test_context_injection.py | Role/phase context + absence + ConstraintContext fields |\n| skills/templates/*.j2 | Jinja2 templates for SKILL.md |\n\n### Unchanged (no modifications)\n- scripts/aura_protocol/state_machine.py\n- scripts/aura_protocol/constraints.py\n- scripts/aura_protocol/workflow.py\n- scripts/aura_protocol/interfaces.py\n- scripts/validate_schema.py\n- All 7 existing test files (except test_schema_types_sync.py)\n\n---\n\n## Vertical Slice Decomposition\n\n### SLICE-1: Schema Parser + Type Expansion + Bootstrap Codegen (Foundation)\n**Files modified:** types.py, __init__.py, test_schema_types_sync.py\n**Files created:** schema_parser.py, gen_types.py, test_schema_parser.py, test_gen_types.py\n**Depends on:** nothing\n**Includes:** ProcedureStep populated for supervisor+worker (UAT-6), ConstraintContext dataclass (UAT-4)\n**Worker model:** sonnet\n\n### SLICE-2: Schema.xml Generator (Python → XML) with Diff + role-ref/phase-ref\n**Files created:** gen_schema.py, test_gen_schema.py\n**Depends on:** SLICE-1 (needs expanded types + constraint→role mappings)\n**Validates against:** existing validate_schema.py (unchanged)\n**Includes:** Diff output (UAT-2), role-ref/phase-ref generation (UAT-3)\n**Worker model:** sonnet\n\n### SLICE-3: SKILL.md Generator (Python → SKILL.md) with Diff + MarkerError\n**Files created:** gen_skills.py, test_gen_skills.py, skills/templates/*.j2\n**Depends on:** SLICE-1 (needs expanded types)\n**Parallel with:** SLICE-2\n**Includes:** Diff output (UAT-2), MarkerError on missing markers (UAT-5)\n**Worker model:** sonnet\n\n### SLICE-4: Runtime Context Injection with ConstraintContext\n**Files created:** context_injection.py, test_context_injection.py\n**Depends on:** SLICE-1 (needs expanded types + new dicts + ConstraintContext)\n**Parallel with:** SLICE-2, SLICE-3\n**Includes:** ConstraintContext with typed when+then (UAT-4)\n**Worker model:** sonnet\n\n---\n\n## Validation Checklist\n\n- [ ] Schema parser extracts all 12 phases, 5 roles, 35 commands, 23 constraints, 6 handoffs, 21 labels, 3 axes\n- [ ] Schema parser raises SchemaParseError on malformed input (3+ error-path tests)\n- [ ] gen_types.py generates valid draft Python source from SchemaSpec (UAT-1)\n- [ ] New spec types are frozen dataclasses\n- [ ] All 6 new canonical dicts populated (incl PROCEDURE_STEPS for supervisor+worker)\n- [ ] ProcedureStep populated for supervisor and worker roles as POC (UAT-6)\n- [ ] ConstraintContext frozen dataclass with typed when+then fields (UAT-4)\n- [ ] HandoffSpec.content_level typed as ContentLevel enum (non-breaking)\n- [ ] ReviewVoteEvent.axis typed as ReviewAxis enum\n- [ ] gen_schema.py output passes validate_schema.py with 0 errors\n- [ ] gen_schema.py generates role-ref/phase-ref on constraint elements (UAT-3)\n- [ ] gen_schema.py shows unified diff of changes (UAT-2)\n- [ ] Round-trip test: field-by-field comparison (not count-only)\n- [ ] gen_skills.py generates SKILL.md with correct content\n- [ ] gen_skills.py preserves hand-written body below marker\n- [ ] gen_skills.py raises MarkerError on missing markers (UAT-5)\n- [ ] gen_skills.py raises MarkerError on malformed markers\n- [ ] gen_skills.py shows unified diff of changes (UAT-2)\n- [ ] Jinja2 templates render with StrictUndefined (parametrized over 4 roles)\n- [ ] get_role_context returns ConstraintContext objects with when+then (UAT-4)\n- [ ] get_role_context does NOT include irrelevant constraints\n- [ ] get_phase_context returns ConstraintContext objects with when+then (UAT-4)\n- [ ] get_phase_context does NOT include irrelevant constraints\n- [ ] End-to-end pipeline test: parse → gen_types → gen_schema → validate → gen_skills\n- [ ] test_schema_types_sync.py covers all new canonical dicts\n- [ ] All 554 existing tests pass (no regressions)\n- [ ] No Temporal-serialized types modified (EpochState, TransitionRecord unchanged)\n\n## BDD Acceptance Criteria\n\n### AC1: Schema Parser Bootstrap\nGiven schema.xml (1,314 lines) when parse_schema() is called then returns SchemaSpec with 12 phases, 5 roles, 35 commands, 23 constraints, 6 handoffs, 21 labels, 3 review axes. Should not silently skip entities.\n\n### AC1a: Schema Parser Error Paths\nGiven malformed XML when parse_schema() is called then raises SchemaParseError. At least 3 error-path tests.\n\n### AC1b: Bootstrap Codegen (UAT revision 1)\nGiven SchemaSpec from parse_schema() when gen_types.py runs then produces valid Python source code containing all new dataclass definitions, enum definitions, and canonical dict entries. Developer reviews draft and merges into types.py.\n\n### AC2: Python as Source of Truth\nGiven types.py with expanded specs when gen_schema.py runs then produces schema.xml that passes validate_schema.py with 0 errors.\n\n### AC2a: Diff Output on Generation (UAT revision 2)\nGiven types.py when gen_schema.py or gen_skills.py runs then prints unified diff of changes before writing. Developer sees exactly what changed.\n\n### AC2b: Constraint role-ref/phase-ref in schema.xml (UAT revision 3)\nGiven _ROLE_CONSTRAINTS and _PHASE_CONSTRAINTS static dicts in Python when gen_schema.py runs then schema.xml constraint elements include role-ref and phase-ref attributes.\n\n### AC3: Round-Trip Consistency (Field-Level)\nGiven Python types.py when generating then parsing back then every entity matches field-by-field.\n\n### AC4: SKILL.md Generation with Markers\nGiven a role SKILL.md with markers when gen_skills.py runs then header updated, body preserved.\n\n### AC4a: SKILL.md Marker Edge Cases (UAT revision 5)\nGiven malformed markers when gen_skills.py runs then raises MarkerError. Given SKILL.md with NO markers then raises MarkerError — no silent prepending. Should not silently discard body.\n\n### AC5: Role Context Injection (UAT revision 4)\nGiven role=SUPERVISOR when get_role_context called then returns RoleContext with p7-p12 phases, ConstraintContext objects containing typed when+then fields, relevant commands.\n\n### AC5a: Role Context Absence\nGiven role=SUPERVISOR then does NOT include C-worker-gates. Given role=WORKER then does NOT include C-supervisor-no-impl.\n\n### AC6: Phase Context Injection (UAT revision 4)\nGiven phase=P10_CODE_REVIEW when get_phase_context called then returns PhaseContext with ConstraintContext objects containing typed when+then fields, severity constraints, review axes.\n\n### AC6a: Phase Context Absence\nGiven phase=P4_REVIEW then does NOT include C-severity-eager. Given phase=P9_SLICE then does NOT include C-review-consensus.\n\n### AC7: No Regressions\nAll 554 existing tests pass. No Temporal-serialized types modified.\n\n### AC8: Jinja2 Template Quality (Parametrized)\nGiven each of 4 role templates when rendered with StrictUndefined then produces valid markdown.\n\n### AC9: Expanded Type Coverage\nAll new spec types and dicts tested. test_schema_types_sync.py validates new dicts against schema.xml.\n\n### AC9a: ProcedureStep Proof of Concept (UAT revision 6)\nGiven PROCEDURE_STEPS dict when populated for supervisor and worker roles then each role has ordered ProcedureStep entries with instruction, command, and context fields. Other roles have empty entries.\n\n### AC10: End-to-End Pipeline\nparse_schema → gen_types (draft) → gen_schema (with diff) → validate_schema → gen_skills (with diff) pipeline succeeds.\n\n### AC11: Temporal Isolation\nGiven expanded types.py when running Temporal workflow tests then all sandbox tests pass unchanged. No Temporal-serialized type (EpochState, TransitionRecord, EpochInput, EpochResult, PhaseAdvanceSignal, ReviewVoteSignal) is modified.","design":"{\"validation_checklist\":[\"Parser extracts all entities from schema.xml\",\"Parser raises SchemaParseError on malformed input\",\"gen_types.py generates valid draft Python source (UAT-1)\",\"All new types are frozen dataclasses\",\"6 new canonical dicts populated (incl PROCEDURE_STEPS)\",\"ProcedureStep populated for supervisor+worker POC (UAT-6)\",\"ConstraintContext frozen dataclass with typed when+then (UAT-4)\",\"gen_schema.py output passes validate_schema.py\",\"gen_schema.py generates role-ref/phase-ref (UAT-3)\",\"gen_schema.py shows unified diff (UAT-2)\",\"Round-trip is field-by-field\",\"gen_skills.py raises MarkerError on missing markers (UAT-5)\",\"gen_skills.py shows unified diff (UAT-2)\",\"Context injection returns ConstraintContext objects (UAT-4)\",\"Context injection asserts absence of irrelevant items\",\"554 existing tests pass\",\"No Temporal-serialized types modified\"],\"acceptance_criteria\":[{\"given\":\"schema.xml\",\"when\":\"parse_schema()\",\"then\":\"SchemaSpec with correct entity counts\"},{\"given\":\"malformed XML\",\"when\":\"parse_schema()\",\"then\":\"raises SchemaParseError\"},{\"given\":\"SchemaSpec\",\"when\":\"gen_types.py\",\"then\":\"valid Python source draft (UAT-1)\"},{\"given\":\"Python types\",\"when\":\"gen_schema then parse back\",\"then\":\"field-by-field match\"},{\"given\":\"gen_schema or gen_skills\",\"when\":\"running\",\"then\":\"shows unified diff of changes (UAT-2)\"},{\"given\":\"_ROLE_CONSTRAINTS dict\",\"when\":\"gen_schema\",\"then\":\"schema.xml has role-ref/phase-ref (UAT-3)\"},{\"given\":\"SKILL.md with markers\",\"when\":\"gen_skills()\",\"then\":\"header updated, body preserved\"},{\"given\":\"SKILL.md with NO markers\",\"when\":\"gen_skills()\",\"then\":\"raises MarkerError (UAT-5)\"},{\"given\":\"role=SUPERVISOR\",\"when\":\"get_role_context()\",\"then\":\"ConstraintContext with when+then, excludes C-worker-gates (UAT-4)\"},{\"given\":\"PROCEDURE_STEPS\",\"when\":\"populated for supervisor+worker\",\"then\":\"ordered ProcedureStep entries (UAT-6)\"},{\"given\":\"expanded types.py\",\"when\":\"Temporal workflow tests\",\"then\":\"all sandbox tests pass unchanged\"}],\"tradeoffs\":[{\"decision\":\"Bootstrap: hybrid codegen + manual polish (UAT-1)\",\"rationale\":\"gen_types.py draft saves transcription; developer retains control\"},{\"decision\":\"Diff output on generation (UAT-2)\",\"rationale\":\"User requirement: must see what changed each run\"},{\"decision\":\"Constraint role-ref/phase-ref in schema.xml (UAT-3)\",\"rationale\":\"Python SoT; structural attributes exported to XML\"},{\"decision\":\"ConstraintContext frozen dataclass (UAT-4)\",\"rationale\":\"Strongly-typed when+then; no bare strings\"},{\"decision\":\"MarkerError on missing markers (UAT-5)\",\"rationale\":\"No silent prepending; developer must place markers\"},{\"decision\":\"ProcedureStep POC for supervisor+worker (UAT-6)\",\"rationale\":\"Proves pattern end-to-end; other roles deferred\"}]}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mg6h","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-3 [RATIFIED]: Schema-driven protocol engine v2 — with integration architecture, gap analysis, and 6 UAT revisions","updated_at":"2026-02-26T07:22:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c686fd13cbf4759225b63c7bf35833ad39e6c1f3403740cfe587f0dfbaaf8182","created_at":"2026-02-26T16:00:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-vhtx\n  urd: aura-plugins-2ojv\n---\nVOTE: ACCEPT - test_interfaces.py additions are comprehensive. FileWithUri construction/defaults, FilePart migration from file_uri to file_with_uri, ToolCall field renames (raw_input/raw_output) + tool_call_id, NullStub Protocol isinstance checks + R12 label verification + no-op behavior, ReviewAxis enum. All follow codebase patterns.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mip5","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1: FileWithUri/ToolCall/NullStubs test quality","updated_at":"2026-02-26T16:02:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"459e22e56ccde81412529aa38b69bf33a044f026ff017c6eb8edb3ade12b9b63","created_at":"2026-02-26T23:48:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-xehz\n  review: aura-plugins-uvgb\n  files:\n    - tests/fixtures/protocol.yaml (epoch_states axis, 13 entries)\n    - tests/test_protocol_combinatorial.py\n    - tests/fixtures/fixture_loader.py (epoch_states property)\n---\n## Finding\n\nprotocol.yaml defines 13 epoch_states entries (fresh, at_p2, at_p3, at_p4_reviewing, at_p4_partial_accept, at_p4_two_accepts, at_p4_all_accept, at_p4_revise, at_p10_reviewing, at_p10_with_blocker, at_p10_all_accept, at_p10_revise, at_p12).\n\nThe ProtocolFixture loader exposes them via the epoch_states property and they are validated structurally (TestFixtureLoading.test_epoch_states_axis_populated, test_epoch_states_have_required_fields).\n\nHowever, no parametrized test actually instantiates EpochStateMachine from these snapshots or uses them as test inputs. The fixture_loader.py has no generate_epoch_state_test_cases() generator. The TestFixtureStatistics coverage test also does not assert anything about epoch_states usage.\n\nBy contrast, the other 3 axes (phase_specs, vote_combinations, audit_events) all have active generators and parametrized tests that exercise production code.\n\n## Impact\n\nThe epoch_states fixture data is currently dead weight — it loads, validates, and then goes unused. Parametrized tests that build pre-positioned state machines from these snapshots would catch regression in state construction and provide richer edge case coverage (e.g. test_at_p4_partial_accept_blocks_forward_advance).\n\n## Suggestion\n\nEither:\n1. Add generate_epoch_state_test_cases() to ProtocolFixture and add a TestEpochStateCombinatorial class, or\n2. Document in a YAML comment that epoch_states is reserved for future use (so it's clearly intentional)\n\nThis is a test infrastructure completeness gap, not a correctness failure.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mj69","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: epoch_states fixture in protocol.yaml not used in any active combinatorial test (fixture infrastructure gap)","updated_at":"2026-02-26T23:48:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:30:46Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bda30036c72090be82638868905ddaa43704bb1a66dcd8d5d9674a45cf66d7c6","created_at":"2026-02-26T03:30:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  reviewer: cartographer-b\n  round: 1\n---\nIMPORTANT findings from Cartographer B (Test quality) on SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mjja","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T03:30:46Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9df74bc6f0fa9a48e948dbd14dd5feca96dadb6d219869667a0852e2f9788a83","created_at":"2026-02-23T04:23:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/DRY Principle).\n\ngen_schema.py contains multiple large static dicts that represent data already captured in types.py canonical dicts, creating a maintenance burden with two places to update:\n\n1. _PHASE_SUBSTEP_DATA (lines 106-230): 125 lines of substep data structured as raw Python dicts. This data is semantically the same as what schema_parser.py _parse_substeps() reads from schema.xml. Since types.py is now the SoT, this structured substep data should live in types.py as a SUBSTEP_SPECS dict[str, SubstepSpec], and gen_schema.py should read from it.\n\n2. _PHASE_TASK_TITLES (lines 235-273): 38 lines. This overlaps with TITLE_CONVENTIONS in types.py. gen_schema.py reads TITLE_CONVENTIONS for the \u003ctask-titles\u003e section, but also has this separate per-phase dict. Two representations of the same task title data.\n\n3. _PHASE_TRANSITIONS (lines 278-380): 102 lines of transition data. This is exactly what PHASE_SPECS[phase].transitions already contains. gen_schema.py could derive \u003ctransitions\u003e directly from PHASE_SPECS instead of maintaining a parallel dict.\n\n4. _ROLE_DELEGATES, _ROLE_LABEL_AWARENESS, _ROLE_INVARIANTS, _ROLE_OWNERSHIP_MODEL (lines 385-430): 45 lines of role data not represented in RoleSpec. These are legitimate additions needed for schema.xml generation. Not a duplication issue here — these expand RoleSpec semantics not yet in types.py.\n\nThe net effect: gen_schema.py is 1787 lines because it re-encodes data from types.py in a different form rather than reading from types.py directly.\n\nFix (suggestion for follow-up): Move _PHASE_SUBSTEP_DATA into types.py as a populated SUBSTEP_SPECS canonical dict. Derive _PHASE_TRANSITIONS from PHASE_SPECS.transitions. Reduce gen_schema.py by ~250 lines by reading from the authoritative Python source.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mk16","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1-F5: gen_schema.py embeds large parallel static dicts that duplicate types.py data","updated_at":"2026-02-23T12:46:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:19:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:23:58Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT\n\n## Review Summary (Reviewer C — Elegance and Complexity Proportionality)\n\nSLICE-3 (constraints.py) is the most complex slice and appropriately so: it carries all 22 C-* constraints, each with bespoke logic. The design choices are mostly sound.\n\n### Strengths\n- ConstraintViolation as a frozen dataclass (not an exception) is the correct design: return-value-based constraint reporting allows check_all() to aggregate all violations without short-circuiting. No exception-based control flow.\n- The split between check_all (aggregator), check_transition (transition-scoped), and named check_* methods is a clean public API. Users can call at the right granularity.\n- DI via optional constructor params mirrors EpochStateMachine — consistent pattern.\n- Structural constraints (C-agent-commit, C-dep-direction) are implemented as best-effort string validators with explicit documentation of what requires external enforcement. This is honest design — no pretense of full enforcement when the system boundary makes it impossible.\n- check_review_binary guards against GitHub-style vote vocabulary leaking in — a useful proactive constraint.\n- Module-level frozenset constants for _REVIEW_AXES, _REVIEW_PHASES, _HANDOFF_REQUIRED_TRANSITIONS are well-named and correctly scoped.\n- check_all does NOT short-circuit — all checks run. Correct for an audit-first design.\n\n### Important Finding\n- aura-plugins-in8: check_severity_tree does not validate the positive case of C-severity-eager (p10 must have severity groups). The method only enforces the negative prohibition (p4 must not). The public method name and position in the API imply full C-severity-eager coverage.\n\n### Minor Finding\n- aura-plugins-lkk: _SAME_ACTOR defined as a local frozenset inside check_handoff_required(). Inconsistent with all other module-level constants. Recreated on every call.\n\n### Verdict\nOne IMPORTANT finding (incomplete constraint enforcement — misleading API), one MINOR finding. No BLOCKERs. SLICE-3 ACCEPT — the IMPORTANT finding is architectural but does not break existing behavior, since the constraint is already partially enforced and the gap is documented.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mki","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1: constraints.py — Runtime constraint validators","updated_at":"2026-02-22T04:19:54Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9be79bcc7623340e703f86c4411ea7919985e0a22eab110ea3d6019fa68b1898","created_at":"2026-02-22T12:55:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer A (Correctness) on SLICE-2 (constraints.py, test_constraints.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ml7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 MINOR","updated_at":"2026-02-22T17:30:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:17:23Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"196a2bd226b39b11f28944d1eb4e25db9995cf6ede57cb0efaf7ae334dc6d2b2","created_at":"2026-02-27T05:49:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-ckg0\n---\n## Topic 1: Temporal Child→Parent Signal Pattern\n\n**Key finding:** Child workflows can signal their parent via `workflow.get_external_workflow_handle()`:\n1. Child reads `workflow.info().parent.workflow_id` to discover parent\n2. Creates handle: `workflow.get_external_workflow_handle(parent_workflow_id)`\n3. Calls `handle.signal(\"progress_signal\", data)`\n\nNo built-in heartbeat for child workflows — signals are the standard mechanism.\n\n**Recommended pattern for SliceWorkflow progress:**\n- Pass parent workflow ID as explicit input (more portable than relying on info().parent)\n- Child signals parent with stage updates (L1/L2/L3 completion)\n- Parent has @workflow.signal handler that updates a progress dict\n- Parent exposes progress via @workflow.query for external callers\n\nSources: Temporal docs (child-workflows, message-passing), community forums\n\n## Topic 2: StrEnum Serialization in Temporal\n\n**Critical finding:** StrEnum dict keys ARE supported by Temporal Python SDK's JSONPlainPayloadConverter.\n\n- StrEnum (Python 3.11+): **Supported** for dict key serialization\n- IntEnum: **Supported**\n- plain Enum: **NOT supported** (deserializes incorrectly)\n- (str, Enum) hybrid: **NOT supported** in base SDK (works with Pydantic converter)\n\n**Implication:** ReviewAxis is a StrEnum, so using ReviewAxis as dict keys in workflow state is SAFE for Temporal serialization. The current str-key approach was overly cautious.\n\nCaveat: Only workflow state that crosses serialization boundaries (activity args, child workflow inputs, signals, query returns) needs to worry about this. Local workflow variables are always safe.\n\nSources: GitHub Issue #676, community forum thread on Enum keys\n\n## Topic 3: Constraint Violation Test Patterns\n\n**Recommended pattern:** Cross-product of constraints × state snapshots with per-case `pytest.param(marks=...)`:\n\n```python\n@pytest.mark.parametrize(\"state,ctx\", [\n    (valid_state,   nullcontext()),\n    (invalid_state, pytest.raises(ConstraintViolationError)),\n])\ndef test_constraint_violation(state, ctx):\n    with ctx:\n        check_constraint(state)\n```\n\nKey principles:\n- Use `pytest.param(marks=pytest.mark.xfail(strict=True))` for expected violations\n- YAML-driven fixtures preferred when case count grows\n- `strict=True` catches silent regressions (XPASS fails the suite)\n- `itertools.product(CONSTRAINTS, STATE_SNAPSHOTS)` for cross-product generation\n\nSources: pytest docs, pytest-with-eric.com","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mmaq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"RESEARCH: auractl rename + Temporal signals + StrEnum + constraint fixtures","updated_at":"2026-02-27T06:17:23Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-3","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:05:52Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:31:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-06g\n  urd: aura-plugins-umi\n  proposal: aura-plugins-gmv\n---\n## Specification\nRuntime constraint checking engine. Extends validate_schema.py patterns for runtime state.\n\n### Key Types\n- ConstraintViolation (frozen dataclass: constraint_id, message, context dict)\n- RuntimeConstraintChecker (main class)\n\n### Key Behaviors\n- check_all(state) — run all constraints against EpochState\n- check_transition(state, to_phase) — check transition-specific constraints\n- check_review_consensus(state) — C-review-consensus\n- check_dep_direction(parent, child) — C-dep-direction\n- check_severity_tree(state) — C-severity-eager (3 groups for p10)\n- check_handoff_required(from_phase, to_phase) — C-handoff-skill-invocation\n\n### Constraints to Implement (from schema.xml C-* IDs)\nAll constraint IDs from schema.xml must have corresponding check methods.\n\n## Files Owned\n- scripts/aura_protocol/constraints.py (NEW)\n- tests/test_constraints.py (NEW)\n\n## Acceptance Criteria\n- AC5: Given RuntimeConstraintChecker when checking violated state then returns ConstraintViolation list should not silently pass\n\n## Validation Checklist\n- [ ] ConstraintViolation dataclass defined\n- [ ] RuntimeConstraintChecker class with all check methods\n- [ ] Tests cover all C-* constraints\n- [ ] check_all aggregates all violations\n- [ ] Each check method returns specific constraint_id","design":"{\"validation_checklist\":[\"All C-* constraints covered\",\"ConstraintViolation with context\",\"Aggregation via check_all\"],\"acceptance_criteria\":[{\"given\":\"RuntimeConstraintChecker\",\"when\":\"checking violated state\",\"then\":\"returns ConstraintViolation list\",\"should_not\":\"silently pass violations\"}],\"ratified_plan\":\"aura-plugins-gmv\"}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mrm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3: constraints.py — Runtime constraint validators","updated_at":"2026-02-22T02:05:52Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"85f78e6402f739b3552209f6278228ebcb882c68b890cdac42d7276ad3a3e6e0","created_at":"2026-02-26T04:02:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  uat: aura-plugins-6p9j\n---\nUser selected BLOCKER: procedures must render into SKILL.md headers (between BEGIN/END markers) before landing. Currently gen_skills.py generates constraint/phase/role headers but no procedure-steps section. The ProcedureStep data from types.py must be rendered into the generated header section for SUPERVISOR and WORKER roles as the POC demonstration.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-msfr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"BLOCKER: gen_skills.py must render ProcedureSteps into SKILL.md headers","updated_at":"2026-02-26T04:02:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:18Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ed947d622a30f98431ed26aa13fab9c344731d28d5340bce8283f93056b35337","created_at":"2026-02-22T18:17:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Reviewer: A (Correctness) — Round 2\n\nVOTE: ACCEPT\n\n---\n\n## Summary\n\nPROPOSAL-2 successfully resolves both BLOCKER findings from Round 1 (B1: entity count mismatches, B2: ProcedureStep undefined bootstrap path). The corrected counts are now verified against schema.xml and all are accurate. The ProcedureStep deferral is reasonable and correctly scoped. All 4 Round 1 BLOCKERs from Reviewer B (field-level round-trip, error-path tests, marker edge cases, absence assertions) are now addressed in the acceptance criteria. URD requirements R1-R7 are covered with the one accepted deferral on R5 (procedural guidance bootstrap).\n\n---\n\n## Axis A Findings\n\n### Entity Counts (B1 from Round 1 — RESOLVED)\n\nVerified against schema.xml and types.py:\n\n| Entity | Proposal Claims | Actual (verified) | Status |\n|--------|----------------|-------------------|--------|\n| Phases | 12 | 12 (`grep -c '\u003cphase id='`) | CORRECT |\n| Roles | 5 | 5 (`grep -c '\u003crole id='`) | CORRECT |\n| Commands | 35 | 35 (`grep -c '\u003ccommand id='`) | CORRECT |\n| Constraints | 23 | 23 (`grep -c '\u003cconstraint id='` and 23 entries in types.py CONSTRAINT_SPECS) | CORRECT |\n| Handoffs | 6 | 6 (`grep -c '\u003chandoff id='` and 6 entries in types.py HANDOFF_SPECS) | CORRECT |\n| Labels | 21 | 21 (`grep -c '\u003clabel id='`) | CORRECT |\n| Review axes | 3 | 3 (`grep -c '\u003caxis id='`) | CORRECT |\n| SKILL.md files | 38 | 38 total (35 schema-referenced + 3 unregistered: parallel, protocol, swarm) | CORRECT |\n\nNote: the 38 SKILL.md files include 3 files (skills/parallel/SKILL.md, skills/protocol/SKILL.md, skills/swarm/SKILL.md) not registered as `\u003ccommand\u003e` elements in schema.xml. These are infrastructure/meta skills, not protocol commands. The proposal's count of 38 is correct for the total SKILL.md count. The 35 commands count is correct for schema-registered commands. The worker (SLICE-1) will need to decide whether gen_skills.py targets 35 (schema-commanded only) or all 38 SKILL.md files. This is a scoping decision for implementation — not a correctness gap in the proposal.\n\n### ProcedureStep Deferral (B2 from Round 1 — RESOLVED)\n\nThe deferral approach is sound. The proposal now states:\n- ProcedureStep type is defined in types.py (the type exists)\n- PROCEDURE_STEPS dict is explicitly left empty with a TODO\n- Population is a follow-up task after the generation pipeline proves out\n\nThis matches Reviewer C's original observation and is the correct MVP scope decision. URD R5 explicitly lists 'Procedures move to Python' as priority 3 (after the bootstrap and generation pipeline). The deferral does not break any of SLICE-2, SLICE-3, or SLICE-4, because gen_skills.py in SLICE-3 generates from existing SKILL.md bodies — the Jinja2 templates do not require populated PROCEDURE_STEPS to function.\n\nValidation checklist item 'ProcedureStep type defined; PROCEDURE_STEPS dict empty with TODO' is a concrete and verifiable criterion.\n\n### Slice Dependency Ordering\n\nThe 4 slices have correct dependency ordering:\n- SLICE-1 (schema_parser.py + types.py expansion) has no dependencies — correct foundation\n- SLICE-2 (gen_schema.py) depends on SLICE-1 — correct, needs expanded types\n- SLICE-3 (gen_skills.py) depends on SLICE-1 — correct, needs expanded types\n- SLICE-4 (context_injection.py) depends on SLICE-1 — correct, needs expanded types\n- SLICE-2 and SLICE-3 and SLICE-4 are independent of each other — correct parallel fan-out\n\nThe dependency graph is a tree (SLICE-1 as root, three parallel leaves). This is efficient and workable.\n\n### Architecture vs. types.py\n\nThe proposal's Module 2 (Expanded types.py) correctly identifies the gap: types.py currently has PhaseSpec, ConstraintSpec, HandoffSpec, and related stubs, but is missing RoleSpec, CommandSpec, LabelSpec, ReviewAxisSpec, SubstepSpec, DelegateSpec, TitleConvention, ProcedureStep, and the canonical dicts ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS, REVIEW_AXIS_SPECS. The existing test_schema_types_sync.py verifies CONSTRAINT_SPECS and HANDOFF_SPECS field-by-field (including given/when/then in TestConstraintSpecsMatchSchema and source_role/target_role/at_phase/content_level in TestHandoffSpecsMatchSchema), which validates that the round-trip approach is architecturally sound.\n\nThe proposal's AC3 (field-by-field round-trip) is now correctly specified to extend this same pattern to the new entity types added in SLICE-1.\n\n### Acceptance Criteria — Concrete and Verifiable\n\nAll 10 ACs are now concrete and verifiable:\n- AC1: exact counts, assertable in a test\n- AC1a: error-path test with pytest.raises(SchemaParseError)\n- AC2: gen_schema.py output passes validate_schema.py with 0 errors — machine-checkable\n- AC3: field-by-field equality, not count-only\n- AC4: marker preservation — observable by diff of output\n- AC4a: three named error cases with explicit expected behavior\n- AC5/AC5a: presence and absence, assertable with set membership\n- AC6/AC6a: same pattern for phase context\n- AC7: 554 existing tests pass — machine-checkable regression gate\n- AC8: parametrized over all 4 roles — removes single-instance coverage gap\n- AC9: explicit counts per dict (5 ROLE_SPECS, 35 COMMAND_SPECS, 21 LABEL_SPECS, 3 REVIEW_AXIS_SPECS)\n- AC10: full pipeline test — parse→gen_schema→validate→gen_skills\n\n### URD Coverage\n\n| Req | Addressed | Notes |\n|-----|-----------|-------|\n| R1 | YES | SchemaSpec with all entity types; schema_parser.py bootstrap; error-path tests in AC1a |\n| R2 | YES | Python as SoT; gen_schema.py for XML export; round-trip test in AC3 |\n| R3 | YES | 7 new dataclasses + 4 canonical dicts; 38 SKILL.md files covered |\n| R4 | YES | gen_skills.py + Jinja2 templates + marker-based split; edge cases in AC4a |\n| R5 | PARTIAL (deferred) | ProcedureStep type defined, PROCEDURE_STEPS empty; follow-up scoped |\n| R6 | YES | context_injection.py with role-level + phase-level + absence assertions |\n| R7 | YES | gen_schema.py produces valid XML that passes validate_schema.py; CI round-trip |\n\nR5 deferral is acceptable given its priority 3 status in the URD and the rationale that procedures cannot be populated until the generation pipeline proves out.\n\n### One Observation (Non-Blocking)\n\nThe proposal says '38 SKILL.md files' in the gen_skills.py scope. However, 3 of those files (parallel, protocol, swarm) are not registered as `\u003ccommand\u003e` elements in schema.xml. The SLICE-3 worker needs to clarify whether gen_skills.py generates only for schema-registered commands (35) or all SKILL.md files (38). This is a scoping decision that should be addressed in the SLICE-3 task definition, not in the proposal. It does not block ratification.\n\n---\n\n## End-User Alignment Assessment\n\n1. **Who are the end-users?** Agents using the protocol and the human maintaining it.\n2. **What would they want?** No drift between types.py and schema.xml; no accidental loss of hand-written SKILL.md content; runtime context injection that returns correct, scoped constraints.\n3. **How does this affect them?** The revised proposal now provides concrete safety nets: MarkerError prevents silent body destruction, SchemaParseError provides actionable bootstrap failures, absence assertions prevent context injection from silently returning too much.\n4. **Implementation gaps?** None that block ratification. The SKILL.md count discrepancy (35 vs 38) needs resolution in SLICE-3 task definition.\n5. **MVP scope?** Appropriate. The follow-up for R5 is correctly deferred.\n6. **Validation checklist complete?** Yes. All checklist items are verifiable against observable outputs.\n\n---\n\n## Verdict\n\nVOTE: ACCEPT\n\nBoth Round 1 BLOCKERs are resolved. Entity counts verified against schema.xml. ProcedureStep deferral is correctly scoped. All Reviewer B BLOCKERs are now captured in acceptance criteria. The architecture matches what types.py actually contains and what the existing test infrastructure validates. The proposal faithfully serves the user requirements in the URD.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mu1e","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-2-REVIEW-A-2: Schema-driven protocol engine v2","updated_at":"2026-02-26T07:22:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"69d92f1eb62ccc985fd568e24df1a8034b307b03031e910a492bb3e19fc2f10d","created_at":"2026-03-01T05:24:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-kqtf\n---\nUser Requirements Elicitation for the unified aura-swarm refactor. Surface unstated requirements, edge cases, and acceptance criteria.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mvfw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"ELICIT: Unified aura-swarm requirements elicitation","updated_at":"2026-03-01T05:24:24Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:44:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a91f6ed62c4dbf595fee78391d06dd62ead5adc9c9e5bc0719901b70488ebb1f","created_at":"2026-02-26T08:39:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  impl_plan: aura-plugins-uvfm\n---\n## Scope\nTwo changes to tests/test_schema_types_sync.py:\n\nB1: Add assertions for ProcedureStep .command and .context:\n- assert at least one supervisor step has .command == 'Skill(/aura:supervisor)'\n- assert at least one supervisor step has non-None .context string\n- Use PROCEDURE_STEPS[RoleId.SUPERVISOR] directly (public dict), not XML\n\nB4: Fix test_supervisor_steps_from_schema:\n- Add assertion: step.id == xml_step.get('id') for each supervisor step\n- Fix docstring to accurately describe what is tested\n\n## Files\n- tests/test_schema_types_sync.py\n\n## Acceptance\nAC-B1-1 + AC-B4-1: both satisfied.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mw3a","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-L2: B1+B4 — command/context assertions + docstring fix in test_schema_types_sync.py","updated_at":"2026-02-26T08:44:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"171e4727f80f8e1749553e00df30f63f5736f8922d6ab53acb1d570d16cb99c6","created_at":"2026-02-26T12:17:52Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  elicit: aura-plugins-ollt\n  urd: aura-plugins-2ojv\n---\n## 1. Executive Summary\n\nProtocol Engine v3 decomposes the monolithic EpochWorkflow into a hybrid Temporal topology: review phases (P4, P10) and parallel slices (P9) become child workflows; sequential phases become activities. Simultaneously, the codebase becomes bidirectionally ACP-compliant: ACP SessionUpdate events can drive phase transitions IN, and all workflow activities emit ACP-compatible events OUT via TranscriptRecorder. SecurityGate wires to Agentfilter's ACP RequestPermission mechanism. A production worker script and home-manager Temporal dev server service complete the deployment story.\n\nTarget: v0.7.0 release. All 973 existing tests continue to pass.\n\n---\n\n## 2. Architecture\n\n### 2.1 Workflow topology (hybrid)\n\n```\nEpochWorkflow (orchestrator — keeps EpochStateMachine)\n  │\n  ├── Sequential phases P1–P3, P5–P8, P11–P12\n  │     → run_sequential_phase(@activity.defn) — bounded, no inbound signals\n  │\n  ├── P4_REVIEW → P4ReviewWorkflow(@workflow.defn, child)\n  │     - submit_vote signal received directly (no parent routing)\n  │     - gates on CONSENSUS_GATED (all 3 axes ACCEPT)\n  │     - returns PhaseResult(phase_id, success, vote_result)\n  │\n  ├── P9_SLICE → [P9SliceWorkflow(@workflow.defn, child) × N] (parallel)\n  │     - asyncio.gather fan-out; each carries SA_EPOCH_ID\n  │     - returns PhaseResult(phase_id, success)\n  │\n  └── P10_CODE_REVIEW → P10CodeReviewWorkflow(@workflow.defn, child)\n        - submit_vote signal received directly\n        - tracks blocker_count (gates P10→P11 on blocker_count == 0)\n        - returns PhaseResult(phase_id, success, blocker_count)\n```\n\n### 2.2 ACP bidirectional integration\n\n```\nINBOUND (ACP events → Temporal signals):\n  External ACP session emits acp.schema.SessionUpdate\n    → EpochWorkflow.acp_session_update(@workflow.signal)\n      → AcpEventMapper.map_to_signal(update)\n        → PhaseAdvanceSignal | ReviewVoteSignal | None\n          → _pending_advance / _pending_votes queues (existing mechanism)\n\nOUTBOUND (Temporal activities → ACP events):\n  check_constraints() activity\n    → emits ConstraintCheckEvent\n      → TemporalAuditTrail.record_event()\n\n  record_transition() activity [was no-op, now real]\n    → emits PhaseTransitionEvent\n      → TemporalAuditTrail.record_event()\n      → AcpTranscriptRecorder.record_phase_transition() [STUB]\n\n  P4/P10 child workflow vote handler\n    → emits ReviewVoteEvent\n      → TemporalAuditTrail.record_event()\n      → AcpTranscriptRecorder.record_review_vote() [STUB]\n```\n\n### 2.3 Type boundary (Temporal-safe vs ACP-native)\n\n```\nTemporal-safe (frozen dataclasses, cross-workflow boundaries):\n  PhaseInput(epoch_id, phase_id, phase_spec)  ← new\n  PhaseResult(phase_id, success, blocker_count, vote_result)  ← new\n  PhaseAdvanceSignal, ReviewVoteSignal  ← existing\n\nACP-native (Pydantic, inside activities only — never cross workflow boundary):\n  acp.schema.SessionUpdate\n  acp.schema.ContentBlock\n  acp.schema.ToolCallUpdate\n  acp.schema.RequestPermissionRequest / Response\n\nAdapter: activities use acp.schema types internally;\n         output frozen dataclasses to cross workflow boundaries.\n```\n\n---\n\n## 3. Files\n\n### New\n| File | Purpose |\n|------|---------|\n| scripts/aura_protocol/phase_workflows.py | P4ReviewWorkflow, P9SliceWorkflow, P10CodeReviewWorkflow |\n| scripts/aura_protocol/phase_activities.py | run_sequential_phase + per-phase bounded activity logic |\n| scripts/aura_protocol/audit_trail.py | TemporalAuditTrail (concrete AuditTrail implementation) |\n| scripts/aura_protocol/acp_mapper.py | AcpEventMapper protocol + DefaultAcpEventMapper |\n| bin/worker.py | Production Temporal worker registration script |\n| nix/temporal-service.nix | home-manager module for temporal server start-dev |\n| tests/test_phase_workflows.py | Child workflow tests (P4/P9/P10) |\n| tests/test_audit_trail.py | TemporalAuditTrail record + query round-trip |\n| tests/test_acp_mapper.py | DefaultAcpEventMapper signal mapping tests |\n\n### Modified\n| File | Changes |\n|------|---------|\n| scripts/aura_protocol/workflow.py | Add acp_session_update signal; refactor run() to dispatch child workflows/activities; make record_transition real |\n| scripts/aura_protocol/interfaces.py | ToolCall field renames (raw_input/raw_output/tool_call_id); FilePart fix (file_with_uri); full A2A hierarchy; AcpTranscriptRecorder stub; AcpSecurityGate stub |\n| scripts/aura_protocol/state_machine.py | Make gate constants public: CONSENSUS_GATED, BLOCKER_GATED, REVISE_DRIVES_BACK |\n| pyproject.toml | Add agent-client-protocol dep; version → 0.7.0 |\n| flake.nix | Add homeManagerModules.temporal-dev-server |\n| tests/test_workflow.py | Update worker registration for child workflow types |\n| CHANGELOG.md | v0.7.0 entry |\n\n---\n\n## 4. Slices (6 vertical)\n\n### SLICE-1: PhaseInput + Workflow topology refactor\nFiles: workflow.py, state_machine.py, phase_workflows.py (new), phase_activities.py (new)\nDeliverables:\n- PhaseInput(frozen=True): epoch_id, phase_id, phase_spec\n- PhaseResult(frozen=True): phase_id, success, blocker_count, vote_result\n- P4ReviewWorkflow: submit_vote signal; CONSENSUS_GATED gate; returns PhaseResult\n- P10CodeReviewWorkflow: submit_vote signal; BLOCKER_GATED + CONSENSUS_GATED; returns PhaseResult with blocker_count\n- P9SliceWorkflow: slice execution; returns PhaseResult\n- run_sequential_phase(@activity.defn): wraps all other phases as bounded activity\n- EpochWorkflow.run(): dispatch to child workflows (P4/P9/P10) or activity (others)\n- Make CONSENSUS_GATED, BLOCKER_GATED, REVISE_DRIVES_BACK public in state_machine.py\nAC: All 973 existing tests pass. New: full 12-phase hybrid run completes in Temporal sandbox.\n\n### SLICE-2: ACP SDK integration + type alignment\nFiles: interfaces.py, pyproject.toml, uv.lock\nDeliverables:\n- Add agent-client-protocol to pyproject.toml [project.dependencies]\n- ToolCall: rename tool_input → raw_input, tool_output → raw_output; add tool_call_id: str; JSON aliases use camelCase (rawInput, rawOutput, toolCallId)\n- FilePart.file_uri → file_with_uri (field rename + doc update)\n- Full A2A content type hierarchy: ThinkingPart, ImagePart, AudioPart, ResourceLinkPart (was 'v2/v3 scope' — now implemented)\n- AcpContentBlock wrapper: maps acp.schema.ContentBlock ↔ Part union\n- All Part-type JSON field names: camelCase\nAC: FilePart.file_with_uri accessible. ToolCall.raw_input/raw_output/tool_call_id accessible. acp.schema.ContentBlock importable. Full A2A hierarchy present.\n\n### SLICE-3: AuditTrail + event emission\nFiles: audit_trail.py (new), workflow.py, interfaces.py\nDeliverables:\n- TemporalAuditTrail implements AuditTrail:\n  - record_event(event: AuditEvent): upserts SA + writes event\n  - query_events(phase, role): queries Temporal Visibility API by SA\n- record_transition activity: now calls TemporalAuditTrail.record_event() with PhaseTransitionEvent (no longer a no-op)\n- emit_constraint_check_event(@activity.defn): called from check_constraints\n- emit_review_vote_event(@activity.defn): called from child workflow vote handlers\n- All event types emitted from correct activities\nAC: record_transition is not a no-op (test asserts event recorded). TemporalAuditTrail.query_events(phase=P4_REVIEW) returns non-empty after P4 completes.\n\n### SLICE-4: SecurityGate + TranscriptRecorder (ACP)\nFiles: interfaces.py, acp_mapper.py (new)\nDeliverables:\n- AcpSecurityGate implements SecurityGate:\n  - check_tool_permission(request) → PermissionDecision\n  - Delegates to Agentfilter via acp.schema.RequestPermissionRequest/Response\n  - Uses acp.contrib.permission_brokers pattern\n  - Stub label: 'Motivation: wire EpochWorkflow tool permission checks to Agentfilter ACP RequestPermission endpoint. Added in aura-plugins v3 (epoch: aura-plugins-eocq). Expected implementation: when Agentfilter ACP endpoint is available in deployment environment.'\n- AcpTranscriptRecorder implements TranscriptRecorder:\n  - record_phase_transition/record_constraint_check/record_review_vote → delegate to acp.Client.session_update()\n  - Stub label: 'Motivation: emit Epoch lifecycle events as ACP SessionUpdate notifications. Added in aura-plugins v3 (epoch: aura-plugins-eocq). Expected implementation: when an ACP server endpoint is configured (e.g., Agentfilter ACP service).'\n- AcpEventMapper in acp_mapper.py:\n  - map_to_signal(update: SessionUpdate) → PhaseAdvanceSignal | ReviewVoteSignal | None\n  - DefaultAcpEventMapper: handles known event types; returns None for unknown\n- EpochWorkflow.acp_session_update(@workflow.signal): accepts SessionUpdate, routes through AcpEventMapper\nAC: isinstance(AcpSecurityGate(), SecurityGate) is True. isinstance(AcpTranscriptRecorder(), TranscriptRecorder) is True. DefaultAcpEventMapper()(unknown_event) returns None (no crash).\n\n### SLICE-5: Temporal infrastructure (worker + Nix)\nFiles: bin/worker.py, nix/temporal-service.nix, flake.nix\nDeliverables:\n- bin/worker.py:\n  - CLI flags: --namespace, --task-queue, --host (default localhost:7233)\n  - Env vars: TEMPORAL_HOST, TEMPORAL_NAMESPACE, TEMPORAL_TASK_QUEUE\n  - Registers: EpochWorkflow + P4ReviewWorkflow + P9SliceWorkflow + P10CodeReviewWorkflow + all activities\n  - Graceful SIGTERM shutdown\n- nix/temporal-service.nix home-manager module options:\n  - services.temporal-dev-server.enable (bool)\n  - services.temporal-dev-server.port (default 7233)\n  - services.temporal-dev-server.ui-port (default 8080)\n  - services.temporal-dev-server.namespace (default 'default')\n  - services.temporal-dev-server.db-filename (default '' = in-memory)\n  - services.temporal-dev-server.backend (default 'dev-server'; future: 'docker-compose', 'native')\n  - systemd.user.services.temporal-dev-server using temporal server start-dev\n- flake.nix: add homeManagerModules.temporal-dev-server\nAC: bin/worker.py --help exits cleanly. nix/temporal-service.nix evaluates without error. homeManagerModules.temporal-dev-server exported in flake.\n\n### SLICE-6: Tests + version bump + CHANGELOG\nFiles: tests/test_workflow.py, tests/test_phase_workflows.py, tests/test_audit_trail.py, tests/test_acp_mapper.py, pyproject.toml, CHANGELOG.md\nDeliverables:\n- test_workflow.py: update worker registration for all child workflow types\n- test_phase_workflows.py: P4 consensus path, P10 blocker gate, P9 parallel execution\n- test_audit_trail.py: TemporalAuditTrail record + query round-trip\n- test_acp_mapper.py: known event → signal mapping; unknown event → None\n- pyproject.toml: version = '0.7.0'\n- CHANGELOG.md: v0.7.0 section\nAC: All tests pass. Version string = '0.7.0'.\n\n---\n\n## 5. Key Design Decisions\n\nD1: PhaseInput carries only what child workflows need (epoch_id, phase_id, phase_spec).\n    EpochWorkflow retains canonical EpochStateMachine; child workflows return PhaseResult.\n    EpochState (mutable) NEVER crosses workflow boundaries.\n\nD2: Gate constants renamed to public (CONSENSUS_GATED, BLOCKER_GATED, REVISE_DRIVES_BACK).\n    Child workflows import from state_machine.py — no duplication of gate logic.\n\nD3: AcpEventMapper returns None for unknown events — no crash, forward-compatible.\n    EpochWorkflow silently drops None results from acp_session_update signal.\n\nD4: ACP Pydantic types (acp.schema.*) used ONLY inside activities.\n    Temporal workflow boundary always uses frozen dataclasses.\n    No Pydantic models cross child workflow input/output.\n\nD5: AcpTranscriptRecorder and AcpSecurityGate are clearly-labeled stubs.\n    Stub label format: Motivation + epic ID + expected implementation trigger.\n    This applies as the standard for ALL future stubs in the codebase.\n\nD6: Temporal dev server runs as home-manager systemd.user service.\n    Module backend option (dev-server | docker-compose | native) enables future\n    upgrades without structural change to the module interface.\n\n---\n\n## 6. Acceptance Criteria (Overall)\n\nAC1: All 973 existing tests pass after topology refactor.\nAC2: New child workflow tests (P4, P9, P10) pass with Temporal sandbox.\nAC3: isinstance(AcpSecurityGate(), SecurityGate) and isinstance(AcpTranscriptRecorder(), TranscriptRecorder) both True.\nAC4: ToolCall.raw_input, ToolCall.raw_output, ToolCall.tool_call_id accessible.\nAC5: FilePart.file_with_uri accessible (not file_uri).\nAC6: agent-client-protocol importable from project venv.\nAC7: bin/worker.py --help exits cleanly.\nAC8: nix/temporal-service.nix homeManagerModules.temporal-dev-server exported in flake.\nAC9: record_transition activity is not a no-op (test asserts event emitted).\nAC10: All stub classes carry structured stub labels (motivation, epoch, expected implementation).\nAC11: pyproject.toml version = '0.7.0'; CHANGELOG has v0.7.0 section.\nAC12: DefaultAcpEventMapper returns None for unknown ACP events (no crash).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mwdv","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-1: Protocol Engine v3 — Temporal Child Workflow Decomposition + ACP Integration","updated_at":"2026-02-26T12:17:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ccd52c03e22cf5bf100fef4bc451e685a9c1681a8049b663fde0d165c1f7da23","created_at":"2026-02-26T16:00:46Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-sp6y\n  urd: aura-plugins-2ojv\n---\nVOTE: ACCEPT - test_audit_activities.py (19 tests) follows codebase patterns well. Uses ActivityEnvironment for activity tests (matching Temporal test tier 2), autouse fixture for singleton reset isolation, tests epoch/phase filtering, ordering, ApplicationError(non_retryable=True) on uninitialized trail, actionable error messages. Good BDD docstrings with AC# references.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mwf0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1: audit_activities test quality","updated_at":"2026-02-26T16:02:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a1115079e1883cb87d937e20eb5639fc1b49eaf0001cded5bf8507ba8a0cf94f","created_at":"2026-02-23T04:25:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/Error Handling — violates C-actionable-errors).\n\ncontext_injection.py _build_constraint_contexts() (lines 317-330) has this comment:\n  'Unknown constraint IDs are skipped silently (should not occur with hand-authored dicts).'\n\nThen the code does:\n  spec = CONSTRAINT_SPECS.get(cid)\n  if spec is not None:\n      contexts.add(ConstraintContext(...))\n  # else: silently skipped\n\nThis violates C-actionable-errors. If a constraint ID in _ROLE_CONSTRAINTS or _PHASE_CONSTRAINTS does not exist in CONSTRAINT_SPECS (e.g., due to a typo or stale mapping after a constraint rename), the function silently drops it. The caller receives a ConstraintContext set with fewer entries than expected, with no indication anything went wrong.\n\nThe rationale 'should not occur' is insufficient — that is true of most bugs. Silent drops make debugging extremely difficult: get_role_context(SUPERVISOR) returns silently missing constraints, but no error is raised, no count mismatch is surfaced.\n\nFix: Change the None branch to raise a ValueError (or KeyError) with an actionable message:\n  raise KeyError(\n      f'Constraint ID {cid!r} in _ROLE_CONSTRAINTS/{_PHASE_CONSTRAINTS} '\n      f'not found in CONSTRAINT_SPECS. '\n      f'Fix: update _ROLE_CONSTRAINTS/_PHASE_CONSTRAINTS to use a valid constraint ID.'\n  )\nThis turns a silent correctness issue into an immediate, actionable error.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-myk7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1-F12: _build_constraint_contexts silently skips unknown constraint IDs — violates C-actionable-errors","updated_at":"2026-02-23T12:46:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"23891a1524efd248e9568000325ed0adfc98db75124884aa5fcbe488c4030d5c","created_at":"2026-02-25T22:45:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"check_structural() now correctly wires check_integration_points (parameter has_integration_points, dispatch block, docstring entry). But TestCheckStructural class (test_constraints.py:1822) has NO test_integration_points_via_structural test. Every other wired constraint has one (e.g. test_supervisor_cartographers_violation_at_p8, test_slice_review_before_close_via_structural, test_max_review_cycles_via_structural). Add: test_integration_points_missing_via_structural calling checker.check_structural(has_integration_points=False) and asserting C-integration-points in violation ids.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-mz34","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FIX: Add TestCheckStructural integration test for check_integration_points","updated_at":"2026-02-25T22:45:40Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\nIn types.py, AuditEvent is defined as:\n\n    @dataclass(frozen=True)\n    class AuditEvent:\n        epoch_id: str\n        event_type: str\n        phase: PhaseId\n        role: RoleId\n        payload: str  # JSON-serialized event details\n\nThe payload field is typed str with a comment 'JSON-serialized event details'. This is stringly-typed: callers must manually serialize to JSON and consumers must manually deserialize, with no type guidance on the structure.\n\nGiven the existing typed event stubs (PhaseTransitionEvent, ConstraintCheckEvent, ReviewVoteEvent) are all frozen dataclasses, it would be more consistent to type payload as a union of the known event stubs, or at minimum as dict[str, Any].\n\n## Context\nThis is a v1 stub so some looseness is acceptable. The comment acknowledges the intent. However the pattern is inconsistent with the frozen dataclass approach used throughout types.py.\n\n## Fix\nConsider: payload: PhaseTransitionEvent | ConstraintCheckEvent | ReviewVoteEvent | dict[str, Any]\nOr create an AuditPayload union type that the AuditTrail interface can use for type-safe dispatch.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-n0n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1-F1: AuditEvent.payload typed as str (JSON-serialized) — loses type safety at audit boundary","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0f6843f4573cdc6139c90ab4619529ea8cb24333255b1e4edfc3d306dff3251e","created_at":"2026-02-22T12:52:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer C (Elegance) on SLICE-2 (constraints.py, test_constraints.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-n4d","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 MINOR","updated_at":"2026-02-22T17:30:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"954de95d01757dd8ba2be687cf1c723444aee2bb27abf15ba7ea0c68c45f833e","created_at":"2026-02-26T08:54:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i08u\n  review_round: 1\n---\nIMPORTANT findings from Reviewer B (Test Quality) on FOLLOWUP-SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-n7en","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-1-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T08:55:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9bedb262c9e407dc7f3cc2fc43256767c289b92c9f2ea3ecec64cde145f7668b","created_at":"2026-02-25T22:37:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  review_round: 1\n---\nIMPORTANT findings from Reviewer A (Correctness) on SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-n93g","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-25T22:37:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ebb4eb9c03916ed6abe5198e9e098b4e1b85dfc796713283c3ba0eb3d9f296ce","created_at":"2026-02-26T12:47:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  elicit: aura-plugins-ollt\n  urd: aura-plugins-2ojv\n  supersedes: aura-plugins-lnua\n---\n## 1. Executive Summary\n\nMinimal revision from PROPOSAL-3. Addresses C-3 SHOULD FIX items only. All other content is carried forward unchanged from PROPOSAL-3.\n\nChanges from PROPOSAL-3:\n1. Rename AcpEventType(StrEnum) → AuraSignalType(StrEnum) with clarifying docstring (C-3 SHOULD FIX #1: AcpEventType misleadingly implies an ACP-defined type; values are Aura-invented)\n2. Clarify AcpTranscriptRecorder stub docstring — make outbound push direction explicit (C-3 SHOULD FIX #2: stub directional ambiguity resolved)\n\nRound 3 verdicts: A-3 ACCEPT, B-3 ACCEPT, C-3 REVISE (SHOULD FIX items only).\n\n---\n\n## 2. Changes\n\n### Change 1: AcpEventType → AuraSignalType (rename in types.py + all references)\n\nThe ACP Python SDK (agent-client-protocol v0.8.1) has no AcpEventType enum.\nValues 'phase_advance' and 'review_vote' are Aura-invented domain classifications,\nnot ACP-defined event types. Naming it AcpEventType misleads maintainers.\n\n```python\nclass AuraSignalType(StrEnum):\n    \"\"\"Aura-domain classification of an inbound ACP session update.\n\n    NOT an ACP-defined type — the ACP Python SDK (agent-client-protocol)\n    has no corresponding enum. These values reflect which Aura protocol\n    signal an ACP SessionUpdate maps to after DefaultAcpEventMapper\n    processes it. Unknown event types return AcpMappedSignal.noop().\n    \"\"\"\n    PHASE_ADVANCE = 'phase_advance'\n    REVIEW_VOTE   = 'review_vote'\n```\n\nAcpRawSignal is updated accordingly:\n\n```python\n@dataclass(frozen=True)\nclass AcpRawSignal:\n    \"\"\"Frozen wrapper for an inbound ACP SessionUpdate at the Temporal boundary.\"\"\"\n    session_id:   str\n    event_type:   AuraSignalType   # was: AcpEventType — renamed to clarify Aura-domain\n    payload_json: str\n```\n\nAll references to AcpEventType throughout types.py, interfaces.py, phase_activities.py,\nand tests must use AuraSignalType.\n\n### Change 2: AcpTranscriptRecorder stub — explicit outbound push direction\n\nAura acts as ACP Agent (outbound sender). Agentfilter acts as ACP Client (receiver).\nThe TranscriptRecorder records Epoch events by PUSHING them outward to Agentfilter,\nnot by receiving them. This is NOT a receiver implementation.\n\n```python\nclass AcpTranscriptRecorder:\n    \"\"\"TranscriptRecorder that records Epoch lifecycle events by emitting them\n    as ACP SessionUpdate notifications toward an ACP Client (Agentfilter).\n\n    DIRECTION: Aura acts as ACP Agent (outbound sender). Agentfilter is the\n    ACP Client (receiver/consumer). This is NOT a Client.session_update()\n    implementation — it does NOT receive events from agents. Instead,\n    Aura's activity code calls record_*() methods, which internally call\n    AgentSideConnection.session_update(session_id, update) from acp.agent\n    to PUSH Epoch lifecycle events toward Agentfilter.\n\n    STUB — Motivation: emit Epoch lifecycle events as ACP SessionUpdate notifications\n    from the Agent side of the ACP protocol. Agentfilter receives these as the ACP\n    Client. Added in aura-plugins v3 (epoch: aura-plugins-eocq).\n    Expected implementation: use AgentSideConnection.session_update(session_id, update)\n    from acp.agent — the typed agent-side API for pushing SessionUpdate to the\n    registered ACP Client (Agentfilter endpoint). NOT acp.connection.Connection\n    (raw JSON-RPC transport) and NOT acp.interfaces.Client.session_update\n    (the receiver/implementor side).\n    \"\"\"\n    async def record_phase_transition(self, event: PhaseTransitionEvent) -\u003e None: ...\n    async def record_constraint_check(self, event: ConstraintCheckEvent) -\u003e None: ...\n    async def record_review_vote(self, event: ReviewVoteEvent) -\u003e None: ...\n```\n\n---\n\n## 3. Files changed (delta from PROPOSAL-3)\n\n| File | Change |\n|------|--------|\n| scripts/aura_protocol/types.py | Rename AcpEventType → AuraSignalType; update docstring |\n| scripts/aura_protocol/interfaces.py | AcpRawSignal.event_type: AuraSignalType; AcpTranscriptRecorder stub docstring |\n| scripts/aura_protocol/phase_activities.py | Update references AcpEventType → AuraSignalType |\n| tests/test_interfaces.py | Update AcpEventType → AuraSignalType references |\n| tests/test_acp_mapper.py | Update AcpEventType → AuraSignalType references |\n| tests/test_workflow.py | Update AcpEventType → AuraSignalType references |\n\nAll other files from PROPOSAL-3 are unchanged.\n\n---\n\n## 4. Slices (unchanged from PROPOSAL-3, with naming update)\n\nSLICE-1 and SLICE-2 deliverables are updated: all references to AcpEventType become AuraSignalType.\nSLICE-2 FilePart test migration scope: 4 existing tests updated (not 2 — corrects A-3 SHOULD FIX).\nAll other slices unchanged.\n\n---\n\n## 5. Design Decisions (additions)\n\nD16: AuraSignalType (not AcpEventType) — Aura-domain enum. Names must reflect their domain; ACP is the wire protocol, not the classification domain. AuraSignalType accurately describes what the enum contains: Aura protocol signal types derived from incoming ACP events.\n\nD17: AcpTranscriptRecorder is an outbound emitter (Aura as Agent side), not an inbound receiver (Client side). record_*() methods are Aura activity hooks; internally they PUSH events to Agentfilter via AgentSideConnection. The TranscriptRecorder Protocol abstraction lets Aura swap emission targets without changing activity code.\n\n---\n\n## 6. Acceptance Criteria (updated from PROPOSAL-3)\n\nAll AC1-AC21 from PROPOSAL-3 carry forward unchanged, plus:\n\nAC22: AuraSignalType(StrEnum) in types.py with values PHASE_ADVANCE, REVIEW_VOTE. No AcpEventType anywhere in codebase.\nAC23: AcpRawSignal.event_type: AuraSignalType (StrEnum, not str, not AcpEventType).\nAC24: AcpTranscriptRecorder stub docstring explicitly states: Aura is ACP Agent (outbound sender); Agentfilter is ACP Client (receiver); AgentSideConnection.session_update() from acp.agent is the correct API; NOT Client.session_update() (receiver side).\nAC25 (carry-forward A-3 SHOULD FIX): SLICE-2 scope note states '4 existing FilePart tests updated' (not 2).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ndxz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-4: Protocol Engine v3 — AuraSignalType rename + AcpTranscriptRecorder direction clarification","updated_at":"2026-02-26T12:47:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4bc05890d2fa4d4df6cdb29d2680056937d84261d2dcda393d967d191cc48531","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nfe7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-2 BLOCKER","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:01Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:30:17Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-e19\n  review: aura-plugins-jjo\n---\n\n## UAT Result: ACCEPT with UX fixes needed\n\n### User Testing Logs (Verbatim)\n\nUser ran the following commands and found UX confusion:\n\n1. `python3 bin/aura-release` (no args) → error message says \"bump type required\" but doesn't show example usage\n2. `python3 bin/aura-release --dry-run` → confusing: fails asking for bump type, user expected it to show what current state is\n3. `python3 bin/aura-release --dry-run --sync` → same, fails asking for bump type\n4. `python3 bin/aura-release patch --dry-run` → fails with drift error, user didn't know --sync was needed alongside patch\n\n### User Feedback (Verbatim)\n- \"This was confusing: what does the program do when no subcommands or flags are given? How come the --dry-run kept failing? Error message is un-informative.\"\n- \"--check flag has good output and actionable output message.\"\n- \"--sync was confusing: only seasoned CLI users would know how to parse the message and know what was missing.\"\n- \"Good so far: should also have a message about what needs to be clean in the git worktree when syncing.\"\n\n### Issues to Fix\n1. No-args and missing-bump-type error messages need actionable examples\n2. Drift error needs to show the exact command to run (e.g., \"Try: aura-release patch --sync\")\n3. --sync should explain what needs to be clean in the git worktree\n4. Overall: error messages should guide the user to the next action","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nfr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"UAT-2: Implementation testing — UX issues found","updated_at":"2026-02-22T10:40:01Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:10Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:23:53Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-4 (interfaces.py) — IMPORTANT findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ngd","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-22T17:24:10Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5666824bfdff7a37f7ca47b1049036ac68d894bcffeeb96340a2201f1773ee51","created_at":"2026-02-26T16:01:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-l6n8,aura-plugins-vhtx,aura-plugins-sp6y,aura-plugins-o8va,aura-plugins-w5hi\n  review: aura-plugins-ruvr\n---\nIMPORTANT findings for Elegance review round 1 (Reviewer C)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nlip","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"ALL-SLICES-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-26T21:03:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"56e1d920855768dd89624523b7f4671f4a75d8523bb38e1b5eada1748ac9cb91","created_at":"2026-02-26T23:46:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-xehz\n  review: aura-plugins-uvgb\n  files:\n    - tests/test_protocol_combinatorial.py\n---\n## Finding\n\nIn tests/test_protocol_combinatorial.py, the helper _advance_to is imported inline inside individual test method bodies 6 times instead of at the module top-level:\n\n```python\n# Line 256, 293, 318, 361, 385, 419 — all inside test methods:\ndef test_valid_transitions_succeed(self, tc: TransitionTestCase) -\u003e None:\n    from conftest import _advance_to   # inline, repeated\n    ...\n\ndef test_invalid_transitions_raise(self, tc: TransitionTestCase) -\u003e None:\n    from conftest import _advance_to   # inline, repeated\n    ...\n```\n\ntest_state_machine.py does it correctly:\n```python\n# At module top-level (line 38):\nfrom conftest import _advance_to, _make_state\n```\n\n## Why It Matters\n\nThis was an IMPORTANT finding (aura-plugins-g5xp) in the original review. The FOLLOWUP implementation fixed inline imports in contract tests (test_aura_types.py) but did not apply the same fix in the newly introduced test_protocol_combinatorial.py. The same pattern recurs in new code.\n\nInline imports within test methods:\n1. Obscure the test's dependencies — readers must scan each method body to understand what helpers are used\n2. Incur a (tiny) import lookup cost on every parametrized invocation (up to 6 times × N parametrized cases)\n3. Are inconsistent with the module-level import style used in test_state_machine.py and test_fixture_loader.py\n\n## Fix\n\nMove all 6 inline `from conftest import _advance_to` to the module top-level import block alongside the existing top-level imports (lines 29-50 of test_protocol_combinatorial.py).\n\nFile: tests/test_protocol_combinatorial.py, lines 256, 293, 318, 361, 385, 419","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nmem","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: test_protocol_combinatorial.py uses repeated inline 'from conftest import _advance_to' inside test methods","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b270f6801aea3205daf1552e2a22e5ec49e919bc8222a88c59180be7534eaccb","created_at":"2026-02-27T06:56:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-karq\n  review: aura-plugins-6m2m\n---\nMINOR findings for SLICE-4 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nno9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 MINOR","updated_at":"2026-02-27T06:56:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No BLOCKER findings — elegance axis clean","closed_at":"2026-02-26T04:30:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"02545536293aa432620526a4f125198da71db3af633ef9dfe3971b335cb9144e","created_at":"2026-02-26T04:30:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-np6k","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-2 BLOCKER","updated_at":"2026-02-26T04:30:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:22:56Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-1 BLOCKER severity group. Findings to be added as children.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nq6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 BLOCKER","updated_at":"2026-02-22T02:22:56Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:38:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e391dd9433ef57b41c501889d2bcac00113ec7911ee19f90ef17d372a1cb9baf","created_at":"2026-02-25T22:38:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings for SLICE-1 from Test Quality axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nr4m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 BLOCKER","updated_at":"2026-02-25T22:38:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-23T04:29:00Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9eab0f9316962bd57bd5c6069b34ee69084fa93b6a01f924903fa96ad44583a7","created_at":"2026-02-23T04:26:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer B (Test Quality) on SLICE-4 (Runtime Context Injection with ConstraintContext). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nrvv","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 BLOCKER","updated_at":"2026-02-23T04:29:00Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:22:08Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-3 (constraints.py) blocker-level findings.\n\n## Finding Summary\n\nNO BLOCKER findings for SLICE-3.\n\n- All test imports are from production modules (aura_protocol.constraints, aura_protocol.state_machine, aura_protocol.types).\n- SUT (RuntimeConstraintChecker) is NOT mocked. Tests instantiate the real checker.\n- Tests verify observable outcomes (return values: list[ConstraintViolation], exception types, constraint_id field values).\n- DI constructor tested: custom constraint_specs and handoff_specs accepted.\n- AC5 (check_all aggregation + no short-circuit) has dedicated test class with 7 tests.\n- All 22 C-* constraints covered by named test classes.\n- check_all does not cover ALL 22 individual constraint checkers (only check_review_consensus, check_severity_tree, check_blocker_gate, check_audit_trail, check_role_ownership are in check_all). The remaining 17 methods are utility checkers not auto-aggregated. This design is intentional per production code.\n\nThis group is empty and will be closed immediately.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nsl","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 BLOCKER","updated_at":"2026-02-22T02:22:08Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"50f3975619b72cca5142152070c2d476491cc0aca2acd0ee3f3dd45341eb5300","created_at":"2026-02-26T16:02:25Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"__init__.py module docstring (lines 1-100) lists all submodules (types.py, state_machine.py, workflow.py, constraints.py, interfaces.py, context_injection.py, gen_schema.py, gen_skills.py) but does not mention the new audit_activities.py module added in SLICE-3.\n\nFile: scripts/aura_protocol/__init__.py:1-100\nSlice: aura-plugins-sp6y (SLICE-3)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ntoe","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"MINOR: __init__.py docstring missing audit_activities mention (SLICE-3)","updated_at":"2026-02-26T21:03:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:30:46Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"fa500becd619d303be32e15c9cfdc34fb67806686a6adc0d2b9e828e2908be5a","created_at":"2026-02-26T03:30:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  reviewer: cartographer-b\n  round: 1\n---\nMINOR findings from Cartographer B (Test quality) on SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nwmm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 MINOR","updated_at":"2026-02-26T03:30:46Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:56:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7a14383def63858b6234f4a981c5573dac148dbbf2666ea35d00afd4f8a61d6a","created_at":"2026-02-27T06:55:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-8lfp\n  review: aura-plugins-qrgx\n---\nMINOR findings for SLICE-2 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nwv7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 MINOR","updated_at":"2026-02-27T06:56:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:44:48Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"51c6998890b66309c8d781ace7b65a6634edfb99a5f05152d713418dae0673fd","created_at":"2026-02-25T22:44:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-a1bn\n  review_round: 2\n---\nBLOCKER findings from Reviewer A (Correctness) on SLICE-3, Round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ny8i","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-2 BLOCKER","updated_at":"2026-02-25T22:44:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b6d88b04efbc112389d0495bdd2b8a3c19d29ab6618d3c50617183c8ad46ba97","created_at":"2026-02-25T22:37:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"constraints.py: check_integration_points() exists as a standalone method (line 1264) but is NOT dispatched from check_structural(). All other new constraint checks (C-supervisor-cartographers, C-slice-review-before-close, C-max-review-cycles) ARE wired. Need to: (1) add has_integration_points parameter to check_structural signature, (2) add dispatch block, (3) update docstring, (4) add TestCheckStructural test case.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-nzx3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FIX: Wire check_integration_points into check_structural","updated_at":"2026-02-25T22:37:40Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:58:01Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7756f810789ab8290680d9c452c5ed694e87237624b8792ae27aedeff131d6a8","created_at":"2026-02-27T06:57:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-v1ak\n---\nBLOCKER findings for ALL-SLICES-REVIEW-B-1 (Reviewer B, round 1)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-o139","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"ALL-SLICES-REVIEW-B-1 BLOCKER","updated_at":"2026-02-27T06:58:01Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b94c1e875c1ae048aae575d701b5ce95b91e91608126ca06e7e6788a4f06a685","created_at":"2026-02-26T20:45:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-hgki\n  original_urd: aura-plugins-2ojv\n---\n## Scoping URE: Follow-up items from v3 code review + UAT\n\n### Questions presented\nQ1: \"Which items should be in scope for this follow-up epoch?\"\n  Options: __init__.py cleanups, Nix-package worker.py, docs/worker.md, Test fixtures.yaml\n  Response: ALL FOUR selected (multiSelect)\n\nQ2: \"For docs/worker.md — what audience and depth?\"\n  Options: Developer guide, Operator guide, Both combined\n  Response: \"Both combined\"\n\n### Scoped items\n1. __init__.py cleanups (3 fixes: import ordering, docstring, __all__ comment)\n2. Nix-package bin/worker.py in flake.nix\n3. docs/worker.md — combined developer + operator guide\n4. Test fixtures.yaml + combinatorial testing infrastructure","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-o2pp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_URE: Scope follow-up for v3 Temporal Engine","updated_at":"2026-02-26T20:45:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:45:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"feeaa513709198674771fc826c89cca3de701b269e3cc2204597d1c159c6d3ce","created_at":"2026-02-25T22:45:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings. Elegance axis, round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-o5kg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-2 BLOCKER","updated_at":"2026-02-25T22:45:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f99cd7134624265b9df1cf755dc16227f06911b99fb59f2205baa51467b0f62a","created_at":"2026-02-26T08:38:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-o5ol","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 BLOCKER: Test Quality","updated_at":"2026-02-26T08:38:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0f4129292846db685490c0ea21048fc1016aa4615f6aee2acd1e527846a269e2","created_at":"2026-02-22T12:52:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"conftest.py defines _make_state() at lines 86-102. test_constraints.py also defines its own _make_state() at lines 68-74 with an identical signature and body. The whole point of conftest.py was to centralize shared helpers and eliminate this duplication (per the proposal: 'removed local duplicates'). The test_constraints.py version was not removed. This means check_state tests may silently diverge from the canonical implementation if one helper is updated but not the other.\n\nFix: Remove _make_state from test_constraints.py and add 'from conftest import _make_state' at the top of that file (the same pattern test_workflow.py uses for _advance_to).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-o7m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1: _make_state duplicated between conftest.py and test_constraints.py","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"01880728e02dbfa0fba52c42e0ed0d1d79d3fd730e97d4eb1929f7f48c9add8b","created_at":"2026-02-23T04:22:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer C (Elegance) on SLICE-4. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-o7xw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 MINOR","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:10Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-2 (state_machine.py) important-level findings.\n\n## Finding: P10→P11 consensus gate is not in _CONSENSUS_GATED — only _BLOCKER_GATED covers it — tests do not explicitly assert that P10→P11 without consensus raises TransitionError (IMPORTANT)\n\nThe state_machine.py defines:\n  _CONSENSUS_GATED = frozenset({(P4_REVIEW, P5_UAT)})\n\nP10→P11 is only in _BLOCKER_GATED. When blocker_count=0 and votes are present (all ACCEPT), the advance proceeds. But when blocker_count=0 and NO votes are recorded, the advance ALSO proceeds — there is no consensus enforcement on P10→P11 via the _CONSENSUS_GATED mechanism.\n\nThe _advance_to helper in test_state_machine.py satisfies P10→P11 by recording 3 ACCEPT votes AND clearing blockers, but there is no negative test that shows: 'at P10, blocker_count=0 but no votes → P11 advance succeeds (or should it fail?)'.\n\nThe proposal (AC4) states the BLOCKER gate blocks P10→P11. The CONSENSUS gate (AC2) only mentions P4→P5. However, test_state_machine.py:TestAC2ConsensusGate only tests P4. The check_constraints activity test (test_workflow.py line 273-289) DOES test p10→p11 consensus violation at the constraint layer.\n\nThis is an architectural inconsistency worth noting: the state machine allows P10→P11 without consensus (no consensus gate for P10), relying only on blocker_count. The constraint layer (RuntimeConstraintChecker.check_review_consensus) DOES flag p10 without consensus. The two layers are inconsistent in their enforcement boundary. This should be documented and aligned in a follow-up epic.\n\nSeverity: IMPORTANT (not BLOCKER) because the AC4 BDD acceptance criteria only state the BLOCKER gate blocks P10→P11, not a consensus gate. The behavior is intentional per the proposal, but creates confusion about where the p10 consensus is enforced.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-o83","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-22T17:24:10Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:09Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"59247d1f56f15e42250f2279386fc1438ae5bd7d3cb9f38b7bc5e008061042b5","created_at":"2026-02-26T16:01:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-vhtx\n  review: aura-plugins-mip5\n---\nMINOR findings for SLICE-2 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-o8hc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 MINOR","updated_at":"2026-02-26T16:02:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-4","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"144f085699d01752a3a3f210e14ea2d798db54f3f943c4484cc1c6460a14482e","created_at":"2026-02-26T15:32:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-9qpq\n  urd: aura-plugins-2ojv\n  proposal: aura-plugins-6zbz\n---\n## Specification\nProduction infrastructure per URD R8/R9:\n\n1. bin/worker.py — Temporal worker entry point\n   - Registers EpochWorkflow + all child workflow types + activities\n   - Accepts namespace and task-queue as CLI args or env vars\n   - Calls init_audit_trail() before starting worker\n   - Configurable: TEMPORAL_NAMESPACE, TEMPORAL_TASK_QUEUE env vars\n   - Executable script with argparse\n\n2. nix/temporal-service.nix — systemd user service for Temporal dev server\n   - home-manager module for `temporal server start-dev`\n   - Configurable: port, namespace, DB path\n   - systemd user service (not system-level)\n\n3. Update flake.nix to expose homeManagerModules.temporal-service\n   - Reference nix/temporal-service.nix\n   - Design for future Docker Compose + native binary variants via Nix module options\n\n## Files Owned\n- bin/worker.py (NEW)\n- nix/temporal-service.nix (NEW)\n- flake.nix (add homeManagerModules output)\n\n## Integration Points\n- IP-3 CONSUMER: Registers activities from SLICE-3 (init_audit_trail, query_audit_events, record_audit_event)\n- Registers EpochWorkflow from existing workflow.py\n\n## Validation Checklist\n- [ ] bin/worker.py created and executable\n- [ ] Accepts namespace + task-queue as CLI args or env vars\n- [ ] Registers EpochWorkflow + activities\n- [ ] Calls init_audit_trail() before worker start\n- [ ] nix/temporal-service.nix systemd user service\n- [ ] flake.nix exposes homeManagerModules.temporal-service\n- [ ] Design accommodates future Docker Compose / native binary options\n- [ ] Tests written and passing (at minimum: import test, arg parsing)\n- [ ] Existing 945 tests unbroken","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-o8va","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"SLICE-4 implementation complete. Production code verified via --help. All quality gates pass: 1088 tests (0 failures, 4 skipped). Merge conflict on audit_activities.py resolved by taking SLICE-3's implementation (correct owner). Files: bin/worker.py (argparse, env vars, all activities registered, init_audit_trail), nix/temporal-service.nix (systemd user service, typed options), flake.nix (homeManagerModules.temporal-service).","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-4: Infrastructure (bin/worker.py + nix/temporal-service.nix + systemd module)","updated_at":"2026-02-26T18:34:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:07Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3f6313226c6196f5d372c193022526c170de3705d8a1c5ef6e4cfc95c56f21f2","created_at":"2026-02-25T22:13:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-24cr\n  ure: aura-plugins-om47\n  request: aura-plugins-xpf1\n---\n## Production Code Path\n\n**End users run:** python -m aura_protocol.gen_schema (reads types.py + context_injection.py)\n\n## Worker Owns (Full Vertical Slice)\n\n### types.py changes\n1. Rename/rewrite C-supervisor-explore-team → C-supervisor-cartographers\n   - New content: Cartographers are always-3 dual-role agents (explore → review), never shut down\n   - Covers: TeamCreate with /aura:explore, persist for review phase, max-3 cycles\n2. Add C-integration-points\n   - Content: Cross-slice dependencies must have explicit Layer Integration Points in IMPL_PLAN (owner, consumers, contract, merge timing)\n3. Add C-slice-review-before-close\n   - Content: Slices must NOT be closed immediately upon worker completion — must be reviewed at least once by Cartographers\n4. Add C-max-review-cycles\n   - Content: Worker-Cartographer review-fix cycles are capped at MAX 3; remaining IMPORTANT findings after cycle 3 move to FOLLOWUP epic\n\n### context_injection.py changes\n- Map C-supervisor-cartographers → SUPERVISOR role, phases P8+P9+P10\n- Map C-integration-points → SUPERVISOR role, phase P8\n- Map C-slice-review-before-close → SUPERVISOR role, phases P9+P10\n- Map C-max-review-cycles → SUPERVISOR role, phase P10\n\n## Implementation Order (Layers Within Slice)\n\n**Layer 1: types.py**\n- Find C-supervisor-explore-team, rename to C-supervisor-cartographers, rewrite content\n- Add 3 new constraints: C-integration-points, C-slice-review-before-close, C-max-review-cycles\n\n**Layer 2: context_injection.py**\n- Add role/phase mappings for all 4 constraints\n- Ensure SUPERVISOR role gets all 4; phases P8/P9/P10 as appropriate\n\n## Key Files\n- scripts/aura_protocol/types.py (constraints section)\n- scripts/aura_protocol/context_injection.py (role/phase mappings)\n\n## Validation Checklist\n- [ ] C-supervisor-cartographers exists in types.py (renamed from C-supervisor-explore-team)\n- [ ] C-integration-points exists in types.py\n- [ ] C-slice-review-before-close exists in types.py\n- [ ] C-max-review-cycles exists in types.py\n- [ ] All 4 constraints mapped in context_injection.py under SUPERVISOR role\n- [ ] python -m aura_protocol.gen_schema runs without error (spot-check)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-oags","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"All 6 files updated. types.py: C-supervisor-explore-team renamed to C-supervisor-cartographers, 3 new constraints added. context_injection.py: SUPERVISOR role gets all 4, P8+P9+P10 phases updated. constraints.py: check_supervisor_cartographers() renamed, 3 new check methods added, check_structural() updated. Tests: test_constraints.py class renamed+4 new test classes, test_context_injection.py WORKER exclusion updated, test_gen_schema.py supervisor_constraints list updated. Schema regenerated: all 4 constraints visible with correct role-ref/phase-ref. Import verification passed.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1: Python constraints — types.py + context_injection.py","updated_at":"2026-02-25T22:50:07Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4234b8ede9f1e330189eeb89e2a41940fb0a57c7d8cf2a0b463df244fc4fb056","created_at":"2026-02-26T08:54:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  review_round: 1\n---\nIMPORTANT findings from Reviewer B (Test Quality) on FOLLOWUP-SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ocws","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T08:55:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"857423b725a1541bd8c9ca0a292d1d2e7013375d23a542741df76489746ac489","created_at":"2026-02-26T07:08:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: REVISE - Five elegance findings, three requiring action before implementation:\n\n1. [PATH TYPING - REVISE] PluginEntry.path and MarketplaceEntry.path are typed as str, inconsistent with the Path idiom used throughout (VersionFile.path, _ScanSpec). The SLICE-5 code sketch already calls Path(marketplace_entry.path).expanduser().resolve() — this friction is avoidable. Both should be Path.\n\n2. [DOUBLE-BUMP MECHANISM - REVISE] BDD criterion 'marketplace bumped exactly once' exists but SLICE-5 code sketch does not show the deduplication logic. The proposal must specify the concrete check (e.g., 'resolved mp_path must not be in {vf.path for vf in files}'). Without this, the implementation will likely double-bump or omit a bump.\n\n3. [REGISTRY PATH TESTABILITY - REVISE] _REGISTRY_PATH calls Path.home() at module import time, baking the path into the module before any test can override HOME. A lazy factory function (def _registry_path() -\u003e Path) or accepting path as parameter to PluginRegistry.load() would allow test isolation. The current design is hard to test without monkeypatching Path.home itself.\n\n4. [LRU_CACHE HAZARD - NOTE] repo_root() uses @functools.lru_cache(maxsize=1). With the proposed module-scoped aura_release_mod fixture, this cache is shared across all tests in the module. The autouse cleanup fixture should also call mod.repo_root.cache_clear() to prevent cross-test contamination.\n\n5. [HELP OUTPUT STALENESS - NOTE] The prefix-check dispatch (sys.argv[1] == 'registry' before argparse) means aura-release --help will never mention the registry subcommand. The module docstring will also be stale. Neither is in the validation checklist. Should add: 'Update module docstring Usage: block to mention registry subcommand'.\n\nItems 1-3 are blockers for implementation correctness and testability. Items 4-5 are notes for the checklist.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-odb3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-C-1: Plugin registry + marketplace fix + test quality","updated_at":"2026-02-26T07:08:12Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b16c915bab420535e204e300a53af9e5f9b4d41bcba57279aa177fe0432436a5","created_at":"2026-02-26T02:41:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: REVISE - Four test-quality issues must be addressed before this proposal is implementable.\n\n## Finding 1 (BLOCKER): importlib.util.spec_from_file_location returns None for extensionless files\n\nThe proposal states: 'use importlib.util.spec_from_file_location to import it as a module.'\nVerified empirically: spec_from_file_location('aura_release', '/path/to/bin/aura-release') returns None because the file has no .py extension. The correct approach requires an explicit SourceFileLoader:\n\n    from importlib.machinery import SourceFileLoader\n    import importlib.util\n    loader = SourceFileLoader('aura_release', str(BIN_PATH / 'aura-release'))\n    spec = importlib.util.spec_from_loader('aura_release', loader)\n    mod = importlib.util.module_from_spec(spec)\n    spec.loader.exec_module(mod)\n\nThe proposal must specify this two-step pattern, or acknowledge it and document the correct import boilerplate. The stated approach will silently break the test with an AttributeError on None.\n\n## Finding 2 (BLOCKER): bin/ is not in pytest pythonpath — import will fail without explicit setup\n\npyproject.toml [tool.pytest.ini_options] sets pythonpath = ['scripts', 'tests']. The bin/ directory is not included. Since aura-release has a hyphenated name it cannot be imported via a normal sys.path addition anyway (hyphens are not valid Python identifiers), so the SourceFileLoader approach is correct — but the proposal must acknowledge that bin/ does NOT need to be added to pythonpath (it would not help). The proposal should explicitly state why no pythonpath change is needed, and document BIN_PATH = Path(__file__).resolve().parent.parent / 'bin' as the path constant to use.\n\n## Finding 3 (REVISE): Import side effect — dead code removal is a prerequisite for safe import\n\nThe proposal correctly notes that repo_root() is lazy (@functools.lru_cache, not called at module level after dead code removal). However it does not make explicit that Change 1 (dead code removal, lines 33-57) is a HARD prerequisite for Change 2 (the test). Without the dead code removal, importing the module executes REPO_ROOT = _discover_repo_root() at module load, which spawns a git subprocess and calls sys.exit(2) if not inside a git repo. A plain tmp_path test would therefore fail with SystemExit(2) before any test assertion runs. The validation checklist should explicitly order: 'Delete lines 33-57 BEFORE running any test that imports aura-release.'\n\n## Finding 4 (REVISE): Two missing edge cases worth adding to complete the regression guard\n\nCases A and B cover the happy path and the original bug. Two additional cases have zero cost and close real gaps:\n\nCase C — pyproject.toml at root AND in subdirectory (both present): verify discover_version_files returns both entries, root entry first (scan order is documented in the docstring). This guards against a future short-circuit regression where only the first match is returned.\n\nCase D — pyproject.toml in subdirectory but missing [project] version key (i.e. _has_pyproject_version returns False): verify discover_version_files returns an empty list. This guards against the filter logic being accidentally removed. The pyproject.toml content for Case D would be '[build-system]\\n...' with no [project] block.\n\nBoth cases require only additional tmp_path trees; no git repo, no additional imports.\n\n## What does NOT need to change\n\n- No git repo is needed. Confirmed: discover_version_files uses only pathlib.Path operations internally (no git calls). tmp_path is sufficient.\n- pytest framework is compatible. pytest\u003e=8.0 is declared in dev dependencies. tmp_path fixture, parametrize, and class-based test organization all work.\n- The test file location tests/test_aura_release.py is correct given testpaths = ['tests'].\n- The SourceFileLoader import pattern (once corrected) is the right approach for a hyphenated extensionless binary — no simpler alternative exists.\n\n## Suggested revision actions\n\n1. Replace the spec_from_file_location example with the correct SourceFileLoader two-step pattern.\n2. Add a note that bin/ must NOT be added to pythonpath (would not help; hyphen prevents normal import).\n3. Add explicit ordering constraint to validation checklist: dead code removal first, then test.\n4. Add Cases C and D to TestDiscoverVersionFiles.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-oitf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-B-1: aura-release dead code + test","updated_at":"2026-02-26T02:41:16Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-22T17:43:18Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b544079f2ef33be4df6d4b2d8a3640133ed831508bb1e83610c4dd1e7574d667","created_at":"2026-02-22T17:42:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Write NixOS home-manager modules: programs/beads (installs bd, enables dolt-server) and services/dolt-server (systemd user service running dolt sql-server). CUSTOM.programs.beads.enable=true enables both. Includes federation config options for Hosted Dolt remotes.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ojl8","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"Home-manager modules for beads + dolt-server","updated_at":"2026-02-22T17:43:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4f02c3e0576d47993b93311f633bd2f5b10636ddda667f3c3ab039cb0615c0b1","created_at":"2026-02-26T11:59:19Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n---\n## Questions and Responses\n\n### Round 1: Core architecture decisions\n\n**Q1: Phase decomposition**\nQ: P4 (review) and P10 (code review) must be child workflows (they receive vote signals). P9 (slices) must be parallel child workflows. What about the other 9 sequential phases (P1–P3, P5–P8, P11–P12)?\nOptions:\n- Hybrid minimal: P4, P9, P10 become child workflows. Sequential phases stay as in-process state machine advances. Lowest complexity, minimal migration.\n- Hybrid recommended (Recommended): P4, P9, P10 as child workflows. Sequential phases wrapped as Temporal activities — bounded, no inbound signals. Clean boundary; activity → child workflow upgrade path preserved.\n- Full decomposition: All 12 phases as child workflows. Maximum history partitioning and per-phase SA forensic queryability. Most complex: 12 workflow types to register and test.\nA: Hybrid recommended (Recommended)\n\n**Q2: State machine fate**\nQ: EpochStateMachine currently owns all gate logic (consensus, BLOCKER, REVISE-drives-back). Where should it live in the v3 topology?\nOptions:\n- Keep in parent (Recommended): EpochWorkflow keeps EpochStateMachine. Child workflows execute phase logic, return results. Parent validates transitions centrally. No gate logic duplication; available_transitions query unchanged.\n- Distribute gate logic: Phase-specific gate logic moves into each phase-workflow. Parent EpochWorkflow becomes a thin coordinator. Each phase is self-contained; private constants must move to types.py.\nA: Keep in parent (Recommended)\n\n### Round 2: Stub implementation scope\n\n**Q3: Stub scope**\nQ: Three Protocol interfaces are defined in interfaces.py with zero implementations. Which should v3 implement?\nOptions:\n- AuditTrail (Recommended): Implement record_event() + query_events() backed by Temporal search attributes. Replaces Beads for protocol-level audit. record_transition activity (currently a no-op) gets a real implementation.\n- TranscriptRecorder: Implement record_phase_transition / record_constraint_check / record_review_vote for unified-schema integration. Requires an external transcript service to wire to.\n- SecurityGate: Implement check_tool_permission() for agentfilter integration. Requires agentfilter service to wire to.\n- None — defer all: Keep all three as Protocol stubs. v3 scope is purely the workflow decomposition; audit + security integrations are v4.\nA: AuditTrail (Recommended), TranscriptRecorder, SecurityGate — selected all three.\nUser notes: Can stub out the TranscriptRecorder integrations and APIs for now, but SecurityGate should be included because we already have agentfilter. All future stubs must be clearly labelled as such: with their motivation described clearly, which epic and feature they were added as part of, and when they can be expected to be implemented.\n\n**Q4: Worker script**\nQ: The codebase has no production Temporal worker registration script (only a test-only sandbox harness). Should v3 include one?\nOptions:\n- Yes — include in v3 (Recommended): Add a bin/worker.py (or similar) that registers EpochWorkflow + all child workflow types + activities against a real Temporal namespace.\n- No — defer to v4: Keep worker registration test-only.\nA: Yes — include in v3 (Recommended)\n\n### Round 3: Remaining open items\n\n**Q5: Event emission**\nQ: Event stub types (PhaseTransitionEvent, ConstraintCheckEvent, ReviewVoteEvent, AuditEvent) are defined in types.py but never emitted anywhere. Should v3 emit them?\nOptions:\n- Yes — emit from child workflow activities (Recommended): Each phase-workflow activity emits the appropriate event type to the AuditTrail.\n- No — keep as stubs: Defer event emission to a later epic.\nA: Yes — emit from child workflow activities (Recommended)\n\n**Q6: A2A FilePart fix**\nQ: Known A2A spec divergence: FilePart uses file_uri instead of the spec's file_with_uri. Is this in v3 scope?\nOptions:\n- Yes — fix in v3: Migrate FilePart.file_uri → nested file_with_uri structure matching the A2A spec.\n- No — defer to v4: Keep the documented divergence.\nA: Yes — fix in v3\n\n### Round 4: Temporal infrastructure\n\n**Q7: Temporal deployment**\nQ: What deployment approach for the self-hosted Temporal server?\nOptions:\n- Temporal CLI dev server (Recommended): temporal server start-dev — in-memory, no external dependencies.\n- Docker Compose stack: Official temporalio/auto-setup Docker image with PostgreSQL/Cassandra backend.\n- Native Temporal server binary: Download and configure natively with separate DB.\nA: Start with Temporal CLI dev server (temporal server start-dev). Docker Compose and native binary are worth planning for the future — should be made easier with NixOS.\n\n**Q8: Nix module style**\nQ: Which Nix patterns should the systemd modules use?\nOptions:\n- home-manager user service (Recommended): home-manager systemd.user.services — user-level, no root needed.\n- NixOS system module: nixosModules output — system-level, root privileges.\nA: home-manager user service (Recommended)\n\n### Round 5: Catch-all\n\n**Q9: Anything else?**\nOptions:\n- Temporal namespace setup: Setup/teardown of namespace scripted (CLI or Nix module).\n- Test infrastructure changes: Test sandbox harness in test_workflow.py updated for child workflows; worker registration generalized.\n- Version bump + CHANGELOG: v3 deserves a version bump (0.7.0) and CHANGELOG entry.\n- Nothing else: Scope above covers everything.\nA: Temporal namespace setup, Test infrastructure changes, Version bump + CHANGELOG","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ollt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"ELICIT: Protocol Engine v3 — Temporal child workflow decomposition","updated_at":"2026-02-26T11:59:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T18:05:01Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6fc0b734abb34e35d298c7ef4cdbe11843acabdd440ca235da1f6cdf6974202b","created_at":"2026-02-23T18:01:05Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-xpf1\n  impl_plan: aura-plugins-24cr\n---\n## Quick URE (2 questions)\n\n### Q1: Constraints strategy in types.py\n**Question:** Should we update the existing C-supervisor-explore-team to reflect Cartographers (dual-role, always 3, never shut down), or create separate new constraints for each concept?\n\n**Options presented:**\n- (A) Update existing + add new: Update C-supervisor-explore-team to become C-supervisor-cartographers (rename/rewrite). Add 2-3 new constraints: C-integration-points, C-slice-review-before-close, C-max-review-cycles.\n- (B) Update existing only: Rewrite C-supervisor-explore-team to cover the full Cartographer lifecycle. Fold rules into existing constraints. No new constraint IDs.\n- (C) All new, keep old: Keep C-supervisor-explore-team unchanged. Add 4+ new constraints alongside it.\n\n**User chose: (A) Update existing + add new**\n\n### Q2: PROCESS.md restructuring\n**Question:** For PROCESS.md Phase 8-10, how much should we restructure versus append?\n\n**Options presented:**\n- (A) Restructure around Ride the Wave: Rewrite Phase 8-10 sections so the Ride the Wave cycle is the primary narrative. Standing Explore Team becomes Cartographers. Add integration points step to Phase 8. Add review-fix cycle (max 3) to Phase 10. Phase 9 gets persistence rules.\n- (B) Append new sections: Keep existing text unchanged. Add new subsections at the end of each phase.\n- (C) Minimal — just add references: Keep PROCESS.md as-is. Add a single cross-reference section.\n\n**User chose: (A) Restructure around Ride the Wave**","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-om47","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"URE: Ride the Wave propagation to schema/PROCESS/Python","updated_at":"2026-02-23T18:05:01Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:09:20Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"33b39f164494624e160e5ebcb2f6b61a966d774ad9a90fef3067b27529a44a74","created_at":"2026-02-26T08:04:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-rien\n  impl_plan: aura-plugins-147m\n---\n## Scope\nEnsure all 5 test cases (A-E) pass after fixture refactor. No production code changes.\n\n## Verification\n`uv run pytest tests/test_aura_release.py::TestDiscoverVersionFiles -v`\n\nAll 5 tests must pass.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-oqna","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-L3: Impl — verify all tests pass after refactor","updated_at":"2026-02-26T08:09:20Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ae063bb8dec394f63e60c614d75dc7ffee5ab333f0e40d83f5581c8751ccd198","created_at":"2026-02-27T06:55:30Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"bin/aurad.py:76 — argparse description reads:\n  'Temporal worker for Aura Protocol v3.'\n\nAfter renaming bin/worker.py → bin/aurad.py, the description is stale.\n'aurad' is the daemon name (not 'worker'). Should read something like:\n  'aurad — Aura Protocol Temporal daemon.'\n\nNo behavioral impact; cosmetic after the rename.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-oqw9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: bin/aurad.py argparse description still says 'Temporal worker'","updated_at":"2026-02-27T06:55:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9a0fa0e471bf81e8e4f0782527783a20517f482dc17f9df982f6b632bfb83498","created_at":"2026-02-26T08:38:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-oxdy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 MINOR: Test Quality","updated_at":"2026-02-26T08:38:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"fb8a52da2d92b9ccea520f1988168ab62c6d524bb3538c7fb578154fa5669682","created_at":"2026-02-26T20:53:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"The query_audit_events activity (audit_activities.py) does not forward the role parameter to AuditTrail.query_events even though the Protocol interface supports it.\n\n## Gap\nIn audit_activities.py:\n- Activity signature is: query_audit_events(epoch_id: str, phase: PhaseId | None = None)\n- Missing: role: RoleId | None = None parameter\n- The delegation call: await _AUDIT_TRAIL.query_events(epoch_id=epoch_id, phase=phase)\n- Missing: role=role kwarg\n\nThe AuditTrail Protocol defines:\n  async def query_events(self, *, epoch_id: str | None = None, phase: PhaseId | None = None, role: RoleId | None = None) -\u003e list[AuditEvent]\n\n## Fix Required\n1. Add role: RoleId | None = None to query_audit_events signature\n2. Forward role=role in the _AUDIT_TRAIL.query_events() call\n3. Update any callers and tests accordingly\n\n## Rationale\nWithout the role filter, queries that scope to a specific agent role (e.g. 'show only SUPERVISOR audit events for this epoch') silently return unfiltered results. This is a silent correctness failure.\n\n## Acceptance Criteria\n- query_audit_events activity accepts role: RoleId | None = None\n- Delegation call passes role=role to _AUDIT_TRAIL.query_events()\n- Test: query_audit_events with role filter returns only role-matching events\n- No regressions in existing tests","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-oyxw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FIX: query_audit_events drops role filter — add role: RoleId | None to activity","updated_at":"2026-02-26T23:56:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b2c642eefdd5e94e5b81aedd812c90feb228f1b9d19cecf2058733f3f3365a38","created_at":"2026-02-27T06:17:58Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-ckg0\n  urd: aura-plugins-7vtb\n  elicit: aura-plugins-bo5x\n---\n## Proposal Summary\n\nRename worker→aurad, add aura-msg CLI stub, restructure docs, improve workflow signals and test infrastructure.\n\n## Vertical Slice Decomposition\n\n### SLICE-1: Rename + Packaging (R1, R3, R4)\nMechanical rename of worker→aurad across 19 locations + persistent SQLite + packages.default.\n\n**Files owned:**\n- bin/worker.py → bin/aurad.py (rename + update internal references)\n- flake.nix (packages.worker → packages.aurad, add to default)\n- nix/temporal-service.nix (dbPath default + XDG resolution + mkdir -p)\n- tests/test_worker.py → tests/test_aurad.py (rename + update WORKER_PATH→AURAD_PATH)\n- CHANGELOG.md (update reference)\n\n**Does NOT touch:** RoleId.WORKER, protocol.yaml owner_roles, types.py enums\n\n### SLICE-2: aurad systemd + aura-msg stub (R2, R5)\nNew systemd service for aurad + aura-msg CLI stub.\n\n**Files owned:**\n- nix/aurad-service.nix (NEW — systemd user service for bin/aurad.py)\n- bin/aura-msg.py (NEW — stub with argparse --help, planned subcommands)\n- flake.nix (packages.aura-msg, homeManagerModules.aurad-service, update default)\n- tests/test_aura_msg.py (NEW — test stub --help, parse_args)\n\n### SLICE-3: Doc restructure (R6)\nSplit docs/worker.md into 3 files + add roadmap.\n\n**Files owned:**\n- docs/worker.md → DELETE (content migrated)\n- docs/architecture.md (NEW — overall design, Temporal topology, aurad/aura-msg model)\n- docs/aurad.md (NEW — daemon ops: systemd, config, running locally)\n- docs/aura-msg.md (NEW — CLI stub docs, planned commands, hook integration vision)\n- Roadmap section in docs/architecture.md with full R12 stub descriptions\n\n### SLICE-4: Workflow signals + ReviewAxis type fix (R7, R8)\nSignal-based slice progress + ReviewAxis/VoteType in ReviewPhaseWorkflow.\n\n**Files owned:**\n- scripts/aura_protocol/workflow.py:\n  - SliceInput: add parent_workflow_id field\n  - New SliceProgressSignal dataclass\n  - EpochWorkflow: new @workflow.signal slice_progress handler + @workflow.query slice_progress_state\n  - SliceWorkflow: signal parent with per-leaf-task completion\n  - ReviewPhaseWorkflow._votes: dict[str,str] → dict[ReviewAxis,VoteType]\n  - ReviewPhaseResult.vote_result: dict[str,str] → dict[str,str] (kept as str for serialization boundary — but internal state uses enums)\n- tests/test_workflow.py (update child workflow tests)\n\n### SLICE-5: Constraint violation fixtures (R9)\nAdd constraint_violations axis to protocol.yaml.\n\n**Files owned:**\n- tests/fixtures/protocol.yaml (add constraint_violations axis — all 23 C-*)\n- tests/fixtures/fixture_loader.py (add ConstraintViolationTestCase, generate_constraint_violation_test_cases())\n- tests/test_protocol_combinatorial.py (add parametrized constraint violation tests)\n- tests/test_fixture_loader.py (add tests for new generator)\n\n## Integration Points\n\n| Integration Point | Owner | Consumers | Contract | Timing |\n|---|---|---|---|---|\n| packages.aurad name | SLICE-1 | SLICE-2 (aurad-service.nix needs package ref) | packages.aurad in flake.nix | SLICE-1 before SLICE-2 |\n| bin/aurad.py path | SLICE-1 | SLICE-2 (systemd ExecStart), SLICE-3 (docs) | bin/aurad.py exists | SLICE-1 before SLICE-2, SLICE-3 |\n| SliceInput.parent_workflow_id | SLICE-4 | N/A (self-contained) | New field on SliceInput | Independent |\n| ConstraintViolationTestCase | SLICE-5 | N/A (self-contained) | New dataclass in fixture_loader.py | Independent |\n\n## Dependency Order\n```\nSLICE-1 (rename) → must complete first (other slices reference aurad paths)\nSLICE-2 (systemd + stub) → depends on SLICE-1 (references packages.aurad)\nSLICE-3 (docs) → depends on SLICE-1 (references bin/aurad.py)\nSLICE-4 (signals + type fix) → independent (workflow.py only)\nSLICE-5 (constraint fixtures) → independent (test files only)\n```\n\nParallel execution: SLICE-1 first, then SLICE-2+3+4+5 in parallel.\n\n## Tradeoffs\n\n| Decision | Rationale |\n|---|---|\n| Separate aurad-service.nix (not extending temporal-service.nix) | Decoupled lifecycle — can restart aurad without restarting Temporal server |\n| ReviewPhaseResult.vote_result stays dict[str,str] | Serialization boundary — StrEnum is safe for dict keys but vote_result crosses the workflow→caller boundary |\n| All 23 constraints in YAML with skip markers | Documentation value + future-proofing. Skip markers clearly communicate what's testable today |\n| aura-msg stub with --help only | Defer full implementation to a focused epoch. Stub establishes the binary, package, and planned API surface |\n\n## Acceptance Criteria\n- Given aurad binary, when `bin/aurad.py --help`, then shows usage with namespace/task-queue/server-address options\n- Given aura-msg stub, when `bin/aura-msg.py --help`, then shows planned subcommands (start-epoch, signal-vote, query-state, advance-phase)\n- Given temporal-service enabled, when service starts, then auto-creates SQLite parent directory and uses XDG_DATA_HOME path\n- Given SliceWorkflow runs, when leaf task completes, then parent EpochWorkflow receives progress signal\n- Given constraint violation fixtures, when pytest runs, then 5 implemented constraints produce runnable tests and 18 skip\n- All existing 1196 tests continue to pass","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-oz82","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-1: aurad rename + aura-msg stub + protocol improvements","updated_at":"2026-02-27T06:17:58Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2fa129f3df0dfaf740e337d46e82a5c5dd4346372b23c3ac7553c66ddf249efe","created_at":"2026-02-26T16:01:46Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"tests/test_worker.py uses unittest.mock (mock.patch, mock.patch.dict) for testing bin/worker.py CLI args and env vars. This is the FIRST mock usage in a codebase with 799+ baseline tests that achieve zero-mock testing through DI and structural subtyping.\n\nFiles: tests/test_worker.py (lines 1-327)\nImports: from unittest import mock (line ~8)\nUsage: mock.patch.dict('os.environ', ...) for env var tests, mock.patch for sys.argv\n\nImpact: Sets precedent that future tests can use mocks, weakening the codebase's strong DI-first testing convention. Worker CLI arg parsing could potentially be tested via DI (inject argv list) instead of mocking sys.argv.\n\nRecommendation: Refactor to pass argv as parameter to parse_args() and use os.environ.copy() with dict merge instead of mock.patch.dict. This aligns with the existing pattern where all other test files use constructor injection.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-p2fy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: test_worker.py introduces unittest.mock — breaks codebase no-mock convention","updated_at":"2026-02-26T18:40:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6b983cda6fda257b0edce06869d000424814bb992c09fe4f288cdeaf0a238107","created_at":"2026-03-01T06:56:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-p2kp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"REVIEW-A: End-user alignment review for PROPOSAL-1","updated_at":"2026-03-01T06:56:40Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e63f62072558f6f1a68c1564c7c6cceb29ad4aa03bfdbf98846fbe2d64093dfb","created_at":"2026-02-27T06:57:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-v1ak\n---\nMINOR findings for ALL-SLICES-REVIEW-B-1 (Reviewer B, round 1)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-p4fb","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"ALL-SLICES-REVIEW-B-1 MINOR","updated_at":"2026-02-27T06:57:43Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:38:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"27188836e9dd4bf4f7fcb22fd264664a0f0e8899d1e22b0636f9436433b3a546","created_at":"2026-02-25T22:38:50Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings for SLICE-3 from Test Quality axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-p4rr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 BLOCKER","updated_at":"2026-02-25T22:38:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"102bed7cebb6bd63edf826c0ccd9ed234cfce474027233b9bdc39e1d4afd5b04","created_at":"2026-02-26T15:33:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Tests for init_audit_trail(), query_audit_events activity, record_audit_event activity, InMemoryAuditTrail. Test uninitialized ApplicationError. Import from production paths.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-p5ip","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-3-L2: Tests — audit_activities module","updated_at":"2026-02-26T18:34:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d80149ac6cf1403461ebde53a8fb8a43ae8b5c0930f7d14ebfd1d2c28d1c2e25","created_at":"2026-02-26T04:30:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-p6s6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-2 IMPORTANT","updated_at":"2026-02-26T04:30:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:19:14Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ac1986ddfa5caf732412a882b42d5cd3fe07341018cde5a7d6fdc7d8b3b81be1","created_at":"2026-02-26T08:05:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i142\n  impl_plan: aura-plugins-147m\n---\n## Scope\nDefine frozen dataclasses and lazy _registry_path() function in bin/aura-release.\n\n## Deliverables\n- _registry_path() -\u003e Path: lazy function (NOT module-level constant)\n- PluginEntry(name: str, path: Path, remote: str | None) frozen dataclass\n- MarketplaceEntry(path: Path, plugins: tuple[PluginEntry, ...]) frozen dataclass\n- PluginRegistry(marketplaces: tuple[MarketplaceEntry, ...]) frozen dataclass with method stubs\n\n## File\n- bin/aura-release (add after imports section)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-p98u","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-L1: Types — PluginEntry, MarketplaceEntry, PluginRegistry, _registry_path()","updated_at":"2026-02-26T08:19:14Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:13:23Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c6a47c2714848f2c57eb63ec7d9aac2e421013b3b6c7dc1541c86209b2c78faa","created_at":"2026-02-26T03:11:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-7iy2\n  proposal: aura-plugins-pcs6\n---\nBlocker findings from code review of implementation.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-p9av","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"IMPL-REVIEW-BLOCKER: aura-release dead code + test","updated_at":"2026-02-26T03:13:23Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:23:17Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:22:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-5 (workflow.py) blocker-level findings.\n\n## Finding Summary\n\nNO BLOCKER findings for SLICE-5.\n\n- Tests import from production modules (aura_protocol.workflow, aura_protocol.constraints, aura_protocol.state_machine, aura_protocol.types, temporalio).\n- SUT (EpochWorkflow class and its activities check_constraints, record_transition) are NOT mocked.\n- AC6 and AC7 are tested via direct state machine integration (documented strategy) since a Temporal server binary is required for full sandbox tests and that dependency would block CI.\n- Activities are tested via ActivityEnvironment (in-process, no server required) — the correct Temporal testing approach for unit-level activity tests.\n- Temporal decorator introspection tests (TestWorkflowStructure) verify the @workflow.defn, @workflow.signal, @workflow.query, @workflow.run decorators are applied correctly without needing a full server.\n- All search attribute keys (SA_*) verified for name and type.\n\nThis group is empty and will be closed immediately.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-pbc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-B-1 BLOCKER","updated_at":"2026-02-22T02:23:17Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e852b11f2ce42e0b198d1f57eb39b408a13acf2a605f76a1c349b74a95abeec5","created_at":"2026-02-26T08:38:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-pbwg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 IMPORTANT: Test coverage for write behavior","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No MINOR findings — elegance axis clean","closed_at":"2026-02-26T04:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c1c0ad9e24daf1545b5357de950524ed67235b98dc69cf77031514fd36f6726b","created_at":"2026-02-26T04:30:14Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-pclf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-2 MINOR","updated_at":"2026-02-26T04:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1355bf7912dc594e840ad2cb8586fd69187f01321a5c70c0c3d59c1839bec192","created_at":"2026-02-26T02:43:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-cuuw\n  urd: aura-plugins-s7l0\n  supersedes: aura-plugins-po9n\n---\n## Changes vs PROPOSAL-1\n\nAddresses Reviewer B findings (aura-plugins-oitf):\n1. Corrected import strategy — `spec_from_file_location` returns None for extensionless files\n2. Explicit ordering: dead code removal is a hard prerequisite for the test\n3. Two additional test cases (Case C: root + subdir, Case D: invalid subdir pyproject.toml)\n4. Expanded deletion range to include orphan comment at line 32\n\n---\n\n## Problem Space\n\n**Root cause (recap):** Installed nix binary (495 lines) reads `VERSION_FILES['pyproject']` unconditionally at module level; crashes when git root has no `pyproject.toml`. Develop branch already fixes core logic via `discover_version_files()`. Two cleanup tasks remain.\n\n---\n\n## Changes\n\n### Change 1: Remove dead code from `bin/aura-release` (lines 32–57)\n\nDelete lines 32–57 inclusive. Line 32 is an orphaned comment (misplaced above the dead block; its correct counterpart is at line 58 above `COMMIT_SECTIONS`):\n\n```\n32: # Conventional commit prefix -\u003e Keep a Changelog section  ← orphan; delete\n33: def _discover_repo_root() -\u003e Path: ...\n48: REPO_ROOT = _discover_repo_root()\n50: VERSION_FILES = {'pyproject': ..., 'plugin': ..., 'marketplace': ...}\n56: CHANGELOG_PATH = REPO_ROOT / 'CHANGELOG.md'\n57: (blank line)\n```\n\nAfter deletion, line 58 (`# Conventional commit prefix → ...`) follows directly after line 31's blank line and correctly introduces `COMMIT_SECTIONS`.\n\n**Impact:** purely subtractive. Removes one git subprocess at every invocation.\n\n### Change 2: Add regression test `tests/test_aura_release.py`\n\n**Ordering note (hard prerequisite):** Change 2 MUST be written and run after Change 1 is applied. If lines 33–57 still exist, importing the module executes `REPO_ROOT = _discover_repo_root()` at load time, which calls `sys.exit(2)` inside any plain `tmp_path` (not a git repo), making every test crash with `SystemExit(2)` before assertions run.\n\n**Import strategy:** `bin/aura-release` has no `.py` extension. `importlib.util.spec_from_file_location(name, path)` returns `None` for extensionless files (Python determines the loader from the file extension). The correct approach uses an explicit `SourceFileLoader`:\n\n```python\nfrom importlib.machinery import SourceFileLoader\nimport importlib.util\n\nBIN_PATH = Path(__file__).resolve().parent.parent / 'bin'\n\ndef _import_aura_release():\n    loader = SourceFileLoader('aura_release', str(BIN_PATH / 'aura-release'))\n    spec = importlib.util.spec_from_loader('aura_release', loader)\n    mod = importlib.util.module_from_spec(spec)\n    spec.loader.exec_module(mod)\n    return mod\n```\n\nNo `pythonpath` change in `pyproject.toml` is needed — `SourceFileLoader` takes an absolute path directly.\n\n**Test cases (class `TestDiscoverVersionFiles`):**\n\n**Case A: pyproject.toml at repo root (existing happy path)**\n```\ntmp/\n  pyproject.toml   ← [project]\\nversion = '1.0.0'\n```\nAssert: returns exactly one `PyprojectVersionFile` with `path == tmp/pyproject.toml`.\n\n**Case B: pyproject.toml only in subdirectory (the original bug scenario)**\n```\ntmp/\n  opencode-security-filter/\n    pyproject.toml  ← [project]\\nversion = '0.1.0'\n```\nAssert: returns exactly one `PyprojectVersionFile` with `path == tmp/opencode-security-filter/pyproject.toml`.\n\n**Case C: both root and subdirectory have pyproject.toml**\n```\ntmp/\n  pyproject.toml             ← [project]\\nversion = '2.0.0'\n  sub/\n    pyproject.toml           ← [project]\\nversion = '1.0.0'\n```\nAssert: returns exactly two entries; root entry is first (scan order preserved).\nGuards against a future short-circuit where only the first match is returned.\n\n**Case D: subdirectory pyproject.toml exists but has no [project] version key**\n```\ntmp/\n  tool-only/\n    pyproject.toml  ← [tool.foo]\\nbar = 'baz'  (no [project] section)\n```\nAssert: returns empty list.\nGuards against `_has_pyproject_version` filter being accidentally removed.\n\n**No git repo needed:** `discover_version_files` uses only `pathlib` operations. `pytest`'s `tmp_path` fixture is sufficient.\n\n---\n\n## Engineering Tradeoffs\n\n| Option | Pros | Cons | Decision |\n|--------|------|------|----------|\n| SourceFileLoader (explicit) | Correct for extensionless files | More verbose than spec_from_file_location | **Do it** |\n| spec_from_file_location | Simpler | Returns None for extensionless files — broken | Rejected |\n| subprocess test (CLI) | Tests full binary | Requires git repo setup, slower | Deferred |\n| 4 test cases (A–D) | Closes real regression gaps | Slightly more than minimum | **Do it** (low cost, high value) |\n\n---\n\n## MVP Milestone\n\n1. Delete lines 32–57 from `bin/aura-release` (verify: no references to dead symbols remain)\n2. Create `tests/test_aura_release.py` with `TestDiscoverVersionFiles` (Cases A–D)\n3. Run `pytest tests/test_aura_release.py` — all pass\n4. Update nix profile (`nix profile upgrade` or rebuild home-manager) to ship new binary\n\n---\n\n## Public Interfaces (unchanged)\n\n`discover_version_files(root: Path) -\u003e list[VersionFile]` — existing API, no changes.\n\n---\n\n## Validation Checklist\n\n- [ ] Lines 32–57 deleted from bin/aura-release\n- [ ] No references to _discover_repo_root / REPO_ROOT / VERSION_FILES / CHANGELOG_PATH remain (grep confirms)\n- [ ] tests/test_aura_release.py created with TestDiscoverVersionFiles\n- [ ] Case A passes: root-level pyproject.toml discovered\n- [ ] Case B passes: subdirectory-only pyproject.toml discovered (original bug scenario)\n- [ ] Case C passes: both root and subdirectory returned, root first\n- [ ] Case D passes: subdir without [project] version → empty list\n- [ ] pytest runs clean (no new failures)\n\n---\n\n## BDD Acceptance Criteria\n\n**Given** a git repo with no pyproject.toml at root **when** a subdirectory contains a valid [project] pyproject.toml **then** discover_version_files returns that file **should not** raise FileNotFoundError\n\n**Given** dead code removed **when** aura-release imported via SourceFileLoader **then** no git subprocess spawned at import time **should not** call _discover_repo_root at module level\n\n**Given** Case C structure **when** both root and sub have valid pyproject.toml **then** both are returned with root first **should not** short-circuit after first match\n\n**Given** Case D structure **when** sub pyproject.toml has no [project] version **then** discover_version_files returns empty list **should not** crash or return file without version","design":"{\"validation_checklist\":[\"Lines 32-57 deleted; grep confirms no dangling references\",\"tests/test_aura_release.py created\",\"Case A passes\",\"Case B passes (original bug)\",\"Case C passes (root+sub)\",\"Case D passes (no [project] version)\",\"pytest clean\"],\"acceptance_criteria\":[{\"given\":\"repo with no root pyproject.toml\",\"when\":\"subdirectory has valid pyproject.toml\",\"then\":\"discover_version_files finds it\",\"should_not\":\"raise FileNotFoundError\"},{\"given\":\"dead code removed\",\"when\":\"imported via SourceFileLoader\",\"then\":\"no git subprocess at import\",\"should_not\":\"call _discover_repo_root\"},{\"given\":\"root and sub both have valid pyproject\",\"when\":\"discover_version_files runs\",\"then\":\"returns both, root first\"},{\"given\":\"sub pyproject has no [project] version\",\"when\":\"discover_version_files runs\",\"then\":\"empty list returned\"}],\"tradeoffs\":[{\"decision\":\"SourceFileLoader\",\"rationale\":\"spec_from_file_location returns None for extensionless files\"},{\"decision\":\"4 test cases\",\"rationale\":\"Cases C and D close real regression gaps at near-zero extra cost\"},{\"decision\":\"delete line 32 too\",\"rationale\":\"orphaned comment would duplicate line 58 after deletion\"}]}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-pcs6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-2: aura-release reads pyproject.toml from wrong directory","updated_at":"2026-02-26T02:43:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5046b34255b1b77027345d486f3d82ce6ce246032cf66ac632b00b5e7167da6b","created_at":"2026-02-26T08:54:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  review_round: 1\n---\nMINOR findings from Reviewer B (Test Quality) on FOLLOWUP-SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-pgwb","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-REVIEW-B-1 MINOR","updated_at":"2026-02-26T08:55:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"60c965d58ed32836211d48f967ea7a014ca341e8c5208769aaa1c5856a2d5795","created_at":"2026-02-23T04:29:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"The proposal's AC10 validation checklist item states: 'End-to-end pipeline test: parse_schema → gen_types (draft) → gen_schema (with diff) → validate_schema → gen_skills (with diff) pipeline succeeds.'\n\nNo such test exists in any of the 4 slice test files. The components are tested individually:\n- test_schema_parser.py: parse_schema tested in isolation\n- test_gen_schema.py: round-trip uses parse_schema as part of AC3 (covers parse + gen_schema + validate)\n- test_gen_skills.py: generate_skill tested independently\n- test_gen_types.py: generate_types_source tested independently\n\nThe full chain (parse → gen_types → gen_schema → validate → gen_skills) is never exercised in a single test. AC10 explicitly requires this chain to succeed as a unit.\n\nRemediation: Add a test (possibly in test_gen_schema.py or a new test_pipeline.py) that exercises the full chain: calls parse_schema on real schema.xml, generates a draft via generate_types_source, then calls generate_schema, validates the output, and finally calls generate_skill on a marked SKILL.md. This is an integration test that confirms all modules compose correctly.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ph0n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S2-B1-IMPORTANT: AC10 end-to-end pipeline test is missing — no single test chains all 4 modules","updated_at":"2026-02-23T12:46:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"51e2c89bbee134ba57abbf208ef64d297e8274776575d3c58f5849db1b7aaa6b","created_at":"2026-02-26T16:02:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"CHANGELOG.md:16 states 'ReviewAxis StrEnum values renamed to semantic names: CORRECTNESS, TEST_QUALITY, ELEGANCE' but the actual enum in types.py:106-114 uses single-letter values A/B/C. The CHANGELOG entry is factually incorrect and misleading.\n\nFile: CHANGELOG.md:16\nActual enum: scripts/aura_protocol/types.py:106-114\nSlice: aura-plugins-w5hi (SLICE-5)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-phig","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: CHANGELOG factual error on ReviewAxis values (SLICE-5)","updated_at":"2026-02-26T18:40:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2ba23c45ead6d60942ec0ab75fa20b6792592451e332f4da4d57b555c21c1c36","created_at":"2026-02-23T18:10:56Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-cuuw\n  urd: aura-plugins-s7l0\n---\n## Problem Space\n\n**Axes:** single-process, single-file, internal-only change\n\n**Root cause:** `bin/aura-release` (installed nix binary, 495 lines) defines at module-load time:\n```python\nREPO_ROOT = _discover_repo_root()          # git subprocess at import\nVERSION_FILES = {'pyproject': REPO_ROOT / 'pyproject.toml', ...}\n```\nThen `read_pyproject_version()` reads `VERSION_FILES['pyproject']` unconditionally.\nWhen the git repo root has no `pyproject.toml` (e.g. `agentfilter/` repo where the\npackage lives in `agentfilter/opencode-security-filter/`), this crashes with\n`FileNotFoundError`.\n\n**Current develop branch (637 lines)** already replaces this with\n`discover_version_files(root)` which checks `.is_file()` before reading and also\nscans one level deep (`*/pyproject.toml`). The core crash is fixed. Two cleanup\ntasks remain.\n\n## Changes\n\n### Change 1: Remove dead code from `bin/aura-release`\n\nDelete lines 33–57 (inclusive):\n```python\n# DELETE — never referenced after the discover_version_files refactor:\ndef _discover_repo_root() -\u003e Path: ...   # lines 33-45\nREPO_ROOT = _discover_repo_root()        # line 48 — git subprocess at import\\!\nVERSION_FILES = {                         # lines 50-54 — never read\n    'pyproject': REPO_ROOT / 'pyproject.toml',\n    'plugin': ...,\n    'marketplace': ...,\n}\nCHANGELOG_PATH = REPO_ROOT / 'CHANGELOG.md'  # line 56 — never read\n```\n\nImpact: purely subtractive. No behaviour changes. Removes one spurious git\nsubprocess at every invocation.\n\n### Change 2: Add regression test `tests/test_aura_release.py`\n\nCover the subdirectory case so it cannot regress. Test class:\n`TestDiscoverVersionFiles` — two cases:\n\n**Case A: pyproject.toml at repo root (existing happy path)**\n```\ntmp/\n  pyproject.toml   ← [project] version = '1.0.0'\n```\nAssert `discover_version_files(tmp)` returns exactly one `PyprojectVersionFile`\nwith path `tmp/pyproject.toml`.\n\n**Case B: pyproject.toml only in subdirectory (the bug scenario)**\n```\ntmp/\n  opencode-security-filter/\n    pyproject.toml  ← [project] version = '0.1.0'\n```\nAssert `discover_version_files(tmp)` returns exactly one `PyprojectVersionFile`\nwith path `tmp/opencode-security-filter/pyproject.toml` (one-level-deep discovery).\n\n**Import strategy:** `aura-release` has a hyphenated name so use\n`importlib.util.spec_from_file_location` to import it as a module. Because\n`repo_root()` has `@functools.lru_cache` but is lazy (not called at import time\nafter dead code removal), the import is safe with no side effects.\n\n**No git repo needed** for the unit tests — `discover_version_files` takes a\n`Path` directly and uses only `pathlib` operations (no git calls).\n\n## Engineering Tradeoffs\n\n| Option | Pros | Cons | Decision |\n|--------|------|------|----------|\n| Remove dead code | Cleaner import, no wasted subprocess | Minor diff noise | **Do it** |\n| Leave dead code | Zero risk | Wastes subprocess, misleads readers | Rejected |\n| Subprocess test (CLI) | Tests full binary | Requires git setup, slower | Deferred |\n| Unit test (importlib) | Fast, no git needed, precise | Hyphen import slightly awkward | **Do it** |\n\n## MVP Milestone\n\n1. Delete lines 33–57 from `bin/aura-release`\n2. Create `tests/test_aura_release.py` with `TestDiscoverVersionFiles` (Cases A + B)\n3. Run `pytest tests/test_aura_release.py` — both pass\n4. Update nix profile (`nix profile upgrade` or rebuild home-manager) to ship new binary\n\n## Public Interfaces (unchanged)\n\n`discover_version_files(root: Path) -\u003e list[VersionFile]` — already exists,\nthis proposal only adds tests for it. No API changes.\n\n## Validation Checklist\n\n- [ ] Lines 33–57 deleted from bin/aura-release; no references to _discover_repo_root / REPO_ROOT / VERSION_FILES / CHANGELOG_PATH remain\n- [ ] tests/test_aura_release.py created with TestDiscoverVersionFiles\n- [ ] Case A passes: root-level pyproject.toml discovered\n- [ ] Case B passes: subdirectory pyproject.toml discovered (regression guard)\n- [ ] pytest runs clean (no new failures)\n- [ ] aura-release --check runs without FileNotFoundError in a repo with only a subdirectory pyproject.toml\n\n## BDD Acceptance Criteria\n\n**Given** a git repo with no pyproject.toml at root **when** a subdirectory contains a valid pyproject.toml **then** discover_version_files returns that file **should not** raise FileNotFoundError\n\n**Given** dead code is removed **when** aura-release is imported **then** no git subprocess is spawned at import time **should not** call _discover_repo_root at module level\n\n**Given** regression test exists **when** discover_version_files changes in future **then** subdirectory case is covered **should not** allow silent regression","design":"{\"validation_checklist\":[\"Lines 33-57 deleted; no dangling references\",\"tests/test_aura_release.py created\",\"Case A (root pyproject.toml) passes\",\"Case B (subdirectory pyproject.toml) passes\",\"pytest clean\",\"aura-release --check works in subdirectory repo\"],\"acceptance_criteria\":[{\"given\":\"git repo with no pyproject.toml at root\",\"when\":\"subdirectory contains valid pyproject.toml\",\"then\":\"discover_version_files returns that file\",\"should_not\":\"raise FileNotFoundError\"},{\"given\":\"dead code removed\",\"when\":\"aura-release imported\",\"then\":\"no git subprocess at import\",\"should_not\":\"call _discover_repo_root at module level\"}],\"tradeoffs\":[{\"decision\":\"unit test via importlib\",\"rationale\":\"hyphenated filename; lazy repo_root() means import is safe after dead code removal\"},{\"decision\":\"remove CHANGELOG_PATH too\",\"rationale\":\"it depends on REPO_ROOT and is never read; part of the same dead-code block\"}]}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-po9n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-1: aura-release reads pyproject.toml from wrong directory","updated_at":"2026-02-23T18:10:56Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0aebbc2631ff03f9ea56d14e50c280be51ab31b9b3701918406ed046175d1c71","created_at":"2026-02-23T04:22:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer C (Elegance) on SLICE-3. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-pp3j","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 MINOR","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d78406c44f2d6dc5c42e95351c33142121451ebf0b9ce181b10182eb79ba067f","created_at":"2026-02-22T12:52:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer C (Elegance) on SLICE-1 (state_machine.py, conftest.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-pqs","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 MINOR","updated_at":"2026-02-22T17:30:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"77a2584c5aa6ab7b2f259960cdef5190a989941f4faa703ffbb3ef8981b8024e","created_at":"2026-02-26T03:31:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  reviewer: cartographer-c\n  round: 1\n---\n## Issue\n\nBoth `gen_schema.py` and `context_injection.py` define module-private dicts named `_ROLE_CONSTRAINTS` and `_PHASE_CONSTRAINTS`, but with completely different types and inverted semantics:\n\n- `context_injection._ROLE_CONSTRAINTS: dict[RoleId, frozenset[str]]` — maps role → set of constraint IDs\n- `gen_schema._ROLE_CONSTRAINTS: dict[str, str | None]` — maps constraint_id → comma-separated role-ref string (for XML attribute)\n\nThe `_CI_` import alias in gen_schema.py mitigates confusion locally, but downstream consumers (test_gen_schema.py) import `_ROLE_CONSTRAINTS` from gen_schema without context about the name collision.\n\n## Concrete Fix (deferred)\n\nRename the gen_schema versions to `_CONSTRAINT_TO_ROLE_REF` and `_CONSTRAINT_TO_PHASE_REF` to make the inversion explicit. This would clarify that they map constraint→attribute-value rather than role→constraints.\n\n## Severity Rationale\n\nMINOR: The existing `_CI_` prefix aliasing and clear section headers prevent actual bugs. This is a naming clarity improvement, not a correctness issue.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-prbl","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"MINOR: _ROLE_CONSTRAINTS/_PHASE_CONSTRAINTS name shadowing between gen_schema.py and context_injection.py","updated_at":"2026-02-26T09:38:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"35fc4ba97e921792f1c38f52253233f125327d0fad43f37ed25f228dfdddf39b","created_at":"2026-02-26T23:46:17Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-uvgb\n  followup_epic: aura-plugins-hgki\n---\nIMPORTANT findings for FOLLOWUP-REVIEW-B-1 (test quality axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-prul","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:44:42Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c81f8f714d57cc918e3c2254806073929f1b2f4ef5c2e511a74ef29f52b15423","created_at":"2026-02-25T22:44:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings for SLICE-1 Round 2 (Test Quality axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-pxc0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-2 BLOCKER","updated_at":"2026-02-25T22:44:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-3 MINOR severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-pxo","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 MINOR","updated_at":"2026-02-22T17:24:22Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-22T17:43:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"fe9c6e7659841bea4d6bd0a3a2165903199d0da76c109de77e002f3b74836288","created_at":"2026-02-22T17:42:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"bd dolt commit/push/pull all fail with 'no store available'. Root cause: main.go line 331 puts 'dolt' in noDbCommands, causing PersistentPreRun to skip store init for ALL dolt subcommands. Fix: exempt commit/push/pull from the parent-name skip. Branch: fix/dolt-subcommand-store-init in ~/codebases/beads/.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-pz9x","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"Fix getStore() nil for bd dolt commit/push/pull","updated_at":"2026-02-22T17:43:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-22T17:43:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"420fd6aa89c27c662b23c9bf9fb1ec5b40e5aabb9f7910fc9c270d23faa4648c","created_at":"2026-02-22T17:42:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Created scripts/import_jsonl_to_dolt.py to bridge the gap left when JSONL sync was removed during Dolt transition. Uses pymysql with autocommit=True and SET FOREIGN_KEY_CHECKS=0. Successfully imported 117 issues. Added pymysql dev dep to pyproject.toml.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-pzq9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"JSONL to Dolt import script","updated_at":"2026-02-22T17:43:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"75ec0815c3f9784cc9d62df223b055f39dca5e884e3e1247cfca08f71c3c877c","created_at":"2026-02-26T20:49:59Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-hgki\n  followup_urd: aura-plugins-gox3\n  proposal: aura-plugins-wfhc\n---\n## Vertical Slices (all parallel)\n\n### SLICE-1: Code cleanups + Nix packaging\nFiles: scripts/aura_protocol/__init__.py, flake.nix\n\n### SLICE-2: docs/worker.md\nFiles: docs/worker.md (NEW)\n\n### SLICE-3: Test fixtures + combinatorial testing\nFiles: tests/fixtures/ (NEW dir), tests/conftest.py\nPattern: agentfilter PatternFixture style","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-q00q","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_IMPL_PLAN: v3 follow-up cleanups + docs + test fixtures","updated_at":"2026-02-26T23:56:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:48:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5d617cab245a6278a2f85230cf36378fb718efecabe2bd4a2a7996b0ab3da2e6","created_at":"2026-02-25T22:48:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings. Elegance axis, round 3 (final).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-q1gk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-3 MINOR","updated_at":"2026-02-25T22:48:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5ec823b5e2634bdfff9fb9a0ba21cb69dc4a0b408aabede3d522c7050a169c6e","created_at":"2026-02-26T08:55:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  review_round: 1\n---\nIMPORTANT findings from Reviewer C (Elegance) on FOLLOWUP-SLICE-2. No findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qbok","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-26T08:55:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:57:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cf4bf1c933514b4cdfda5f04ab5ffa39d329e3f03e6fa283cacfd8a925a733c4","created_at":"2026-02-22T12:55:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer B (Test Quality) on SLICE-3 (interfaces.py, test_interfaces.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qed","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-22T12:57:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"644ebf88c86eea3b70056b18c31422abbca9206dbf82eb31f945e1c00558e1af","created_at":"2026-02-26T03:36:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-w115\n  urd: aura-plugins-w07o\n  impl_plan: aura-plugins-94yc\n  review_B_slice3: aura-plugins-a048\n  review_B_slice4: aura-plugins-k1m9\n  review_C_slice2: aura-plugins-ehvg\n  review_C_slice3: aura-plugins-08lh\n---\nAggregated IMPORTANT and MINOR findings from Phase 10 code review of Protocol Engine v2.\n\n## IMPORTANT Findings\n\n### B-SLICE3: StrictUndefined regression test isolation (aura-plugins-c5nx)\nTest creates its own jinja2.Environment instead of testing gen_skills.py's actual Environment. If someone removes StrictUndefined from gen_skills.py, the test still passes. Fix: mock or patch the Environment construction inside gen_skills.py, or restructure test to call generate_skill() and verify UndefinedError is raised on an undefined variable.\n\n### B-SLICE4: EPOCH Ride the Wave constraints lack direct inclusion tests (aura-plugins-rthn)\nC-supervisor-cartographers, C-integration-points, C-slice-review-before-close, C-max-review-cycles are verified indirectly via test_gen_schema.py role-ref assertions, but test_context_injection.py has no positive inclusion tests for EPOCH role specifically containing these 4 constraints. Fix: add parametrized tests for each of the 4 constraints in EPOCH's frozenset.\n\n## MINOR Findings\n\n### C-SLICE2: Name shadowing between gen_schema.py and context_injection.py (aura-plugins-prbl)\nBoth modules define _ROLE_CONSTRAINTS and _PHASE_CONSTRAINTS but with different types and inverted semantics. gen_schema.py's versions map roles→sets-of-constraint-IDs (for XML emission), while context_injection.py's are the authoritative hand-authored versions. Suggested rename in gen_schema.py: _CONSTRAINT_TO_ROLE_REF and _CONSTRAINT_TO_PHASE_REF to make the direction explicit.\n\n### C-SLICE3: Lazy import in _constraints_for_role() (aura-plugins-jwoo)\nImport inside the function body when no circular import risk exists. Move to module-level for clarity.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qfze","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":3,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP: Non-blocking improvements from Protocol Engine v2 code review","updated_at":"2026-02-26T09:38:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:19:59Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"540556c3aad74800ed7ce0200bea1b3590870ab61c0b3ff52337b09e96c0e539","created_at":"2026-02-23T04:24:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"The ratified proposal (Module 1) specifies SchemaSpec.constraints as dict[str, ConstraintSpec], matching the existing ConstraintSpec dataclass. The implementation uses dict[str, tuple[str, str, str, str]] instead. The SchemaSpec docstring documents this as intentional, but this creates two divergent representations of the same constraint data: ConstraintSpec in types.py and tuples in SchemaSpec. Any consumer of SchemaSpec.constraints cannot use ConstraintSpec methods/fields directly and must destructure tuples. This is a correctness concern: the implementation diverges from the proposal's stated type contract without a documented rationale in the proposal or code beyond the inline docstring comment. Impact: any downstream code (e.g., future consumers of SchemaSpec) must know to expect tuples, not ConstraintSpec objects. The round-trip test (test_roundtrip_constraint_fields_match) destructures tuples correctly but the inconsistency is a maintainability risk.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qg7u","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1: SchemaSpec.constraints uses tuple not ConstraintSpec — proposal/docstring mismatch","updated_at":"2026-02-23T12:19:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:21:06Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:17:00Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-gmv\n  urd: aura-plugins-umi\n---\n## UAT Questions and Responses\n\n### Plan Presentation\nQ: Does this plan meet your requirements for v1 MVP? (5 modules in scripts/aura_protocol/, 6 test files, typed enums + frozen dataclasses, Temporal workflow, integration interfaces)\nOptions: Accept plan as-is (Proceed to ratification and implementation. All requirements satisfied.), Accept with notes (Plan is good but I have minor feedback to incorporate.), Request changes (Plan needs revision before proceeding.)\nA: User asked clarifying question: 'Is the state_machine.py defined using Temporal FSM primitives, or is it defined separately?'\n\n### Clarification: State Machine Architecture\nQ: Does this separation (pure Python state machine + Temporal workflow wrapper) meet your requirements?\nOptions: Accept plan as-is (Separation makes sense. Proceed to ratification and implementation.), Accept with notes (Good approach, but I have additional feedback.), Use Temporal primitives (I'd rather the state machine use Temporal's native patterns directly.)\nA: Accept plan as-is — Separation makes sense. Proceed to ratification and implementation.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qil","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"UAT-1: aura protocol engine v1 MVP plan","updated_at":"2026-02-22T04:21:06Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"465a0dd117b5dd3e7c6267dd051eff3b48bb9bd37c744aa37f7babc29315ea67","created_at":"2026-02-27T06:28:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-wsys\n  impl_plan: aura-plugins-vjsk\n---\n## Scope\nWrite parametrized tests that import ConstraintViolationTestCase and generate_constraint_violation_test_cases() from fixture_loader.\nTests in test_protocol_combinatorial.py and test_fixture_loader.py.\n5 runnable constraints pass, 18 unimplemented get pytest.mark.skip.\n\n## Files Owned\n- tests/test_protocol_combinatorial.py (add constraint violation parametrized tests)\n- tests/test_fixture_loader.py (tests for generate_constraint_violation_test_cases)\n\n## Acceptance Criteria\nGiven parametrized constraint tests when running pytest then 5 constraints run and 18 skip\nGiven test_fixture_loader.py when testing generator then ConstraintViolationTestCase instances are correct","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qjv4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-5-L2: Tests — Constraint violation fixtures","updated_at":"2026-02-27T06:46:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-22T17:43:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d9dafc78f5f2b66ec937ef7810ba3bfbb46940414ed4bdc13f37d9f80aa4322a","created_at":"2026-02-22T17:42:46Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Exported JSONL backups from Dolt since .beads/dolt/ is gitignored (binary format). Created .beads/issues-export.jsonl for aura-plugins (117 issues) and .beads/issues.jsonl for agent-data-leverage (265 issues). These are the only portable, git-tracked backups.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qlnr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"JSONL backup exports for all repos","updated_at":"2026-02-22T17:43:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:23:58Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"775d7702a1b723f843cde116edf2abe5fab568a7ff728502dfc800f35eddf8c3","created_at":"2026-02-27T06:23:58Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-ckg0\n  urd: aura-plugins-7vtb\n  proposal: aura-plugins-r75e\n---\n## Plan UAT Record\n\nQ: Do you ACCEPT or REVISE PROPOSAL-2?\nOptions: ACCEPT (proceed) | REVISE (changes needed)\nA: \"Should keep the dbPath Nix option.\" → Amendment: keep dbPath option, default resolves XDG at runtime.\n\nQ: With dbPath amendment, ACCEPT?\nOptions: ACCEPT | REVISE\nA: ACCEPT\n\nQ: Feedback on architecture or slices?\nOptions: No additional feedback | Feedback on architecture | Feedback on slices\nA: No additional feedback\n\n## Final Decision: ACCEPT (with dbPath amendment)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qm3u","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT: Plan acceptance for aurad rename epoch","updated_at":"2026-02-27T06:23:58Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:20:24Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T04:20:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-bj1\n  urd: aura-plugins-umi\n  impl_plan: aura-plugins-06g\n---\n## Components Demonstrated\n\n### Component 1: types.py + state_machine.py — ACCEPT\n- P10→P11 consensus: User chose \"Duplicate in state machine\" (defense in depth)\n- No additional feedback\n\n### Component 2: constraints.py + interfaces.py — ACCEPT (after REVISE)\n- User chose: Split check_all() into check_state_constraints() + check_transition_constraints()\n- User chose: Use runtime imports instead of TYPE_CHECKING\n- Fix applied (aura-plugins-3r4), 470 tests\n- Re-demonstrated all 25 check methods\n- User accepted after re-demo\n\n### Component 3: workflow.py — REVISE → FIX APPLIED\n- User chose: \"Store error in state\" (add last_error to EpochState)\n- User chose: \"Accept for v1\" on test level\n- Additional feedback (verbatim):\n  - \"Should make sure that we are only testing the high-level APIs and public interfaces and behaviours, NOT implementation details\"\n  - \"Should be continuing to use the typed enums, and not stringly-typed APIs\"\n  - \"Should also be using putting common inline values into the fixtures\"\n  - \"Also need to make sure all errors and messages are actionable. They describe: what went wrong, why, what that means for them, and how they should fix it if they want to.\"\n  - \"In these criteria: include the WHERE and WHEN it failed (file location, step, time)\"\n- FIX2 applied (aura-plugins-8sk): last_error field, narrow except, shared fixtures, typed enums\n- C-actionable-errors constraint added to protocol docs (AGENTS.md, CONSTRAINTS.md, schema.xml, types.py)\n- Actionable error message application to existing code deferred to FOLLOWUP (aura-plugins-i2n)\n\n## Final Decision\nACCEPT with deferred follow-up work:\n- aura-plugins-i2n: Apply C-actionable-errors to existing error messages\n- FOLLOWUP epic aura-plugins-2tj: 11 IMPORTANT + 8 MINOR findings from code review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qml","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"UAT: Implementation acceptance for aura_protocol v1 MVP","updated_at":"2026-02-22T04:20:24Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:23:37Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\n### Location\n`scripts/aura_protocol/constraints.py`, `check_blocker_gate()` method (lines 353-377).\n\n### Description\nThe method `check_blocker_gate` returns a `ConstraintViolation` with `constraint_id='C-worker-gates'`. However, `C-worker-gates` in CONSTRAINT_SPECS is defined as:\n\n\u003e given: worker finishes implementation, when: signaling completion, then: run quality gates (typecheck + tests) AND verify production code path\n\nThis constraint is about worker completion gates (typecheck + tests + no TODOs), NOT about the p10→p11 BLOCKER resolution gate. The BLOCKER gate is actually part of `C-review-consensus` or could be argued to belong to a dedicated `C-blocker-gate` constraint.\n\nMeanwhile, the dedicated method `check_worker_gates(has_todos, tests_pass, typecheck_pass)` ALSO uses `C-worker-gates` for a different purpose (worker quality gates).\n\nThis means a consumer calling `check_all(state)` at p10 with blockers will receive a `C-worker-gates` violation that conflates two different enforcement concerns under the same constraint ID.\n\n### Severity\nMINOR — no functional bug. Tests correctly verify the violation is raised. The constraint_id mismatch is a naming/categorization issue.\n\n### Suggestion\nIntroduce a dedicated `C-blocker-resolution-gate` constraint in CONSTRAINT_SPECS (and schema.xml) for the p10→p11 gate, or reuse `C-review-consensus` (which already handles p10→p11) for the blocker count check. Update check_blocker_gate to use the appropriate constraint_id.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qqf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 MINOR: check_blocker_gate references C-worker-gates but semantically belongs to blocker resolution","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"33adc0e514a471a86557895d6973c9ad7bc5c8ca2b44b816daa3c2339450d567","created_at":"2026-02-27T06:55:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-8lfp\n  urd: aura-plugins-7vtb\n---\nVOTE: ACCEPT — No blockers. Implementation correct and complete.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qrgx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1: aurad systemd service + aura-msg stub","updated_at":"2026-02-27T06:55:49Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5b2bfc3e914bb9e2e8d8c790a6a3560893a08ac25068dec4bc17e85cd03ef690","created_at":"2026-02-26T07:08:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: REVISE - Three correctness gaps found:\n\n## BLOCKER-1: Double-bump prevention not enforced by code\n\nSLICE-5 states the marketplace will NOT be double-bumped if already in _SCAN_SPECS, but the proposed pseudocode in SLICE-5 has no actual path-comparison guard against the already-discovered `files` list. The integration code only checks `mp_path.is_file()`. If a user registers their local `.claude-plugin/marketplace.json` path in the registry (which is the expected canonical use case per ELICIT), it WILL be bumped twice — once by discover_version_files() and once by the registry integration path. A concrete guard is required: e.g., `if mp_path not in {vf.path for vf in files}:` before calling `mp.write()`.\n\n## BLOCKER-2: Marketplace path missing from rollback_paths\n\nThe existing rollback boundary (lines 522-574 of bin/aura-release) builds `rollback_paths` from discovered `files` + CHANGELOG.md on line 524, before the try block. SLICE-5 inserts the marketplace write inside that try block but the marketplace path is never added to `rollback_paths`. If the marketplace.json write succeeds but a later step (git commit, tag) fails, rollback() will NOT restore marketplace.json, leaving it at the bumped version while the rest of the working tree is rolled back. The proposal must either: (a) add mp_path to rollback_paths before the try, or (b) make the registry write the very last step so it does not need rollback coverage.\n\n## BLOCKER-3: Registry load() deserialization does not validate entry structure\n\nThe proposed validation rules handle: invalid JSON (exit 2), missing `marketplaces` key (exit 2), and nonexistent marketplace paths (warn + continue). But the transition from raw JSON dicts to frozen dataclasses (PluginEntry, MarketplaceEntry) is not validated. If a registry entry is missing required keys (`name`, `path`), the dataclass constructor raises a bare TypeError with no user-friendly message. The proposal must specify what happens when individual plugin entries are malformed: error + exit(2) per entry, or warn + skip? Leaving this unspecified means the implementation will crash with an unhelpful traceback, violating the spirit of R6 ('error clearly on parse failure').\n\n## Non-blocking observation: find_plugin() resolve semantics unspecified\n\nThe auto-detect logic compares 'path in registry entry' to cwd. Since registry paths are absolute (per URD schema), the comparison must use `Path(entry.path).expanduser().resolve()` vs `cwd.resolve()`. This is implied but not stated in the SLICE-3 spec. If left to the implementer, a simple string comparison would silently fail for paths with symlinks or unexpanded tildes. Should be made explicit in the spec.\n\n## Summary\n\nAll three BLOCKERs affect correctness of the production write path. The double-bump and rollback gaps are particularly dangerous as they can corrupt the user's marketplace.json in non-obvious ways.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qrm4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-A-1: Plugin registry + marketplace fix + test quality","updated_at":"2026-02-26T07:08:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:18Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4590803bc77c7c035ef77271cf8f4d9689e55a28bf6914a92ae13afa4936cb69","created_at":"2026-02-22T18:18:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Reviewer B — Test Quality Axis — Round 2\n\n**VOTE: ACCEPT**\n\n### Round 1 BLOCKER Resolution Summary\n\nAll 4 Round 1 BLOCKERs are adequately addressed in PROPOSAL-2.\n\n---\n\n### B1 Resolution (Field-Level Round-Trip): ADEQUATE\n\nAC3 now reads: \"every entity matches field-by-field: ConstraintSpec.given/when/then/should_not, HandoffSpec.required_fields, SubstepSpec.startup_sequence, etc.\" The specific named fields (given/when/then/should_not, required_fields, startup_sequence) are concrete anchors that a worker cannot miss. The validation checklist reinforces with \"Round-trip test: field-by-field comparison (not count-only)\". The trailing \"etc.\" is slightly loose but given the named fields cover the highest-risk data types, this is not a blocker.\n\nNote: The existing test_schema_types_sync.py (line 294-308) already demonstrates the field-level pattern for CONSTRAINT_SPECS but omits should_not — AC3 correctly names should_not explicitly, which is an improvement over the current test coverage.\n\n**BLOCKER RESOLVED.**\n\n---\n\n### B2 Resolution (Error-Path Tests): ADEQUATE\n\nAC1a specifies three distinct failure inputs: malformed XML (truncated), missing required sections (e.g. missing `\u003cphases\u003e`), and missing required attributes. Requires \"at least 3 error-path tests\". The SchemaParseError class is defined in the module spec with a docstring: \"Raised when schema.xml is malformed or missing required sections.\" Validation checklist entry: \"Schema parser raises SchemaParseError on malformed input (3+ error-path tests)\". This is specific and implementable.\n\n**BLOCKER RESOLVED.**\n\n---\n\n### B3 Resolution (Marker Edge Cases): ADEQUATE\n\nAC4a covers all three edge cases I requested:\n1. Missing END marker → raises MarkerError\n2. Missing both markers (new file) → generates full content (no error)\n3. Reversed markers → raises MarkerError\n\nMarkerError is defined as a ValueError subclass with docstring. The validation checklist has two separate entries: \"gen_skills.py raises MarkerError on malformed markers\" and \"gen_skills.py handles new files (no markers) correctly\". The \"should not silently discard manual body on any boundary error\" clause is the correct safety invariant.\n\n**BLOCKER RESOLVED.**\n\n---\n\n### B4 Resolution (Absence Assertions): ADEQUATE\n\nAC5a names concrete constraint IDs: C-worker-gates must NOT appear in get_role_context(SUPERVISOR). AC6a: C-severity-eager must NOT appear in get_phase_context(P4_REVIEW), C-review-consensus must NOT appear in get_phase_context(P9_SLICE). These are testable assertions against specific identifiers, not general \"subset\" language. Validation checklist: \"get_role_context does NOT include irrelevant constraints\" and \"get_phase_context does NOT include irrelevant constraints\".\n\n**BLOCKER RESOLVED.**\n\n---\n\n### IMPORTANT Finding (Round 2 Observation): AC10 Pipeline Direction Ambiguity\n\nAC10 describes the end-to-end test as: \"parse_schema → populate types → gen_schema → validate_schema → gen_skills\". This is the bootstrap direction (schema.xml → Python → schema.xml → SKILL.md). However, the steady-state pipeline (Python is SoT) runs in the opposite direction: types.py → gen_schema → validate_schema → gen_skills.\n\nThe validation checklist entry uses \"parse → gen_schema → validate → gen_skills\" which correctly omits the \"populate types\" step, suggesting the steady-state direction is intended. However AC10's description contradicts this.\n\nThis is not a BLOCKER because:\n- Both pipeline directions are valid to test\n- The validation checklist entry (the more implementation-facing document) uses the correct steady-state direction\n- The confusion can be resolved by the worker reading both AC10 and the checklist together\n\n**Suggestion for worker (not a blocker):** AC10 implementation should test BOTH directions — the bootstrap round-trip (schema.xml → SchemaSpec → gen_schema → validate → assert valid) AND the steady-state round-trip (types.py → gen_schema → parse_schema → assert field-level match). The latter is actually what AC3 already mandates; AC10 should be understood as the full pipeline integration test on top of AC3.\n\n---\n\n### Assessment of New ACs for Testability\n\n| AC | Specific Enough? | Notes |\n|----|-----------------|-------|\n| AC1a | YES | 3 named failure inputs, 3+ tests required |\n| AC3 | YES | Named fields per entity type; \"not count-only\" in checklist |\n| AC4a | YES | 3 named cases, 2 raise, 1 generate-clean |\n| AC5a | YES | Named constraint IDs (C-worker-gates, C-supervisor-no-impl) |\n| AC6a | YES | Named constraint IDs (C-severity-eager, C-review-consensus) |\n| AC8 | YES | Parametrized over all 4 role templates with StrictUndefined |\n| AC10 | MOSTLY | Direction ambiguity noted above; not a blocker |\n\n---\n\n### Test Strategy Coverage Assessment\n\n| Coverage Axis | Before R1 | After R2 |\n|--------------|-----------|----------|\n| Happy paths | Present | Present |\n| Error paths (parser) | Missing | AC1a: 3+ negative tests |\n| Error paths (generator) | Missing | AC4a: 2 raise, 1 clean |\n| Field-level round-trip | Count-only | AC3: field-by-field per type |\n| Absence assertions | Missing | AC5a/AC6a: named IDs |\n| Parametrized templates | Single-role | AC8: all 4 roles |\n| End-to-end pipeline | Missing | AC10: full chain |\n| Sync test for new dicts | Not specified | AC9: 4 new dicts covered |\n\n---\n\n### Existing Test Infrastructure Compatibility\n\nThe conftest.py and test_schema_types_sync.py provide a strong foundation. The new tests should follow the same patterns:\n- Module-scoped schema_root fixture (already in test_schema_types_sync.py) should be reused in test_gen_schema.py to avoid re-parsing schema.xml per test\n- The field-level assertion pattern in test_constraint_given_when_then_match_schema (lines 294-308) is the correct model for AC3 implementation\n- The tmp_path fixture from pytest should be used for AC4a marker edge case tests (already standard practice)\n\n---\n\n### Verdict\n\nPROPOSAL-2 addresses all 4 Round 1 BLOCKERs with specific, implementable acceptance criteria. The test strategy is now comprehensive across error paths, boundary conditions, parametrized execution, absence assertions, and end-to-end pipeline coverage. The AC10 pipeline direction ambiguity is a minor implementation note, not a blocker. The validation checklist is complete and covers all test requirements.\n\n**VOTE: ACCEPT**","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qt1p","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-2-REVIEW-B-2: Schema-driven protocol engine v2","updated_at":"2026-02-26T07:22:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cbe480917b61dccca93d0f3922b67e5d4f9f8bc3996718b766375c90ebe3dc94","created_at":"2026-02-26T23:45:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-hgki\n  followup_urd: aura-plugins-gox3\n  slices:\n    - aura-plugins-rpc4\n    - aura-plugins-zh0j\n    - aura-plugins-xehz\n    - aura-plugins-cz2t\n    - aura-plugins-oyxw\n    - aura-plugins-txgq\n---\nReviewer C (Elegance axis) — FOLLOWUP epic code review.\n\nTests: 1196 passed, 4 skipped. Quality gates pass.\n\nVOTE: REVISE — IMPORTANT finding: audit_activities symbols claimed in __init__.py docstring but not importable; worker.md has stale workflow registration list missing SliceWorkflow + ReviewPhaseWorkflow. PhaseResult name collision (two classes, different schemas). Minor issues logged.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qy79","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-C-1: FOLLOWUP epic aura-plugins-hgki — Elegance review","updated_at":"2026-02-26T23:45:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3f2c27e70463539a0f629920e1c72a5cd5fab3d2882d1f228bff05cca9078746","created_at":"2026-02-27T06:53:58Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"nix/temporal-service.nix:87-88\n\nThe dbPath option description says:\n  'Empty string (default) uses in-memory storage (data lost on restart).'\n\nThis is WRONG after the XDG ExecStartPre implementation. When dbPath='' the service now resolves\n${XDG_DATA_HOME:-$HOME/.local/share}/aura/plugin/temporal.db at runtime and uses persistent SQLite.\nThe behavior is correct and beneficial, but the inline Nix option description actively misleads\nusers who read it to decide whether to configure persistence.\n\nFix: update description to say something like:\n  'Empty string (default) resolves to ${XDG_DATA_HOME:-$HOME/.local/share}/aura/plugin/temporal.db\n   at runtime via ExecStartPre. Set explicitly to override the XDG path.'\n\nThe aurad.md table (line 152) already has the correct description; bring temporal-service.nix into alignment.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qz5b","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"IMPORTANT: temporal-service.nix dbPath option description contradicts new XDG-default behavior","updated_at":"2026-02-27T06:53:58Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ac0ea956558b13082ddbac02a48d294a6a1d3995df25084962f2d45443d6fc13","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-qzgn","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-2 IMPORTANT","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:17:11Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:45Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-lkz\n  impl_plan: aura-plugins-06g\n---\n## Scope\nDefine Temporal types: EpochInput, EpochResult, PhaseAdvanceSignal, ReviewVoteSignal (frozen dataclasses). Define search attribute keys. Update pyproject.toml with temporalio\u003e=1.9.0 and dev deps.\n\n## Files Owned\n- scripts/aura_protocol/workflow.py (type defs + search attrs)\n- pyproject.toml (MODIFY)\n\n## Acceptance Criteria\nGiven workflow.py when imported then all signal/query types importable should never import state_machine internals (only public API)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-r1n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-L1: Types — Temporal workflow types + search attrs + pyproject.toml","updated_at":"2026-02-22T02:17:11Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3b67ccc18577bfdaa9d684b586e52a9ebf88ad69d8d035bf0899437c4963dde3","created_at":"2026-02-22T11:30:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  original_request: aura-plugins-bj1\n  original_urd: aura-plugins-umi\n  followup_urd: aura-plugins-s6i\n  followup_epic: aura-plugins-2tj\n  followup_elicit: aura-plugins-j02\n  code_review_round: aura-plugins-e0j\n  original_proposal: aura-plugins-gmv\n---\n\n## Problem Space\n\n**Axes:** constraint coverage (completeness vs parameter diversity), type safety (str leaks in a typed codebase), audit trail (failed transitions invisible), test confidence (no Temporal sandbox end-to-end)\n\n**Has-a / Is-a relationships:**\n- RuntimeConstraintChecker HAS 22 constraint methods, but check_state_constraints only aggregates 5\n- EpochState HAS current_role typed as str, violating the strongly-typed enum invariant everywhere else\n- EpochWorkflow HAS error handling that catches TransitionError but does not record failures in audit trail\n- Test suite HAS duplicated _advance_to helpers across test_state_machine.py and test_workflow.py\n\n**Key insight:** These are refinements to v1, not new features. The module boundaries and public APIs remain unchanged. Each slice is bounded to a single module + its tests, with MINOR findings bundled.\n\n## Engineering Tradeoffs\n\n| Decision | Options | Choice | Rationale |\n|----------|---------|--------|-----------|\n| check_all scope | A: Single check_all(state) covers all 22 / B: Categorized aggregation by parameter type | B: Categorized aggregation | 22 constraint methods have 4 distinct signatures (state-only, state+phase, naming strings, structural IDs). Forcing all into check_all(state) would require a bloated EpochState or a mega-context object. Better: expand check_state_constraints to cover all state-checkable constraints, expand check_transition_constraints to cover all transition-checkable, add check_naming_constraints for naming checks. Each constraint has a method; each method belongs to exactly one aggregation group. |\n| EpochState.severity_groups | A: dict[str, set[str]] (level→finding_ids) / B: int count per level / C: bool has_severity_tree | A: dict mapping | Enables check_severity_tree() positive case enforcement (p10 MUST have 3 keys). Also supports future severity analytics. |\n| advance() timestamp | A: Optional param, fallback to datetime.now() / B: Required param, no fallback | A: Optional with fallback | Backwards-compatible — existing callers unchanged. Workflow passes workflow.now(); standalone usage gets datetime.now(UTC). |\n| Failed transition recording | A: Append to transition_history / B: Separate failed_transitions list on EpochState | A: Append to transition_history with a marker | Failed transitions are audit events. A separate list fragments the audit trail. Instead, record them in transition_history but with condition_met=\"FAILED: {error}\". |\n| Shared test fixtures | A: conftest.py with pytest fixtures / B: Shared helper module | A: conftest.py | Standard pytest pattern. _advance_to becomes a module-level function in conftest, imported by both test_state_machine and test_workflow. |\n| P10→P11 consensus gating | A: Add to _CONSENSUS_GATED in state_machine / B: Keep in constraint layer only | A: Add to _CONSENSUS_GATED | The state machine already gates P4→P5 via _CONSENSUS_GATED. Not gating P10→P11 the same way is an inconsistency. Adding it makes the enforcement uniform and removes the undocumented split. |\n| Deprecated check_transition alias | Keep / Remove | Keep | C-backwards — removing would break any external caller. |\n\n## Constraint Aggregation Architecture\n\nThe 23 C-* constraints (22 original + C-actionable-errors) group into 4 categories by parameter signature:\n\n### Group 1: State-Checkable (EpochState alone) — expanded from 5 to 7\n- C-review-consensus, C-severity-not-plan, C-worker-gates (blocker), C-audit-never-delete, C-audit-dep-chain, C-vertical-slices (role ownership)\n- NEW: C-severity-eager (positive case, via severity_groups field)\n\n### Group 2: Transition-Checkable (EpochState + to_phase) — 3\n- C-review-consensus (transition gate), C-handoff-skill-invocation, C-worker-gates (blocker gate)\n\n### Group 3: Naming/Format (string inputs) — 5\n- C-proposal-naming, C-review-naming, C-followup-lifecycle, C-agent-commit, C-actionable-errors\n\n### Group 4: Structural (specific IDs/params) — 8\n- C-dep-direction, C-review-binary, C-blocker-dual-parent, C-slice-leaf-tasks, C-ure-verbatim, C-followup-timing, C-frontmatter-refs, C-supervisor-no-impl, C-supervisor-explore-team, C-followup-leaf-adoption, C-worker-gates (full), C-vertical-slices (full)\n\nEvery constraint has a dedicated method. Every method belongs to at least one aggregation group.\ncheck_all(state) = Group 1 (7 checks). check_transition_constraints(state, to_phase) = Group 2 (3 checks).\nGroups 3-4 remain individually callable with their specific parameters.\n\n## Slices (4 total)\n\n### SLICE-1: state_machine.py — Type Safety + Timestamp + Shared Fixtures\n**Files:** scripts/aura_protocol/state_machine.py, tests/test_state_machine.py, tests/conftest.py (NEW), tests/test_aura_types.py\n**Changes:**\n- EpochState.current_role: str → RoleId (default RoleId.EPOCH)\n- EpochState.severity_groups: dict[str, set[str]] = field(default_factory=dict)\n- advance() accepts optional timestamp: datetime | None param; falls back to datetime.now(UTC) when None\n- Add (PhaseId.P10_CODE_REVIEW, PhaseId.P11_IMPL_UAT) to _CONSENSUS_GATED\n- Create tests/conftest.py with shared _advance_to() and _make_state() helpers\n- Fix bare except Exception in test_aura_types.py mutation tests → except FrozenInstanceError or specific type\n**Findings adopted:** tcn, don, 1ic, 4hu, v1b, o83, 295, 8jy\n\n### SLICE-2: constraints.py — Full Aggregation + Severity Positive Case\n**Files:** scripts/aura_protocol/constraints.py, tests/test_constraints.py\n**Changes:**\n- Rename check_state_constraints → check_all (keep check_state_constraints as deprecated alias)\n- Expand check_all to cover ALL 7 state-checkable constraints\n- check_severity_tree() positive case: at P10, severity_groups must have 3 keys (BLOCKER, IMPORTANT, MINOR)\n- check_blocker_gate() constraint_id: C-worker-gates → C-blocker-gate or the correct id from schema.xml\n- _SAME_ACTOR frozenset → module-level constant\n- Document aggregation architecture in module docstring\n**Findings adopted:** yno, jwb, bnr, 947, dvi, qqf, pxo, 0yd\n\n### SLICE-3: interfaces.py — Type Precision + Protocol Documentation\n**Files:** scripts/aura_protocol/interfaces.py, tests/test_interfaces.py\n**Changes:**\n- DataPart.data: dict → dict[str, Any]\n- ToolCall.tool_input: dict → dict[str, Any]\n- ToolCall.tool_output: dict | None → dict[str, Any] | None\n- Add TYPE_CHECKING Protocol limitations documentation in module docstring\n- FilePart.file_uri → add migration note docstring (A2A spec uses file_with_uri)\n- AuditEvent.payload: str → dict[str, Any] (match typed pattern)\n- Add test: isinstance(RuntimeConstraintChecker(...), ConstraintValidatorInterface) must pass\n**Findings adopted:** ngd, 5zf, 7d2, hls, utj, eqy, 4u1, h7x\n\n### SLICE-4: workflow.py — Failed Transition Audit + Temporal Sandbox\n**Files:** scripts/aura_protocol/workflow.py, tests/test_workflow.py\n**Changes:**\n- On TransitionError: record failed TransitionRecord in transition_history with condition_met=\"FAILED: {error}\"\n- Remove post-hoc TransitionRecord list mutation → use timestamp param from advance() with workflow.now()\n- SA_EPOCH_ID: add to per-transition upsert for defensive consistency (or document set-once with comment)\n- Import _advance_to from conftest.py (remove local duplicate)\n- Add WorkflowEnvironment.start_time_skipping() integration tests for:\n  - advance_phase signal delivery end-to-end\n  - submit_vote signal delivery end-to-end\n  - Query current_state returns correct phase after signal\n  - Search attributes updated after signal-driven transition\n**Findings adopted:** 3xe, 68o, gdx, xui, r8f, sk6, x36, 3m4\n\n## Slice Dependencies\n\n```\nSLICE-1 (state_machine + conftest) ──→ SLICE-2 (constraints)\n                                   └─→ SLICE-4 (workflow)\nSLICE-3 (interfaces) ──→ independent (parallel with any slice)\n```\n\nSLICE-1 must complete first (EpochState changes + conftest). SLICE-3 can run in parallel with everything.\n\n## Constraints (from FOLLOWUP_URD)\n- C-backwards: Must not break existing 475 tests\n- C-no-new-deps: No new pip packages\n- C-python-only: All code must be Python\n\n## Validation Checklist\n- [ ] EpochState.current_role is RoleId (not str) everywhere\n- [ ] advance() accepts optional timestamp parameter\n- [ ] _CONSENSUS_GATED includes P10→P11\n- [ ] tests/conftest.py exists with shared _advance_to and _make_state\n- [ ] check_all(state) aggregates 7+ state-checkable constraints\n- [ ] check_severity_tree() enforces positive case at P10 (3 severity groups required)\n- [ ] check_blocker_gate uses correct constraint_id\n- [ ] _SAME_ACTOR is module-level constant\n- [ ] DataPart.data, ToolCall dicts typed as dict[str, Any]\n- [ ] Module docstring documents TYPE_CHECKING Protocol limitations\n- [ ] isinstance(RuntimeConstraintChecker(...), ConstraintValidatorInterface) test passes\n- [ ] Failed transitions recorded in transition_history\n- [ ] No post-hoc TransitionRecord list mutation in workflow.py\n- [ ] WorkflowEnvironment.start_time_skipping() tests pass\n- [ ] All 475+ existing tests still pass\n- [ ] No new pip dependencies\n\n## BDD Acceptance Criteria\n\n### AC1: Type Safety — current_role is RoleId\nGiven EpochState construction with current_role when accessed then type is RoleId should not accept bare strings\n\n### AC2: Timestamp Decoupling\nGiven advance(to_phase, timestamp=custom_ts) when transition succeeds then TransitionRecord.timestamp == custom_ts should not use datetime.now()\n\n### AC3: P10→P11 Consensus Uniformity\nGiven epoch at P10 with 2/3 ACCEPT when advance(P11) called then TransitionError raised should not allow P10→P11 without consensus (matching P4→P5 behavior)\n\n### AC4: check_all Expanded Coverage\nGiven RuntimeConstraintChecker.check_all(state) when called then runs 7+ constraint checks should not only run 5\n\n### AC5: Severity Tree Positive Enforcement\nGiven epoch at P10 without severity_groups when check_severity_tree(state) called then returns ConstraintViolation for missing groups should not silently pass\n\n### AC6: Failed Transition Audit\nGiven invalid advance signal in EpochWorkflow when TransitionError caught then failed transition recorded in transition_history should not be invisible to audit trail\n\n### AC7: Temporal Sandbox End-to-End\nGiven EpochWorkflow in WorkflowEnvironment.start_time_skipping() when advance_phase signal sent then state transitions and search attributes update should not require mocking workflow internals\n\n### AC8: Protocol Self-Check\nGiven RuntimeConstraintChecker instance when isinstance(..., ConstraintValidatorInterface) called then returns True should not require inheritance\n\n### AC9: Backwards Compatibility\nGiven all changes applied when existing test suite runs then 475+ tests pass should not break any existing behavior","design":"{\"validation_checklist\":[\"EpochState.current_role is RoleId\",\"advance() optional timestamp\",\"_CONSENSUS_GATED includes P10→P11\",\"conftest.py shared fixtures\",\"check_all 7+ state checks\",\"severity_tree positive case at P10\",\"blocker_gate correct constraint_id\",\"DataPart/ToolCall dict[str,Any]\",\"TYPE_CHECKING Protocol docs\",\"Protocol self-check test\",\"Failed transitions in audit trail\",\"No post-hoc TransitionRecord mutation\",\"WorkflowEnvironment sandbox tests\",\"475+ existing tests pass\",\"No new pip deps\"],\"acceptance_criteria\":[{\"given\":\"EpochState.current_role\",\"when\":\"accessed\",\"then\":\"type is RoleId\"},{\"given\":\"advance(timestamp=custom)\",\"when\":\"transition succeeds\",\"then\":\"TransitionRecord.timestamp == custom\"},{\"given\":\"P10 with 2/3 ACCEPT\",\"when\":\"advance(P11)\",\"then\":\"TransitionError raised\"},{\"given\":\"check_all(state)\",\"when\":\"called\",\"then\":\"runs 7+ checks\"},{\"given\":\"P10 without severity_groups\",\"when\":\"check_severity_tree\",\"then\":\"ConstraintViolation returned\"},{\"given\":\"invalid advance in workflow\",\"when\":\"TransitionError caught\",\"then\":\"failed transition recorded\"},{\"given\":\"WorkflowEnvironment sandbox\",\"when\":\"advance_phase signal\",\"then\":\"state transitions end-to-end\"},{\"given\":\"RuntimeConstraintChecker\",\"when\":\"isinstance ConstraintValidatorInterface\",\"then\":\"True\"},{\"given\":\"all changes\",\"when\":\"existing tests run\",\"then\":\"475+ pass\"}],\"tradeoffs\":[{\"decision\":\"Categorized aggregation vs single check_all\",\"rationale\":\"22 methods have 4 distinct signatures; forcing into one call requires bloated context\"},{\"decision\":\"Optional timestamp vs required\",\"rationale\":\"Backwards compatible; workflow passes workflow.now(), standalone gets datetime.now()\"},{\"decision\":\"Failed transitions in transition_history vs separate list\",\"rationale\":\"Single audit trail; separate list fragments it\"},{\"decision\":\"Add P10→P11 to _CONSENSUS_GATED\",\"rationale\":\"Uniform with P4→P5; removes undocumented enforcement split\"}]}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-r1z","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_PROPOSAL-1: aura_protocol v1 code review follow-up — error handling, constraint coverage, type safety, Temporal sandbox","updated_at":"2026-02-22T17:24:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2f9b99c74b7ff73cb0c539137b462d5bf82cf8fd693fcff8211d05a08d4e29c5","created_at":"2026-02-23T13:23:14Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  urd: aura-plugins-w07o\n  reviewer: A (Correctness)\n  round: 1\n---\nCorrectness review of all 4 slices in FOLLOWUP epic. Focus: Does implementation faithfully serve the user? Are technical decisions consistent with rationale?\n\n## Vote: ACCEPT\n0 BLOCKERs found. 3 IMPORTANT, 3 MINOR findings documented in severity groups.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-r5kx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-A-1: Correctness review of FOLLOWUP epic z8ga","updated_at":"2026-02-23T13:23:14Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1bf5b36d7c6195adbb10bcd46a5c7d3293e6d50224d3a2e76863969de123fd82","created_at":"2026-02-27T06:21:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-ckg0\n  urd: aura-plugins-7vtb\n  elicit: aura-plugins-bo5x\n  supersedes: aura-plugins-oz82\n---\n## Changes from PROPOSAL-1 (aura-plugins-oz82)\n\n### BLOCKER fixes\n\n**B1: R8 ReviewPhaseResult.vote_result type**\nResolution: Both _votes AND vote_result use dict[ReviewAxis, VoteType]. StrEnum dict keys ARE supported by Temporal SDK (confirmed in research task aura-plugins-mmaq). The str-key approach was overly cautious. URD R8 \"update accordingly\" is now honored.\n- ReviewPhaseWorkflow._votes: dict[str,str] → dict[ReviewAxis, VoteType]\n- ReviewPhaseResult.vote_result: dict[str,str] → dict[ReviewAxis, VoteType]\n- submit_vote stores ReviewAxis key and VoteType value directly\n- wait_condition checks set(self._votes.keys()) \u003e= {ReviewAxis.CORRECTNESS, ...}\n\n**B2: docs/worker.md handoff SLICE-1↔SLICE-3**\nResolution: Added explicit integration contract. SLICE-1 does NOT touch docs/worker.md. SLICE-3 creates new docs from scratch (architecture.md, aurad.md, aura-msg.md) and deletes docs/worker.md. SLICE-3's description now states: \"Migrate content from docs/worker.md, updating all bin/worker.py→bin/aurad.py and test_worker.py→test_aurad.py references.\"\n\n**B3: XDG_DATA_HOME in Nix dbPath**\nResolution: dbPath default stays \"\" (empty string). The XDG resolution happens at RUNTIME via ExecStartPre shell script, not at Nix evaluation time. Implementation:\n```nix\nService = {\n  ExecStartPre = pkgs.writeShellScript \"aurad-init\" ''\n    DB_DIR=\"''${XDG_DATA_HOME:-$HOME/.local/share}/aura/plugin\"\n    mkdir -p \"$DB_DIR\"\n  '';\n  # ExecStart uses --db-filename with the same runtime resolution\n  ExecStart = pkgs.writeShellScript \"aurad-start\" ''\n    DB_PATH=\"''${XDG_DATA_HOME:-$HOME/.local/share}/aura/plugin/temporal.db\"\n    exec ${cfg.package}/bin/temporal ${startDevArgs} --db-filename \"$DB_PATH\"\n  '';\n};\n```\nThe dbPath Nix option is REMOVED from temporal-service.nix. Instead, the service always uses the XDG path. Users who want a custom path can override ExecStart.\n\n### IMPORTANT fixes\n\n**I1: flake.nix dual ownership (Reviewer A)**\nResolution: SLICE-1 owns ALL flake.nix edits (rename packages.worker→packages.aurad, inner name=\"aurad\", add to default, add placeholder comment for SLICE-2 packages). SLICE-2 only adds packages.aura-msg and homeManagerModules.aurad-service to flake.nix. Integration contract explicitly states SLICE-1 completes flake.nix first.\n\n**I2: Systemd service name (Reviewer C)**\nResolution: Systemd unit name = \"aurad\" (not \"aura-worker\"). Nix option namespace = services.aurad. URD R2 amended: \"aura-worker\" → \"aurad\".\n\n**I3: Test count criterion (Reviewer A)**\nResolution: Acceptance criterion changed to \"All existing tests continue to pass\" (no count).\n\n**I4: parent_workflow_id justification (Reviewer A)**\nResolution: Explicit over implicit. workflow.info().parent can be None if SliceWorkflow is reused independently (e.g., in tests). Passing parent_workflow_id as input makes the contract explicit and testable.\n\n**I5: _votes assertion update (Reviewer B)**\nResolution: Added to SLICE-4 description: \"Update test assertions from wf._votes[ReviewAxis.CORRECTNESS.value] to wf._votes[ReviewAxis.CORRECTNESS]\"\n\n### MINOR notes incorporated\n- SLICE-1: explicitly update _load_worker()→_load_aurad() and inner name=\"worker\"→\"aurad\"\n- SLICE-3: doc content mapping: Architecture Overview→architecture.md, Developer Guide→aurad.md, aura-msg stub→aura-msg.md\n- SLICE-4: integration table updated: SliceWorkflow is consumer of parent_workflow_id\n- Note: original request said \"auractl\" but elicit session superseded with \"aurad\" + \"aura-msg\"\n\n## Updated Vertical Slice Decomposition\n\n### SLICE-1: Rename + Packaging (R1, R3-partial, R4)\n**Files owned (exclusive):**\n- bin/worker.py → bin/aurad.py\n- flake.nix (ALL edits: packages.worker→packages.aurad with name=\"aurad\", add to default, placeholder for SLICE-2)\n- nix/temporal-service.nix (ExecStartPre mkdir + ExecStart with XDG runtime resolution, REMOVE dbPath option)\n- tests/test_worker.py → tests/test_aurad.py (WORKER_PATH→AURAD_PATH, _load_worker→_load_aurad, all internal refs)\n- CHANGELOG.md\n\n**Does NOT touch:** docs/worker.md (owned by SLICE-3), RoleId.WORKER, protocol.yaml\n\n### SLICE-2: aurad systemd + aura-msg stub (R2, R5)\n**Files owned (exclusive):**\n- nix/aurad-service.nix (NEW — systemd user service \"aurad\", After=temporal-dev-server.service)\n- bin/aura-msg.py (NEW — stub with --help)\n- flake.nix (ADD ONLY: packages.aura-msg, homeManagerModules.aurad-service)\n- tests/test_aura_msg.py (NEW)\n\n### SLICE-3: Doc restructure (R6)\n**Files owned (exclusive):**\n- docs/worker.md → DELETE\n- docs/architecture.md (NEW — from worker.md Architecture Overview + roadmap with full R12 stub descriptions)\n- docs/aurad.md (NEW — from worker.md Developer Guide + Operator Guide, all refs updated to aurad)\n- docs/aura-msg.md (NEW — stub docs, planned commands, hook integration vision)\n\nContent mapping: worker.md Architecture Overview → architecture.md; worker.md Developer/Operator Guide → aurad.md; new content → aura-msg.md\n\n### SLICE-4: Workflow signals + ReviewAxis type fix (R7, R8)\n**Files owned (exclusive):**\n- scripts/aura_protocol/workflow.py:\n  - SliceInput: add parent_workflow_id: str field\n  - New SliceProgressSignal frozen dataclass (slice_id: str, stage: str, completed: bool)\n  - EpochWorkflow: new @workflow.signal slice_progress(SliceProgressSignal), @workflow.query slice_progress_state → dict[str, list[str]]\n  - SliceWorkflow.run(): signal parent via get_external_workflow_handle(input.parent_workflow_id)\n  - ReviewPhaseWorkflow._votes: dict[str,str] → dict[ReviewAxis, VoteType]\n  - ReviewPhaseResult.vote_result: dict[str,str] → dict[ReviewAxis, VoteType]\n  - submit_vote: store axis directly (not .value)\n  - wait_condition: check ReviewAxis set (not str set)\n- tests/test_workflow.py (update _votes assertions, add SliceProgressSignal tests)\n\n### SLICE-5: Constraint violation fixtures (R9)\n**Files owned (exclusive):**\n- tests/fixtures/protocol.yaml (add constraint_violations axis — all 23 C-*)\n- tests/fixtures/fixture_loader.py (ConstraintViolationTestCase, generate_constraint_violation_test_cases())\n- tests/test_protocol_combinatorial.py (parametrized constraint tests, 5 runnable + 18 skip)\n- tests/test_fixture_loader.py (tests for new generator)\n\n## Updated Integration Points\n\n| Integration Point | Owner | Consumers | Contract | Timing |\n|---|---|---|---|---|\n| packages.aurad in flake.nix | SLICE-1 | SLICE-2 (aurad-service.nix references package) | packages.aurad exists with name=\"aurad\" | SLICE-1 before SLICE-2 |\n| bin/aurad.py path | SLICE-1 | SLICE-2 (systemd ExecStart), SLICE-3 (docs) | bin/aurad.py exists | SLICE-1 before SLICE-2, SLICE-3 |\n| flake.nix placeholder | SLICE-1 | SLICE-2 (adds packages.aura-msg) | SLICE-1 leaves placeholder comment | SLICE-1 before SLICE-2 |\n| parent_workflow_id in SliceInput | SLICE-4 | SliceWorkflow (signals parent) | SliceInput.parent_workflow_id: str | Self-contained in SLICE-4 |\n\n## Dependency Order (unchanged)\nSLICE-1 first, then SLICE-2+3+4+5 in parallel.\n\n## Acceptance Criteria\n- Given bin/aurad.py, when --help, then shows namespace/task-queue/server-address\n- Given bin/aura-msg.py, when --help, then shows planned subcommands\n- Given temporal-service enabled, when service starts, then auto-creates XDG dir and uses SQLite at runtime\n- Given aurad service, when started, then After=temporal-dev-server.service\n- Given SliceWorkflow runs, when leaf task completes, then parent EpochWorkflow receives SliceProgressSignal\n- Given ReviewPhaseWorkflow, when votes recorded, then _votes uses ReviewAxis keys and VoteType values\n- Given constraint violation fixtures, when pytest runs, then 5 implemented tests run + 18 skip\n- All existing tests continue to pass","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-r75e","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-2: aurad rename + aura-msg stub (review fixes)","updated_at":"2026-02-27T06:21:40Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:25:33Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\n### Location\n`scripts/aura_protocol/workflow.py`, `run()` method, lines 301-310:\n\n```python\nworkflow.upsert_search_attributes(\n    [\n        SA_PHASE.value_set(current.value),\n        SA_ROLE.value_set(self._sm.state.current_role),\n        SA_STATUS.value_set(\n            'complete' if current == PhaseId.COMPLETE else 'running'\n        ),\n        SA_DOMAIN.value_set(domain_value),\n    ]\n)\n```\n\n### Description\nThe initial `upsert_search_attributes` call (lines 225-233) correctly sets all 5 attributes including `SA_EPOCH_ID`. However, the per-transition update (lines 301-310) omits `SA_EPOCH_ID`. Since `SA_EPOCH_ID` does not change across transitions, this is functionally correct — the initial value persists.\n\nHowever, the omission creates inconsistency: if Temporal ever resets search attributes (e.g., during a workflow reset or namespace migration), the per-transition upsert would not restore `SA_EPOCH_ID`.\n\n### Risk\nMINOR — SA_EPOCH_ID is set once at initialization and is immutable (the epoch_id doesn't change). Temporal's search attributes are persistent unless explicitly cleared. No functional bug for v1.\n\n### Suggestion\nFor defensive correctness, include `SA_EPOCH_ID.value_set(input.epoch_id)` in the per-transition upsert, or document explicitly that SA_EPOCH_ID is set-once and intentionally omitted from transition updates.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-r8f","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1 MINOR: SA_EPOCH_ID not updated in per-transition upsert_search_attributes call","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:16Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\nIn state_machine.py, EpochState.current_role is typed as str (line 47):\n\n    current_role: str = 'epoch'\n\nBut the entire design uses strongly-typed enums (RoleId is a str Enum). This breaks the type invariant that the proposal and types.py establish: 'Prefer using strongly-typed enums instead of stringly-typed API, return values, or arguments.'\n\nThe check_role_ownership constraint method in constraints.py must then do a runtime string comparison:\n    known_roles = {r.value for r in RoleId}\n    if state.current_role not in known_roles:\n\n...rather than getting compile-time type safety from RoleId.\n\nIf current_role were typed RoleId, the comparison would be isinstance(state.current_role, RoleId) and the constraint method body would be simpler and safer.\n\n## Impact\n- Type errors from callers passing arbitrary strings are not caught at static analysis time\n- The search attribute upsert in workflow.py passes current_role directly as a string value — any typo would silently produce a bad SA_ROLE value\n- Inconsistent with all other typed fields in the module\n\n## Fix\nChange EpochState.current_role to: current_role: RoleId = RoleId.EPOCH\nUpdate any callers or tests that set current_role to use the enum.\nThis is a one-line change with straightforward downstream cleanup.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-r8m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1-F1: EpochState.current_role typed str instead of RoleId breaks enum invariant","updated_at":"2026-02-22T17:24:16Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-28T20:27:56Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"291d3885c34c84229449e711312178bceae7eb1d5763c33422ecdef750b5f5ff","created_at":"2026-02-28T20:02:36Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Context\n\nDuring UAT for the gen_skills heading placement fix (commit 9626f36, UAT aura-plugins-li5n), the user asked whether SKILL.md frontmatter could be used instead of an H1 heading to control the TUI autocomplete description.\n\nThe research doc (llm/research/claude-code-skills-auto-loading.md) documents a `description` frontmatter field for SKILL.md:\n\n    | description | What the skill does; Claude uses this to decide when to auto-load |\n\nBut the doc does not confirm whether this field is also what the Claude Code TUI displays in the `/aura:` autocomplete menu.\n\n## Investigation Goal\n\nDetermine whether the TUI autocomplete description (the text shown after the skill name) comes from:\n- (a) The `description` field in SKILL.md YAML frontmatter, OR\n- (b) The first `#` heading in SKILL.md, OR\n- (c) The first non-empty line of SKILL.md\n\n## Why It Matters\n\nIf (a) is true, the generator could put `description: Worker Agent` inside the generated block (as part of frontmatter at the top of the file), and the H1 heading could be omitted from the hand-authored prefix. This would allow gen_skills.py to fully own the display name without the current prefix-ownership tradeoff.\n\n## Method\n\nAdd a test SKILL.md with frontmatter `description` field but NO H1 heading, and observe what the TUI displays. Compare against a file with H1 heading but no frontmatter description.\n\n## Acceptance Criteria\n\nDocument the exact source the TUI uses, and update llm/research/claude-code-skills-auto-loading.md with the finding.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ra8u","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"Research: does SKILL.md 'description' frontmatter control Claude Code TUI autocomplete display?","updated_at":"2026-02-28T20:27:56Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"665358b8f50bbcca5887478ff1933972158b66fe05a1ab8f61548ed90d9ad871","created_at":"2026-02-26T04:02:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  uat: aura-plugins-6p9j\n---\nUser selected REVISE: gen_skills.py should offer a --init mode that places the BEGIN/END markers at the top of any SKILL.md lacking them, then generates. Currently all 38 SKILL.md files raise MarkerError because no markers have been placed. Fix: add --init flag that prepends markers to unprepared files before generation.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rgos","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"BLOCKER: gen_skills.py needs --init mode to place markers","updated_at":"2026-02-26T04:02:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:56:04Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4cb2d9414e4b556abed781e60f7b43a9eecb4d86a87962f61315ec647ce6c243","created_at":"2026-02-22T12:55:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer A (Correctness) on SLICE-1 (state_machine.py, conftest.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rhm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 MINOR","updated_at":"2026-02-22T12:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-1","await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:09:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"96bf7a8fc4bfd254ff3b3a06bc9b1a740ee6add84b10cb3151aeb15b9465a0e2","created_at":"2026-02-26T08:04:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-147m\n  urd: aura-plugins-7oqz\n  proposal: aura-plugins-iw89\n---\n## Scope\nRefactor tests/test_aura_release.py for correct fixture design, add test_case_e, and update docstring.\n\n## Files Owned\n- tests/test_aura_release.py (ONLY)\n\n## Specification\n\n### Fixture design (module-scope + autouse cache-clear)\n\n```python\n@pytest.fixture(scope='module')\ndef aura_release_mod():\n    '''Import aura-release once per module. Cleans sys.modules at module teardown.'''\n    loader = SourceFileLoader('aura_release', str(BIN_PATH / 'aura-release'))\n    spec = importlib.util.spec_from_loader('aura_release', loader)\n    mod = importlib.util.module_from_spec(spec)\n    sys.modules['aura_release'] = mod  # must register before exec\n    spec.loader.exec_module(mod)\n    yield mod\n    sys.modules.pop('aura_release', None)\n\n@pytest.fixture(autouse=True)\ndef _clear_caches(aura_release_mod):\n    '''Clear lru_cache on repo_root between tests (prevents cwd leakage).'''\n    yield\n    aura_release_mod.repo_root.cache_clear()\n```\n\nIMPORTANT: _clear_caches ONLY calls cache_clear(). It MUST NOT pop sys.modules.\nIMPORTANT: All existing test methods A-D MUST be migrated to accept aura_release_mod fixture.\n\n### New test case E\n```python\ndef test_case_e_root_pyproject_without_version_key(self, tmp_path, aura_release_mod):\n    '''Root-level pyproject.toml with only [tool.*] section is excluded.'''\n    (tmp_path / 'pyproject.toml').write_text(_TOOL_ONLY_PYPROJECT)\n    results = aura_release_mod.discover_version_files(tmp_path)\n    assert results == []\n```\n\n### Updated TestDiscoverVersionFiles docstring\n```python\nclass TestDiscoverVersionFiles:\n    '''discover_version_files() driven by _SCAN_SPECS.\n\n    Covers pyproject.toml discovery only (package.json / plugin.json /\n    marketplace.json are out of scope for this class — see TestVersionFileWrites).\n    Root and subdirectory paths are exercised; version-key filter is verified\n    at both levels.\n    '''\n```\n\n## Validation Checklist\n- [ ] aura_release_mod fixture is module-scoped (scope='module')\n- [ ] aura_release_mod fixture adds to sys.modules before exec_module\n- [ ] aura_release_mod teardown pops sys.modules['aura_release']\n- [ ] _clear_caches fixture is autouse=True\n- [ ] _clear_caches ONLY calls cache_clear() — does NOT pop sys.modules\n- [ ] All test methods A-D accept aura_release_mod parameter\n- [ ] test_case_e exists and uses _TOOL_ONLY_PYPROJECT fixture\n- [ ] TestDiscoverVersionFiles docstring updated\n- [ ] All tests pass: uv run pytest tests/test_aura_release.py -v\n\n## Acceptance Criteria\nGiven aura_release_mod fixture when test module loads then module imported once should not re-import per test.\nGiven _clear_caches fixture when each test runs then repo_root.cache_clear() called should not pop sys.modules.\nGiven root pyproject.toml with only [tool.*] when discover_version_files() then empty list returned should not include root-level file without [project] key.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rien","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1: Test quality — fixture refactor + case E + docstring","updated_at":"2026-02-26T08:09:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:37Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0ca3b43fa3a40150723b2b247cbb9c9d7818f72a869e371fbdaf48aa7c5c9a95","created_at":"2026-02-23T04:25:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/Template Design).\n\nThe skill_header.j2 template (lines 34-41) renders constraints in this format:\n  **[C-audit-never-delete]** Given any task or label — When modifying — Then add labels and comments only — Should not delete or close tasks prematurely, remove labels\n\nThis is a run-on sentence spanning one line per constraint. Multiplied by 23 constraints (or even 6-10 per role after filtering), this produces a dense wall of text that is difficult for an agent to parse.\n\nThe existing SKILL.md pattern (before generated headers existed) uses structured sections with headers and bullet points. A table or bulleted list would be more scannable.\n\nSuggested improvement:\n  **[C-audit-never-delete]**\n  - Given: any task or label\n  - When: modifying\n  - Then: add labels and comments only\n  - Should not: delete or close tasks prematurely, remove labels\n\nThis is a minor style/readability concern rather than a correctness issue.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rizf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1-F11: skill_header.j2 renders constraints as inline run-on text — poor readability for agent consumption","updated_at":"2026-02-23T12:46:37Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:41Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4b36c314de178ce086790a42b7aa8abfc9efa00337712dcb0e8d8dd86ad96028","created_at":"2026-02-26T03:31:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  reviewer: cartographer-c\n  round: 1\n---\nIMPORTANT findings from Cartographer C (Elegance) on SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rnc4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-26T03:31:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:48:18Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a9f4d9698044edff711946800e8b91a42686d3d3bbf4f03fc68d6a6fd4297bce","created_at":"2026-02-25T22:48:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  review_round: 3\n---\nIMPORTANT findings from Reviewer A (Correctness) on SLICE-1, Round 3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rodo","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-3 IMPORTANT","updated_at":"2026-02-25T22:48:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dd85b2cfa82e304988ee3e2a7093b7ff8c0b3cbb36338de58c52d66b8caf20bb","created_at":"2026-02-25T22:37:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No IMPORTANT findings for SLICE-2 (Schema regen). Elegance axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rolm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-25T22:37:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8163351dc52c71ffb887b29c085ba58991a335f774cefbb27f375d1a7c28c4d6","created_at":"2026-02-26T20:50:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-q00q\n  followup_urd: aura-plugins-gox3\n---\n## Scope\n1. __init__.py import ordering: insert PhaseInput, PhaseResult, SerializablePhaseSpec, SerializableTransition in alphabetical position\n2. __init__.py docstring: add audit_activities.py to module listing\n3. __init__.py __all__: remove '# Cross-workflow boundary types' sub-section comment\n4. flake.nix: add packages.worker (writeShellApplication wrapping bin/worker.py with Python + temporalio deps)\n\n## Files Owned\n- scripts/aura_protocol/__init__.py\n- flake.nix\n\n## Findings addressed\n- aura-plugins-dtjt (IMPORTANT)\n- aura-plugins-ntoe (MINOR)\n- aura-plugins-wiow (MINOR)\n- aura-plugins-1w3u (MINOR)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rpc4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-1: __init__.py cleanups + Nix-package worker.py","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"58b5f263d3aec1d6083a069cb3db3ac485761a304aca9259ee8ff67adde706e3","created_at":"2026-02-26T20:50:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Create docs/worker.md with combined dev+ops guide. Read bin/worker.py, nix/temporal-service.nix, scripts/aura_protocol/workflow.py, and audit_activities.py for content.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rskf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-2-L1: Write docs/worker.md","updated_at":"2026-02-26T21:03:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9db87178f8a11b2d88b77ff13e8b118c5c66007e4dd858b429146e7b38b3d4e5","created_at":"2026-02-26T15:33:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Define CLI arg structure for bin/worker.py (namespace, task-queue). Define Nix module option types for temporal-service.nix.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rtb8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"L1 complete: audit_activities.py stub with InMemoryAuditTrail, _AUDIT_TRAIL singleton, init_audit_trail()","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-4-L1: Types — worker CLI args + Nix module options","updated_at":"2026-02-26T18:34:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"28986e6d2cf1c46dabef120bb52b10cdf595916e95cf38ef860fc8bbd5666eb1","created_at":"2026-02-26T03:31:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-kg25\n  reviewer: cartographer-b\n  round: 1\n---\n**File:** tests/test_context_injection.py, class TestGetRoleContextEpoch (line 619)\n\n**Issue:** TestGetRoleContextEpoch has positive inclusion tests for only 2 constraints: C-review-consensus and C-handoff-skill-invocation. The 4 Ride the Wave constraints added to EPOCH in post-slice fixes (C-supervisor-cartographers, C-integration-points, C-slice-review-before-close, C-max-review-cycles) have no positive inclusion tests.\n\nA regression removing any of these 4 constraints from EPOCH's _ROLE_CONSTRAINTS would NOT be caught by test_context_injection.py. The parametrized TestConstraintContextFields tests only check that WHATEVER constraints ARE present have non-empty id/when/then — they don't assert specific constraint membership.\n\n**Mitigating factor:** test_gen_schema.py test_known_role_specific_constraints (SLICE-2) does verify these constraints have 'epoch' in their role-ref, providing cross-slice regression protection. However, direct test_context_injection.py coverage would be more robust.\n\n**Concrete fix:** Add 4 tests to TestGetRoleContextEpoch:\n```python\ndef test_epoch_includes_c_supervisor_cartographers(self) -\u003e None:\n    ctx = get_role_context(RoleId.EPOCH)\n    ids = {c.id for c in ctx.constraints}\n    assert 'C-supervisor-cartographers' in ids\n\ndef test_epoch_includes_c_integration_points(self) -\u003e None:\n    ctx = get_role_context(RoleId.EPOCH)\n    ids = {c.id for c in ctx.constraints}\n    assert 'C-integration-points' in ids\n\ndef test_epoch_includes_c_slice_review_before_close(self) -\u003e None:\n    ctx = get_role_context(RoleId.EPOCH)\n    ids = {c.id for c in ctx.constraints}\n    assert 'C-slice-review-before-close' in ids\n\ndef test_epoch_includes_c_max_review_cycles(self) -\u003e None:\n    ctx = get_role_context(RoleId.EPOCH)\n    ids = {c.id for c in ctx.constraints}\n    assert 'C-max-review-cycles' in ids\n```","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rthn","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"IMPORTANT: EPOCH Ride the Wave constraints lack positive inclusion tests in test_context_injection.py","updated_at":"2026-02-26T09:38:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:49:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"12e4c2a3f5821b7fdbd447042f750e00b00cbfa219ddd96c49071833957b3d27","created_at":"2026-02-26T08:39:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  impl_plan: aura-plugins-uvfm\n  findings: aura-plugins-prbl, aura-plugins-jwoo\n---\n## Scope\nTwo changes to scripts/aura_protocol/gen_schema.py:\n\nC1: Rename module-level dicts:\n- _ROLE_CONSTRAINTS  →  _CONSTRAINT_TO_ROLE_REF\n- _PHASE_CONSTRAINTS →  _CONSTRAINT_TO_PHASE_REF\n- Update all usages within gen_schema.py\n- Update test_gen_schema.py imports/references to use new names\n\nC2: Move any lazy imports inside function bodies to module-level.\n- Verify: python -c 'import aura_protocol.gen_schema' succeeds (no circular imports)\n\n## Files\n- scripts/aura_protocol/gen_schema.py\n- tests/test_gen_schema.py (import updates)\n\n## Acceptance\nAC-C1-1: no references to old names anywhere\nAC-C2-1: no lazy imports; module-level import verified","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rtky","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-L1: C1+C2 — rename constraint dicts + move import in gen_schema.py","updated_at":"2026-02-26T08:49:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:43:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"72c2d2453805a4da13e1ea1bdc171c4df574102737b24374ebb73b5a574993cf","created_at":"2026-02-27T06:25:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Create aurad systemd service, aura-msg stub, add to flake.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rtxo","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-L1: nix/aurad-service.nix + bin/aura-msg.py + flake.nix additions","updated_at":"2026-02-27T06:43:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"019fa2dfb28e9aee2ead8a0ed11cbebc2140d8c40f3f6b63cd824e79b0ce40a1","created_at":"2026-02-26T16:00:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice-1: aura-plugins-l6n8\n  slice-2: aura-plugins-vhtx\n  slice-3: aura-plugins-sp6y\n  slice-4: aura-plugins-o8va\n  slice-5: aura-plugins-w5hi\n  urd: aura-plugins-2ojv\n---\nVOTE: REVISE - 4 IMPORTANT findings across slices. No BLOCKERs. 3 MINOR findings. See severity tree.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ruvr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"ALL-SLICES-REVIEW-C-1: Elegance review across all 5 slices","updated_at":"2026-02-26T16:00:16Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"82aedf1ef560dc450f555f7ea6e6ce33dc61844be3b27f976f71d7e9e9f1e055","created_at":"2026-02-26T23:49:00Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: scripts/aura_protocol/state_machine.py, lines 359-364\n\n  def record_vote(self, axis: ReviewAxis, vote: VoteType) -\u003e None:\n      if axis not in _REVIEW_AXES:        # validates axis is a ReviewAxis member\n          raise ValueError(...)\n      self._state.review_votes[ReviewAxis(axis)] = vote   # redundant cast\n\nAfter the 'axis not in _REVIEW_AXES' check passes, axis is confirmed to be a\nmember of _REVIEW_AXES (frozenset[ReviewAxis]). Calling ReviewAxis(axis) is\nthen a no-op (since axis is already a ReviewAxis, ReviewAxis(axis) == axis).\n\nThe cast was added to canonicalize raw string inputs, but the type signature\nis 'axis: ReviewAxis' — raw strings are not the typed contract. The check\n'axis not in _REVIEW_AXES' does handle string inputs at runtime (StrEnum\nmembership check works for valid strings), but after that guard passes,\nReviewAxis(axis) is pointless.\n\nThis is a minor incoherence introduced by aura-plugins-txgq when updating\nthe type from dict[str, VoteType] to dict[ReviewAxis, VoteType].\n\nFix:\n  self._state.review_votes[axis] = vote   # axis is already ReviewAxis, no cast needed\n\nOr if raw-string inputs must be supported at runtime, change the signature to\nrecord_vote(self, axis: ReviewAxis | str, ...) and document it.\n\nSlice: aura-plugins-txgq","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rwg8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: state_machine.py record_vote does redundant ReviewAxis(axis) canonicalization after already validating axis is in _REVIEW_AXES","updated_at":"2026-02-26T23:49:00Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"784cc1ab4fdde572361a0c2d343e2b64c6bf97c3ff2b900eaf2bd50b8fa8a75e","created_at":"2026-02-25T22:37:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings for SLICE-3 (PROCESS.md restructure). Elegance axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-rxy8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 BLOCKER","updated_at":"2026-02-25T22:37:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T11:23:58Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:27:37Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-2tj\n  original_urd: aura-plugins-umi\n  original_request: aura-plugins-bj1\n  elicit: aura-plugins-j02\n  code_review_round: aura-plugins-e0j\n---\n\n## Requirements\n\n### FR1: Error Handling — Narrow Exception Scope\nReplace bare `except Exception` in `EpochWorkflow.run()` with `except TransitionError`. Failed transitions must be recorded in the audit trail (transition_history) with error context. Mutation test exception specificity (SLICE-1 bare except) must also be addressed.\n- Findings: aura-plugins-3xe, aura-plugins-6wg, aura-plugins-i2g, aura-plugins-295\n\n### FR2: Constraint Completeness — Full 22 C-* Coverage\nExpand `RuntimeConstraintChecker.check_all()` to aggregate all 22 C-* constraint checks defined in schema.xml. Each constraint must have a dedicated method. `check_severity_tree()` must enforce the POSITIVE case of C-severity-eager (p10 MUST have 3 severity groups eagerly). EpochState needs a `severity_groups` field to enable runtime enforcement.\n- Findings: aura-plugins-yno, aura-plugins-jwb, aura-plugins-947, aura-plugins-bnr\n\n### FR3: Type Safety Hardening — Strongly-Typed Enums Throughout\nChange `EpochState.current_role` from `str` to `RoleId`. Document TYPE_CHECKING Protocol limitations (isinstance checks only method name presence, not full signature) in interfaces.py module docstring. Add test verifying `RuntimeConstraintChecker` satisfies `ConstraintValidatorInterface` Protocol.\n- Findings: aura-plugins-tcn, aura-plugins-don, aura-plugins-ngd, aura-plugins-5zf\n\n### FR4: Temporal Integration Testing — Sandbox End-to-End\nAdd `WorkflowEnvironment.start_time_skipping()` integration tests for EpochWorkflow. Decouple timestamp from `advance()` by passing timestamp as explicit parameter. Test actual Temporal signal delivery (advance_phase, submit_vote) in sandbox.\n- Findings: aura-plugins-68o, aura-plugins-gdx, aura-plugins-o83\n\n### FR5: MINOR Bundled Cleanup\nAddress all MINOR findings alongside their IMPORTANT siblings:\n- Duplicated `_advance_to` helper → shared conftest.py fixture (aura-plugins-sk6, aura-plugins-0yd)\n- `DataPart.data` and `ToolCall` dict fields → `dict[str, Any]` (aura-plugins-utj, aura-plugins-eqy)\n- `FilePart.file_uri` → document A2A migration path (aura-plugins-7d2, aura-plugins-hls)\n- `SA_EPOCH_ID` per-transition upsert → document or make defensive (aura-plugins-xui, aura-plugins-r8f)\n- `check_blocker_gate` constraint_id naming (aura-plugins-dvi, aura-plugins-qqf)\n- `_SAME_ACTOR` frozenset → module-level constant (aura-plugins-pxo)\n- `AuditEvent.payload` str → typed pattern (aura-plugins-h7x)\n- Test `__import__` inline → top-level import (aura-plugins-v1b)\n- Test hardcoded constraint subset → full set verification (aura-plugins-8jy)\n- `TransitionRecord` post-hoc mutation → pass timestamp into advance (aura-plugins-x36, aura-plugins-3m4)\n- `EpochState.current_role` str→RoleId (aura-plugins-1ic, aura-plugins-4hu)\n- `ToolCall` hashability test documentation (aura-plugins-4u1)\n\n## Constraints\n- C-backwards: Must not break existing 475 tests\n- C-no-new-deps: No new pip packages — only stdlib + existing deps (temporalio, pytest, pytest-asyncio)\n- C-python-only: All code in aura-plugins must be Python (R7 from original URD)\n\n## Priorities (User-Stated)\n1. All 4 IMPORTANT themes equally prioritized\n2. MINOR findings bundled with their IMPORTANT siblings (same-slice, same-pass)\n3. Full 22 C-* constraint coverage (not a subset)\n\n## MVP Goals\n- check_all() covers all 22 C-* constraints with dedicated methods\n- EpochWorkflow.run() catches only TransitionError, records failures\n- EpochState.current_role typed as RoleId\n- WorkflowEnvironment sandbox tests for signal delivery\n- All MINOR cleanup addressed alongside IMPORTANT siblings\n- 475+ tests pass (existing + new)\n\n## End-Vision Alignment\nThis follow-up closes the gap between v1 MVP and the URD (aura-plugins-umi) requirements for:\n- Forensic auditability (FR1: failed transitions recorded)\n- Complete constraint enforcement surface (FR2: all 22 C-*)\n- Strongly-typed protocol invariants (FR3: no str leaks)\n- Temporal workflow confidence (FR4: sandbox tests prove signal delivery)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-s6i","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_URD: Requirements for aura_protocol v1 follow-up","updated_at":"2026-02-22T11:23:58Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-1","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"322e3f8d77135be768302e0703e185382e2c904dbe12d44b761e3bff2f78b2df","created_at":"2026-02-27T06:24:59Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-vjsk\n  urd: aura-plugins-7vtb\n---\n## Specification\nMechanical rename of worker→aurad across all binary/CLI references. Update Nix packaging and SQLite XDG resolution.\n\n## Files Owned (exclusive)\n- bin/worker.py → bin/aurad.py\n- flake.nix (ALL edits: packages.worker→packages.aurad with name=\"aurad\", add to default, placeholder for SLICE-2)\n- nix/temporal-service.nix (ExecStartPre mkdir + ExecStart XDG runtime resolution for dbPath=\"\" case)\n- tests/test_worker.py → tests/test_aurad.py (WORKER_PATH→AURAD_PATH, _load_worker→_load_aurad)\n- CHANGELOG.md\n\n## DO NOT rename\n- RoleId.WORKER in types.py\n- protocol.yaml owner_roles \"worker\"\n- Any protocol role references\n\n## Acceptance Criteria\nGiven bin/aurad.py when --help then shows namespace/task-queue/server-address\nGiven temporal-service when dbPath=\"\" then resolves XDG path at runtime\nGiven temporal-service when dbPath set then uses provided path directly\nGiven packages.aurad when nix build then produces aurad binary","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-s7dj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-1: Rename worker→aurad + packaging + SQLite XDG","updated_at":"2026-02-27T06:38:17Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ff90177e22b239c687b5e24876edaa119c2e4891ebec9da7d3b48a9ab70cadd4","created_at":"2026-02-23T18:09:05Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-cuuw\n  elicit: aura-plugins-tt57\n---\n## Requirements\n\n1. Remove dead code from bin/aura-release:\n   - Delete _discover_repo_root() function (lines 33-45)\n   - Delete REPO_ROOT module-level constant (line 48)\n   - Delete VERSION_FILES dict (lines 50-54)\n   These are no longer referenced anywhere in the file; keeping them runs a\n   spurious git subprocess at every import.\n\n2. Add a regression test for the subdirectory case:\n   - Create a fake git repo with no pyproject.toml at root\n   - Place pyproject.toml in a subdirectory (mirroring agentfilter/opencode-security-filter/)\n   - Assert that discover_version_files() finds it via the one-level-deep scan\n   - Assert that aura-release does NOT crash (FileNotFoundError)\n\n## Priorities\n\n1. Dead code removal (low risk, immediate cleanup)\n2. Regression test (prevents recurrence)\n\n## Design Choices\n\n- No-files-found behaviour: exit with code 2 and helpful message (already implemented, no change needed)\n- Core path-resolution fix: already present in develop branch via discover_version_files(); no changes needed to the fix logic itself\n- Test framework: match whatever test infrastructure already exists in the repo (or introduce minimal pytest if none)\n\n## MVP Goals\n\n- Remove _discover_repo_root, REPO_ROOT, VERSION_FILES from bin/aura-release\n- Add one pytest test covering the subdirectory-pyproject.toml case\n\n## End-Vision Goals\n\n- aura-release patch --sync works correctly from any subdirectory within a git repo, even if pyproject.toml is not at the repo root\n- No regression: subdirectory case stays covered by automated test","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-s7l0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"URD: aura-release reads pyproject.toml from wrong directory","updated_at":"2026-02-23T18:09:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:37:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ce8d8c0d7a9f3ca255647601dbde733d6ff6c4543c5cac2ae09ba06b386719f1","created_at":"2026-02-23T03:21:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  impl_plan: aura-plugins-94yc\n---\n## Scope\nCreate scripts/aura_protocol/gen_types.py:\n- generate_types_source(spec: SchemaSpec) → str: generates draft Python source code\n- Output contains all new dataclass definitions, enum definitions, canonical dict entries\n- One-time bootstrap tool; developer reviews draft and merges into types.py (UAT-1)\n\n## Files Owned\n- scripts/aura_protocol/gen_types.py (create)\n\n## Acceptance Criteria\nGiven SchemaSpec from parse_schema() when gen_types.py runs then produces valid Python source containing all new definitions should never produce code that fails to parse as Python","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-scdr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S1-L4: Bootstrap codegen — gen_types.py generates draft Python source","updated_at":"2026-02-23T03:37:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"56c4396ee312031789c01c1d86d704dd9de2072e369796bffcd23ed4979ea567","created_at":"2026-02-23T04:26:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) code review of all 4 slices for aura-plugins-94yc.\n\n## Verdicts\n- SLICE-1 (types.py, schema_parser.py, gen_types.py, __init__.py): REVISE — 1 BLOCKER\n- SLICE-2 (gen_schema.py): ACCEPT — 0 BLOCKERs, 2 IMPORTANT, 2 MINOR\n- SLICE-3 (gen_skills.py, skill_header.j2): ACCEPT — 0 BLOCKERs, 2 IMPORTANT, 1 MINOR\n- SLICE-4 (context_injection.py): ACCEPT — 0 BLOCKERs, 1 IMPORTANT, 1 MINOR\n\n## Finding Summary\n| Severity | Count | IDs |\n|----------|-------|-----|\n| BLOCKER  | 1 | aura-plugins-h369 |\n| IMPORTANT | 6 | aura-plugins-10e7, aura-plugins-i6wh, aura-plugins-mk16, aura-plugins-h4wl, aura-plugins-9oxz, aura-plugins-1nxp, aura-plugins-myk7 |\n| MINOR | 5 | aura-plugins-bjal, aura-plugins-l7wf, aura-plugins-hv4d, aura-plugins-rizf, aura-plugins-ua0i |\n\n## Top Elegance Concerns (in priority order)\n\n1. BLOCKER: SchemaSpec.constraints uses raw tuple[str,str,str,str] instead of ConstraintSpec — the only entity in SchemaSpec not using its own typed dataclass.\n\n2. IMPORTANT: _ROLE_CONSTRAINTS and _PHASE_CONSTRAINTS are defined independently in both gen_schema.py and context_injection.py — single most significant DRY violation across the implementation. One module must import from the other.\n\n3. IMPORTANT: types.py module docstring still says 'Source of truth: skills/protocol/schema.xml' — directly contradicts v2's SoT inversion.\n\n4. IMPORTANT: RoleSpec.owned_phases uses frozenset[str] instead of frozenset[PhaseId] — ripples into gen_skills.py O(n*m) lookup and prevents type-safe phase membership checks.\n\n5. IMPORTANT: gen_skills.py _constraints_for_role() returns all 23 constraints per role while context_injection.py already implements correct per-role filtering — disconnect between build-time and runtime context.\n\n6. MINOR: gen_schema.py _serialize_tree() deferred import of io; generate_schema() phantom str|None return type; skill_header.j2 run-on constraint format; _PHASE_CONSTRAINTS missing explicit COMPLETE entry.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-sfr0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-4-REVIEW-C-1: Elegance review of schema-driven protocol engine v2 (all 4 slices)","updated_at":"2026-02-23T04:26:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:22:57Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-3 BLOCKER severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-sgf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 BLOCKER","updated_at":"2026-02-22T02:22:57Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:53:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"51646e94c61c5210a7668618ea858a4b5655f0202f975375cb5aee297338cf28","created_at":"2026-02-23T03:22:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  impl_plan: aura-plugins-94yc\n---\n## Scope\nCreate tests/test_gen_schema.py:\n- Round-trip test: types.py → gen_schema → parse_schema → field-by-field match (AC3)\n- Validation test: output passes validate_schema.py with 0 errors (AC2)\n- Diff output test: verify unified diff printed (AC2a)\n- role-ref/phase-ref test: verify attributes present on constraint elements (AC2b)\n\n## Files Owned\n- tests/test_gen_schema.py (create)\n\n## Acceptance Criteria\nGiven round-trip when fields compared then every entity matches field-by-field should never use count-only assertions","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-sh5d","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S2-L2: Tests — round-trip field-by-field, validation, diff output, role-ref/phase-ref","updated_at":"2026-02-23T03:53:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:53:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"631328b069e234e3146fe3ebd3219b635aea5ef720088beabebafab7bc81b6af","created_at":"2026-02-23T03:23:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Create tests/test_context_injection.py with role context correctness (AC5), role context absence (AC5a), phase context correctness (AC6), phase context absence (AC6a), ConstraintContext field verification. References: slice=aura-plugins-kg25, impl_plan=aura-plugins-94yc","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-shqq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S4-L2: Tests — role/phase context correctness, absence, ConstraintContext fields","updated_at":"2026-02-23T03:53:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:40Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d7c9b6ccd9c6660444198cd60e9aaea5d961b44a5b2ba810c2111f422619d143","created_at":"2026-02-26T08:38:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-sj42","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-B-1 MINOR: Test Quality","updated_at":"2026-02-26T08:38:40Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3cf666c4968adcb23f0b2b83fb13d835acf32948a219e8923d1d2f961213f417","created_at":"2026-02-23T04:26:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer B (Test Quality) on SLICE-2 (Schema.xml Generator with Diff + role-ref/phase-ref). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-sjna","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:10Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:23:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-5 (workflow.py) minor-level findings.\n\n## Finding: _advance_to helper duplicated from test_state_machine.py — should be shared conftest.py fixture (MINOR)\n\nSame finding as noted in SLICE-2. The _advance_to helper with the _FORWARD list and gate satisfaction logic is copy-pasted identically in test_workflow.py (lines 74-109) and test_state_machine.py (lines 41-85). A conftest.py fixture or shared utility module would eliminate the drift risk.\n\n## Finding: TestSearchAttributeKeys does not verify SA_EPOCH_ID.value_type is text (distinct from keyword) — the test only checks name and that value_set() works (MINOR)\n\nSA_EPOCH_ID is created with SearchAttributeKey.for_text() (text, full-text indexed) while SA_PHASE, SA_ROLE, SA_STATUS, SA_DOMAIN are created with for_keyword() (exact match). The test verifies names and that value_set() returns something, but does not distinguish between text and keyword key types. A future change from for_text to for_keyword would not be caught. This is minor because the production code is correct and the test comment documents the intent.\n\n## Finding: TestWorkflowStructure uses __temporal_workflow_run attribute check that is an implementation detail of the Temporal Python SDK — could break on SDK version upgrade (MINOR)\n\nThe tests check hasattr(method, '__temporal_workflow_run'), '__temporal_signal_definition', '__temporal_query_definition'. These are internal SDK attributes and not part of the public API. They could change in a minor SDK update. This is accepted in practice for Temporal introspection tests, but worth noting.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-sk6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-B-1 MINOR","updated_at":"2026-02-22T17:24:10Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T11:25:23Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"fec2b6fadf5b38c7b5922aef7cb4a6693efb54d2127e0810eea70bc4a585a704","created_at":"2026-02-23T08:59:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-w115\n  urd: aura-plugins-w07o\n  impl_plan: aura-plugins-94yc\n  ratified_proposal: aura-plugins-mg6h\n  blocker_fix: aura-plugins-51zy\n---\n## Components Demonstrated\n\n[Q\u0026A to be filled in below as UAT proceeds]\n\n## UAT Revision Checklist (from Plan UAT aura-plugins-tvkz)\n- [ ] 1. Bootstrap: gen_types.py generates draft for developer review + merge\n- [ ] 2. Diff output: gen_schema.py + gen_skills.py show diffs\n- [ ] 3. Constraint→role: role-ref/phase-ref attributes in generated schema.xml\n- [ ] 4. ConstraintContext: typed frozen dataclass with when+then fields\n- [ ] 5. MarkerError: gen_skills.py raises on missing markers (not silent prepend)\n- [ ] 6. ProcedureStep POC: supervisor (6 steps) + worker (3 steps) populated\n\n## Final Decision\n[To be filled in after all components reviewed]","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-sm9c","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT: Implementation acceptance for schema-driven protocol engine v2","updated_at":"2026-02-23T11:25:23Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b9a90a35f90305c77c7c8f192a7d7c1e4959b300205a72eae77721658fcac6d2","created_at":"2026-02-23T04:28:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In context_injection.py, the EPOCH entry in _ROLE_CONSTRAINTS (line 141-148) explicitly adds 'C-dep-direction' to its frozenset union: frozenset(_GENERAL_CONSTRAINTS | {'C-review-consensus', 'C-handoff-skill-invocation', 'C-dep-direction'}). However, C-dep-direction is already in _GENERAL_CONSTRAINTS (line 103). The frozenset union correctly deduplicates this, so there is no functional impact, but the explicit inclusion is misleading and creates an inconsistency with the authoring comment at line 129 which says 'C-dep-direction → ALL (see _GENERAL_CONSTRAINTS)'. Minor style/clarity issue.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-snif","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4: EPOCH _ROLE_CONSTRAINTS redundantly includes C-dep-direction (already in _GENERAL_CONSTRAINTS)","updated_at":"2026-02-23T12:46:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:43:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"67eeeb9eda1aafc988993f0aa7f041005d5114ba638d099e1b4ec1870c8df684","created_at":"2026-02-27T06:25:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Tests for aura-msg stub: --help output, parse_args defaults, filesystem existence.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-soqj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-L2: tests/test_aura_msg.py","updated_at":"2026-02-27T06:43:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-3","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0c90c11feed905891c60230944aa64d773a7920dd01ff81e0f7e322ed02f932c","created_at":"2026-02-26T15:32:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-9qpq\n  urd: aura-plugins-2ojv\n  proposal: aura-plugins-6zbz\n---\n## Specification\nModule-level AuditTrail singleton per PROPOSAL-11 UAT-2 and URD R4:\n\n1. New file: scripts/aura_protocol/audit_activities.py\n   - _AUDIT_TRAIL: AuditTrail | None = None (module-level singleton)\n   - init_audit_trail(trail: AuditTrail) → None (injection point)\n   - @activity.defn async def record_audit_event(event: AuditEvent) → None\n   - @activity.defn async def query_audit_events(epoch_id: str, phase: PhaseId | None = None) → list[AuditEvent]\n   - ApplicationError('AuditTrail not initialized', non_retryable=True) if not initialized\n\n2. InMemoryAuditTrail — concrete implementation of AuditTrail Protocol\n   - In-memory list storage for testing\n   - record_event appends to list\n   - query_events filters by epoch_id and optional phase/role\n\n3. AuditTrail.query_events signature update in interfaces.py:\n   - Add epoch_id: str | None parameter (required in activity, optional in Protocol)\n\n4. Event emission: PhaseTransitionEvent, ConstraintCheckEvent, ReviewVoteEvent, AuditEvent\n   - Emit from audit activities (not from workflow context)\n\n## Files Owned\n- scripts/aura_protocol/audit_activities.py (NEW)\n- scripts/aura_protocol/interfaces.py (AuditTrail.query_events epoch_id param — coordinate with SLICE-2)\n\n## Integration Points\n- IP-1 CONSUMER: Uses PhaseInput from SLICE-1\n- IP-3 OWNER: Activities consumed by SLICE-4 (worker registration) and SLICE-5 (tests)\n\n## Validation Checklist\n- [ ] audit_activities.py module created\n- [ ] _AUDIT_TRAIL singleton + init_audit_trail() injection\n- [ ] record_audit_event @activity.defn\n- [ ] query_audit_events @activity.defn with epoch_id param\n- [ ] InMemoryAuditTrail concrete implementation\n- [ ] AuditTrail.query_events updated in interfaces.py\n- [ ] ApplicationError for uninitialized trail\n- [ ] Tests written and passing\n- [ ] Existing 945 tests unbroken","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-sp6y","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-3: AuditTrail singleton (init_audit_trail + query_audit_events + InMemoryAuditTrail)","updated_at":"2026-02-26T18:34:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:43Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5ff39cbee8243f24ae6e19b6fb83cb94dd8e6755469ad4345ddf756006ba381c","created_at":"2026-02-25T22:37:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-a1bn\n  review_round: 1\n---\nMINOR findings from Reviewer A (Correctness) on SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-sr0n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 MINOR","updated_at":"2026-02-25T22:37:43Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dfdae2cf2ac276e1fbe376953480113af371e137a2b54413e24b57122ce3de63","created_at":"2026-02-26T02:41:04Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - Elegance axis review.\n\n1. MINIMAL SCOPE: The proposal is purely subtractive on Change 1 (delete lines 33-57) and additive only in the test file. No unrelated refactoring, no new abstractions, no API changes. Dead code block (lines 33-57) is a coherent unit: _discover_repo_root, REPO_ROOT, VERSION_FILES, and CHANGELOG_PATH all form one side-effectful module-level blob. Deleting them together is the right granularity.\n\n2. IMPORTLIB COMPLEXITY: The use of importlib.util.spec_from_file_location is the correct minimal solution to the hyphenated-filename constraint. The subprocess alternative (python bin/aura-release --check in a temp dir) would require a fake git repo setup, CLI flag parsing, and process exit-code assertions instead of direct function-level assertions. The unit test approach is actually more precise for the specific function being guarded. The awkwardness is real but bounded: one boilerplate import block, well-understood pattern. Not over-engineered.\n\n3. NOTHING OVER-ENGINEERED: Two test cases map exactly to the two world states (root pyproject.toml, subdirectory pyproject.toml). Tradeoffs table is concise and honest. BDD criteria match test cases 1:1. Validation checklist is actionable and verifiable. No extraneous test infrastructure proposed.\n\n4. URD MVP ALIGNMENT: URD MVP is dead code removal + one subdirectory regression test. Proposal matches exactly. The inclusion of CHANGELOG_PATH in the deletion is not scope creep — it is transitive dead code from the same REPO_ROOT dependency, and removing it is necessary to satisfy the validation checklist item 'no dangling references to REPO_ROOT'. Correct call.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ss87","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-C-1: aura-release dead code + test","updated_at":"2026-02-26T02:41:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cf49d8b0ef08aa57b36205c3950d4e4eded79a3ee911772bb8bee88102ae9d16","created_at":"2026-02-23T04:24:56Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In scripts/aura_protocol/__init__.py line 78, the docstring says 'RuntimeConstraintChecker — checks all 22 C-* constraints against epoch state'. CONSTRAINT_SPECS in types.py has 23 constraints (C-actionable-errors was added). This is stale documentation that will mislead maintainers counting constraints. Minor because it is documentation-only and all tests pass.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-su19","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1: __init__.py docstring says '22 C-* constraints' but CONSTRAINT_SPECS has 23","updated_at":"2026-02-23T12:46:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e39b596fa255aebbb7132874ac9031405145d4295bd24e6ca3d590969a061770","created_at":"2026-02-26T08:55:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i08u\n  review_round: 1\n---\nBLOCKER findings from Reviewer C (Elegance) on FOLLOWUP-SLICE-1. No findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-t303","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-1-REVIEW-C-1 BLOCKER","updated_at":"2026-02-26T08:55:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:22:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9fdf01d5ef7d737837283e4035911d0198b293750ce7d6492ca66153086f9297","created_at":"2026-02-22T17:22:25Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-2tj\n  urd: aura-plugins-s6i\n  impl_plan: aura-plugins-cts\n  proposal: aura-plugins-r1z\n---\n## Components Demonstrated\n\n### Component 1: Type Safety \u0026 State Machine (FR3 + SLICE-1)\n**Demonstrated:** current_role is RoleId enum, severity_groups auto-populated at P10 with SeverityLevel keys, advance() timestamp decoupling.\n**Question:** Eager vs lazy severity group creation?\n**Options:** Eager (current), Lazy creation, Eager + frozen keys\n**User response:** Eager + frozen keys\n**Question:** Feedback on type safety changes?\n**User response:** No additional feedback\n**Decision:** ACCEPT\n\n### Component 2: Constraint Completeness (FR2 + SLICE-2)\n**Demonstrated:** 4 categorized group methods (check_state, check_transition, check_naming, check_structural), deprecated aliases, check_state at P10 detects 3 violations, validate() delegates to check_state(), Protocol self-check passes.\n**Question:** 4 groups vs check_all facade vs 2 groups?\n**Options:** 4 groups (current), Add check_all facade, Flatten to 2 groups\n**User response:** 4 groups (current)\n**Question:** Feedback on constraint completeness?\n**User response:** No additional feedback\n**Decision:** ACCEPT\n\n### Component 3: Failed Transition Audit Trail (FR1 + SLICE-4)\n**Demonstrated:** Failed transitions recorded as TransitionRecord with condition_met=\"FAILED: {error}\", total vs successful transition counts.\n**Question:** String prefix vs boolean field vs enum status?\n**Options:** String prefix (current), Boolean field, Enum field\n**User response:** Boolean field\n**Question:** Feedback on audit trail?\n**User response:** No additional feedback\n**Decision:** ACCEPT\n\n### Component 4: Temporal Sandbox \u0026 Test Quality (FR4 + SLICE-4)\n**Demonstrated:** 4 sandbox tests (skip-safe), lazy probe (0.12s collection), 3 non-sandbox unit tests, shared conftest fixtures.\n**Question:** Skip-safe vs env-var controlled vs always-skip?\n**Options:** Skip-safe (current), Fail if Temporal expected, Always skip in CI\n**User response:** Fail if Temporal expected\n**Question:** Feedback on test quality?\n**User response:** No additional feedback\n**Decision:** ACCEPT\n\n## Final Decision\n**ACCEPT** with 3 refinements (all addressed before landing):\n1. Frozen severity keys — documented invariant + test for exactly 3 keys\n2. Boolean success field on TransitionRecord (replaces brittle string prefix checks)\n3. TEMPORAL_REQUIRED=1 env-var for CI fail-instead-of-skip\n\n## User Verbatim Feedback\n\"In Component 3: Failed Transition Audit Trail (FR1 + SLICE-4), the [FAILED] prefix is good. However, it should not be used to evaluate success or failure, that is brittle.\"\n\n554 tests pass, 4 skip.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-t3hl","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT: Implementation acceptance for aura_protocol v1 follow-up","updated_at":"2026-02-22T17:22:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:44:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"90ae420b5c2b9df9f40c4144101b067351bc4305f6132f133af82d2f23f6d6a0","created_at":"2026-02-26T08:39:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  impl_plan: aura-plugins-uvfm\n---\n## Scope\nExtend round-trip tests in tests/test_gen_schema.py to cover all 6 ProcedureStep fields.\n\nFor SUPERVISOR steps (AC-B3-1):\n- All 6 fields (id, order, instruction, command, context, next_state) asserted field-by-field\n- command, context, next_state must be explicitly asserted (not skipped)\n\nFor WORKER steps (AC-B3-2):\n- 3 fields that survive round-trip (id, order, instruction) asserted to match Python values\n- Explicitly assert command=None, context=None, next_state=None for each worker step\n- Worker steps come from \u003ctdd-layers\u003e, not \u003cstartup-sequence\u003e, so these 3 fields are intentionally None\n\n## Files\n- tests/test_gen_schema.py\n\n## Acceptance\nAC-B3-1 and AC-B3-2: both satisfied.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-t49l","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-L4: B3 — 6-field + worker None-assertion round-trip in test_gen_schema.py","updated_at":"2026-02-26T08:44:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:33:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"06e7fa925091e84cde2f4968f920cc4d8f47d176c3fcc34f9d1074a8ea65c042","created_at":"2026-02-26T08:06:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-147m\n  urd: aura-plugins-7oqz\n  proposal: aura-plugins-iw89\n  predecessor: aura-plugins-i142\n---\n## Scope\nAdd registry subcommand dispatch + 4 CLI subcommands + TestRegistryCLI.\n\n## Files Owned\n- bin/aura-release (cmd_registry + subcommands + module docstring)\n- tests/test_aura_release.py (TestRegistryCLI class)\n\n## CLI Dispatch (backward-compatible)\n```python\ndef main() -\u003e int:\n    if len(sys.argv) \u003e 1 and sys.argv[1] == 'registry':\n        return cmd_registry(sys.argv[2:])\n    # existing argparse unchanged\n```\n\n## Subcommands\n\n### cmd_registry_init\n- Create _registry_path().parent dirs\n- Write {'marketplaces': []}\n- Error + exit 1 if file already exists\n\n### cmd_registry_add \u003cname\u003e [--path \u003clocal\u003e] [--remote \u003curl\u003e] --marketplace \u003cmp\u003e\n- Load or create empty registry\n- Store path as ABSOLUTE (Path.resolve() at add time)\n- ON DUPLICATE: print old entry + prompt 'Update? [y/N]', --yes skips prompt (UAT delta)\n- Save registry\n\n### cmd_registry_list\n- Load registry\n- Print: '\u003cmarketplace-path\u003e → \u003cname\u003e (\u003cplugin-path\u003e)' per entry\n\n### cmd_registry_remove \u003cname\u003e\n- Load registry\n- Remove all PluginEntry matching name\n- No-op if absent\n- Save registry\n\n## Module Docstring Update\nAdd to Usage block: 'aura-release registry \u003cinit|add|list|remove\u003e'\n\n## TestRegistryCLI Tests\n- test_registry_init_creates_empty_registry\n- test_registry_init_errors_if_already_exists\n- test_registry_add_creates_entry\n- test_registry_add_stores_path_as_absolute (UAT delta)\n- test_registry_add_duplicate_prompts_confirm (UAT delta)\n- test_registry_add_duplicate_with_yes_flag_skips_prompt (UAT delta)\n- test_registry_list_output_format\n- test_registry_remove_by_name\n- test_registry_remove_noop_if_absent\n\n## Validation Checklist\n- [ ] cmd_registry() dispatch: sys.argv[1] == 'registry' prefix check\n- [ ] cmd_registry_init creates {'marketplaces': []}; errors if exists\n- [ ] cmd_registry_add stores ABSOLUTE path (Path.resolve() at add time)\n- [ ] cmd_registry_add on duplicate: shows old entry + prompts 'Update? [y/N]'\n- [ ] cmd_registry_add --yes flag skips prompt\n- [ ] cmd_registry_list format: '\u003cmp-path\u003e → \u003cname\u003e (\u003cplugin-path\u003e)'\n- [ ] cmd_registry_remove removes by name; no-op if absent\n- [ ] Module docstring updated with registry subcommand\n- [ ] All TestRegistryCLI tests pass","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-t5i9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4: Registry CLI (init/add/list/remove) + TestRegistryCLI","updated_at":"2026-02-26T08:33:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4d476dc361c57444fb90f80a0c53fb33bea6ad7addb24ab24fe96c2b767cc804","created_at":"2026-02-23T04:28:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In test_context_injection.py::TestGetRoleContextWorker::test_worker_phases_is_p9_only (line 473), the test name claims 'is_p9_only' but the assertion only checks 'PhaseId.P9_SLICE in ctx.phases'. This would pass even if WORKER had multiple phases in its context.\n\nFrom PHASE_SPECS, WORKER is only in P9_SLICE.owner_roles, so the production behavior is correct. However, the test does not enforce the 'only' part of its name: it should additionally assert that ctx.phases == frozenset({PhaseId.P9_SLICE}) or assert len(ctx.phases) == 1.\n\nRemediation: Change the assertion to assert ctx.phases == frozenset({PhaseId.P9_SLICE}) to match the test's declared intent. This is a naming/assertion consistency issue.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-t8za","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S4-B1-MINOR: test_worker_phases_is_p9_only asserts inclusion only, not exclusion","updated_at":"2026-02-23T12:46:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e2d071e44129bc6c38212fefaea89917b4873d539c8c6c98176541854fe8bf62","created_at":"2026-02-27T06:56:18Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-vf9l\n  urd: aura-plugins-7vtb\n---\nVOTE: ACCEPT — No blockers. Docs split correctly; worker.md deleted; no stale refs.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ta1k","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1: Doc restructure (architecture + aurad + aura-msg)","updated_at":"2026-02-27T06:56:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T13:29:26Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d9b9448b6bb141bb0666c9c44ca5ffb9d295cfe23cac9d0f637583b9ec08c0c0","created_at":"2026-02-23T13:23:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  reviewer: C (Elegance)\n  round: 1\n---\nBLOCKER finding from Reviewer C on FOLLOWUP epic z8ga.\n\n## C-BLOCKER-1: schema.xml stale after gen_schema.py DRY refactor\n- File: skills/protocol/schema.xml (not regenerated)\n- gen_schema.py refactor changed role-ref/phase-ref computation + added FOLLOWUP_* task titles\n- Committed schema.xml differs from generate_schema() output by ~52 lines\n- Semantic changes: C-review-consensus loses role-ref, C-supervisor-no-impl/C-agent-commit phase-refs change\n- New additions: FOLLOWUP_* task title patterns, next-state attributes on startup steps\n- Violates 'Python is SoT, schema.xml is generated' contract\n- Also flagged by Reviewer A as IMPORTANT-3\n\nFix: (1) Regenerate schema.xml, (2) Add drift test asserting generate_schema() == canonical","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ta5i","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-C-1 BLOCKER","updated_at":"2026-02-23T13:29:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-23T02:57:42Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dbd9fb7cb58841787517cf692c0907370cc43a2dd3c8028343985bfde129e4b1","created_at":"2026-02-22T23:26:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT\n\n## Reviewer C (Elegance and Complexity Matching) — PROPOSAL-3, Round 1\n\n---\n\n## What Changed from PROPOSAL-2 (previously 3/3 ACCEPT)\n\nPROPOSAL-3 adds to the already-ratified PROPOSAL-2:\n1. Existing Foundation inventory (full v1+followup accounting)\n2. Integration architecture diagram (explicit module-to-existing-code mapping)\n3. Temporal compatibility analysis (no breaking changes to serialized types)\n4. Modified vs new files delineation (clear ownership per file)\n5. Gap analysis findings from 4 explore agents (SubstepSpec, DelegateSpec, 6 missing enums)\n6. AC11: Temporal Isolation (new, explicit, machine-verifiable AC)\n7. content_level str→ContentLevel enum fix (non-breaking type-safety improvement)\n\nNone of these additions introduce new modules, new abstractions, or new complexity. They are documentation improvements and a minor type-safety fix. The underlying architecture is unchanged.\n\n---\n\n## Sub-Axis Analysis\n\n### 1. Complexity Proportionality\n\nThe added elements are proportionate:\n- Gap analysis → 2 additional dataclasses (SubstepSpec, DelegateSpec) and 6 missing enums found by explore agents. These are discoveries, not invented complexity. Schema.xml has these entities; the types should represent them.\n- AC11 (Temporal Isolation) is a zero-implementation-cost AC — the existing Temporal types are unchanged; the test just verifies the sandbox tests still pass. This is pure guard rail.\n- content_level enum change: one field type corrected. Non-breaking because HandoffSpec is not Temporal-serialized. The proposal documents this reasoning explicitly.\n\n### 2. Module Decomposition — Unchanged, Still Clean\n\n4 new modules: schema_parser, gen_schema, gen_skills, context_injection. Each has single responsibility. Dependency graph remains a tree: generators and context_injection import types.py only, never each other. No circular dependencies possible. The integration architecture diagram confirms this explicitly.\n\n### 3. context_injection.py Static Dict Approach — Adequate\n\nThe static dict approach for constraint→role and constraint→phase mappings is justified: the proposal correctly notes that this mapping is NOT structurally encoded in schema.xml (it's in the 'given:' text of constraints). The two options are (a) static dict or (b) parse free-text given: clauses at runtime. Option (b) would add fragility (free-text parsing) for no gain. Option (a) is correct. The approach matches the existing pattern in constraints.py where _REVIEW_PHASES, _SEVERITY_TREE_PHASES, and _HANDOFF_REQUIRED_TRANSITIONS are all static frozensets.\n\n### 4. API Design Quality\n\nThe proposed interfaces are usable and consistent with the existing codebase:\n\n- parse_schema(path: Path) -\u003e SchemaSpec: one input, typed output, raises SchemaParseError. Clean.\n- get_role_context(role: RoleId) -\u003e RoleContext: strongly-typed enum input, frozen dataclass output. Matches existing pattern (constraints.py takes RoleId, PhaseId, etc.).\n- get_phase_context(phase: PhaseId) -\u003e PhaseContext: same pattern.\n- SchemaSpec fields: all typed dicts keyed by str or PhaseId/RoleId. No bare dicts of Any.\n- RoleContext and PhaseContext: frozen dataclasses using frozenset and tuple (immutable, consistent with PhaseSpec, ConstraintSpec, HandoffSpec).\n\nThe API surface is minimal and directly addresses the two use cases: bootstrap extraction and runtime context injection. No unused methods. No framework creep.\n\n### 5. Source-of-Truth Clarity\n\nBootstrap → Steady-state distinction is clearly articulated:\n- BOOTSTRAP: schema.xml → schema_parser.py → SchemaSpec → verify → expanded types.py (one-time)\n- STEADY STATE: types.py (SoT) → gen_schema.py / gen_skills.py / context_injection.py (ongoing)\n\nThe integration architecture diagram makes this unambiguous. schema_parser.py's ongoing role (verification/round-trip) is cleanly separated from its bootstrap role (initial extraction). The transition point is explicit: after SLICE-1 completes and types.py is expanded, schema_parser.py becomes a verification tool rather than a migration tool.\n\n### 6. Vertical Slice Decomposition — Correct Granularity\n\n4 slices is the right count:\n- SLICE-1: Foundation (types expansion + schema_parser). Must finish first. Cannot parallelize with anything.\n- SLICE-2: gen_schema.py. Depends only on SLICE-1. Can parallelize with SLICE-3 and SLICE-4.\n- SLICE-3: gen_skills.py. Depends only on SLICE-1. Can parallelize with SLICE-2 and SLICE-4.\n- SLICE-4: context_injection.py. Depends only on SLICE-1. Can parallelize with SLICE-2 and SLICE-3.\n\nMerging SLICE-2+SLICE-3 would create a slice with two unrelated output formats (XML and Markdown). Merging any of SLICE-2/3/4 with SLICE-4 would conflate code generation with runtime injection — two orthogonal concerns. The 4-slice decomposition correctly follows the C-vertical-slices constraint. Each slice owns exactly one production code path.\n\n### 7. Existing Codebase Consistency\n\nVerified against types.py, constraints.py, interfaces.py:\n\n- Frozen dataclasses: types.py uses @dataclass(frozen=True) throughout. New types (RoleSpec, SubstepSpec, etc.) will follow the same pattern. ACCEPT.\n- Enum-heavy approach: PhaseId, Domain, RoleId, VoteType, SeverityLevel all use class X(str, Enum). New enums ExecutionMode, ContentLevel will follow. The str subclassing enables JSON/Temporal serialization compatibility. ACCEPT.\n- Canonical dicts: PHASE_SPECS, CONSTRAINT_SPECS, HANDOFF_SPECS use dict[PhaseId/str, XSpec] pattern. New dicts ROLE_SPECS, COMMAND_SPECS, etc. follow the same pattern. ACCEPT.\n- frozenset for unordered membership, tuple for ordered sequences: PhaseSpec.owner_roles uses frozenset[RoleId]; PhaseSpec.transitions uses tuple[Transition, ...]. New types use the same discipline (RoleContext.phases uses frozenset[PhaseId]; RoleContext.commands uses tuple[str, ...]). ACCEPT.\n- Module-level constants in ALL_CAPS: _REVIEW_PHASES, _SEVERITY_TREE_PHASES in constraints.py. Private static dicts _ROLE_CONSTRAINTS, _PHASE_CONSTRAINTS in context_injection.py follow the same underscore-prefix convention. ACCEPT.\n\nThe proposal's style is fully consistent with the existing codebase.\n\n### 8. One Observation (Not a Concern)\n\nThe proposal lists 8 new dataclasses: SubstepSpec, RoleSpec, DelegateSpec, CommandSpec, LabelSpec, ReviewAxisSpec, TitleConvention, ProcedureStep. SubstepSpec and DelegateSpec are new additions from the gap analysis (not in PROPOSAL-2). This is correct — the explore agents found these entity types in schema.xml. The count is accurate. Their addition is appropriate, not inflated.\n\n### 9. URD Coverage (Elegance Lens)\n\n| Req | Status | Elegance Note |\n|-----|--------|---------------|\n| R1 | Clean | SchemaSpec mirrors all 7 schema.xml entity types |\n| R2 | Clean | SoT inversion clearly articulated with bootstrap/steady-state diagram |\n| R3 | Clean | All new types are frozen dataclasses, consistent with existing |\n| R4 | Clean | Marker-based split remains minimal and safe |\n| R5 | Deferred (type defined, dict empty) | Correct boundary, unchanged from PROPOSAL-2 |\n| R6 | Clean | Two-function injection, static dict, no framework |\n| R7 | Clean | gen_schema.py → validate_schema.py round-trip |\n\n---\n\n## Conclusion\n\nPROPOSAL-3 is an additive clarification of PROPOSAL-2. It resolves no new BLOCKERs (there were none) and introduces no new concerns. The gap analysis discoveries (SubstepSpec, DelegateSpec, 6 missing enums) are correct additions — they reflect what schema.xml actually contains. The integration architecture and Temporal compatibility notes reduce implementation risk without adding architectural complexity. The content_level typing fix is a correct, non-breaking improvement. All prior elegance criteria remain satisfied.\n\nVOTE: ACCEPT","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tbdc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-3-REVIEW-C-1: Schema-driven v2 — Elegance","updated_at":"2026-02-23T02:57:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:53:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"792d45af776bdcd88218acf628d1c4bcf6ab011bf033cdaa67fb56761ae08462","created_at":"2026-02-23T03:22:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  impl_plan: aura-plugins-94yc\n---\n## Scope\nCreate scripts/aura_protocol/gen_schema.py:\n- generate_schema(output: Path, diff: bool=True) → str|None\n- Uses xml.etree.ElementTree (stdlib) — no lxml\n- Generates role-ref/phase-ref attributes on \u003cconstraint\u003e elements (UAT-3)\n- Shows unified diff before writing (UAT-2) via difflib.unified_diff\n- Output must pass existing validate_schema.py with 0 errors\n\n## Files Owned\n- scripts/aura_protocol/gen_schema.py (create)\n\n## Acceptance Criteria\nGiven Python types when gen_schema runs then output passes validate_schema.py with 0 errors\nGiven constraint elements when generated then include role-ref and phase-ref attributes (UAT-3)\nGiven diff=True when generating then prints unified diff of changes (UAT-2)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tcmj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S2-L1: gen_schema.py — Python → schema.xml generator with diff + role-ref/phase-ref","updated_at":"2026-02-23T03:53:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:53Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-2 (state_machine.py) — IMPORTANT findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tcn","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-22T17:24:22Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:37:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"34c7ee426bcf853af69c6edbc999ccf65a02a690fba70b13eebef2442ba24840","created_at":"2026-02-25T22:37:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings for SLICE-2 (Schema regen). Elegance axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-td2x","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 BLOCKER","updated_at":"2026-02-25T22:37:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0154689ecb6efec5a54f46922ce3adbc5b8915fcba5ac58ad321139cb5572406","created_at":"2026-02-26T08:54:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i08u\n  review_round: 1\n---\nMINOR findings from Reviewer B (Test Quality) on FOLLOWUP-SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tdkq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-1-REVIEW-B-1 MINOR","updated_at":"2026-02-26T08:55:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"89adf6318c5506878c20233489b09a3145399b72e9063e8c8cb57939b2355011","created_at":"2026-02-22T12:57:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: tests/test_workflow.py, lines 678-717\n\n_temporal_sandbox_works() is called at module level:\n    _HAS_TEMPORAL_SANDBOX = _temporal_sandbox_works()\n\nThe function uses asyncio.run() to start a WorkflowEnvironment. In the common case where the Temporal test server binary is unavailable, the function catches the exception and returns False quickly. However:\n\n1. The function comment says 'Runs once at import time so the sandbox tests skip instantly' — this is accurate for the skip behavior, but the probe itself involves a network/filesystem call at collection time, making test collection non-deterministic in duration.\n\n2. If the Temporal server binary IS available but registered search attributes are missing, the probe will run a full workflow start and query before returning False — an 'instant skip' that is not actually instant.\n\n3. asyncio.run() at module level is fragile in some pytest environments that run their own event loops (pytest-asyncio strict mode).\n\nThe existing tests pass (4 skipped), so this is functional. The concern is correctness of the 'instant skip' claim and potential fragility.\n\nSuggestion: add a timeout (e.g., 5 seconds max) to the probe's asyncio.run() call, or document the known cases where the probe takes non-trivial time.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tfyk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4: _temporal_sandbox_works() probe runs at module import time via asyncio.run(), blocking test collection","updated_at":"2026-02-22T17:30:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:40Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bde56f23a62567980a1a6abf05bfe57361e54b1ab9854bc8d638e6146610c7bb","created_at":"2026-02-26T08:38:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tgip","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-B-1 IMPORTANT: Test Quality","updated_at":"2026-02-26T08:38:40Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4336d484a05fa6aaf026999a8c559379941fad9cbed2bad9b74d62ec2d8fd45f","created_at":"2026-02-26T20:50:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Create tests/fixtures/protocol.yaml with phase_specs, epoch_states, vote_combinations, audit_events axes.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tgpc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-3-L1: protocol.yaml fixtures","updated_at":"2026-02-26T21:03:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T10:12:58Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"382c7420593140cad4df29febce20068d64198a1be87a9168d4eb390715bc5f2","created_at":"2026-02-23T10:03:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  uat: aura-plugins-sm9c\n---\nThe 2-field ProcedureStep (order, description) lacks a transition field.\nUser wants next_state: PhaseId | None to enable FSM typecheck compatibility with A2A.\n\n## Fix\n- types.py: Add next_state: PhaseId | None = None to ProcedureStep dataclass\n- types.py: Update PROCEDURE_STEPS entries for supervisor + worker with appropriate next_state values\n  (None for steps that don't trigger a phase transition; PhaseId.PX for steps that do)\n- gen_schema.py: Serialize next_state into schema.xml startup-sequence elements\n- gen_types.py: Update stub to include next_state field","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tlch","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT-BLOCKER-5: ProcedureStep needs next_state: PhaseId | None for FSM typecheck","updated_at":"2026-02-23T10:12:58Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:30:45Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d358c41f47833a5a9a44a08fdb13db064326618e7de8d2c823c566234241de9c","created_at":"2026-02-26T03:30:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  reviewer: cartographer-b\n  round: 1\n---\nBLOCKER findings from Cartographer B (Test quality) on SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tnjj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T03:30:45Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9bd75b0aaac553fd7bd1282acbafcd78a0f129dd8445cda08a2ee4010dc25c1d","created_at":"2026-02-26T15:33:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Update AuditTrail.query_events signature to add epoch_id param. Define InMemoryAuditTrail implementing AuditTrail Protocol.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tro1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-3-L1: Types — AuditTrail query_events epoch_id param + InMemoryAuditTrail","updated_at":"2026-02-26T18:34:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"853fff00576d29d2b3ce4f63f970a7b7d9b9fb830ecb6bc5c12f22013ffb1c10","created_at":"2026-02-23T18:04:49Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-cuuw\n---\n## Questions and Responses\n\n### Dead code cleanup\nQ: The develop branch already has the core fix (discover_version_files replaces the hard-coded unconditional read). Two things remain. Which approach do you want for the dead code (lines 33–54: _discover_repo_root, REPO_ROOT, VERSION_FILES)?\nOptions:\n  - Remove it entirely (Delete _discover_repo_root(), REPO_ROOT, and VERSION_FILES — they're unused and run a git subprocess at import time for nothing)\n  - Leave it as-is (The core crash is fixed by discover_version_files; the dead code is harmless, just wastes a subprocess call)\nA: Remove it entirely\n\n### No files found\nQ: When aura-release runs in a repo with no version files anywhere (no pyproject.toml, no package.json, no plugin.json), the current develop branch exits with a clear error. Is that behaviour acceptable, or should it do something else?\nOptions:\n  - Acceptable — exit with error (Already implemented: prints helpful message listing what it looks for, exits code 2)\n  - Should warn and continue (Print a warning but don't exit — allow the release to proceed even with no version files)\nA: Acceptable — exit with error\n\n### Other\nQ: Is there anything else about this bug or the aura-release tool that you want addressed in this fix?\nOptions:\n  - Nothing else (The two items above cover it)\n  - Also update nix profile docs (Add a note somewhere about how to update the installed binary after a fix)\n  - Add a test (Add a test that exercises the subdirectory case so this can't regress)\nA: Nothing else, Add a test","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tt57","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"ELICIT: aura-release reads pyproject.toml from wrong directory","updated_at":"2026-02-23T18:04:49Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8639fe6878a8e5d1e40dc7890f172314e6d57c8562c39a3a4fab09efb1992e66","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tu69","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-2 BLOCKER","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-23T02:57:42Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d3e10ae49e6d3510b7ce6a410b65037fb46a1d786642040f601552b2d34dcf9c","created_at":"2026-02-23T02:53:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-w115\n  urd: aura-plugins-w07o\n  elicit: aura-plugins-9lps\n  proposal: aura-plugins-mg6h\n---\n\n## Components Reviewed\n\n### Component 1: Bootstrap → Steady-State Workflow\n\n**Definition shown:**\n```python\n# BOOTSTRAP: parse_schema() → SchemaSpec → developer transcribes into types.py\n# STEADY STATE: edit types.py → gen_schema → validate → gen_skills\n```\n\n**Motivating example shown:** Full code walkthrough of adding a new command \"bd-archive\" in steady state.\n\n**Question asked:** For bootstrap, the proposal has parse_schema() returning a SchemaSpec object that you manually transcribe into types.py dicts. The alternative is a codegen script that generates the actual types.py source code. Which approach for seeding the initial types.py?\n**Options presented:**\n- Manual transcription from SchemaSpec\n- Codegen script writes types.py\n- Hybrid: codegen draft + manual polish\n**User response:** Hybrid: codegen draft + manual polish\n\n**Question asked:** Any feedback on the steady-state workflow (edit types.py → gen_schema → validate → gen_skills)?\n**User response:** \"The generate and validate: must include a diff showing what changed.\"\n\n---\n\n### Component 2: Constraint→Role/Phase Mapping\n\n**Definition shown:**\n```python\n_ROLE_CONSTRAINTS: dict[RoleId, frozenset[str]] = {\n    RoleId.SUPERVISOR: frozenset({\"C-supervisor-no-impl\", ...}),\n    ...\n}\n```\nPlus example XML showing free-text given: clauses.\n\n**Question asked:** The constraint→role and constraint→phase mappings must be hand-authored because schema.xml only has free-text given: clauses. Three options for where these mappings live:\n**Options presented:**\n- Static dicts in context_injection.py\n- Add role-ref/phase-ref to schema.xml\n- Derive from ConstraintSpec.given text\n**User response:** \"(1) and (2). The Python code should generate the schema.xml.\"\n\n**Question asked:** Any feedback on the RoleContext/PhaseContext API shape?\n**User response:** \"How are the when elements being captured?\"\n\n**Follow-up question asked:** The when: clause tells agents WHEN a constraint activates. Currently PhaseContext only includes constraint IDs. Should the when: text be surfaced in the context injection output?\n**Options presented:**\n- Include full Given/When/Then in context\n- IDs only — agents look up full text themselves\n- Include when+then only (compact)\n**User response:** Include when+then only (compact)\n**User clarification:** \"Should be strongly typed enums, not strings\"\n\n**Revised design:**\n```python\n@dataclass(frozen=True)\nclass ConstraintContext:\n    id: str\n    when: str\n    then: str\n\n@dataclass(frozen=True)\nclass PhaseContext:\n    phase: PhaseId\n    constraints: frozenset[ConstraintContext]  # typed, not frozenset[str]\n    labels: tuple[str, ...]\n    transitions: tuple[Transition, ...]\n```\n\n---\n\n### Component 3: SKILL.md Marker Strategy\n\n**Definition shown:** Before/after of SKILL.md with BEGIN/END markers.\n\n**Question asked:** First run of gen_skills.py on 38 existing SKILL.md files with no markers. What should happen?\n**Options presented:**\n- Prepend generated header + add markers\n- Require manual marker placement first\n- Interactive: show diff, ask per file\n**User response:** Require manual marker placement first\n\n**Question asked:** Any feedback on the marker format or SKILL.md structure?\n**User response:** No additional feedback\n\n---\n\n### Component 4: ProcedureStep Deferral\n\n**Definition shown:**\n```python\n@dataclass(frozen=True)\nclass ProcedureStep:\n    order: int\n    instruction: str\n    command: str | None\n    context: str | None\n\nPROCEDURE_STEPS: dict[PhaseId, tuple[ProcedureStep, ...]] = {}  # empty for MVP\n```\n\n**Question asked:** ProcedureStep type defined but dict empty for MVP. Is this deferral acceptable?\n**Options presented:**\n- Accept deferral\n- Populate 1-2 roles as proof of concept\n- Must populate all for MVP\n**User response:** Populate 1-2 roles as proof of concept\n\n---\n\n## Final Decision\nACCEPT with 6 revisions:\n1. Bootstrap: Hybrid codegen draft (gen_types.py) + manual polish\n2. Steady-state: gen_schema/gen_skills must show diff of what changed\n3. Constraint→role mapping: Static dicts in Python + generate role-ref/phase-ref into schema.xml\n4. When clause: ConstraintContext frozen dataclass with typed when+then (no bare strings)\n5. SKILL.md first run: MarkerError if no markers — require manual marker placement\n6. ProcedureStep: Populate supervisor + worker as proof of concept; others deferred","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-tvkz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT: Plan acceptance for schema-driven protocol engine v2","updated_at":"2026-02-23T02:57:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a4b2e973c27dda52862532d9c8ee759959cd56f22dc49c3f42154bf258064e7e","created_at":"2026-02-26T08:38:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-txci","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 MINOR: Error message clarity","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:43:06Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ca17bebccf1b95c05cd740cf0ee1d342e24e8ffa76c1c8d2bcd05454caff8e57","created_at":"2026-02-26T08:38:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i08u\n  impl_plan: aura-plugins-uvfm\n  finding: aura-plugins-rthn\n---\n## Scope\nAdd TestEpochRideTheWaveConstraints to tests/test_context_injection.py.\n\n4 tests (parametrized or individual), one per constraint:\n- C-supervisor-cartographers\n- C-integration-points\n- C-slice-review-before-close\n- C-max-review-cycles\n\nEach test: call get_role_context(RoleId.EPOCH), assert constraint appears in RoleContext.constraints by .id.\n\n## Files\n- tests/test_context_injection.py\n\n## Acceptance\nAC-A2-1: all 4 constraints individually asserted by id (not just count comparison).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-txds","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-1-L1: EPOCH Ride the Wave constraint tests — test_context_injection.py","updated_at":"2026-02-26T08:43:06Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8a64d54f81a5ceeb5663a592a38d807c2f01eb20884ac409ddd037a50325f1ab","created_at":"2026-02-26T20:54:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"EpochState.review_votes is typed as dict[str, VoteType] but should be dict[ReviewAxis, VoteType] to maintain type coherence with ReviewAxis(StrEnum) and ReviewVoteSignal.axis: ReviewAxis.\n\n## Gap (workflow.py)\n  @dataclass\n  class EpochState:\n      ...\n      review_votes: dict[str, VoteType] = field(default_factory=dict)\n\nShould be:\n  review_votes: dict[ReviewAxis, VoteType] = field(default_factory=dict)\n\n## Why This Matters\nPROPOSAL-9 introduced ReviewAxis(StrEnum) specifically to replace raw str keys in vote tracking.\nPROPOSAL-10 fixed ReviewVoteSignal.axis: str → ReviewAxis.\nBut EpochState.review_votes still uses str as key, defeating the type safety fix.\n\nBecause ReviewAxis is a StrEnum, dict[ReviewAxis, VoteType] is backward-compatible at runtime\n(StrEnum values are strings), but mypy/pyright will catch misuse at development time.\n\n## Fix Required\n1. Change review_votes: dict[str, VoteType] → dict[ReviewAxis, VoteType] in EpochState\n2. Update all dict assignments: self._state.review_votes[signal.axis] = signal.vote\n   (signal.axis is already ReviewAxis, so no cast needed)\n3. Update tests to use ReviewAxis.CORRECTNESS etc. as keys\n\n## Acceptance Criteria\n- EpochState.review_votes: dict[ReviewAxis, VoteType]\n- All assignments use ReviewAxis enum members as keys\n- Tests verify ReviewAxis keys (not raw strings)\n- No regressions","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-txgq","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FIX: EpochState.review_votes key type — dict[str, VoteType] → dict[ReviewAxis, VoteType]","updated_at":"2026-02-26T23:56:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c5ebf33e249ee1d5a431e1a4638b09cd9fd0d606fc24866acb2fc99584a9e58c","created_at":"2026-02-23T04:26:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer B (Test Quality) on SLICE-3 (SKILL.md Generator with Diff + MarkerError). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-u1jl","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 MINOR","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:37:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"abbdf18a546d2e2a9dcea1c922ce7f833376593d894d218188c1a6060ee376f6","created_at":"2026-02-23T03:21:33Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  impl_plan: aura-plugins-94yc\n  urd: aura-plugins-w07o\n---\n## Scope\nAdd to scripts/aura_protocol/types.py:\n- New enums: ExecutionMode, ContentLevel, ReviewAxis (all str enums, consistent with existing)\n- New dataclasses (all frozen): SubstepSpec, RoleSpec, DelegateSpec, CommandSpec, LabelSpec, ReviewAxisSpec, TitleConvention, ProcedureStep, ConstraintContext\n- Fix HandoffSpec.content_level: str → ContentLevel enum\n- Fix ReviewVoteEvent.axis: str → ReviewAxis enum\n- Update scripts/aura_protocol/__init__.py with re-exports\n\n## Files Owned\n- scripts/aura_protocol/types.py (modify — additions + fixes only)\n- scripts/aura_protocol/__init__.py (modify — re-exports)\n\n## Acceptance Criteria\nGiven types.py when new types added then all are frozen dataclasses with correct fields should never modify existing Temporal-serialized types","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-u3ce","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S1-L1: Type definitions — new enums, dataclasses, fixes in types.py","updated_at":"2026-02-23T03:37:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:48:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5cd57fc5d0afa69a7068015ac4cde81709930edd2e1b7c7840e4b773916f2913","created_at":"2026-02-25T22:48:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No IMPORTANT findings. Elegance axis, round 3 (final). Round 2 IMPORTANT (missing TestCheckStructural integration test) fully resolved.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-u66s","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-3 IMPORTANT","updated_at":"2026-02-25T22:48:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:56:04Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"38cb94c6ada50b30cb33291ec0faa1b198624251abdc93370d084aeb82623bf5","created_at":"2026-02-22T12:55:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer A (Correctness) on SLICE-1 (state_machine.py, conftest.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-u6n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-22T12:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:39Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1c51db748284836afd87df8cdc7cf1c98d4c0534ffbce5f3c9ee58b98615ffb6","created_at":"2026-02-23T04:25:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Axis-C finding (Elegance/API Completeness).\n\n_PHASE_CONSTRAINTS in context_injection.py has 12 entries (P1_REQUEST through P12_LANDING). PhaseId also has a COMPLETE sentinel value.\n\nget_phase_context() uses:\n  constraint_ids = _PHASE_CONSTRAINTS.get(phase, frozenset())\n\nThis silently returns empty frozenset for COMPLETE, which is acceptable behavior (COMPLETE is a terminal state with no constraints). However, the pattern is consistent with a silent failure for any missing PhaseId added in the future.\n\nAdditionally, _PHASE_CONSTRAINTS is a plain dict[PhaseId, frozenset[str]], not an exhaustive mapping. If a new PhaseId is added to the enum, _PHASE_CONSTRAINTS will not raise any error — it will silently return no constraints.\n\nThis is a minor concern because: (1) COMPLETE is a known case that legitimately has no constraints; (2) the .get() fallback is the right behavior for the terminal state.\n\nSuggestion: Add an explicit comment in _PHASE_CONSTRAINTS noting that COMPLETE is intentionally absent (terminal state, no constraints apply). Or add PhaseId.COMPLETE: frozenset() with a comment. This makes the omission deliberate rather than accidental.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ua0i","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1-F13: context_injection.py _PHASE_CONSTRAINTS has no entry for PhaseId.COMPLETE — potential silent KeyError in get_phase_context","updated_at":"2026-02-23T12:46:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:01:58Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d2650778b608a75eb1d4d7a5d1207ca13a5d00e95c1889ca66173c3e23d83fc0","created_at":"2026-02-26T16:01:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-l6n8,aura-plugins-vhtx,aura-plugins-sp6y,aura-plugins-o8va,aura-plugins-w5hi\n  review: aura-plugins-ruvr\n---\nBLOCKER findings for Elegance review round 1 (Reviewer C)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ubdt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"ALL-SLICES-REVIEW-C-1 BLOCKER","updated_at":"2026-02-26T16:01:58Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9444501e32280ff88888f3be317b893fde1e3da63fd4f7f41c6a5285427d839f","created_at":"2026-02-25T22:45:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"TestCheckStructural integration test for check_integration_points is still missing. The check_structural wiring is correct (parameter, dispatch, docstring), but no test_integration_points_via_structural test exists. All other wired constraints have a corresponding TestCheckStructural test.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-udj3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-2 IMPORTANT","updated_at":"2026-02-25T22:45:21Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:58:01Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ceb5877c2bfc82bcbeb3d18040b3b4af9532f25f14ad1ad46c99c648a2fef273","created_at":"2026-02-27T06:57:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-v1ak\n---\nIMPORTANT findings for ALL-SLICES-REVIEW-B-1 (Reviewer B, round 1)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ug3w","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"ALL-SLICES-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-27T06:58:01Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c126302217fedeecdf84a82710996da6aed2dacae3566662b0424ea88687b221","created_at":"2026-02-26T04:02:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-2j4v\n  uat: aura-plugins-6p9j\n---\nBLOCKER findings from Phase 11 UAT on SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ui9d","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-2-UAT-BLOCKER BLOCKER","updated_at":"2026-02-26T04:02:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:34:33Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"90032c939c7c5f7f4e7f7d74ed77761a78581352aa6b51c443eba758059f3da3","created_at":"2026-02-26T03:34:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-uj4i","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-2 BLOCKER","updated_at":"2026-02-26T03:34:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:21:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T00:39:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-bj1\n  elicit: aura-plugins-gbr\n  related_epoch: aura-plugins-220\n  variant_rich_paper: Strüber et al. SPLC'19 (DOI: 10.1145/3336294.3336302)\n  agentfilter_project: ~/codebases/dayvidpham/agentfilter/\n  unified_schema_project: ~/dev/agent-data-leverage/unified-schema/\n  temporal_research: ~/codebases/dayvidpham/nix-openclaw-vm/docs/research/temporal*.Rmd\n  collaboration_protocol: ~/dev/agent-data-leverage/david-data-ingestion-typescript-pipeline/initial-collaboration-protocol.md\n  nlp_proposal: ~/dev/agent-data-leverage/david-data-ingestion-typescript-pipeline/nlp-project-proposal.md\n---\n\n## Requirements\n\n### R1: Machine-Executable 12-Phase Protocol (v1 MVP)\nExtend validate_schema.py to enforce workflow state transitions. Add a state machine (Python, Temporal SDK) that validates phase ordering, review consensus gates, and dependency chain integrity. Temporal provides durability, audit trail, and search attributes for forensic queryability.\n\n### R2: Schema.xml Runtime Context Injection (v2)\nParse schema.xml at agent startup and inject the relevant phase/role/constraint context into the agent's prompt. Single source of truth — eliminates SKILL.md drift. Constraints checked at injection time.\n\n### R3: Full Temporal Workflow Engine (v3)\nImplement the 12-phase protocol as Temporal workflows. Phases become workflows, handoffs become signals, constraints become activity guards. Agents orchestrated by Temporal rather than reading SKILL.md.\n\n### R4: Hybrid Schema Strategy\n- Core: Typed enums (Python newtype pattern) for universal fields (session_id, model_id, role, phase)\n- Deltas: Per-harness extension modules for harness-specific transcript fields\n- Feature guards: Cross-cutting constraints verified by SAT solver (z3 or python-sat)\n- Matches unified-schema's existing BCNF approach but extends it for the aura protocol dimensions\n\n### R5: A2A/MCP Type Compliance\n- Adopt A2A Part discriminated union (TextPart/FilePart/DataPart) for content representation\n- Adopt MCP ToolUseContent/ToolResultContent for tool call representation\n- Adopt A2A TaskState enum as superset of all protocol lifecycle states\n- Extend with: reasoning field (ACP TrajectoryMetadata), source field (harness+model), tool/system roles\n- Use models.dev {provider_id}/{model_id} for stable model identifiers\n\n### R6: Integration Interfaces (End Vision)\nDefine interfaces that bridge:\n- aura-plugins (protocol definition + constraint enforcement)\n- unified-schema (transcript ingestion + analytics — NOT modified by us)\n- agentfilter (security filtering — NOT modified by us)\n- nix-openclaw-vm (Temporal runtime — eventual execution backend)\n\n### R7: Python-Only in aura-plugins\nAll code in aura-plugins must be Python. Temporal Python SDK for workflow engine. No Go in this repo (Go lives in unified-schema and nix-openclaw-vm).\n\n### R8: Beads Coordination (Transitional)\nBeads (bd CLI) remains the inter-agent task coordination mechanism for now. Eventually superseded by our own solution using the APIs we develop. The orchestration layer must integrate with beads, not replace it prematurely.\n\n## Priorities (User-Stated)\n1. v1 MVP: Constraint validator + state machine with Temporal (Python SDK)\n2. Cross-project integration interfaces (define, don't implement outside aura-plugins)\n3. A2A/MCP type compliance for future interop\n4. Hybrid schema for variant-rich harness support\n\n## Design Choices (From Elicitation)\n- Temporal throughout all versions (Python SDK)\n- unified-schema team owns SessionEntry DB schema (we don't modify)\n- Hybrid schema: typed enums (core) + deltas (harness-specific) + feature guards (cross-cutting)\n- Beads is transitional; Temporal audit trail is the long-term solution\n\n## MVP Goals (v1)\n1. Python state machine that models the 12-phase aura protocol transitions\n2. Temporal workflow that wraps the state machine with durable execution\n3. Constraint validators (extending validate_schema.py) that check runtime state\n4. Search attributes on Temporal for forensic queries (phase, role, agent, status)\n5. Integration interface definitions (Python protocols/ABCs) for unified-schema and agentfilter\n\n## End-Vision Goals\nCompletely auditable agent workflow engine for open-source development:\n- Agents orchestrated by Temporal workflows with durable state\n- schema.xml as single source of truth — runtime context injected, not read from SKILL.md\n- Cross-project integration: protocol enforcement (aura-plugins) + ingestion (unified-schema) + security (agentfilter) + execution (Temporal)\n- Open contribution: the orchestration APIs become the \"Application Document Interface\" for agent-native development\n- Audit trail: every phase transition, constraint check, handoff, and review decision is recorded in Temporal event history with search attributes","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-umi","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"URD: Machine-executable aura protocol engine with Temporal orchestration","updated_at":"2026-02-22T04:21:22Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6bd3010a872ddfbcc75634fbf8f82d24e6592ea06eb7b7a6ad801efce997e18f","created_at":"2026-02-26T02:44:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT - All four correctness questions confirmed:\n\n1. LINE 32 ORPHAN: CONFIRMED CORRECT. Line 32 reads '# Conventional commit prefix -\u003e Keep a Changelog section' (single-arrow, old-ASCII variant). Its true counterpart is line 58 '# Conventional commit prefix → Keep a Changelog section' (proper Unicode arrow), which precedes COMMIT_SECTIONS. Line 32 is genuinely orphaned — it sits directly above the dead function _discover_repo_root(), not above COMMIT_SECTIONS. Deletion range 32-57 inclusive is correct; deleting 33-57 would leave the orphaned comment, creating a misleading header above nothing.\n\n2. DEAD SYMBOL REFERENCES: CONFIRMED NONE REMAIN. Grep over the full file confirms all occurrences of _discover_repo_root, REPO_ROOT, VERSION_FILES, and CHANGELOG_PATH are confined to lines 32-57. After deletion, no dangling references exist anywhere in the remainder of the file.\n\n3. SOURCEFILELOADER CORRECTNESS: CONFIRMED. Empirically verified: importlib.util.spec_from_file_location('aura_release', path) returns None for the extensionless bin/aura-release file. The SourceFileLoader approach (loader = SourceFileLoader('aura_release', str(path)); spec = importlib.util.spec_from_loader(...)) produces a valid spec with correct origin. This is the correct Python stdlib approach for importing extensionless source files.\n\n4. CASE C SCAN ORDER: CONFIRMED CORRECT. discover_version_files() appends root pyproject.toml (line 243) before entering the _subdirs() loop (line 246). _subdirs() returns sorted child directories. In a two-file fixture (root + sub/), root is appended first unconditionally. Case C's assertion that 'root entry is first' is structurally guaranteed by the code, not by coincidental directory ordering. The test correctly guards against future short-circuit regressions.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-umye","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-2-REVIEW-A-2: aura-release dead code + test","updated_at":"2026-02-26T02:44:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9f44008c6c6870ea05a4387cea51ef26522a39eab0e1b68e1d039ee52acaa579","created_at":"2026-02-26T23:47:00Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Files:\n  scripts/aura_protocol/types.py, line 275\n  scripts/aura_protocol/workflow.py, line 183\n\ntypes.py defines:\n  @dataclass(frozen=True)\n  class PhaseResult:\n      phase_id: PhaseId       # enum, not str\n      success: bool\n      blocker_count: int = 0\n      vote_result: VoteType | None = None   # single optional vote\n\nworkflow.py (added in aura-plugins-cz2t) defines:\n  @dataclass(frozen=True)\n  class PhaseResult:\n      phase_id: str           # raw string, not PhaseId\n      success: bool\n      vote_result: dict[str, str] = field(default_factory=dict)  # full vote map\n\nThe two classes have the same name but incompatible schemas:\n  - phase_id: PhaseId vs str\n  - vote_result: VoteType|None vs dict[str, str]\n\n__init__.py exports types.PhaseResult (via 'from aura_protocol.types import ...').\nworkflow.py's PhaseResult is accessed as aura_protocol.workflow.PhaseResult.\ntests import from aura_protocol.workflow.\n\nThis creates a maintenance hazard: a future developer doing\n'from aura_protocol import PhaseResult' gets a different class than\nthe one ReviewPhaseWorkflow.run() actually returns.\n\nFix: rename workflow.py's PhaseResult to ReviewPhaseResult (or ReviewResult)\nto make the distinction clear and eliminate the name shadow.\n\nSlice: aura-plugins-cz2t","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-us3s","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: PhaseResult name collision — workflow.py and types.py both define PhaseResult with incompatible schemas","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"71c0d33a98ebca371a4559068088ff5d9a62838962f439854233521eeef26ffb","created_at":"2026-02-26T08:38:30Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ut53","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 IMPORTANT: Test Quality","updated_at":"2026-02-26T08:38:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:46Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-4 MINOR severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-utj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 MINOR","updated_at":"2026-02-22T17:24:22Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:37:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bad0f8cd03cb156e6deef7a85942464fd208ebb3242da1d51c6df8cc5d1dab74","created_at":"2026-02-26T08:34:08Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-qfze\n  followup_urd: aura-plugins-wloc\n  proposal: aura-plugins-9e68\n---\n## Slices\n\n- FOLLOWUP-SLICE-1 (parallel): EPOCH Ride the Wave direct tests (A2) — test_context_injection.py\n- FOLLOWUP-SLICE-2 (parallel): Test isolation + ProcedureStep coverage (A1, B1, B2, B3, B4) — test_gen_skills.py, test_schema_types_sync.py, test_gen_schema.py\n- FOLLOWUP-SLICE-3 (after SLICE-2): Code clarity + parser correctness (C1, C2, D1, D2, D3) — gen_schema.py, schema_parser.py, test_gen_schema.py\n\n## Dependencies\nSLICE-1 and SLICE-2 run in parallel.\nSLICE-3 blocked by SLICE-2 (both touch test_gen_schema.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-uvfm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_IMPL_PLAN: Protocol Engine v2 follow-up — test coverage + code clarity","updated_at":"2026-02-26T09:37:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"97f40671ff15da109a259c08a379f10d19b14cbd4339b54b21943ceca4460aa9","created_at":"2026-02-26T23:45:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-hgki\n  followup_urd: aura-plugins-gox3\n  slices: aura-plugins-rpc4, aura-plugins-zh0j, aura-plugins-xehz, aura-plugins-cz2t, aura-plugins-oyxw, aura-plugins-txgq\n---\nTest quality review of all 6 slices in FOLLOWUP epic aura-plugins-hgki.\n\nVOTE: ACCEPT — all 1196 tests pass, DI-only convention respected, fixture infrastructure solid, combinatorial tests well-parametrized, new tests cover targeted AC for each slice. Minor issues below do not block.\n\n## Summary\n- All 1196 tests pass (4 skipped: require live Temporal server)\n- No unittest.mock usage found anywhere in tests/\n- DI-only convention fully respected: parse_args(argv=...), _clean_env() context manager, ActivityEnvironment for activities\n- SLICE-3 (aura-plugins-xehz): YAML fixture + combinatorial infrastructure is well-designed; ProtocolFixture pattern correct; 57+95=152 new tests\n- SLICE-4 (aura-plugins-cz2t): 19 new tests for SliceWorkflow + ReviewPhaseWorkflow; structural invariants checked; signal logic tested out-of-band with raw event loop; fail-fast pattern tested with asyncio.wait\n- SLICE-5 (aura-plugins-oyxw): 6 role-filter tests in TestQueryAuditEventsActivity + 2 in TestInMemoryAuditTrail; all 4 filter combinations exercised\n- SLICE-6 (aura-plugins-txgq): 2 targeted tests (isinstance key check + 3-axis presence); ReviewAxis StrEnum semantics verified","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-uvgb","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-B-1: Test quality review of aura-plugins-hgki (6 slices)","updated_at":"2026-02-26T23:45:57Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"598768650641f453fc030bd924d77ce1406fbdb86e4739181dae84ac4c0ab198","created_at":"2026-02-26T08:55:14Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6v80\n  review_round: 1\n---\nIMPORTANT findings from Reviewer C (Elegance) on FOLLOWUP-SLICE-3. No findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-uwp4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-3-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-26T08:55:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:53:36Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4a7f48038bf18e7dbcc7940e4acc46867d10b463fafb91945654bd2b49cfdc40","created_at":"2026-02-23T03:22:55Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Create scripts/aura_protocol/gen_skills.py with marker-based generation, MarkerError on missing markers (UAT-5), unified diff output (UAT-2), preserves hand-written body below markers. References: slice=aura-plugins-82ya, impl_plan=aura-plugins-94yc","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-uwr9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S3-L1: gen_skills.py — Python → SKILL.md generator with diff + MarkerError","updated_at":"2026-02-23T03:53:36Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:44:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ff677ad6696075b012d1cd839ac9ecf28828d026f8231b4613f76dff31612b0b","created_at":"2026-02-26T08:39:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  impl_plan: aura-plugins-uvfm\n  finding: aura-plugins-c5nx\n---\n## Scope\nFix TestStrictUndefined.test_undefined_variable_raises_undefined_error in tests/test_gen_skills.py.\n\nThe test currently creates its own jinja2.Environment. Fix: call generate_skill() instead.\n\nRequirements:\n- Provide temp template dir with skill_header.j2 (MUST be this exact name) containing {{ undefined_var }}\n- Provide valid SKILL.md at skill_path with BEGIN/END markers\n- Assert jinja2.UndefinedError is raised by generate_skill()\n- Do NOT instantiate jinja2.Environment in the test body\n\n## Files\n- tests/test_gen_skills.py\n\n## Acceptance\nAC-A1-1: test calls generate_skill(), provides skill_header.j2 + valid SKILL.md with markers, asserts UndefinedError.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-uxf4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-L1: A1 — fix StrictUndefined test to call generate_skill()","updated_at":"2026-02-26T08:44:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"709a035801f8b1dd68306bff50f4a31063089a877c0dd02949c7e72d4eeae789","created_at":"2026-02-23T04:24:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer A on SLICE-1. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-v015","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 BLOCKER","updated_at":"2026-02-23T04:24:07Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"76f99273bf9cdbbfd6a603b7880d0604e6d6971ecbea3ff2688603e6b56cfe80","created_at":"2026-02-22T18:14:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-w115\n  urd: aura-plugins-w07o\n  supersedes: aura-plugins-a1o4\n  review_a: aura-plugins-x32v\n  review_b: aura-plugins-k9mx\n  review_c: aura-plugins-5tr0\n---\n\n## Changes from PROPOSAL-1 (aura-plugins-a1o4)\n\n### Addressing Reviewer A (Correctness) BLOCKERs:\n1. **B1: Fixed entity counts in AC1** — Verified against schema.xml: 12 phases, 5 roles, 35 commands, 23 constraints, 6 handoffs, 21 labels, 3 review axes, 38 SKILL.md files.\n2. **B2: ProcedureStep deferred from MVP** — ProcedureStep dataclass is defined in types.py (the type exists) but PROCEDURE_STEPS dict is left empty with a TODO comment. Procedural content stays hand-written in SKILL.md bodies for MVP. Population is a follow-up task after the generation pipeline proves out.\n\n### Addressing Reviewer B (Test Quality) BLOCKERs:\n1. **B1: Round-trip field-level comparison** — verify_round_trip() must compare field-by-field, not just counts. Added AC3a: for every ConstraintSpec, compare given/when/then/should_not; for every HandoffSpec, compare required_fields; for every SubstepSpec, compare startup_sequence. A count-only test is a BLOCKER.\n2. **B2: Error-path tests for schema_parser.py** — Added AC1a: parse_schema() raises SchemaParseError on malformed XML, missing required sections, and truncated files. At least 3 error-path tests required.\n3. **B3: Marker-boundary edge cases** — Added AC4a: gen_skills.py tests cover: missing END marker (raises), missing both markers (initial generation, full output), reversed markers (raises). Generator must NEVER silently discard the manual body.\n4. **B4: Context injection absence assertions** — Added AC5a/AC6a: tests must assert that irrelevant constraints are NOT present. E.g., get_role_context(SUPERVISOR) must NOT include C-worker-gates; get_phase_context(P4_REVIEW) must NOT include C-severity-eager.\n\n### Addressing Reviewer B IMPORTANT findings:\n5. **AC8 structured as parametrized test** — Each role template rendered with StrictUndefined; parametrized over all 4 role templates.\n6. **End-to-end pipeline integration test added** — AC10: parse_schema → expand types → gen_schema → validate_schema → gen_skills pipeline produces valid outputs.\n7. **test_schema_types_sync.py covers new dicts** — Added to AC9: sync test covers ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS, REVIEW_AXIS_SPECS.\n\n### Addressing Reviewer C (Elegance) notes:\n8. **ProcedureStep scoping clarified** — Type exists, dict empty, follow-up scoped.\n9. **SLICE-3 template contract noted** — Worker derives template content from existing SKILL.md files. Handoff doc will specify which SKILL.md sections map to which template variables.\n\n---\n\n## Problem Space\n(Unchanged from PROPOSAL-1)\n\n**Axes:** code generation (schema → code, code → schema), drift elimination (38 SKILL.md files × 1 schema.xml), runtime context injection (role-level + phase-level), source-of-truth inversion (schema.xml → Python types.py)\n\n## Engineering Tradeoffs\n(Unchanged from PROPOSAL-1 — all tradeoff decisions confirmed by Reviewer C as proportionate)\n\n| Decision | Choice | Rationale |\n|----------|--------|-----------|\n| Source of truth | Python types.py | User requirement. Directly usable at runtime. |\n| Bootstrap | Auto-parse schema.xml | 1,314-line schema too large for manual transcription |\n| Template engine | Jinja2 (dev-only dep) | Industry standard. StrictUndefined catches errors. |\n| XML generation | xml.etree.ElementTree | Stdlib, no new dependency |\n| SKILL.md split | Marker-based | User chose generated header + manual body |\n| ProcedureStep | Type defined, dict empty for MVP | Deferred per Reviewer A/C feedback |\n\n## MVP Milestone\n\n### Architecture Overview\n```\n== BOOTSTRAP (one-time) ==\nschema.xml → [schema_parser.py] → SchemaSpec → verify → expanded types.py\n\n== STEADY STATE (ongoing) ==\ntypes.py (SOURCE OF TRUTH)\n    ├─→ [gen_schema.py] → schema.xml (portable export)\n    ├─→ [gen_skills.py] → SKILL.md (generated headers with markers)\n    └─→ [context_injection.py] → runtime role/phase context\n```\n\n### Module 1: schema_parser.py — Bootstrap Schema Parser\n(Unchanged from PROPOSAL-1)\n\n```python\n@dataclass\nclass SchemaSpec:\n    phases: dict[str, PhaseSpec]\n    roles: dict[str, RoleSpec]\n    commands: dict[str, CommandSpec]\n    constraints: dict[str, ConstraintSpec]\n    handoffs: dict[str, HandoffSpec]\n    labels: dict[str, LabelSpec]\n    review_axes: dict[str, ReviewAxisSpec]\n    title_conventions: list[TitleConvention]\n\nclass SchemaParseError(Exception):\n    \"\"\"Raised when schema.xml is malformed or missing required sections.\"\"\"\n\ndef parse_schema(path: Path) -\u003e SchemaSpec:\n    \"\"\"Parse schema.xml. Raises SchemaParseError on malformed input.\"\"\"\n```\n\n### Module 2: Expanded types.py — Protocol Types (SoT)\n(Unchanged from PROPOSAL-1, except ProcedureStep scoping)\n\nNew dataclasses: SubstepSpec, RoleSpec, DelegateSpec, CommandSpec, LabelSpec, ReviewAxisSpec, TitleConvention, ProcedureStep.\n\nNew canonical dicts: ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS, REVIEW_AXIS_SPECS, TITLE_CONVENTIONS.\n\nProcedureStep: type defined, PROCEDURE_STEPS dict empty for MVP.\n\n### Module 3: gen_schema.py — Python → schema.xml Generator\n(Unchanged from PROPOSAL-1)\n\n### Module 4: gen_skills.py — Python → SKILL.md Generator\n(Unchanged from PROPOSAL-1, with marker-safety additions)\n\n```python\nGENERATED_BEGIN = \"\u003c!-- BEGIN GENERATED FROM schema --\u003e\"\nGENERATED_END = \"\u003c!-- END GENERATED --\u003e\"\n\nclass MarkerError(ValueError):\n    \"\"\"Raised when SKILL.md markers are malformed (missing END, reversed).\"\"\"\n\ndef generate_skill(...) -\u003e str:\n    \"\"\"Generate SKILL.md content.\n    \n    Raises MarkerError if existing file has malformed markers.\n    If no markers exist (new file), generates full content.\n    \"\"\"\n```\n\n### Module 5: context_injection.py — Runtime Context Injection\n(Unchanged from PROPOSAL-1)\n\n### File Tree\n(Unchanged from PROPOSAL-1)\n\n### Dependencies\n```toml\n[project.optional-dependencies]\ndev = [\"pytest\u003e=8.0\", \"pytest-asyncio\u003e=0.24\", \"jinja2\u003e=3.1\"]\n```\n\n## Vertical Slice Decomposition\n\n### SLICE-1: Schema Parser + Type Expansion (Foundation)\nFiles: schema_parser.py, types.py (expanded), test_schema_parser.py, test_aura_types.py\nDepends on: nothing\nWorker model: sonnet\n\n### SLICE-2: Schema.xml Generator (Python → XML)\nFiles: gen_schema.py, test_gen_schema.py, test_schema_types_sync.py (updated)\nDepends on: SLICE-1\nWorker model: sonnet\n\n### SLICE-3: SKILL.md Generator (Python → SKILL.md)\nFiles: gen_skills.py, skills/templates/*.j2, test_gen_skills.py\nDepends on: SLICE-1\nWorker model: sonnet\n\n### SLICE-4: Runtime Context Injection\nFiles: context_injection.py, test_context_injection.py, state_machine.py (hook)\nDepends on: SLICE-1\nWorker model: sonnet\n\n## Validation Checklist\n- [ ] Schema parser extracts all 12 phases with substeps and transitions\n- [ ] Schema parser extracts all 5 roles with invariants and standing teams\n- [ ] Schema parser extracts all 35 commands with role-ref, phase-refs, creates-labels\n- [ ] Schema parser extracts all 23 constraints with Given/When/Then/Should\n- [ ] Schema parser extracts all 6 handoffs with required fields\n- [ ] Schema parser extracts all 21 labels with phase-ref, substep-ref\n- [ ] Schema parser extracts all 3 review axes with key questions\n- [ ] Schema parser raises SchemaParseError on malformed input (3+ error-path tests)\n- [ ] New spec types (RoleSpec, CommandSpec, etc.) are frozen dataclasses\n- [ ] ROLE_SPECS, COMMAND_SPECS, LABEL_SPECS, REVIEW_AXIS_SPECS canonical dicts populated\n- [ ] ProcedureStep type defined; PROCEDURE_STEPS dict empty with TODO\n- [ ] gen_schema.py produces valid schema.xml (passes validate_schema.py)\n- [ ] Round-trip test: field-by-field comparison (not count-only)\n- [ ] gen_skills.py generates all 38 SKILL.md files with correct content\n- [ ] gen_skills.py preserves hand-written body below marker\n- [ ] gen_skills.py raises MarkerError on malformed markers\n- [ ] gen_skills.py handles new files (no markers) correctly\n- [ ] Jinja2 templates render with StrictUndefined without errors (parametrized)\n- [ ] get_role_context returns correct constraints/phases/commands per role\n- [ ] get_role_context does NOT include irrelevant constraints\n- [ ] get_phase_context returns correct constraints/labels/transitions per phase\n- [ ] get_phase_context does NOT include irrelevant constraints\n- [ ] End-to-end pipeline test: parse → gen_schema → validate → gen_skills\n- [ ] test_schema_types_sync.py covers all new canonical dicts\n- [ ] Existing 554 tests pass (no regressions)\n\n## BDD Acceptance Criteria\n\n### AC1: Schema Parser Bootstrap\n**Given** schema.xml (1,314 lines) **when** parse_schema() is called **then** returns SchemaSpec with 12 phases, 5 roles, 35 commands, 23 constraints, 6 handoffs, 21 labels, 3 review axes **should not** silently skip entities or lose attributes\n\n### AC1a: Schema Parser Error Paths\n**Given** malformed XML (truncated, missing \u003cphases\u003e, missing required attributes) **when** parse_schema() is called **then** raises SchemaParseError with descriptive message **should not** return partial SchemaSpec or silently succeed\n\n### AC2: Python as Source of Truth\n**Given** types.py with expanded specs **when** gen_schema.py runs **then** produces schema.xml that passes validate_schema.py with 0 errors **should not** require manual XML editing\n\n### AC3: Round-Trip Consistency (Field-Level)\n**Given** Python types.py **when** generating schema.xml then parsing it back **then** every entity matches field-by-field: ConstraintSpec.given/when/then/should_not, HandoffSpec.required_fields, SubstepSpec.startup_sequence, etc. **should not** pass on count-only match with truncated fields\n\n### AC4: SKILL.md Generation with Markers\n**Given** a role SKILL.md with markers and hand-written body **when** gen_skills.py runs **then** header between markers is updated, body is preserved **should not** overwrite hand-written content\n\n### AC4a: SKILL.md Marker Edge Cases\n**Given** a SKILL.md with missing END marker **when** gen_skills.py runs **then** raises MarkerError. **Given** a new file with no markers **when** gen_skills.py runs **then** generates full content. **Given** reversed markers **when** gen_skills.py runs **then** raises MarkerError. **Should not** silently discard manual body on any boundary error.\n\n### AC5: Role Context Injection\n**Given** role=SUPERVISOR **when** get_role_context is called **then** returns phases p7-p12, relevant constraints (C-supervisor-no-impl, C-supervisor-explore-team, etc.), supervisor commands, and handoff specs **should not** include constraints for unrelated roles\n\n### AC5a: Role Context Absence\n**Given** role=SUPERVISOR **when** get_role_context is called **then** does NOT include C-worker-gates in constraints. **Given** role=WORKER **then** does NOT include C-supervisor-no-impl. **Should not** return the entire CONSTRAINT_SPECS dict.\n\n### AC6: Phase Context Injection\n**Given** phase=P10_CODE_REVIEW **when** get_phase_context is called **then** returns C-severity-eager, C-review-consensus, C-blocker-dual-parent, review axis specs, severity labels **should not** include constraints for unrelated phases\n\n### AC6a: Phase Context Absence\n**Given** phase=P4_REVIEW **when** get_phase_context is called **then** does NOT include C-severity-eager (code review only). **Given** phase=P9_SLICE **then** does NOT include C-review-consensus. **Should not** return all constraints regardless of phase.\n\n### AC7: No Regressions\n**Given** expanded types.py and new modules **when** running full test suite **then** all 554 existing tests pass **should not** break state_machine, constraints, workflow, or interfaces\n\n### AC8: Jinja2 Template Quality (Parametrized)\n**Given** each of 4 role templates (architect, supervisor, worker, reviewer) **when** rendered with StrictUndefined using real Python specs **then** produces valid markdown with no undefined variable errors **should not** fail for any role\n\n### AC9: Expanded Type Coverage\n**Given** all new spec types and canonical dicts **when** tested **then** enum coverage 100%, ROLE_SPECS has 5 entries, COMMAND_SPECS has 35, LABEL_SPECS has 21, REVIEW_AXIS_SPECS has 3, and test_schema_types_sync.py validates all new dicts against schema.xml **should not** have untested dicts\n\n### AC10: End-to-End Pipeline\n**Given** schema.xml as input **when** running parse_schema → populate types → gen_schema → validate_schema → gen_skills pipeline **then** all stages succeed, generated schema.xml is valid, generated SKILL.md files are well-formed **should not** have intermediate failures masked by later stages","design":"{\"validation_checklist\":[\"Parser extracts 12 phases, 5 roles, 35 commands, 23 constraints, 6 handoffs, 21 labels, 3 axes\",\"Parser raises SchemaParseError on malformed input\",\"Round-trip is field-by-field (not count-only)\",\"gen_skills.py raises MarkerError on malformed markers\",\"Context injection asserts absence of irrelevant items\",\"End-to-end pipeline test\",\"554 existing tests pass\"],\"acceptance_criteria\":[{\"given\":\"schema.xml\",\"when\":\"parse_schema()\",\"then\":\"SchemaSpec with correct entity counts\"},{\"given\":\"malformed XML\",\"when\":\"parse_schema()\",\"then\":\"raises SchemaParseError\"},{\"given\":\"Python types\",\"when\":\"gen_schema then parse back\",\"then\":\"field-by-field match\"},{\"given\":\"SKILL.md with markers\",\"when\":\"gen_skills()\",\"then\":\"header updated, body preserved\"},{\"given\":\"malformed markers\",\"when\":\"gen_skills()\",\"then\":\"raises MarkerError\"},{\"given\":\"role=SUPERVISOR\",\"when\":\"get_role_context()\",\"then\":\"p7-p12 phases, excludes C-worker-gates\"},{\"given\":\"full pipeline\",\"when\":\"parse→gen_schema→validate→gen_skills\",\"then\":\"all stages succeed\"}],\"tradeoffs\":[{\"decision\":\"ProcedureStep deferred from MVP\",\"rationale\":\"No XML representation exists; populate after generation pipeline proves out\"},{\"decision\":\"Field-level round-trip vs count-only\",\"rationale\":\"Count-only passes with truncated fields; field-level catches data loss\"},{\"decision\":\"MarkerError on malformed markers\",\"rationale\":\"Silent discard destroys 38 files of hand-written content\"}]}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-v01u","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-2: Schema-driven protocol engine v2 — Python SoT with code generation and runtime injection (revised)","updated_at":"2026-02-26T07:22:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4bacb3d7573ae41edf13015bac64b9ef2050dda885b02f687744e63da5f6f7dd","created_at":"2026-02-27T06:57:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slices: aura-plugins-s7dj, aura-plugins-8lfp, aura-plugins-vf9l, aura-plugins-karq, aura-plugins-wsys\n  impl_plan: aura-plugins-vjsk\n  urd: aura-plugins-7vtb\n  proposal: aura-plugins-r75e\n---\nReviewer B — Test quality axis. Round 1.\n\nScope: All 5 slices of the aurad rename + aura-msg stub + protocol improvements epic.\n\nQuality gates run: PYTHONPATH=scripts .venv/bin/pytest tests/ --tb=short -q\nResult: 1260 passed, 25 skipped, 0 failures ✓\n\nVOTE: ACCEPT — Test quality is high across all 5 slices. All AC criteria covered with clean DI patterns, no mocking framework, correct fixture isolation. One MINOR convention divergence in test_aura_msg.py (see severity tree).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-v1ak","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"ALL-SLICES-REVIEW-B-1: aurad rename + aura-msg stub + protocol improvements","updated_at":"2026-02-27T06:57:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:10Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:29Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-2 (state_machine.py) minor-level findings.\n\n## Finding: TestDependencyInjection uses __import__ inline — prefer a direct import at top of test (MINOR)\n\nIn test_state_machine.py TestDependencyInjection.test_custom_specs_used, the Domain type is imported via:\n    domain=__import__('aura_protocol.types', fromlist=['Domain']).Domain.USER\n\nThis is unconventional and obscures the dependency. A clean import at the top of the test or inside the test method (from aura_protocol.types import Domain) is clearer and follows the codebase's import style.\n\n## Finding: _advance_to helper is duplicated between test_state_machine.py and test_workflow.py (MINOR)\n\nThe _advance_to helper function with its _FORWARD list and gate-satisfaction logic is copy-pasted identically in both test files. A shared conftest.py fixture would eliminate this duplication and ensure both test files stay synchronized when the phase sequence changes. This is a test maintainability concern (not a correctness issue since both copies are currently identical).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-v1b","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 MINOR","updated_at":"2026-02-22T17:24:10Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"045b8a52b0b9f1ee72ea992ef5eb3bc3f8d868f33027ca58a50d2a8540174445","created_at":"2026-02-22T12:57:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: scripts/aura_protocol/workflow.py, lines 82-89 (EpochResult docstring) and line 320 (transition_count assignment)\n\nEpochResult.transition_count is documented as:\n    transition_count: total number of phase transitions made\n\nBut the value is computed as:\n    transition_count=len(self._sm.state.transition_history)\n\nSince SLICE-4 now appends failed TransitionRecord entries to transition_history (with condition_met='FAILED: {error}'), the count includes both successful transitions AND failed attempts. A completed epoch with N phases advanced and K failed attempts will report transition_count = N + K.\n\nThis directly contradicts the docstring ('transitions made' implies only successful phase changes), and will produce incorrect totals visible to any caller that reads EpochResult.transition_count.\n\nThe test test_full_forward_path_completes verifies len(transition_history) == 12 for the pure state machine, which is correct. But the EpochResult produced by the workflow for the same 12-phase path with any failed signals in between will report \u003e12.\n\nOptions:\nA) Update the docstring to say 'total number of transition records (including failed attempts)' — honest about what it counts.\nB) Compute transition_count as: len([r for r in history if not r.condition_met.startswith('FAILED:')])  — counts only successful transitions.\nC) Add a separate failed_transition_count field and keep transition_count for successes only.\n\nOption A is lowest-risk (no behavior change, just document accurately). Option B or C gives callers precise metrics without docstring ambiguity.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-v3kr","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4: EpochResult.transition_count includes failed transition records, contradicting its docstring","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6cd7b9395610a800e1749144b4f228caea03860651ef25182c739012aaadc872","created_at":"2026-02-23T04:24:50Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"The module docstring for scripts/aura_protocol/types.py (line 6) still says 'Source of truth: skills/protocol/schema.xml'. After the v2 implementation, Python types.py IS the source of truth and schema.xml is a generated export. The docstring is now misleading and contradicts the core premise of the v2 system (R2 from URD: 'Python types become the authoritative definitions'). Should read 'Source of truth: types.py (Python is SoT; schema.xml is generated from this module)'.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-v46a","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1: types.py module docstring says 'Source of truth: skills/protocol/schema.xml' — now inverted","updated_at":"2026-02-23T12:46:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:38:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f1ef48e474026f35305f84b64a749a487bea17904e07755f87ab8a4fc2237db1","created_at":"2026-02-25T22:38:52Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings for SLICE-3 from Test Quality axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-v53w","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 MINOR","updated_at":"2026-02-25T22:38:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:44:02Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ea44366efd03aa74452789eca38bbfe72064130f3f622ed80914087bc71f5f73","created_at":"2026-02-26T08:39:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  impl_plan: aura-plugins-uvfm\n---\n## Scope\nAdd new test to tests/test_gen_skills.py asserting rendered output format.\n\nWhen generate_skill(RoleId.SUPERVISOR, skill_path, template_dir=TEMPLATE_DIR, diff=False, write=False) is called:\n- Assert returned string contains backtick pattern: `...` \n- Assert returned string contains em-dash italic pattern: — _..._\n\nThese verify that ProcedureStep.command is rendered with backticks and .context with em-dash+italic.\nDo NOT inspect template source code or Jinja2 AST — only check the returned string.\n\n## Files\n- tests/test_gen_skills.py\n\n## Acceptance\nAC-B2-1: backtick and em-dash italic patterns appear in generate_skill() output.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-v768","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-L3: B2 — backtick/em-dash rendering assertion in test_gen_skills.py","updated_at":"2026-02-26T08:44:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:41Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ce50d07cccd0c0a2502711eddc9d5602460f7eccf9a177d60368cb81359cd81d","created_at":"2026-02-26T03:31:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  reviewer: cartographer-c\n  round: 1\n---\nIMPORTANT findings from Cartographer C (Elegance) on SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-v7fe","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-26T03:31:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:45:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e68a71916ecf3de79f28347ae842789ccf0dd87df7d5cbd9574e7382be0fa8db","created_at":"2026-02-25T22:45:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings. Elegance axis, round 2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-vabh","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-2 MINOR","updated_at":"2026-02-25T22:45:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0c350273490336a14df84f4279cb9573f786081c29f587623658089c43eed000","created_at":"2026-02-26T15:15:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  urd: aura-plugins-2ojv\n  supersedes: aura-plugins-x2p6\n---\n\n# PROPOSAL-10: Aura Protocol v3 Temporal Engine\n\nSupersedes PROPOSAL-9 (aura-plugins-x2p6). Minimal targeted fixes: C-1 MUST FIX + 2 SHOULD FIX items.\n\n---\n\n## FIX-1 (C-1 MUST FIX): ReviewVoteSignal.axis: ReviewAxis\n\n### Problem\nPROPOSAL-9 FIX-4 introduced `_votes: dict[ReviewAxis, VoteType]` in ReviewPhaseWorkflow but left `ReviewVoteSignal.axis: str`. The assignment `self._votes[signal.axis] = signal.vote` is a type error: `str` is not assignable to `ReviewAxis` as a typed dict key. This is a self-introduced type incoherence within the same proposal.\n\n### Fix\nUpdate ReviewVoteSignal (existing definition in workflow.py, lines 113-124):\n\n```python\n@dataclass(frozen=True)\nclass ReviewVoteSignal:\n    axis: ReviewAxis   # was: str\n    vote: VoteType\n    reviewer_id: str\n```\n\nReviewAxis already exists in types.py (lines 106-114) with members A, B, C. Since ReviewAxis is a StrEnum, existing callers passing raw strings ('A', 'B', 'C') continue to work at runtime. Tests should be updated to use ReviewAxis.A etc. for type correctness.\n\nEpochStateMachine.record_vote(axis: str, ...) currently uses str. After this change, the correct approach is to accept both during migration: axis: ReviewAxis | str. Since ReviewAxis is a StrEnum, a ReviewAxis value passes isinstance(v, str) — no runtime breakage.\n\n---\n\n## FIX-2 (C-1 SHOULD FIX): tool_call_id: str | None = None\n\n### Problem\nPROPOSAL-9 FIX-7 proposed `tool_call_id: str = ''`. Empty string is semantically ambiguous: in MCP protocol, tool_call_id is a mandatory correlation identifier. An empty string has no natural interpretation as 'absent'. It lies about optionality — the type says str (always present) but the semantics mean 'not provided in v2 records'.\n\n### Fix\n```python\n@dataclass(frozen=True)\nclass ToolCall:\n    \"\"\"MCP-compatible tool call representation.\n\n    v3 changes:\n    - tool_input renamed to raw_input (JSON alias: rawInput)\n    - tool_output renamed to raw_output (JSON alias: rawOutput)\n    - tool_call_id added (JSON alias: toolCallId); None for v2-origin records\n    \"\"\"\n    tool_name: str\n    raw_input: dict[str, Any]               # was: tool_input\n    raw_output: dict[str, Any] | None = None  # was: tool_output\n    tool_call_id: str | None = None         # new in v3; None for v2-origin records\n```\n\n`None` is the standard Python sentinel for 'absent optional identifier'. Callers can check `if tool_call.tool_call_id:` cleanly; serialization produces null in JSON (not '').\n\n---\n\n## FIX-3 (C-1 SHOULD FIX): AuditTrail.query_events epoch_id optionality — documented design decision\n\n### Problem\n`AuditTrail.query_events` makes `epoch_id: str | None = None` (optional), but the `query_audit_events` activity wrapper makes `epoch_id: str` required (non-optional). A consumer using the Protocol directly can issue cross-epoch queries that the activity disallows. This optionality mismatch is a learnable API confusion.\n\n### Decision\nKeep `epoch_id` optional in the Protocol to allow cross-epoch queries as an advanced use case (scripts, admin tooling, tests). The activity wrapper makes it required because workflows always have an epoch_id — they should never issue unbounded cross-epoch queries in a running workflow.\n\nDocument this intent explicitly in the Protocol:\n\n```python\nasync def query_events(\n    self,\n    *,\n    epoch_id: str | None = None,\n    phase: PhaseId | None = None,\n    role: RoleId | None = None,\n) -\u003e list[AuditEvent]:\n    \"\"\"Query recorded audit events with optional filters.\n\n    Args:\n        epoch_id: Optional epoch filter. None = cross-epoch (advanced/admin use only).\n                  Workflows MUST always provide epoch_id via the query_audit_events activity.\n        phase:    Optional phase filter.\n        role:     Optional role filter.\n    \"\"\"\n```\n\n---\n\n## Everything else unchanged from PROPOSAL-9\n\n- PhaseInput: epoch_id: str, phase_id: PhaseId (PhaseSpec reconstructed in child from PHASE_SPECS)\n- PhaseResult: phase_id: PhaseId, success: bool, blocker_count: int = 0, vote_result: VoteType | None = None\n- AuditActivities class-based DI (trail injected at worker startup)\n- workflow.execute_activity_method() for class-method activities\n- ChildWorkflowHandle retained; child_handle.signal() guarded with try/except ApplicationError\n- workflow.wait(handles) for parallel P9_SLICE — asyncio.gather PROHIBITED\n- ReviewAxis(StrEnum) members A/B/C used in _votes and wait_condition\n- Class-level @workflow.signal decorators in child workflows\n- _REVISE_DRIVES_BACK_PHASES (private, grammar fixed, _PHASES suffix)\n- AuditTrail.query_events keeps phase parameter name (matches AuditEvent.phase)\n- ApplicationError(non_retryable=True) for permanent audit backend failures\n- FileWithUri(uri, name, mime_type), FilePart.file_with_uri: FileWithUri\n- NullTranscriptRecorder + NullSecurityGate (R12 stub labels)\n- No agent-client-protocol dependency\n- 5 slices; Infrastructure bin/worker.py + nix/temporal-service.nix + NixOS systemd module\n- Test baseline: 945 existing tests\n\n## Decision log (incremental from PROPOSAL-9)\n\nD11: ReviewVoteSignal.axis: ReviewAxis — typed at the signal boundary. StrEnum compatibility preserves runtime callers.\nD12: tool_call_id: str | None = None — None is the standard Python sentinel for optional identifiers, not empty string.\nD13: AuditTrail.query_events epoch_id remains optional in Protocol (cross-epoch admin use); activity wrapper makes it required (workflow context always has epoch_id).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-vbrj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"SUPERSEDED by PROPOSAL-11 (aura-plugins-6zbz). UAT revisions: SerializablePhaseSpec, module-level AuditTrail singleton, fail-fast P9_SLICE.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-10: v3 Temporal engine — ReviewVoteSignal.axis enum + tool_call_id None default + epoch_id alignment","updated_at":"2026-02-26T15:26:06Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"30a545b2230f6f5c349ce9c1c62a065b62e51bc65453eb518d318e3b306d6a6a","created_at":"2026-02-27T06:53:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slices: [aura-plugins-s7dj, aura-plugins-8lfp, aura-plugins-vf9l, aura-plugins-karq, aura-plugins-wsys]\n  urd: aura-plugins-7vtb\n  proposal: aura-plugins-r75e\n---\nReviewer C (Elegance axis) — Round 1\n\nCovering all 5 slices:\n- SLICE-1 (s7dj): Rename worker→aurad + packaging + SQLite XDG\n- SLICE-2 (8lfp): aurad systemd service + aura-msg stub\n- SLICE-3 (vf9l): Doc restructure\n- SLICE-4 (karq): Workflow signals + ReviewAxis type fix\n- SLICE-5 (wsys): Constraint violation fixtures\n\nVOTE: REVISE — IMPORTANT documentation gaps in temporal-service.nix (stale dbPath description, DRY violation in ExecStart args) and in docs (aurad.md systemd section missing aurad-service, stale roadmap, architecture.md cross-slice gap from SLICE-4 additions).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-vd4m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"REVIEW-C-1: aurad rename + aura-msg stub + protocol improvements","updated_at":"2026-02-27T06:53:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-3","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:45:48Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4a1163146d545a39836e022399022ebf39a5fde33e45b4cd4474931b1afac525","created_at":"2026-02-27T06:25:34Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-vjsk\n  urd: aura-plugins-7vtb\n  depends_on_slice: aura-plugins-s7dj\n---\n## Specification\nSplit docs/worker.md into 3 files. Add roadmap with full R12 stub descriptions.\n\n## Content Mapping\n- docs/worker.md Architecture Overview → docs/architecture.md (+ roadmap section)\n- docs/worker.md Developer Guide + Operator Guide → docs/aurad.md (update all refs to aurad)\n- NEW content → docs/aura-msg.md (stub docs, planned commands, hook integration vision)\n- docs/worker.md → DELETE after content migrated\n\n## Files Owned (exclusive)\n- docs/worker.md (DELETE)\n- docs/architecture.md (NEW)\n- docs/aurad.md (NEW)\n- docs/aura-msg.md (NEW)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-vf9l","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Implementation complete. docs/worker.md split into docs/architecture.md + docs/aurad.md + docs/aura-msg.md. Roadmap sections added for R12 stubs (SliceWorkflow, NullTranscriptRecorder, NullSecurityGate, record_transition v2, aura-msg subcommands). All 866 tests pass. Merged to epic/aura-plugins-eocq.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3: Doc restructure (architecture.md + aurad.md + aura-msg.md)","updated_at":"2026-02-27T06:45:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-2","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b7f4b325e2c6bf553413b32f988dc3037002f8195dab2b5955874e1d6856dd7d","created_at":"2026-02-26T15:32:17Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-9qpq\n  urd: aura-plugins-2ojv\n  proposal: aura-plugins-6zbz\n---\n## Specification\nInterface and A2A type changes per PROPOSAL-11 and URD R7/R12/R14:\n\n1. FileWithUri(uri: str, name: str | None = None, mime_type: str | None = None) — new frozen dataclass\n2. FilePart.file_uri → FilePart.file_with_uri: FileWithUri (breaking rename, update all call sites)\n3. ToolCall field renames: raw_input, raw_output, tool_call_id: str | None = None \n   - JSON camelCase aliases per R14: toolName, rawInput, rawOutput, toolCallId\n4. ReviewAxis(StrEnum) — new enum for review vote axes (correctness, test_quality, elegance)\n5. ReviewVoteSignal.axis: str → ReviewVoteSignal.axis: ReviewAxis\n6. NullTranscriptRecorder — stub implementation with R12 structured label\n7. NullSecurityGate — stub implementation with R12 structured label\n8. _REVISE_DRIVES_BACK_PHASES rename (was _REVISE_DRIVES_BACK)\n\n## Files Owned\n- scripts/aura_protocol/interfaces.py (FileWithUri, FilePart, NullTranscriptRecorder, NullSecurityGate)\n- scripts/aura_protocol/types.py (ReviewAxis enum, ToolCall renames, _REVISE_DRIVES_BACK_PHASES)\n- scripts/aura_protocol/state_machine.py (update _REVISE_DRIVES_BACK references)\n- scripts/aura_protocol/workflow.py (update ReviewVoteSignal usage if needed)\n\n## Integration Points\n- IP-2 OWNER: ReviewAxis consumed by SLICE-1 (PhaseResult), SLICE-3 (audit), SLICE-5 (tests)\n- All call sites referencing FilePart.file_uri or old ToolCall fields must be updated\n\n## Validation Checklist\n- [ ] FileWithUri frozen dataclass defined\n- [ ] FilePart.file_with_uri replaces file_uri (all call sites updated)\n- [ ] ToolCall fields renamed with camelCase JSON aliases\n- [ ] ReviewAxis StrEnum defined\n- [ ] ReviewVoteSignal.axis type changed to ReviewAxis\n- [ ] NullTranscriptRecorder with R12 stub label\n- [ ] NullSecurityGate with R12 stub label\n- [ ] _REVISE_DRIVES_BACK_PHASES renamed\n- [ ] Tests written and passing\n- [ ] Existing 945 tests unbroken","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-vhtx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Implementation complete. 885 tests pass on slice branch, 1000 on epic. Merge committed. No TODOs. Real production code path verified.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-2: Interface + A2A types (FileWithUri, ToolCall rename, ReviewAxis, NullStubs)","updated_at":"2026-02-26T18:34:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a34a3c87d10cbb817882fca4bae99ff41d9dfd387bd0569c4b81b1c92adf6bf9","created_at":"2026-02-27T06:24:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-ckg0\n  urd: aura-plugins-7vtb\n  proposal: aura-plugins-r75e\n---\n## Layer Structure (TDD)\n\n### Vertical Slices\n- SLICE-1 (aura-plugins-s7dj): Rename worker→aurad + packaging + SQLite XDG (MUST complete first)\n- SLICE-2 (aura-plugins-8lfp): aurad systemd service + aura-msg stub (depends on SLICE-1 rename)\n- SLICE-3 (aura-plugins-vf9l): Doc restructure — architecture.md + aurad.md + aura-msg.md (depends on SLICE-1 rename)\n- SLICE-4 (aura-plugins-karq): Workflow signals + ReviewAxis type fix (independent)\n- SLICE-5 (aura-plugins-wsys): Constraint violation fixtures (independent)\n\n## Dependency Graph\nSLICE-2, SLICE-3 depend on SLICE-1 (rename must land first).\nSLICE-4, SLICE-5 are independent (can run in parallel with SLICE-1).\n\n## Integration Points\n1. SLICE-1 → SLICE-2: bin/aurad.py name and temporal-service.nix changes shared\n2. SLICE-1 → SLICE-3: Renamed binary/doc paths consumed by doc restructure\n3. SLICE-4 (workflow.py types) consumed by SLICE-2 (aurad registers workflows)\n4. SLICE-5 (fixtures) consumes CONSTRAINT_SPECS from aura_protocol.types (no cross-slice code changes)\n\n## Leaf Tasks\n### SLICE-1 (aura-plugins-s7dj)\n- aura-plugins-47zo: SLICE-1-L1 — Rename bin/worker.py→bin/aurad.py + flake.nix packaging + temporal-service.nix SQLite XDG\n- aura-plugins-fkou: SLICE-1-L2 — Tests for renamed paths + SQLite XDG resolution\n\n### SLICE-2 (aura-plugins-8lfp)\n- aura-plugins-rtxo: SLICE-2-L1 — nix/aurad-service.nix + bin/aura-msg.py stub\n- aura-plugins-soqj: SLICE-2-L2 — Tests for aurad service + aura-msg --help\n\n### SLICE-3 (aura-plugins-vf9l)\n- aura-plugins-1hfn: SLICE-3-L1 — Doc restructure (architecture.md + aurad.md + aura-msg.md + roadmap)\n\n### SLICE-4 (aura-plugins-karq)\n- aura-plugins-9s8h: SLICE-4-L1 — Types for SliceProgressSignal + ReviewAxis vote key\n- aura-plugins-kg8l: SLICE-4-L2 — Tests for signal handling + vote type\n- aura-plugins-kixh: SLICE-4-L3 — Implementation of signal + vote type changes\n\n### SLICE-5 (aura-plugins-wsys)\n- aura-plugins-dx0e: SLICE-5-L1 — ConstraintViolationTestCase + YAML axis schema\n- aura-plugins-qjv4: SLICE-5-L2 — Parametrized constraint tests\n- aura-plugins-ctma: SLICE-5-L3 — fixture_loader generator + protocol.yaml data","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-vjsk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"IMPL_PLAN: aurad rename + aura-msg stub + protocol improvements","updated_at":"2026-02-27T06:28:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:19:14Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"805a417779a415c4777ccf57952413174aab0009def11d7a7f7c83d4fdf8223a","created_at":"2026-02-26T08:05:48Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i142\n  impl_plan: aura-plugins-147m\n---\n## Scope\nImplement all PluginRegistry methods to make TestPluginRegistry pass.\n\n## Methods\n- load(cls, registry_path=None) -\u003e PluginRegistry | None\n- save(self, registry_path=None, *, dry_run=False) -\u003e None\n- find_plugin(self, name, cwd) -\u003e tuple[PluginEntry, MarketplaceEntry] | None\n- with_plugin_added(self, plugin, marketplace_path) -\u003e PluginRegistry\n- with_plugin_removed(self, name) -\u003e PluginRegistry\n\n## File\n- bin/aura-release (PluginRegistry class body)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-vlq9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-L3: Impl — PluginRegistry.load/save/find_plugin/with_plugin_added/removed","updated_at":"2026-02-26T08:19:14Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a855df53019f33a70ec1706a5671cdacca86da443494606334a98ff7dfd47c89","created_at":"2026-02-23T04:24:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer A on SLICE-4. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-vlxn","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 MINOR","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:48:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1901d56fd70bafb25159a2b72908e84ecb22cec75fa3f539fb604d3fb38f202b","created_at":"2026-02-25T22:48:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings for SLICE-1 Round 3 (Test Quality axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-vqcy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-3 BLOCKER","updated_at":"2026-02-25T22:48:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1e823f01485d13914ee0c7afc6c446d4f670b5e0a9c22660fd57380628efe3f1","created_at":"2026-02-25T22:37:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"PROCESS.md cycle exit conditions table (PROCESS.md:659-663) missing 2 of 4 rows compared to supervisor/SKILL.md:298-303. Missing: (1) 'BLOCKERs or IMPORTANT remain, cycles \u003c 3 → Workers fix, Cartographers re-review' and (2) '3 cycles exhausted, BLOCKERs remain → STOP, escalate to user'. The supervisor SKILL.md has the complete table. PROCESS.md is supposed to be single source of truth — it should have the complete decision tree.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-vqur","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-25T22:37:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"27b0a3a019bfd4f27af8862a95365f5e6c1751b7d1f8fd9f4d6be4c94149962e","created_at":"2026-02-26T15:02:12Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  urd: aura-plugins-2ojv\n  supersedes: aura-plugins-c9xw\n---\n\n# PROPOSAL-8: Aura Protocol v3 Temporal Engine\n\nSupersedes PROPOSAL-7 (aura-plugins-c9xw). Addresses all MUST FIX items from Round 1 (A-1, B-1) and all SHOULD FIX items (B-1, C-1).\n\n---\n\n## FIX-1 (A-1 + B-1 MUST FIX): Class-based AuditActivities with dependency injection\n\n### Problem\nPROPOSAL-7 proposed `query_audit_events(trail: AuditTrail, ...)` as a free function activity. Temporal serializes ALL activity arguments via JSON DataConverter. `AuditTrail` is a `@runtime_checkable Protocol` — it has no JSON representation and cannot be deserialized on the worker side. Confirmed via Temporal SDK `worker/_activity.py` lines 551-564 and `converter.py value_to_type`.\n\nActivityEnvironment (used in tests) bypasses serialization — this bug would not be caught by existing test infrastructure.\n\n### Fix\nUse the standard Temporal DI pattern: class-based activity with the dependency injected via `__init__`. Only serializable types (str, StrEnum, None) cross the serialization boundary.\n\n```python\n# scripts/aura_protocol/audit_activities.py\n\nclass AuditActivities:\n    \"\"\"Class-based Temporal activity holder for AuditTrail operations.\n\n    The AuditTrail implementation is injected at worker startup via __init__.\n    Only serializable arguments (epoch_id, phase_id) flow through Temporal's\n    DataConverter — the trail instance never crosses the serialization boundary.\n    \"\"\"\n\n    def __init__(self, trail: AuditTrail) -\u003e None:\n        self._trail = trail\n\n    @activity.defn\n    async def query_audit_events(\n        self,\n        epoch_id: str,\n        phase_id: PhaseId | None = None,\n    ) -\u003e list[AuditEvent]:\n        \"\"\"Query audit events for an epoch. ACTIVITY-ONLY — do not call from workflow context.\"\"\"\n        return await self._trail.query_events(epoch_id=epoch_id, phase_id=phase_id)\n```\n\nWorker registration:\n```python\naudit = AuditActivities(trail=InMemoryAuditTrail())\nworker = Worker(client, task_queue='aura', activities=[audit.query_audit_events])\n```\n\nWorkflow call:\n```python\nresult = await workflow.execute_activity(\n    AuditActivities.query_audit_events,\n    args=[self._epoch_id, PhaseId.P4_REVIEW],\n    schedule_to_close_timeout=timedelta(seconds=30),\n)\n```\n\n---\n\n## FIX-2 (A-1 + C-1 MUST FIX): Update AuditTrail.query_events interface\n\n### Problem\nPROPOSAL-7 called `trail.query_events(epoch_id=epoch_id, phase_id=phase_id)` but the existing `AuditTrail.query_events` signature is `query_events(*, phase: PhaseId | None, role: RoleId | None)`. Neither `epoch_id` nor `phase_id` are valid kwargs — this is a TypeError at call time.\n\n### Fix\nUpdate the `AuditTrail` Protocol to match the needed call signature. Rename `phase` → `phase_id` for consistency with `PhaseInput.phase_id` and add `epoch_id`:\n\n```python\n# scripts/aura_protocol/interfaces.py (AuditTrail update)\n\nasync def query_events(\n    self,\n    *,\n    epoch_id: str | None = None,\n    phase_id: PhaseId | None = None,\n    role: RoleId | None = None,\n) -\u003e list[AuditEvent]:\n    \"\"\"Query recorded audit events with optional filters.\n\n    Args:\n        epoch_id: Optional epoch filter — only return events for this epoch.\n        phase_id: Optional phase filter — only return events from this phase.\n        role:     Optional role filter — only return events from this role.\n    \"\"\"\n    ...\n```\n\n**Breaking change scope:** `AuditTrail.query_events` parameter rename (`phase` → `phase_id`). In v3 this is a new interface — no external callers exist yet. Existing tests in test_interfaces.py that use `query_events(phase=...)` must be updated to `query_events(phase_id=...)`.\n\n---\n\n## FIX-3 (B-1 MUST FIX): ChildWorkflowHandle retained for signal routing\n\n### Problem\nPROPOSAL-7 routed signals to child workflows via `workflow.get_external_workflow_handle(child_id).signal()`. This raises `WorkflowNotFoundError` if the child has already completed — a race condition that would fail the parent workflow silently.\n\n### Fix\nRetain the `ChildWorkflowHandle` from `start_child_workflow`. This handle knows the child's completion state and provides typed signal routing without re-lookup:\n\n```python\n# In EpochWorkflow.run():\nchild_handle: ChildWorkflowHandle[PhaseResult] = await workflow.start_child_workflow(\n    ReviewPhaseWorkflow.run,\n    PhaseInput(epoch_id=self._epoch_id, phase_id=PhaseId.P4_REVIEW),\n    id=f'{self._epoch_id}-p4',\n)\n\n# Route a vote signal to the child:\nawait child_handle.signal(ReviewPhaseWorkflow.submit_vote, vote_signal)\n\n# Await completion (blocking join — parent suspends until child returns PhaseResult):\nresult: PhaseResult = await child_handle\n```\n\n**Child workflow join semantics (explicit):**\n- `start_child_workflow` registers the child and returns a handle immediately (non-blocking).\n- `await child_handle` is the blocking join — parent suspends here until child workflow completes and returns `PhaseResult`.\n- Child independently registers signal handlers (via class-level `@workflow.signal` decorators — see FIX-4) and awaits via `wait_condition` predicate.\n- Signaling a completed child raises `ChildWorkflowError` from the handle; wrap in try/except if votes can arrive after child completes.\n\n---\n\n## FIX-4 (A-1 SHOULD FIX): Class-level @workflow.signal for signal buffering\n\nChild workflows (ReviewPhaseWorkflow, SliceWorkflow) MUST use class-level `@workflow.signal` decorators — NOT imperative handler registration inside `run()`.\n\n```python\nclass ReviewPhaseWorkflow:\n    def __init__(self) -\u003e None:\n        self._votes: dict[str, VoteType] = {}\n\n    @workflow.signal\n    def submit_vote(self, signal: ReviewVoteSignal) -\u003e None:\n        self._votes[signal.axis] = signal.vote\n\n    @workflow.run\n    async def run(self, input: PhaseInput) -\u003e PhaseResult:\n        # wait_condition: predicate gate — NOT a queue drain\n        await workflow.wait_condition(\n            lambda: all(ax in self._votes for ax in ('A', 'B', 'C'))\n        )\n        vote_result = VoteType.ACCEPT if all(\n            v == VoteType.ACCEPT for v in self._votes.values()\n        ) else VoteType.REVISE\n        ...\n```\n\nRationale: Temporal buffers signals sent before the first workflow task executes, but ONLY if the handler is registered at class definition time (via decorator). Imperative handlers miss signals that arrive during startup latency.\n\n---\n\n## FIX-5 (C-1 SHOULD FIX): Public gate constant renamed REVISE_DRIVE_BACK_PHASES\n\nMaking the gate constants public (state_machine.py):\n- `_CONSENSUS_GATED` → `CONSENSUS_GATED`: `frozenset[tuple[PhaseId, PhaseId]]` — set of (from, to) transition pairs requiring reviewer consensus\n- `_BLOCKER_GATED` → `BLOCKER_GATED`: `frozenset[tuple[PhaseId, PhaseId]]` — transition pairs blocked by outstanding BLOCKER findings\n- `_REVISE_DRIVES_BACK` → `REVISE_DRIVE_BACK_PHASES`: `frozenset[PhaseId]` — phases where a REVISE vote causes regression to the previous proposal phase\n\nThe rename `REVISE_DRIVES_BACK → REVISE_DRIVE_BACK_PHASES` communicates the type (set of PhaseId, not transition pairs) to external callers.\n\n---\n\n## FIX-6 (C-1 SHOULD FIX): ToolCall field rename documented as v3 breaking change\n\nIn v3, `ToolCall` fields are renamed to match A2A/ACP camelCase JSON alias conventions (R14):\n\n| v2 field | v3 field | JSON alias |\n|----------|----------|------------|\n| `tool_input` | `raw_input` | `rawInput` |\n| `tool_output` | `raw_output` | `rawOutput` |\n| (new) | `tool_call_id` | `toolCallId` |\n\n**Rationale for `raw_` prefix:** These fields hold untyped `dict[str, Any]` payloads — the `raw_` prefix distinguishes them from typed or processed forms and signals that callers should not make assumptions about their schema.\n\n**v3 migration:** `tool_input` → `raw_input` and `tool_output` → `raw_output` are call-site breaking renames. Existing tests in `test_interfaces.py` lines 369-393 must be updated. This is a deliberate v3 API boundary — no compatibility shim.\n\n```python\n@dataclass(frozen=True)\nclass ToolCall:\n    tool_name: str\n    tool_call_id: str\n    raw_input: dict[str, Any]\n    raw_output: dict[str, Any] | None = None\n```\n\n---\n\n## Unchanged from PROPOSAL-6/7\n\nAll items not addressed above remain unchanged:\n\n- **PhaseInput:** `epoch_id: str`, `phase_id: PhaseId` only (no PhaseSpec). Child workflows reconstruct via `PHASE_SPECS[input.phase_id]`.\n- **PhaseResult:** `phase_id: PhaseId`, `success: bool`, `blocker_count: int = 0`, `vote_result: VoteType | None = None`\n- **FileWithUri:** `uri: str`, `name: str | None`, `mime_type: str | None` (A2A spec v0.3.0, PR #663)\n- **FilePart.file_with_uri:** `FileWithUri` (was: `file_uri: str`). 4 existing tests updated.\n- **NullTranscriptRecorder + NullSecurityGate:** R12 stub labels (motivation + epoch ID + trigger)\n- **EpochStateMachine gate constants:** made public with FIX-5 naming\n- **No agent-client-protocol dependency**\n- **5 slices** (SLICE-3 now covers `AuditActivities` class + `audit_activities.py` module)\n- **Infrastructure:** `bin/worker.py` + `nix/temporal-service.nix` + NixOS systemd user module\n- **Test baseline:** 945 existing tests; SLICE-5 targets no regressions\n\n## Decision log\n\nD1: PhaseInput carries phase_id only. PhaseSpec reconstructed from PHASE_SPECS. Rationale: frozenset not JSON-serializable.\nD2: AuditActivities class-based pattern. Trail never crosses Temporal serialization boundary.\nD3: AuditTrail.query_events updated: epoch_id added, phase→phase_id renamed.\nD4: ChildWorkflowHandle retained from start_child_workflow. No get_external_workflow_handle re-lookup.\nD5: Child workflows use class-level @workflow.signal decorators for signal buffering correctness.\nD6: REVISE_DRIVES_BACK → REVISE_DRIVE_BACK_PHASES (type-communicating name).\nD7: ToolCall v3 rename: raw_input/raw_output/tool_call_id. Breaking change at v3 boundary — no shim.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-vt20","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"SUPERSEDED by PROPOSAL-9. Reason: A-1 MUST FIX (execute_activity_method; child_handle race; ReviewAxis; migration gaps) + B-1 MUST FIX (asyncio.gather prohibition for parallel slices; child signal race) + C-1 SHOULD FIX (query_events phase→phase_id naming; REVISE_DRIVE_BACK_PHASES grammar).","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-8: v3 Temporal engine — AuditActivities DI + ChildWorkflowHandle routing + interface fixes","updated_at":"2026-02-26T15:07:56Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:11Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6d89d21bc05a9eb8d4756dd5a632f5745d1df73e30012ee3112eca9b7b02755d","created_at":"2026-02-22T18:07:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-w115\n  elicit: aura-plugins-9lps\n  original_urd: aura-plugins-umi\n  original_elicit: aura-plugins-gbr\n  original_proposal: aura-plugins-gmv\n  followup_urd: aura-plugins-s6i\n  followup_uat: aura-plugins-t3hl\n  vision_doc_1: ~/dev/agent-data-leverage/david-data-ingestion-typescript-pipeline/initial-collaboration-protocol.md\n  vision_doc_2: ~/dev/agent-data-leverage/david-data-ingestion-typescript-pipeline/nlp-project-proposal.md\n---\n\n## Requirements\n\n### R1: Schema Parser — Full Extraction from schema.xml\nExtend validate_schema.py (or create new module) to extract ALL schema.xml entities into typed Python dataclass instances: phases (with substeps, transitions, TDD layers), roles (with invariants, standing teams, owned phases), commands (with role-ref, phase-ref, creates-labels), constraints (Given/When/Then/Should), handoffs (with required fields), labels (with phase-ref, substep-ref), review axes, task title conventions, dependency model, follow-up lifecycle. Result: a SchemaSpec root container that can be imported as Python.\n\n### R2: Python as Source of Truth\nAfter initial bootstrap (schema.xml → Python), the Python types/specs become the authoritative definitions. schema.xml is GENERATED from Python as a portable export. Editing flow: edit types.py → run gen_schema.py → updated schema.xml. CI verifies round-trip consistency.\n\n### R3: types.py Code Generation (Bootstrap)\nGenerate comprehensive types.py from schema.xml as a one-time bootstrap. Add new spec types: CommandSpec, LabelSpec, ReviewAxisSpec, ProcedureStep. Expand existing PHASE_SPECS, CONSTRAINT_SPECS, HANDOFF_SPECS to include all schema.xml content. After bootstrap, types.py is the source of truth.\n\n### R4: SKILL.md Generation from Python Specs\nGenerate the schema-derived sections of all 38 SKILL.md files from Python specs using Jinja2 templates. Structure: generated header (between markers) + hand-written procedural body. Markers: \u003c!-- BEGIN GENERATED FROM schema --\u003e / \u003c!-- END GENERATED --\u003e. Generator preserves hand-written sections below the marker.\n\n### R5: Procedural Guidance in Python\nMove procedural guidance (currently hand-written in SKILL.md bodies) into Python constants/dataclasses (e.g., ProcedureStep with order, instruction, command, context). Procedures generate into both schema.xml AND SKILL.md. End goal: fully generated SKILL.md files.\n\n### R6: Runtime Constraint Injection\nTwo-level injection:\n- At skill invocation: inject all constraints relevant to the invoked role (baseline)\n- At phase transition: inject constraints relevant to the specific phase (contextual enrichment)\nConstraints are loaded from Python specs (not XML) at runtime.\n\n### R7: schema.xml Export Generation\nGenerate schema.xml FROM Python types/specs as a portable, machine-readable export. Must produce valid XML that passes existing validate_schema.py checks. CI verifies: Python → schema.xml → validate → passes.\n\n## Priorities (User-Stated)\n1. All components selected for MVP (parser, types gen, SKILL.md gen, runtime injection)\n2. Python code becomes source of truth — XML as portable schema\n3. Procedures move to Python, then generate into schema.xml\n4. Hybrid approach: build-time generation + runtime constraint injection\n\n## Design Choices (From Elicitation)\n- Source of truth: Python types.py (NOT schema.xml)\n- Generation direction: Python → schema.xml (export) + Python → SKILL.md (generation)\n- Bootstrap: parse schema.xml once → comprehensive Python specs → Python is SoT going forward\n- SKILL.md structure: generated header (markers) + hand-written body (transitional) → eventually fully generated\n- Constraint injection: both at skill invocation (role-level) AND at phase transition (phase-specific)\n- Procedures: Python constants → generate into schema.xml AND SKILL.md\n- Template engine: Jinja2 (industry standard for prompt generation)\n\n## MVP Goals\n1. Schema parser that extracts full SchemaSpec from schema.xml\n2. Generated types.py with CommandSpec, LabelSpec, ProcedureStep\n3. gen_schema.py: Python → schema.xml round-trip generation\n4. gen_skills.py: Python specs → SKILL.md generated headers\n5. Runtime constraint injection module (role-level + phase-level)\n6. CI: round-trip consistency verification\n7. All existing 554 tests pass (no regressions)\n\n## End-Vision Alignment\nThis is step 2 of the 3-version roadmap defined in the original ELICIT (aura-plugins-gbr):\n- v1 (DONE): Constraint validator + state machine + Temporal workflow\n- v2 (THIS): Schema-driven protocol engine — Python as SoT, runtime injection, SKILL.md generation\n- v3 (FUTURE): Full Temporal workflow engine — phases as workflows, handoffs as signals\n\nThe broader vision (from initial-collaboration-protocol.md): \"the trail of documentation is the entire ENGINE for the project to move forward... this is the definition of an Application Document Interface, to capture the entirety of the development process.\" v2 makes the protocol machine-executable and self-documenting — schema.xml becomes a portable ADI export generated from the authoritative Python definitions.\n\n## Constraints\n- C-backwards: Must not break existing 554 tests\n- C-no-new-deps: Minimize new dependencies (Jinja2 is acceptable; avoid heavy XML generation libs)\n- C-python-only: All code in aura-plugins must be Python (R7 from original URD)\n- C-temporal: Temporal remains the target runtime (Python SDK)\n- C-beads: Beads remains the inter-agent coordination mechanism (transitional)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-w07o","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"URD: Schema-driven protocol engine v2 — Python as source of truth with runtime injection","updated_at":"2026-02-26T07:22:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:23Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e38758e62c49f19eb002f93993ef6e122046d84c7142045a203fe64ad95cb41e","created_at":"2026-02-22T17:49:53Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  original_urd: aura-plugins-umi\n  original_request: aura-plugins-220\n  original_proposal: aura-plugins-gmv\n  v1_followup: aura-plugins-2tj\n---\n\n## Verbatim User Request\n\"Where is the spec for the v2 and v3 refactor for the programmatic multi-agent orchestration workflow? Let's start working on the v2.\"\n\n## Context\nThe v2 scope is defined in URD aura-plugins-umi as R2:\n\u003e Parse schema.xml at agent startup and inject the relevant phase/role/constraint context into the agent's prompt. Single source of truth — eliminates SKILL.md drift. Constraints checked at injection time.\n\nv1 MVP (state machine + Temporal workflow + constraint validators) is complete at v0.4.3. The v1 codebase lives in scripts/aura_protocol/ with 554 tests passing.\n\n## Classification\n- Scope: MEDIUM — extends existing protocol infrastructure with schema.xml parsing + code generation\n- Complexity: MEDIUM-HIGH — requires XML parsing, template generation, constraint injection pipeline\n- Risk: MEDIUM — changes how agent prompts are constructed; drift elimination is high-value but requires careful design\n- Domain novelty: MEDIUM — schema-driven code generation is well-understood, but applying it to agent prompt injection is novel in this context","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-w115","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"REQUEST: Schema.xml runtime context injection (v2) — single source of truth for agent prompt generation","updated_at":"2026-02-26T07:22:23Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:38:03Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"72a4e2933847fcd7e1228cbce9d0f02fded2ba3e3354acde0c5d913654fd699f","created_at":"2026-02-26T08:37:58Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-w1lm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 BLOCKER: Test Quality","updated_at":"2026-02-26T08:38:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:05:52Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T01:32:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-mrm\n  impl_plan: aura-plugins-06g\n---\n## Scope\nWrite test_constraints.py testing AC5 and all C-* constraint checks. Tests import from constraints.py and WILL FAIL until L3.\n\n## Files Owned\n- tests/test_constraints.py\n\n## Acceptance Criteria\nGiven test_constraints.py when run before L3 then tests fail should never pass without real constraint logic","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-w28","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-L2: Tests — test_constraints.py (AC5, all C-* constraints)","updated_at":"2026-02-22T02:05:52Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8d4e020cfd815f8d25a82600666fccf71921a390f9812226ee9042a4af1f72b3","created_at":"2026-02-26T20:50:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Add packages.worker to flake.nix using writeShellApplication. File: flake.nix","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-w5b2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-1-L2: Nix-package worker.py","updated_at":"2026-02-26T21:03:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-5","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2a9cd2a53004be0eb90b2c04724d7559823088984200db2439f1165ce856712d","created_at":"2026-02-26T15:32:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-9qpq\n  urd: aura-plugins-2ojv\n  proposal: aura-plugins-6zbz\n---\n## Specification\nContract tests, P9 fail-fast logic, and release per URD R10/R11 and PROPOSAL-11 UAT-3:\n\n1. Contract tests for all new types (test_aura_types.py additions):\n   - SerializableTransition serialization roundtrip\n   - SerializablePhaseSpec.from_spec() conversion correctness\n   - PhaseInput / PhaseResult frozen + serializable\n   - FileWithUri frozen dataclass\n   - ReviewAxis enum membership\n   - ToolCall field rename verification\n\n2. P9_SLICE fail-fast logic test:\n   - Test workflow.wait(FIRST_EXCEPTION) pattern\n   - Verify pending slices cancelled on first failure\n   - Test happy path (all slices succeed)\n\n3. Test infrastructure update (test_workflow.py):\n   - Update worker registration for new child workflow types (when they exist)\n   - Update activity registration for audit activities\n   - Generalize worker registration fixture\n\n4. Version bump to 0.7.0 in pyproject.toml\n5. CHANGELOG entry for v0.7.0\n\n## Files Owned\n- tests/test_aura_types.py (add contract tests for new types)\n- tests/test_workflow.py (update worker registration, add P9 fail-fast tests)\n- tests/test_audit_activities.py (NEW — tests for audit singleton + activities)\n- pyproject.toml (version bump to 0.7.0)\n- CHANGELOG.md (v0.7.0 entry)\n\n## Integration Points\n- IP-4 OWNER: Imports all new types from SLICE-1, SLICE-2, SLICE-3\n- Depends on SLICE-3 for audit activity imports\n\n## Validation Checklist\n- [ ] Contract tests for SerializableTransition, SerializablePhaseSpec\n- [ ] Contract tests for PhaseInput, PhaseResult\n- [ ] Contract tests for FileWithUri, ReviewAxis, ToolCall renames\n- [ ] P9_SLICE fail-fast test (FIRST_EXCEPTION + cancel pending)\n- [ ] Test worker registration updated\n- [ ] test_audit_activities.py with init_audit_trail + InMemoryAuditTrail tests\n- [ ] Version bumped to 0.7.0\n- [ ] CHANGELOG.md v0.7.0 entry\n- [ ] All 945+ tests passing","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-w5hi","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"1144 tests passing (0 failures). Contract tests + P9 fail-fast + version bump + CHANGELOG all implemented. Merged to epic/aura-plugins-eocq.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-5: Contract tests + P9_SLICE fail-fast + version bump + CHANGELOG","updated_at":"2026-02-26T18:34:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:38:29Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a555243fef378219fda506ef90a1a62848088931bf3c156bab2d624c6ecfb903","created_at":"2026-02-26T08:24:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-qfze\n  followup_urd: aura-plugins-wloc\n  original_urd: aura-plugins-w07o\n  followup_ure: aura-plugins-dt90\n  original_request: aura-plugins-w115\n---\n\n# FOLLOWUP_PROPOSAL-1: Protocol Engine v2 Follow-up\n\n## Problem Space\n\n**Axes:** correctness (silent regression risk), test coverage completeness, code naming clarity\n**Has-a / Is-a:**\n- Group A: Tests *have-a* test isolation problem — the StrictUndefined test creates its own `jinja2.Environment` instead of exercising `gen_skills.py`'s Environment; EPOCH constraints *have-a* coverage gap in `test_context_injection.py`\n- Group B: `ProcedureStep` *has-a* 6-field dataclass (id, order, instruction, command, context, next_state) — existing round-trip and sync tests only assert 3 of 6 fields\n- Group C: `gen_schema.py` *has-a* naming inconsistency — `_ROLE_CONSTRAINTS`/`_PHASE_CONSTRAINTS` shadow `context_injection.py`'s identically-named dicts with inverted semantics\n- Group D: `schema_parser.py` *has-a* silent failure mode (missing `\u003cinstruction\u003e` → empty string instead of error); slug pin tests *are* absent; `next-state` optionality *is* undocumented\n\n**Primary risk:** Group A findings are silent regression risks — the StrictUndefined test passes even if `gen_skills.py` removes `StrictUndefined`. Group B findings mean a regression in `ProcedureStep.command` or `.context` generation would not be caught by the round-trip cycle.\n\n## Scope: All 12 Findings In Scope\n\nGroups A+B are IMPORTANT (all 6 findings must be addressed before close).\nGroups C+D are MINOR (4+3=7 findings; address in FOLLOWUP-SLICE-3 alongside D findings).\n\n---\n\n## Engineering Tradeoffs\n\n| Option | Pros | Cons | Decision |\n|--------|------|------|----------|\n| Group B: test private `_template_env` or internal rendering paths | Easy to write | Violates public-interface constraint; brittle to refactor | REJECTED |\n| Group B: call `generate_skill()` / `parse_schema()` / compare `PROCEDURE_STEPS` directly | Durable, public-interface-only | Slightly more setup | CHOSEN |\n| A1: Create a separate bad-template fixture | Precise isolation | Adds more fixture boilerplate | Acceptable; use minimal fixture |\n| A1: Call `generate_skill()` with a template that references undefined var | Tests gen_skills.py's actual Environment | Requires template manipulation | CHOSEN |\n| C1: Rename using `replace_all` with automated grep check | Safe, complete | Must update all import sites | CHOSEN (all import sites: test_gen_schema.py) |\n| D2: Raise `SchemaParseError` vs. return empty string | Consistent with `_require()` pattern; catches malformed XML | Technically a behavior change | CHOSEN (consistent with existing error handling) |\n\n---\n\n## Slice Decomposition\n\nSlices are vertical: each slice owns its files end-to-end with no shared file ownership.\n\n### FOLLOWUP-SLICE-1: Test Isolation Fixes (A1, A2)\n\n**Files owned:**\n- `tests/test_gen_skills.py` — A1: fix/replace `TestStrictUndefined.test_undefined_variable_raises_undefined_error`\n- `tests/test_context_injection.py` — A2: add parametrized EPOCH Ride the Wave inclusion tests\n\n**What changes:**\n- A1: Remove the existing `TestStrictUndefined.test_undefined_variable_raises_undefined_error` test that creates its own `jinja2.Environment`. Replace with a test that calls `generate_skill()` with a Jinja2 template that references an undefined variable, and asserts `jinja2.UndefinedError` is raised. The template must be injected via a minimal fixture that substitutes the template file — approach: create a temp template file with `{{ undefined_var }}` and pass it via `template_dir`, confirming gen_skills.py's own Environment raises the error.\n- A2: Add a new class `TestEpochRideTheWaveConstraints` in `test_context_injection.py` with 4 parametrized tests, one per Ride the Wave constraint (C-supervisor-cartographers, C-integration-points, C-slice-review-before-close, C-max-review-cycles), asserting each is in `get_role_context(RoleId.EPOCH).constraints` by id.\n\n**Key design constraint for A1:** The replacement test must call `generate_skill()` (the public function), not instantiate `jinja2.Environment` directly. The test confirms that gen_skills.py's Environment raises `UndefinedError` when a template has an undefined variable.\n\n**No source code changes** — tests only.\n\n---\n\n### FOLLOWUP-SLICE-2: ProcedureStep Test Coverage (B1, B2, B3, B4)\n\n**Files owned:**\n- `tests/test_schema_types_sync.py` — B1, B4\n- `tests/test_gen_skills.py` — B2 (new test calling `generate_skill()`)\n- `tests/test_gen_schema.py` — B3 (extend round-trip tests)\n\n**What changes:**\n\n**B1 — test_schema_types_sync.py:**\nAdd assertions for `command` and `context` field values in `TestProcedureStepsMatchSchema`. Extend `test_supervisor_steps_from_schema` or add `test_supervisor_step_command_and_context_values`:\n- Assert that `PROCEDURE_STEPS[RoleId.SUPERVISOR]` steps with non-None `.command` have specific expected string values (assert against known literal values from `types.py` via `PROCEDURE_STEPS` — public API, not internal dict).\n- Assert that steps with non-None `.context` have specific expected string values.\n- Use the public `PROCEDURE_STEPS` dict directly (it is exported from `aura_protocol`).\n\n**B2 — test_gen_skills.py:**\nAdd `TestProcedureStepCommandContextRendering` class. Call `generate_skill(RoleId.SUPERVISOR, ...)` and assert:\n- The rendered output contains at least one backtick-wrapped command (`` `...` ``) in a step line (template renders command as `` (`{{ step.command }}`) ``).\n- The rendered output contains at least one em-dash italic context (` — _..._`) in a step line.\nThese assertions are against the rendered string returned by `generate_skill()` — observable output, not template internals.\n\n**B3 — test_gen_schema.py:**\nExtend `test_roundtrip_procedure_steps_supervisor` and `test_roundtrip_procedure_steps_worker` to assert all 6 `ProcedureStep` fields (id, order, instruction, command, context, next_state) via the `parsed_spec` fixture (parse_schema → ProcedureStep). The `parsed_spec` fixture already calls `parse_schema()` on gen_schema output — this is a public-interface round-trip test.\n\n**B4 — test_schema_types_sync.py:**\nFix `test_supervisor_steps_from_schema` docstring: remove claim about testing `id` attribute (the existing test body only checks `instruction` and count). Either:\n- Option A (docstring fix only): Update docstring to accurately describe what is tested.\n- Option B (extend test): Add assertion `step.id == xml_step.get(\"id\")` for each step.\n\nDecision: **Option B** — extend the test body to actually verify the `id` attribute, making the docstring truthful by making the test match the description. This adds real coverage, not just documentation cleanup.\n\n**No source code changes** — tests only.\n\n---\n\n### FOLLOWUP-SLICE-3: Code Clarity + Parser Correctness + Documentation (C1, C2, D1, D2, D3)\n\n**Files owned:**\n- `scripts/aura_protocol/gen_schema.py` — C1 (rename dict variables), C2 (move lazy import), D3 (doc comment for next-state optionality)\n- `scripts/aura_protocol/schema_parser.py` — D2 (raise SchemaParseError on missing `\u003cinstruction\u003e`), D3 (doc comment)\n- `tests/test_gen_schema.py` — C1 (update import of renamed dicts), D1 (add slug pin tests)\n- `tests/test_schema_parser.py` — D2 (add test for missing `\u003cinstruction\u003e` raises SchemaParseError)\n\n**What changes:**\n\n**C1 — gen_schema.py:**\nRename module-level dicts:\n- `_ROLE_CONSTRAINTS` → `_CONSTRAINT_TO_ROLE_REF`\n- `_PHASE_CONSTRAINTS` → `_CONSTRAINT_TO_PHASE_REF`\n\nUpdate all references within `gen_schema.py` (internal usage) and update `test_gen_schema.py` which imports these names:\n```python\nfrom aura_protocol.gen_schema import (\n    _PHASE_CONSTRAINTS,   # → _CONSTRAINT_TO_PHASE_REF\n    _ROLE_CONSTRAINTS,    # → _CONSTRAINT_TO_ROLE_REF\n    generate_schema,\n)\n```\n\n**C2 — gen_schema.py:**\nIdentify the lazy import inside `_constraints_for_role()` (if present after earlier refactors). Move any such import to module-level. Confirm no circular import risk by verifying the import chain: `gen_schema` → `context_injection` (already imported at top). If the lazy import was already removed in a prior refactor, document this finding and mark C2 as a no-op.\n\n**D1 — test_gen_schema.py:**\nAdd `TestSlugPinLiterals` class with tests that pin specific slug literals:\n- `assert any(s.id == \"S-supervisor-call-skill\" for s in PROCEDURE_STEPS[RoleId.SUPERVISOR])` — verifies the first supervisor step id has not been silently renamed\n- `assert any(s.id == \"S-supervisor-cartographers\" for s in PROCEDURE_STEPS[RoleId.SUPERVISOR])` — verifies Ride the Wave step id is pinned\n- `assert any(s.id == \"S-worker-types\" for s in PROCEDURE_STEPS[RoleId.WORKER])` — verifies worker step ids\n\nThese are pinned literal comparisons, not just Python-vs-Python cross-checks.\n\n**D2 — schema_parser.py:**\nIn `_parse_procedure_steps()`, line 236: change silent empty-string fallback to raise `SchemaParseError`:\n```python\n# Before (silent):\ninstruction = instr_el.text.strip() if instr_el is not None and instr_el.text else \"\"\n\n# After (raises):\nif instr_el is None or not instr_el.text:\n    raise SchemaParseError(\n        f\"Missing required \u003cinstruction\u003e child element on \u003cstep id='{step_id}'\u003e \"\n        f\"in startup-sequence in {path}. \"\n        f\"Instruction is required for all procedure steps. \"\n        f\"Fix: add \u003cinstruction\u003e...\u003c/instruction\u003e as a child element of the \u003cstep\u003e.\"\n    )\ninstruction = instr_el.text.strip()\n```\n\nAdd test in `test_gen_schema.py` or `test_schema_parser.py` (prefer `test_schema_parser.py` for isolation): construct a minimal XML with a `\u003cstep\u003e` missing `\u003cinstruction\u003e`, call `parse_schema()`, assert `SchemaParseError` is raised.\n\n**D3 — gen_schema.py + schema_parser.py:**\nAdd inline comments/docstrings at the point where `next-state` is handled:\n- `gen_schema.py`: comment on the XML emit code clarifying `next-state` attribute is only emitted when `py_step.next_state is not None`\n- `schema_parser.py`: comment on the `ns_val = step_el.get(\"next-state\")` line clarifying `next-state` is optional and absent when `None`\n\n---\n\n## File Ownership Summary (No Overlaps)\n\n| File | Slice | Findings |\n|------|-------|----------|\n| `tests/test_gen_skills.py` | SLICE-1 (A1), SLICE-2 (B2) | A1, B2 |\n| `tests/test_context_injection.py` | SLICE-1 | A2 |\n| `tests/test_schema_types_sync.py` | SLICE-2 | B1, B4 |\n| `tests/test_gen_schema.py` | SLICE-2 (B3), SLICE-3 (C1-import, D1) | B3, C1, D1 |\n| `scripts/aura_protocol/gen_schema.py` | SLICE-3 | C1, C2, D3 |\n| `scripts/aura_protocol/schema_parser.py` | SLICE-3 | D2, D3 |\n| `tests/test_schema_parser.py` | SLICE-3 | D2 |\n\n**Note on test_gen_skills.py (A1 + B2):** Both findings touch this file but in different test classes. SLICE-1 owns the `TestStrictUndefined` class change; SLICE-2 adds a new class. There is no intra-file conflict — the worker for SLICE-1 should add a `# FOLLOWUP-SLICE-2: TODO` marker so SLICE-2's worker picks up cleanly. Alternatively, combine into SLICE-2 to give single-file ownership to one worker.\n\n**Revised recommendation:** Assign `test_gen_skills.py` entirely to SLICE-2 (A1 fix + B2 addition), keep SLICE-1 as `test_context_injection.py` only (A2). This gives each worker clean single-file ownership where possible.\n\n### Revised Slice Decomposition (Final)\n\n| Slice | Files | Findings |\n|-------|-------|----------|\n| FOLLOWUP-SLICE-1 | `tests/test_context_injection.py` | A2 |\n| FOLLOWUP-SLICE-2 | `tests/test_gen_skills.py`, `tests/test_schema_types_sync.py`, `tests/test_gen_schema.py` | A1, B1, B2, B3, B4 |\n| FOLLOWUP-SLICE-3 | `scripts/aura_protocol/gen_schema.py`, `scripts/aura_protocol/schema_parser.py`, `tests/test_gen_schema.py` (slug pins), `tests/test_schema_parser.py` | C1, C2, D1, D2, D3 |\n\n**Overlap resolution for test_gen_schema.py:** SLICE-2 adds round-trip assertions (B3) and SLICE-3 adds slug pins (D1) + updates renamed imports (C1). These are additive and non-conflicting. Since slices must serialize on this file, **SLICE-3 depends on SLICE-2** (for import stability after B3 additions). SLICE-2 must complete before SLICE-3 begins work on `test_gen_schema.py`.\n\n---\n\n## Acceptance Criteria (BDD GWT+S Format)\n\n### FOLLOWUP-SLICE-1\n\n**AC-A2-1:**\n**Given** `test_context_injection.py` and the 4 Ride the Wave constraints in `EPOCH`'s role-scoped mapping,\n**When** `get_role_context(RoleId.EPOCH)` is called,\n**Then** each of `C-supervisor-cartographers`, `C-integration-points`, `C-slice-review-before-close`, `C-max-review-cycles` appears in the returned `RoleContext.constraints` (checked by `.id`),\n**Should not** rely on indirect XML assertions or count comparisons alone — each constraint must be individually asserted by id.\n\n### FOLLOWUP-SLICE-2\n\n**AC-A1-1:**\n**Given** a Jinja2 template file on disk that references `{{ undefined_var }}` (not in the render context),\n**When** `generate_skill(RoleId.SUPERVISOR, skill_path, template_dir=\u003cdir with bad template\u003e)` is called,\n**Then** `jinja2.UndefinedError` is raised,\n**Should not** create a `jinja2.Environment` directly in the test body — must go through `generate_skill()`.\n\n**AC-B1-1:**\n**Given** `PROCEDURE_STEPS[RoleId.SUPERVISOR]` contains steps with non-None `.command` and `.context`,\n**When** `PROCEDURE_STEPS` values are inspected directly (public exported dict),\n**Then** at least one step has `.command == \"Skill(/aura:supervisor)\"` (step 1) and at least one step has a non-None `.context` string,\n**Should not** inspect internal `types.py` private variables or go through XML.\n\n**AC-B2-1:**\n**Given** a valid SKILL.md with markers,\n**When** `generate_skill(RoleId.SUPERVISOR, skill_path, template_dir=TEMPLATE_DIR, diff=False, write=False)` is called,\n**Then** the returned string contains at least one substring matching the backtick pattern `` (`...`) `` and at least one substring matching the em-dash italic pattern ` — _..._`,\n**Should not** inspect template source code or Jinja2 AST.\n\n**AC-B3-1:**\n**Given** the `parsed_spec` fixture (round-trip: `types.py → gen_schema() → parse_schema()`),\n**When** `parsed_spec.procedure_steps[RoleId.SUPERVISOR]` is compared against `PROCEDURE_STEPS[RoleId.SUPERVISOR]`,\n**Then** for each step, all 6 fields (id, order, instruction, command, context, next_state) match field-by-field,\n**Should not** skip any field — command/context/next_state must be explicitly asserted.\n\n**AC-B3-2:**\nSame as AC-B3-1 for `RoleId.WORKER` steps — all 3 steps, all 6 fields verified.\n\n**AC-B4-1:**\n**Given** `test_supervisor_steps_from_schema` in `TestProcedureStepsMatchSchema`,\n**When** the test runs,\n**Then** the test body asserts `step.id == xml_step.get(\"id\")` for each supervisor step AND the docstring accurately describes what is tested,\n**Should not** have docstring claims that are not matched by assertions in the test body.\n\n### FOLLOWUP-SLICE-3\n\n**AC-C1-1:**\n**Given** `gen_schema.py` defines module-level constraint-to-role and constraint-to-phase mapping dicts,\n**When** the module is imported,\n**Then** the dicts are named `_CONSTRAINT_TO_ROLE_REF` and `_CONSTRAINT_TO_PHASE_REF` (not `_ROLE_CONSTRAINTS`/`_PHASE_CONSTRAINTS`), and all usages within `gen_schema.py` and all imports in test files use the new names,\n**Should not** leave any reference to the old names anywhere in the codebase.\n\n**AC-C2-1:**\n**Given** `gen_schema.py`'s `_constraints_for_role()` function (if it still exists),\n**When** the module is loaded,\n**Then** any import that was previously lazy (inside function body) is moved to module-level,\n**Should not** introduce circular imports — verify by running `python -c \"import aura_protocol.gen_schema\"` with 0 errors.\n\n**AC-D1-1:**\n**Given** `PROCEDURE_STEPS` in `types.py`,\n**When** slug pin tests run in `TestSlugPinLiterals`,\n**Then** `\"S-supervisor-call-skill\"` is found as an `.id` in supervisor steps, `\"S-supervisor-cartographers\"` is found, and `\"S-worker-types\"` is found in worker steps — all as literal string comparisons,\n**Should not** assert only that `step.id == py_step.id` (Python-vs-Python) — must compare against hard-coded literal strings.\n\n**AC-D2-1:**\n**Given** a `\u003cstep\u003e` element in schema.xml that has `id` and `order` attributes but no `\u003cinstruction\u003e` child element,\n**When** `parse_schema()` processes this element,\n**Then** `SchemaParseError` is raised with a message identifying the step id and explaining how to fix the problem,\n**Should not** return an empty string for `instruction` silently.\n\n**AC-D3-1:**\n**Given** the `next-state` attribute handling in `gen_schema.py` and `schema_parser.py`,\n**When** a developer reads the relevant code,\n**Then** an inline comment clarifies that `next-state` is only present/emitted when `next_state is not None`,\n**Should not** require reading the full function to understand optionality.\n\n---\n\n## Validation Checklist\n\n### FOLLOWUP-SLICE-1\n- [ ] `test_context_injection.py` has new `TestEpochRideTheWaveConstraints` class\n- [ ] 4 parametrized (or 4 individual) tests, one per Ride the Wave constraint id\n- [ ] Each test calls `get_role_context(RoleId.EPOCH)` and checks `.constraints` by id\n- [ ] `get_role_context` is a public function (imported from `aura_protocol.context_injection`)\n- [ ] All existing tests still pass (`pytest tests/test_context_injection.py`)\n\n### FOLLOWUP-SLICE-2\n- [ ] `TestStrictUndefined.test_undefined_variable_raises_undefined_error` replaced with test calling `generate_skill()`\n- [ ] New test fixture provides template directory with a bad template referencing `{{ undefined_var }}`\n- [ ] Test asserts `jinja2.UndefinedError` is raised (not `jinja2.Environment` instantiated in test)\n- [ ] `test_schema_types_sync.py` asserts `.command` value for at least one supervisor step\n- [ ] `test_schema_types_sync.py` asserts `.context` value for at least one supervisor step with context\n- [ ] `test_gen_skills.py` has new test asserting backtick-wrapped command in rendered output\n- [ ] `test_gen_skills.py` has new test asserting em-dash italic context in rendered output\n- [ ] `test_gen_schema.py` round-trip asserts all 6 ProcedureStep fields for supervisor steps\n- [ ] `test_gen_schema.py` round-trip asserts all 6 ProcedureStep fields for worker steps\n- [ ] `test_supervisor_steps_from_schema` body asserts `.id == xml_step.get(\"id\")` for each step\n- [ ] All 911 existing tests still pass\n- [ ] No test inspects `jinja2.Environment`, private template variables, or internal dicts\n\n### FOLLOWUP-SLICE-3\n- [ ] `gen_schema.py` uses `_CONSTRAINT_TO_ROLE_REF` and `_CONSTRAINT_TO_PHASE_REF` (not old names)\n- [ ] `test_gen_schema.py` imports updated to use new names\n- [ ] No remaining references to `_ROLE_CONSTRAINTS` or `_PHASE_CONSTRAINTS` in `gen_schema.py`\n- [ ] Module-level import verified: `python -c \"import aura_protocol.gen_schema\"` succeeds\n- [ ] `TestSlugPinLiterals` class added to `test_gen_schema.py` with literal string pin assertions\n- [ ] `schema_parser.py` raises `SchemaParseError` (not returns `\"\"`) on missing `\u003cinstruction\u003e`\n- [ ] Test in `test_schema_parser.py` verifies SchemaParseError on missing instruction\n- [ ] `gen_schema.py` has inline comment on `next-state` optionality\n- [ ] `schema_parser.py` has inline comment on `next-state` optionality\n- [ ] All 911 existing tests still pass\n- [ ] `gen_schema --diff` shows no changes after running (schema.xml still valid)\n\n---\n\n## Dependency Chain\n\n```\nFOLLOWUP-SLICE-3\n    └── blocked-by FOLLOWUP-SLICE-2   (test_gen_schema.py round-trip additions must land first)\nFOLLOWUP-SLICE-2\n    └── (no blocking dependency on SLICE-1; can run in parallel)\nFOLLOWUP-SLICE-1\n    └── (no blocking dependencies)\n```\n\nSLICE-1 and SLICE-2 can run in parallel (no shared files).\nSLICE-3 should start after SLICE-2 completes, to avoid rebasing conflicts on `test_gen_schema.py`.\n\n---\n\n## Key Risk: B2 Template Fixture Design\n\nFinding A1 requires calling `generate_skill()` with a bad template that references an undefined variable. This requires creating a temp template directory in the test. The template file must be named to match what `gen_skills.py` looks for. This is a subtle fixture design — the worker must inspect `gen_skills.py`'s template loading logic to determine the correct filename and directory structure. This is acceptable as it tests behavior through the public interface, not internal state.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-w5xu","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_PROPOSAL-1: Protocol Engine v2 follow-up — test coverage + code clarity","updated_at":"2026-02-26T09:38:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:36:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"07d2663bab627a502e87ccfb2d0877040d9bb6c00dc7de9512ccc54157c0ce38","created_at":"2026-02-26T08:07:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-3kul\n  impl_plan: aura-plugins-147m\n---\n## Scope\nImplement all SLICE-5 production code changes to make integration tests pass.\n\n## Critical: UAT Deltas\n1. Registry exists + no CWD match → error verbosely (sys.stderr + return 1)\n2. --check: print 'Registry: plugin=\u003cname\u003e marketplace=\u003cpath\u003e' (or 'Registry: not found')\n3. Double-bump guard using .resolve() set comparison\n4. Registry write AFTER git commit/tag (no rollback)\n5. --dry-run: print [dry-run] message, skip write\n\n## Files\n- bin/aura-release (cmd_release + main argparse + --check block)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-w843","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Registry integration implemented: --plugin flag, verbose error for no match, double-bump guard, --check registry info, --dry-run skip.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-L3: Impl — --plugin flag + registry integration + --check + error cases","updated_at":"2026-02-26T08:36:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:56:47Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bfccf16d92eacdd4aef74b78f53bcc6a34ca2a645ab4d0070049ae2033c58f93","created_at":"2026-02-22T12:55:43Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer A (Correctness) on SLICE-3 (interfaces.py, test_interfaces.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-w9lc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 BLOCKER","updated_at":"2026-02-22T12:56:47Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"449aa25eb36c56e847955c95a6b232075cc03d37ca6fefc9ce480f31adcf15b3","created_at":"2026-02-26T20:46:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-hgki\n  followup_urd: aura-plugins-gox3\n  original_urd: aura-plugins-2ojv\n---\n## Proposal: 3 vertical slices\n\n### SLICE-1: Code cleanups (trivial)\nFiles: scripts/aura_protocol/__init__.py, flake.nix\n- R1a-c: __init__.py import ordering, docstring, __all__ comment\n- R2: Add worker.py to flake.nix packages (writeShellApplication wrapping bin/worker.py with Python + temporalio deps)\nEffort: Small (haiku-capable for __init__.py, sonnet for Nix)\n\n### SLICE-2: docs/worker.md (new documentation)\nFiles: docs/worker.md (NEW)\n- Combined developer + operator guide\n- Architecture: EpochWorkflow → activities → audit trail\n- Dev: adding activities, testing with ActivityEnvironment, DI pattern\n- Ops: CLI args, env vars, systemd via nix/temporal-service.nix\nEffort: Medium (sonnet)\n\n### SLICE-3: Test fixtures + combinatorial testing\nFiles: tests/fixtures.yaml (NEW), tests/conftest.py (update)\n- Define common fixtures: phase specs, epoch states, transitions, review votes\n- YAML schema for test data (epoch_id, phase sequences, vote combinations)\n- conftest.py: load fixtures, create pytest parametrize helpers\n- Combinatorial: parameterize phase transitions × vote patterns × severity levels\nEffort: Medium-complex (sonnet)\n\n## Integration Points\n- SLICE-1 and SLICE-3 both touch test infrastructure but different files\n- SLICE-2 references architecture that SLICE-1 packages\n- No blocking dependencies between slices — all parallel\n\n## Key Decisions\n- Nix packaging: writeShellApplication (hermetic, matches existing patterns)\n- Fixtures: YAML (human-readable, easy to extend) over Python dicts (harder to scan)\n- Combinatorial: pytest parametrize over fixture combos (not hypothesis/property-based)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wfhc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP_PROPOSAL-1: v3 follow-up cleanups + docs + test fixtures","updated_at":"2026-02-26T20:46:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:31Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e4b8ed92a1281ebb251cbc480550e422a81fce5d09304baf85aff0f70e7dce53","created_at":"2026-02-22T12:52:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer C (Elegance) on SLICE-4 (workflow.py, test_workflow.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wfk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 MINOR","updated_at":"2026-02-22T17:30:31Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:09:20Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e79062a2f43b9b2e75e2ece356e38bdab854ff4fabf50e26f071bc5c6627e7ac","created_at":"2026-02-26T08:04:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-rien\n  impl_plan: aura-plugins-147m\n---\n## Scope\nAdd test_case_e and migrate all existing test methods A-D to use aura_release_mod fixture.\nUpdate TestDiscoverVersionFiles docstring.\n\n## Files Owned\n- tests/test_aura_release.py (test methods + docstring)\n\n## Test Case E\n```python\ndef test_case_e_root_pyproject_without_version_key(self, tmp_path, aura_release_mod):\n    (tmp_path / 'pyproject.toml').write_text(_TOOL_ONLY_PYPROJECT)\n    results = aura_release_mod.discover_version_files(tmp_path)\n    assert results == []\n```\n\n## Docstring Update\n```python\nclass TestDiscoverVersionFiles:\n    '''discover_version_files() driven by _SCAN_SPECS.\n\n    Covers pyproject.toml discovery only (package.json / plugin.json /\n    marketplace.json are out of scope for this class — see TestVersionFileWrites).\n    Root and subdirectory paths are exercised; version-key filter is verified at both levels.\n    '''\n```","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wfk9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-L2: Tests — test_case_e + migrated A-D + docstring","updated_at":"2026-02-26T08:09:20Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"de1e3e1d51ba537f78f86e33d8a5562004e1712c1c0f5b45ac0f356b54cb4628","created_at":"2026-02-26T16:02:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"__init__.py line 212: '# Cross-workflow boundary types' comment inserted mid-section in the 'Frozen dataclasses' block of __all__. The existing __all__ uses clean top-level section comments only (e.g., '# Phase lifecycle', '# Frozen dataclasses'). Adding a sub-section comment is inconsistent with the established pattern.\n\nFile: scripts/aura_protocol/__init__.py:212\nSlice: aura-plugins-l6n8 (SLICE-1)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wiow","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"MINOR: __init__.py __all__ sub-section comment breaks structure (SLICE-1)","updated_at":"2026-02-26T21:03:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"122688c3985402a6164e7ce3340972d623dd2cb047fc43496b47baf0353a84f8","created_at":"2026-02-26T08:54:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  review_round: 1\n---\nMINOR findings from Reviewer B (Test Quality) on FOLLOWUP-SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wizj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-REVIEW-B-1 MINOR","updated_at":"2026-02-26T08:55:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:38:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8d6c1e0315de49de0815d69c45e684c7632dd6e28ab04f7bb404c25f33f32977","created_at":"2026-02-25T22:38:38Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings for SLICE-2 from Test Quality axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wjhz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 BLOCKER","updated_at":"2026-02-25T22:38:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7bbf935542c8f08300eeb24589d601cf7072331e80010e19673f867a75894f37","created_at":"2026-02-23T04:24:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer A on SLICE-1. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wkp0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 MINOR","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"735ae577df4e213da214c7d0c64f1f9a93be725aa7d7b0737b2f6ed3ea5738cc","created_at":"2026-02-27T06:53:39Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-vd4m\n---\nIMPORTANT findings for REVIEW-C-1 (Reviewer C — Elegance)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wksc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"REVIEW-C-1 IMPORTANT","updated_at":"2026-02-27T06:53:39Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f303bdc6dbaf4ef30b7b9469290c89bbabb2a67de4bfad3d4494b3cb32232135","created_at":"2026-02-26T15:33:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Contract tests for all new types. P9_SLICE fail-fast test (workflow.wait FIRST_EXCEPTION, cancel pending). Update test_workflow.py worker registration. CHANGELOG.md v0.7.0 entry.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wlic","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-5-L2: Tests — contract tests + P9 fail-fast + CHANGELOG","updated_at":"2026-02-26T18:34:51Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T09:37:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b31b9b71aabfc5b7b69e520ac3b5c2cd23c29e3d4c0b64736e9d6e9f6d5fc79c","created_at":"2026-02-26T08:14:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-qfze\n  original_urd: aura-plugins-w07o\n  followup_ure: aura-plugins-dt90\n---\n## Scope\n\nAll 12 findings from Protocol Engine v2 code review (Rounds 1-3) and UAT (Round 4) are in scope.\n\n## Findings In Scope\n\n### Group A — Test isolation/correctness (2 IMPORTANT)\n\n**A1 (aura-plugins-c5nx):** test_gen_skills.py StrictUndefined test creates its own jinja2.Environment instead of testing gen_skills.py's actual Environment. Silent regression risk: removing StrictUndefined from gen_skills.py would not be caught. Fix: call generate_skill() and assert UndefinedError is raised when template references an undefined variable.\n\n**A2 (aura-plugins-rthn):** test_context_injection.py has no positive inclusion tests for EPOCH's 4 Ride the Wave constraints (C-supervisor-cartographers, C-integration-points, C-slice-review-before-close, C-max-review-cycles). Currently only covered indirectly via role-ref assertions in test_gen_schema.py. Fix: add parametrized direct inclusion tests in test_context_injection.py.\n\n### Group B — Test coverage for new ProcedureStep fields (4 IMPORTANT)\n\n**B1 (B-R2-SLICE1):** test_schema_types_sync.py does not assert ProcedureStep.command and .context values — only instruction/order/next_state. Fix: add assertions for command and context field values.\n\n**B2 (B-R2-SLICE3):** test_gen_skills.py has no test verifying that generate_skill() renders command (backtick format) and context (em-dash italic) into the SKILL.md output. Fix: add a test calling generate_skill() and asserting formatted command/context appear in rendered text.\n\n**B3 (B-R3-1):** Round-trip tests (test_roundtrip_procedure_steps_supervisor/worker) only assert id/instruction/order — command/context/next_state not verified through Python→XML→parse cycle. Fix: extend round-trip assertions to cover all 6 fields.\n\n**B4 (B-R3-2):** test_supervisor_steps_from_schema docstring claims to test id attribute; test body does not. Fix: correct docstring, or extend test to verify id attribute from schema.xml.\n\n**KEY CONSTRAINT (user-stated):** All Group B tests MUST focus on public interfaces and observable behaviour, NOT internal private details (e.g. do not test private dict structure, internal template rendering paths, or implementation details that may change). Test what the user of the module would observe.\n\n### Group C — Naming/code clarity (2 MINOR)\n\n**C1 (aura-plugins-prbl):** gen_schema.py defines _ROLE_CONSTRAINTS and _PHASE_CONSTRAINTS with inverted semantics vs context_injection.py's identically-named dicts. Rename in gen_schema.py: _CONSTRAINT_TO_ROLE_REF and _CONSTRAINT_TO_PHASE_REF.\n\n**C2 (aura-plugins-jwoo):** Lazy import inside _constraints_for_role() in gen_schema.py. No circular import risk. Move to module-level.\n\n### Group D — Minor correctness/documentation (3 MINOR)\n\n**D1 (B-R3-1-MINOR):** No literal slug pin tests — tests compare xml id to py_step.id not hard-coded strings. Add at least one test that pins specific slug literals (e.g. 'S-supervisor-call-skill') so slug renames are caught directly.\n\n**D2 (A-R3-MINOR):** schema_parser.py: missing \u003cinstruction\u003e child element silently becomes instruction='' instead of raising SchemaParseError. Inconsistent with required id attribute handling. Fix: raise SchemaParseError on missing \u003cinstruction\u003e.\n\n**D3 (UAT-R4-MINOR):** next-state attribute on \u003cstep\u003e is optional but undocumented. Add comments/docstrings in gen_schema.py and schema_parser.py clarifying next-state is only present when non-None.\n\n## Test Design Principles (from user)\n\n- Tests MUST target public interfaces and observable behaviours\n- Tests MUST NOT inspect internal private details (private dicts, template internals, module-level variables)\n- Prefer: call the public function, assert the output\n- Avoid: inspect _ROLE_CONSTRAINTS directly, check len() of private collections, etc.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wloc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP_URD: Requirements for Protocol Engine v2 follow-up","updated_at":"2026-02-26T09:37:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:20:06Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b8e8e80caf9e8826cbb865310243e84ba7ff379e561e7b5ee4e2a45ed81a3d0d","created_at":"2026-02-23T04:24:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer A on SLICE-1. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wmp7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-23T12:20:06Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:13:46Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"611dd8cd4992d5d13768a08e2bc1355cbf6cac4437e104db9093fcc602184981","created_at":"2026-02-26T08:05:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-xkuw\n  impl_plan: aura-plugins-147m\n---\n## Scope\nIdentify the current MarketplaceVersionFile.write() signature and document what needs to change.\nNo implementation yet — just the interface spec.\n\n## File\n- bin/aura-release: MarketplaceVersionFile.write(self, version: str, *, dry_run: bool = False) -\u003e None","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wo0q","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-L1: Types — write() corrected signature + dry_run=False default","updated_at":"2026-02-26T08:13:46Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:10:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-j2k\n---\n\n## URE Survey Results (Verbatim)\n\n### Q1: What semver bump types should the tool support?\n**Answer:** major, minor, patch (Recommended)\n\u003e Standard 3-level semver bumps (e.g., 0.2.2 → 0.3.0, 0.2.3, 1.0.0)\n\n### Q2: Should the tool also fix the current version drift (marketplace.json at 0.2.1)?\n**Answer:** Yes, fix as part of this feature (Recommended)\n\u003e The release tool's first run will sync all 3 files to the same version\n\n### Q3: What post-bump actions should the tool perform?\n**Answer:** Commit + tag (Recommended)\n\u003e Auto-commit the version files and create an annotated git tag (vX.Y.Z)\n\n### Q4: Should the tool include CHANGELOG generation?\n**Answer:** Yes, auto-generate\n\u003e Generate CHANGELOG.md from git log between tags (Keep a Changelog format)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wqw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"ELICIT: Release automation requirements","updated_at":"2026-02-22T10:40:30Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:14:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2ae783431dfcd64459db1972a4ab229a8ce90b4add6f6e8ef4368eef60759676","created_at":"2026-02-26T08:05:13Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-xkuw\n  impl_plan: aura-plugins-147m\n---\n## Scope\nRemove the plugins[*].version loop from MarketplaceVersionFile.write().\nOnly update data['metadata']['version']. Makes TestVersionFileWrites pass.\n\n## File\n- bin/aura-release: MarketplaceVersionFile.write() method","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wqxt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-L3: Impl — fix MarketplaceVersionFile.write() bug","updated_at":"2026-02-26T08:14:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a6ffec314b110147250e5c116f3f0af8081fa38d236503e0ac4f088f39369b16","created_at":"2026-02-26T23:48:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: flake.nix, lines 62-79\n\npackages.worker was added by aura-plugins-rpc4 but not added to packages.default:\n\n  default = pkgs.symlinkJoin {\n    name = 'aura-plugins';\n    paths = [\n      self.packages.${system}.aura-parallel\n      self.packages.${system}.aura-swarm\n      self.packages.${system}.aura-release\n      # worker is ABSENT here\n    ];\n  };\n\nThe existing pattern for the three other bin/ scripts (aura-parallel, aura-swarm,\naura-release) is to include them in packages.default. The worker not being in\ndefault means a user who does 'nix profile install .#' will not get it; they must\nexplicitly specify '.#worker'.\n\nThis may be intentional (worker has different runtime deps — temporalio is heavy\nand most users won't need it). But if intentional, a comment should say so.\n\nFix options:\n  A. Add worker to packages.default (consistent but heavier default install).\n  B. Leave out of default but add a comment explaining why.\n\nOption B is acceptable if documented; option A for consistency.\n\nSlice: aura-plugins-rpc4","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wrfs","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"MINOR: flake.nix packages.worker is not included in packages.default — inconsistent with other bin/ packages","updated_at":"2026-02-26T23:48:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cfcd02ad9ea76623355c1b43e2d0eff79a7c0ea73389ffd4d879ef5f666cc7dd","created_at":"2026-02-26T23:45:45Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  review: aura-plugins-cyc2\n  slices:\n    - aura-plugins-rpc4\n    - aura-plugins-zh0j\n    - aura-plugins-xehz\n    - aura-plugins-cz2t\n    - aura-plugins-oyxw\n    - aura-plugins-txgq\n---\nIMPORTANT findings for FOLLOWUP correctness review round.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ws2l","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP-ALL-SLICES-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T03:37:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"90a93e30527fc60830d77646463f2282b8523050881f09f05c0577c087b16ba8","created_at":"2026-02-23T03:21:53Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  impl_plan: aura-plugins-94yc\n---\n## Scope\nCreate/modify test files:\n- tests/test_schema_parser.py (create): entity count verification, 3+ error-path tests for SchemaParseError\n- tests/test_gen_types.py (create): codegen output is valid Python, contains expected definitions\n- tests/test_schema_types_sync.py (modify): extend with sync tests for all 6 new canonical dicts\n\n## Files Owned\n- tests/test_schema_parser.py (create)\n- tests/test_gen_types.py (create)\n- tests/test_schema_types_sync.py (modify)\n\n## Acceptance Criteria\nGiven test suite when run then all new + existing tests pass should never leave 558 existing tests broken\nGiven new canonical dicts when test_schema_types_sync.py extended then all new dicts validated against schema.xml should never have untested dicts","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ws2m","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S1-L5: Tests — parser tests, codegen tests, sync test extensions","updated_at":"2026-02-23T03:37:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-5","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e3dd13e39eab6643d758fc6dcd84bb7b49b116ce2ea39f5703da8c34d4409060","created_at":"2026-02-27T06:28:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-vjsk\n  urd: aura-plugins-7vtb\n---\n## Specification\nAdd constraint_violations axis to protocol.yaml test fixtures. All 23 C-* constraints\nfrom schema.xml appear in YAML. 5 constraints with full state snapshots are runnable;\n18 unimplemented constraints get pytest.mark.skip markers.\n\n## Files Owned\n- tests/fixtures/protocol.yaml (add constraint_violations axis)\n- tests/fixtures/fixture_loader.py (ConstraintViolationTestCase + generate_constraint_violation_test_cases())\n- tests/test_protocol_combinatorial.py (parametrized constraint violation tests)\n- tests/test_fixture_loader.py (tests for new generator)\n\n## Leaf Tasks\n- SLICE-5-L1: Types — ConstraintViolationTestCase dataclass + YAML axis schema\n- SLICE-5-L2: Tests — parametrized tests importing fixture_loader\n- SLICE-5-L3: Impl — fixture_loader generator + protocol.yaml axis data\n\n## Integration Points\n- Consumes: CONSTRAINT_SPECS from aura_protocol.types (23 constraints)\n- Consumes: RuntimeConstraintChecker from aura_protocol.constraints\n- Consumes: EpochState from aura_protocol.state_machine\n- Pattern: existing fixture_loader.py axis pattern (ProtocolFixture class)\n\n## Validation Checklist\n- [ ] All 23 C-* constraints listed in protocol.yaml\n- [ ] 5 runnable constraint tests pass\n- [ ] 18 unimplemented constraints have pytest.mark.skip\n- [ ] ConstraintViolationTestCase frozen dataclass defined\n- [ ] generate_constraint_violation_test_cases() generator works\n- [ ] Existing tests still pass","design":"{\"validation_checklist\":[\"All 23 C-* constraints listed in protocol.yaml\",\"5 runnable constraint tests pass\",\"18 unimplemented constraints have pytest.mark.skip\",\"ConstraintViolationTestCase frozen dataclass defined\",\"generate_constraint_violation_test_cases() generator works\",\"Existing tests still pass\"],\"acceptance_criteria\":[{\"given\":\"protocol.yaml with constraint_violations axis\",\"when\":\"loading fixtures\",\"then\":\"all 23 C-* constraints are represented\",\"should_not\":\"miss any constraint from schema.xml\"},{\"given\":\"parametrized test run\",\"when\":\"running constraint violation tests\",\"then\":\"5 pass and 18 skip\",\"should_not\":\"fail on unimplemented constraints\"}],\"ratified_plan\":\"aura-plugins-r75e\"}","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wsys","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"Implementation complete. 26 C-* constraints added to protocol.yaml constraint_violations axis. 5 runnable (C-review-consensus, C-severity-not-plan, C-severity-eager, C-worker-gates, C-audit-never-delete) + 21 skipped with documented skip_reason. ConstraintViolationTestCase frozen dataclass + generate_constraint_violation_test_cases() generator added to fixture_loader.py. 866 passed, 4 skipped on epic branch.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-5: Constraint violation fixtures (R9)","updated_at":"2026-02-27T06:47:33Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:19:59Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"84b99270b5b1059462a67910d65994c66eff18a23e3549b01b7170607f89b689","created_at":"2026-02-23T04:26:57Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In gen_skills.py, the _constraints_for_role() helper (line 93-99) has a docstring saying 'Currently returns all constraints (they apply globally). Future versions may filter by role tag once schema supports it.' This means the generated SKILL.md header for WORKER includes ALL 23 constraints — including C-review-consensus, C-severity-eager, C-blocker-dual-parent, C-supervisor-no-impl, C-supervisor-explore-team, etc., which are specific to REVIEWER and SUPERVISOR roles, not WORKER.\n\nThis is a correctness issue because:\n1. The proposal's runtime context injection (context_injection.py, AC5/AC6) correctly scopes constraints per role using _ROLE_CONSTRAINTS. The same static mapping exists in gen_schema.py (_ROLE_CONSTRAINTS).\n2. The SKILL.md generator already imports COMMAND_SPECS and HANDOFF_SPECS and correctly filters these by role (e.g., _commands_for_role uses role_ref matching). The same filtering should apply to constraints.\n3. An agent loading a WORKER SKILL.md will see C-supervisor-no-impl and C-severity-eager — constraints that do not apply to their role — creating noise and potential confusion.\n4. The handoff note in the code ('Future versions may filter') implies this is intentionally deferred, but the proposal (Module 4 in gen_skills.py section) says 'Constraints relevant to the invoked role' should be included, not all constraints.\n\nThis should be IMPORTANT because it will produce incorrect output at SKILL.md generation time, but since SKILL.md generation requires manually placed markers (AC4a/UAT-5) and no existing SKILL.md files have markers yet, the end-user is not currently impacted at runtime. The fix: use context_injection._ROLE_CONSTRAINTS to scope constraints in _constraints_for_role(), consistent with how context_injection.py already works.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wt8f","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3: _constraints_for_role() injects ALL 23 constraints to every role's SKILL.md — ignores role scoping","updated_at":"2026-02-23T12:19:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T10:40:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-21T20:11:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-j2k\n  elicit: aura-plugins-wqw\n  urd: aura-plugins-99q\n---\n\n# PROPOSAL-1: bin/aura-release\n\n## Summary\n\nA single Python 3.10+ script (stdlib only) at bin/aura-release that:\n1. Bumps version across 3 manifest files\n2. Auto-generates CHANGELOG.md from git log\n3. Creates a commit and annotated git tag\n\n## Architecture\n\n### Single-file design\nFollowing the bin/aura-swarm and bin/aura-parallel convention:\n- Shebang: #!/usr/bin/env python3\n- argparse CLI, no external dependencies\n- ~300-400 lines estimated\n\n### Version file map\n\n| File | Field(s) | Parse method |\n|------|----------|-------------|\n| pyproject.toml | project.version (line ~3) | Regex on `version = \"X.Y.Z\"` |\n| .claude-plugin/plugin.json | .version | json.load/dump |\n| .claude-plugin/marketplace.json | .metadata.version + .plugins[0].version | json.load/dump |\n\nNote: plugins[1] (agentfilter) is never touched.\n\n### CLI interface\n\n```\nbin/aura-release \u003cmajor|minor|patch\u003e [options]\nbin/aura-release --check\n```\n\nOptions:\n- --dry-run: Show what would happen, change nothing\n- --sync: Align all files to pyproject.toml version before bumping\n- --no-changelog: Skip CHANGELOG generation\n- --no-commit: Skip git commit\n- --no-tag: Skip git tag creation\n\n### Workflow (happy path)\n\n1. Pre-flight checks:\n   - Not detached HEAD\n   - Working tree clean (allow .beads/ changes)\n   - All 3 version files have same version (or --sync used)\n2. Parse current version from pyproject.toml\n3. Compute new version (semver bump)\n4. Update 3 files (4 version fields total)\n5. Generate CHANGELOG.md entry:\n   - Find previous tag (or use root commit if none)\n   - Collect commits since last tag\n   - Group by conventional commit prefix (feat, fix, chore, refactor, etc.)\n   - Prepend new section to CHANGELOG.md (create if missing)\n   - Format: Keep a Changelog (https://keepachangelog.com)\n6. Stage files: pyproject.toml, plugin.json, marketplace.json, CHANGELOG.md\n7. Commit: \"chore: release vX.Y.Z\"\n8. Tag: annotated vX.Y.Z with message \"Release vX.Y.Z\"\n9. Print summary and remind user to push\n\n### Error recovery\n- If any step fails after file modification, restore files via git checkout\n- JSON files written with indent=2 to preserve formatting\n- TOML updated via regex to avoid adding a TOML library dependency\n\n### --check mode\nJust validates version consistency across all 3 files and exits with code 0 (consistent) or 1 (drift detected), printing the versions found.\n\n## Nix integration\n- flake.nix already wraps bin/* scripts → aura-release will auto-package\n- No version field in flake.nix → no changes needed there\n\n## Files to create/modify\n- bin/aura-release (NEW)\n- CHANGELOG.md (created on first release)\n\n## What this does NOT do\n- Push to remote (user does this manually)\n- Create GitHub releases (can be done later via gh release create)\n- Modify flake.nix or nix/hm-module.nix","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-wux","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-1: bin/aura-release — version bump, changelog, and tag tool","updated_at":"2026-02-22T10:40:25Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"architect","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bffecb1714d159215eb9fa529e59f499dd224422be4e99e1e5b55539bb522aaf","created_at":"2026-02-26T15:09:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-eocq\n  urd: aura-plugins-2ojv\n  supersedes: aura-plugins-vt20\n---\n\n# PROPOSAL-9: Aura Protocol v3 Temporal Engine\n\nSupersedes PROPOSAL-8 (aura-plugins-vt20). Addresses all MUST FIX items from A-1, B-1, and SHOULD FIX items from C-1.\n\n---\n\n## FIX-1 (A-1 MUST FIX): workflow.execute_activity_method() for typed dispatch\n\n### Problem\nPROPOSAL-8 used `workflow.execute_activity(AuditActivities.query_audit_events, ...)`. The Temporal Python SDK has a distinct, typed API for class-method activities: `workflow.execute_activity_method()`. Using the untyped form violates the project guideline to prefer strongly-typed APIs over stringly-typed dispatch.\n\nNote: B-1 confirmed via SDK source that both forms resolve the activity name correctly (from_callable handles bound methods). This is a type-safety fix, not a correctness fix — but the typed API is the right choice per project conventions.\n\n### Fix\n```python\nresult = await workflow.execute_activity_method(\n    AuditActivities.query_audit_events,\n    args=[epoch_id, phase_id],\n    start_to_close_timeout=timedelta(seconds=30),\n)\n```\n\n---\n\n## FIX-2 (A-1 + B-1 MUST FIX): try/except around child_handle.signal()\n\n### Problem\n`ChildWorkflowHandle.signal()` raises `ApplicationError` (via `FailureError`) if the child workflow has already completed. Confirmed by B-1 via SDK trace: `_apply_resolve_signal_external_workflow` calls `fut.set_exception()` when the server returns a failure for a closed workflow. PROPOSAL-8 showed no error handling.\n\n### Fix\n```python\ntry:\n    await child_handle.signal(ReviewPhaseWorkflow.submit_vote, vote_signal)\nexcept temporalio.exceptions.ApplicationError:\n    pass  # child already completed — vote signal not needed\n```\n\nThis covers the timing race: child completes (all votes received + wait_condition fires) between when the parent decided to re-signal and when the signal is processed.\n\n---\n\n## FIX-3 (B-1 MUST FIX): Prohibit asyncio.gather for parallel child workflows\n\n### Problem\nPROPOSAL-8 mentioned P9_SLICE executes slices in parallel but did not specify the concurrency primitive. Any implementation using `asyncio.gather` is INCORRECT in Temporal workflow code — `asyncio.gather` uses a non-deterministic scheduler order that differs between original execution and replay, causing nondeterminism errors. The Temporal sandbox does not replace or intercept `asyncio.gather`.\n\n### Fix\nParallel child workflows MUST use `workflow.wait()` or `workflow.as_completed()` — the SDK-provided deterministic replacements.\n\nCorrect pattern for parallel P9_SLICE execution:\n```python\n# Start all slice child workflows\nhandles = [\n    await workflow.start_child_workflow(\n        SliceWorkflow.run,\n        SliceInput(epoch_id=self._epoch_id, slice_id=s.id),\n        id=f'{self._epoch_id}-{s.id}',\n    )\n    for s in slices\n]\n\n# Await all completions deterministically\ndone, _ = await workflow.wait(set(handles))\nresults: list[SliceResult] = [h.result() for h in done]\n```\n\nDO NOT use: ~~`asyncio.gather(*handles)`~~ — non-deterministic replay.\n\n---\n\n## FIX-4 (A-1 + B-1 MUST FIX): ReviewAxis(StrEnum) for vote tracking\n\n### Problem\nPROPOSAL-8 showed:\n```python\n_votes: dict[str, VoteType] = {}\nawait workflow.wait_condition(lambda: all(ax in self._votes for ax in ('A', 'B', 'C')))\n```\n\nRaw string literals violate the project's strongly-typed enum guideline. If axes change or expand, the predicate silently becomes wrong. Also, `ReviewVoteSignal.axis: str` is stringly-typed at the signal boundary.\n\n### Fix\nIntroduce `ReviewAxis(StrEnum)` (or confirm it already exists in types.py — check and use if present):\n\n```python\nclass ReviewAxis(StrEnum):\n    A = 'A'  # End-user alignment\n    B = 'B'  # Temporal concurrency\n    C = 'C'  # Interface design\n\nclass ReviewVoteSignal:\n    axis: ReviewAxis  # was: str\n\nclass ReviewPhaseWorkflow:\n    def __init__(self) -\u003e None:\n        self._votes: dict[ReviewAxis, VoteType] = {}\n\n    @workflow.signal\n    def submit_vote(self, signal: ReviewVoteSignal) -\u003e None:\n        self._votes[signal.axis] = signal.vote\n\n    @workflow.run\n    async def run(self, input: PhaseInput) -\u003e PhaseResult:\n        # Predicate: all 3 axes have voted — exhaustive, enum-safe\n        await workflow.wait_condition(\n            lambda: all(ax in self._votes for ax in ReviewAxis)\n        )\n```\n\nThis is exhaustive (iterates over all enum members), self-documenting, and correct when axes are added.\n\n---\n\n## FIX-5 (C-1 SHOULD FIX): Keep AuditTrail.query_events phase parameter name\n\n### Problem\nPROPOSAL-8 renamed `query_events(*, phase: PhaseId)` to `query_events(*, phase_id: PhaseId)`. Reviewer C found that `AuditEvent.phase` (not `AuditEvent.phase_id`) is the field name in types.py. Renaming the query parameter creates split terminology: callers do `trail.query_events(phase_id=event.phase)` everywhere — constant friction.\n\n### Fix\nKeep `phase` as the parameter name. Only ADD `epoch_id`:\n\n```python\nasync def query_events(\n    self,\n    *,\n    epoch_id: str | None = None,\n    phase: PhaseId | None = None,\n    role: RoleId | None = None,\n) -\u003e list[AuditEvent]:\n    ...\n```\n\nThe `AuditActivities.query_audit_events` activity wrapper passes it through correctly:\n```python\nasync def query_audit_events(self, epoch_id: str, phase: PhaseId | None = None) -\u003e list[AuditEvent]:\n    return await self._trail.query_events(epoch_id=epoch_id, phase=phase)\n```\n\n---\n\n## FIX-6 (C-1 SHOULD FIX): _REVISE_DRIVES_BACK_PHASES — keep private prefix, fix grammar\n\n### Problem\nPROPOSAL-8 proposed `REVISE_DRIVE_BACK_PHASES` (public, grammatically wrong — 'DRIVE' not 'DRIVES'). Making the constant public also removes the `_` prefix without justification.\n\n### Fix\nKeep the constant private and fix the grammar:\n\n```python\n# state_machine.py\n_CONSENSUS_GATED: frozenset[tuple[PhaseId, PhaseId]] = frozenset({...})\n_BLOCKER_GATED: frozenset[tuple[PhaseId, PhaseId]] = frozenset({...})\n_REVISE_DRIVES_BACK_PHASES: frozenset[PhaseId] = frozenset({...})  # was: _REVISE_DRIVES_BACK (no _PHASES suffix)\n```\n\nThe `_PHASES` suffix communicates the type (set of PhaseId, not transition tuples). The `_` prefix keeps it private to the state machine module. Child workflows that need gate logic call `EpochStateMachine` methods — they do not read the raw constants directly.\n\nIf these constants are genuinely needed by external callers (child workflows, tests), expose them via a typed accessor method on `EpochStateMachine` instead of promoting them to public module-level constants.\n\n---\n\n## FIX-7 (C-1 SHOULD FIX): ToolCall migration — optional tool_call_id default\n\n### Problem\nPROPOSAL-8 added required `tool_call_id: str` at position 2 in the dataclass. Inserting a required field in the middle of an existing frozen dataclass is a positional migration hazard: existing `ToolCall(tool_name=..., tool_input=...)` callers get TypeError.\n\n### Fix\nMake `tool_call_id` optional with empty string default (v3 migration path):\n\n```python\n@dataclass(frozen=True)\nclass ToolCall:\n    \"\"\"MCP-compatible tool call representation.\n\n    v3 changes:\n    - tool_input renamed to raw_input (camelCase JSON alias: rawInput)\n    - tool_output renamed to raw_output (camelCase JSON alias: rawOutput)\n    - tool_call_id added (camelCase JSON alias: toolCallId); defaults to '' for migration\n    \"\"\"\n    tool_name: str\n    raw_input: dict[str, Any]               # was: tool_input\n    raw_output: dict[str, Any] | None = None  # was: tool_output\n    tool_call_id: str = ''                  # new in v3; default eases migration\n```\n\nOrdering: required fields first (tool_name, raw_input), then optionals (raw_output, tool_call_id). The rename tool_input→raw_input still requires test migration (test_interfaces.py L369-393) — this is explicitly documented as a v3 API boundary, no shim.\n\n---\n\n## FIX-8 (C-1 SHOULD FIX): FilePart docstring update when FileWithUri lands\n\nThe existing `FilePart` docstring (interfaces.py L173-177) says: 'Migration to the nested A2A file_with_uri structure is deferred to v2 scope.' When SLICE-2 adds `FileWithUri` and updates `FilePart.file_with_uri`, the SLICE implementor MUST update this docstring atomically. Tracked as a SLICE-2 acceptance criterion.\n\n---\n\n## FIX-9 (B-1 SHOULD FIX): ApplicationError(non_retryable=True) for permanent failures\n\n`AuditActivities.query_audit_events` error handling:\n- **Transient failures** (backend unreachable, timeout): let propagate — Temporal's default retry policy handles these.\n- **Permanent failures** (epoch not found, invalid query, schema mismatch): raise `ApplicationError('reason', non_retryable=True)` inside the activity. This immediately marks the activity as failed without retrying.\n\n```python\nfrom temporalio.exceptions import ApplicationError\n\nasync def query_audit_events(self, epoch_id: str, phase: PhaseId | None = None) -\u003e list[AuditEvent]:\n    try:\n        return await self._trail.query_events(epoch_id=epoch_id, phase=phase)\n    except EpochNotFoundError as e:\n        raise ApplicationError(str(e), non_retryable=True) from e\n```\n\n---\n\n## Unchanged from PROPOSAL-8\n\nAll items from PROPOSAL-8 not modified above remain unchanged:\n\n- **PhaseInput:** `epoch_id: str`, `phase: PhaseId` only — child workflows reconstruct PhaseSpec from PHASE_SPECS\n- **PhaseResult:** `phase_id: PhaseId`, `success: bool`, `blocker_count: int = 0`, `vote_result: VoteType | None = None`\n- **AuditActivities class-based DI pattern:** confirmed VALID by B-1 via SDK source\n- **ChildWorkflowHandle retained** from start_child_workflow (not get_external_workflow_handle re-lookup)\n- **Class-level @workflow.signal decorators** in child workflows (buffering correctness)\n- **FileWithUri(uri, name, mime_type)**, FilePart.file_with_uri: FileWithUri\n- **NullTranscriptRecorder + NullSecurityGate** (R12 stub labels)\n- **No agent-client-protocol dependency**\n- **5 slices**; Infrastructure: bin/worker.py + nix/temporal-service.nix + NixOS systemd module\n- **Test baseline:** 945 existing tests; SLICE-5 targets no regressions\n\n## Decision log\n\nD1: PhaseInput carries phase_id (PhaseId) only — PhaseSpec reconstructed from PHASE_SPECS in child workflow.\nD2: AuditActivities class-based DI — trail injected at worker startup, never serialized.\nD3: AuditTrail.query_events adds epoch_id; keeps phase (matches AuditEvent.phase field name).\nD4: ChildWorkflowHandle from start_child_workflow — signal routing with try/except ApplicationError guard.\nD5: Child workflows use class-level @workflow.signal decorators for buffering correctness.\nD6: Parallel P9_SLICE uses workflow.wait() — asyncio.gather is PROHIBITED in workflow code.\nD7: ReviewAxis(StrEnum) replaces raw strings in vote tracking and wait_condition.\nD8: _REVISE_DRIVES_BACK_PHASES — private, grammar fixed, _PHASES suffix added.\nD9: ToolCall: tool_call_id optional default '' for v3 migration; raw_input/raw_output rename is breaking at v3 boundary.\nD10: execute_activity_method() is the typed SDK API for class-method activities.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-x2p6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"SUPERSEDED by PROPOSAL-10. Reason: C-1 MUST FIX — ReviewVoteSignal.axis: str creates type incoherence with FIX-4's dict[ReviewAxis, VoteType] _votes. SHOULD FIX: tool_call_id default empty string → None; epoch_id Protocol/wrapper optionality alignment.","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"PROPOSAL-9: v3 Temporal engine — execute_activity_method + asyncio.gather prohibition + interface alignment","updated_at":"2026-02-26T15:15:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T13:23:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5ab5c441203b76c38e81587bee4525331a59b6bff91f80aad9778be6ac0ef456","created_at":"2026-02-23T13:23:25Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer A on FOLLOWUP epic z8ga. EMPTY — no blockers found.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-x2r0","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-A-1 BLOCKER","updated_at":"2026-02-23T13:23:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T07:22:18Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"74674b910cee428f44ffaa6fd04720eff20b2b5e95cd4c321faa6363d5f6f460","created_at":"2026-02-22T18:12:02Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  proposal: aura-plugins-a1o4\n  urd: aura-plugins-w07o\n  original_urd: aura-plugins-umi\n  original_proposal: aura-plugins-gmv\n---\n\n## Reviewer: A (Correctness)\n\nVOTE: REVISE\n\n## Summary\n\nThe proposal faithfully addresses the spirit and architectural intent of all 7 URD requirements (R1-R7). The engineering tradeoffs are sound, the Python-as-SoT inversion is correctly motivated, and the 4-slice decomposition is logically coherent with SLICE-1 correctly identified as a blocking foundation. However, there are BLOCKER-level correctness gaps between the proposal's stated entity counts and what actually exists in schema.xml, which will cause AC1 to fail as written.\n\n## BLOCKER Findings\n\n### B1: Entity Count Mismatches in AC1 and Validation Checklist\n\nThe proposal's BDD AC1 and validation checklist state specific counts that do not match schema.xml:\n\n| Entity | Proposal Claims | Actual in schema.xml |\n|--------|----------------|----------------------|\n| Commands | 38 | 35 (`\u003ccommand\u003e` elements) |\n| Constraints | 26 | 23 (`\u003cconstraint\u003e` elements) |\n| Labels | 16 | 21 (`\u003clabel\u003e` elements) |\n\nAC1 reads:\n\u003e \"returns a SchemaSpec with 12 phases, 5 roles, 38 commands, 26 constraints, 6 handoffs, 16 labels, 3 review axes\"\n\nIf implemented as written, `test_schema_parser.py` will assert incorrect counts. The test will either (a) fail against the real schema.xml, or (b) be written to match wrong counts and create false confidence in the parser. Both outcomes are defects.\n\nThere is also a naming inconsistency: the validation checklist says `\u003creview-axis\u003e` elements, but schema.xml uses `\u003caxis\u003e` inside `\u003creview-axes\u003e` — a minor point but relevant to parser correctness (the parser needs to find `\u003caxis\u003e` not `\u003creview-axis\u003e`).\n\nAdditionally, skills directory has 37 SKILL.md directories (excluding protocol/), not 38. The proposal references \"38 SKILL.md files\" in the problem space axes — this may reflect a desired future state but should be reconciled before implementation.\n\n**Required fix:** Update AC1 to reflect verified entity counts from schema.xml: 35 commands, 23 constraints, 21 labels, 37 SKILL.md files. Update the validation checklist accordingly. These numbers must be verified against schema.xml before workers implement test_schema_parser.py.\n\n### B2: R5 (Procedural Guidance in Python) — No Schema.xml Anchor for Procedure Content\n\nR5 states: \"Move procedural guidance (currently hand-written in SKILL.md bodies) into Python constants/dataclasses (e.g., ProcedureStep). Procedures generate into both schema.xml AND SKILL.md.\"\n\nThe proposal includes `ProcedureStep` as a new dataclass and a brief \"end goal: fully generated SKILL.md files.\" However:\n- schema.xml has no `\u003cprocedure\u003e` or `\u003cstep\u003e` element type currently. The round-trip (gen_schema.py → schema.xml → parse → match) cannot be verified for ProcedureStep content because there is no XML representation to generate to or parse from.\n- The proposal does not define what XML element type ProcedureStep generates into, nor does it include a `ProcedureSpec` in the SchemaSpec root container.\n- SLICE-3 (gen_skills.py) depends on SLICE-1's expanded types, but the Jinja2 templates use ProcedureStep content that currently only lives in hand-written SKILL.md bodies — there is no extraction path from SKILL.md to Python specified.\n\nThis is a gap: the bootstrap path is defined for schema.xml entities but not for SKILL.md procedural content, which is needed for R5.\n\n**Required fix:** Either (a) scope R5 explicitly out of SLICE-1/2/3 MVP with a clear deferral note and remove ProcedureStep from SLICE-1's new dataclasses list, OR (b) define the schema.xml XML representation for ProcedureStep and include a SKILL.md→Python procedural extraction step in the bootstrap.\n\n## Non-Blocking Observations\n\n### N1: ConstraintSpec in types.py already has 23 entries; SchemaSpec must import from types.py\n\nThe expanded CONSTRAINT_SPECS in types.py already reflects the actual 23 constraints (including C-actionable-errors added in the v1 UAT fixup). The proposal should clarify that SLICE-1's schema_parser.py bootstrap will parse schema.xml and produce a SchemaSpec, while the canonical Python dict (CONSTRAINT_SPECS) lives in types.py — these are the same data in different representations. The round-trip test must compare schema.xml ↔ types.py, not schema.xml ↔ schema_parser output.\n\n### N2: Jinja2 is classified as a dev dependency but runtime injection uses Python directly\n\nThis is correct and consistent. The proposal correctly notes \"Jinja2 is the only new dependency. It's a dev dependency (used by gen_skills.py) — not needed at runtime.\" Confirmed sound.\n\n### N3: state_machine.py hook for PhaseContext is underspecified\n\nThe proposal says \"state_machine.py (HOOK: phase transition emits PhaseContext)\" but does not define the hook interface. AC6 says \"State machine advance() can optionally emit PhaseContext\" — \"optionally\" is ambiguous. Is it a callback, a return value, or a side-effect? SLICE-4 will need this defined clearly, but it can be resolved during implementation without a proposal revision if the word \"optionally\" is clarified to mean \"returns PhaseContext as part of advance() return type.\"\n\n## URD Coverage Assessment\n\n| Req | Addressed? | Notes |\n|-----|-----------|-------|\n| R1 | YES | SchemaSpec with all entity types; schema_parser.py bootstrap |\n| R2 | YES | Python as SoT clearly stated; gen_schema.py for XML export |\n| R3 | YES | types.py expansion with 7 new dataclasses and 4 new dicts |\n| R4 | YES | gen_skills.py + Jinja2 templates + marker-based split |\n| R5 | PARTIAL | ProcedureStep defined but bootstrap extraction path unspecified |\n| R6 | YES | context_injection.py with role-level + phase-level injection |\n| R7 | YES | gen_schema.py produces valid XML that passes validate_schema.py |\n\n## Verdict\n\nREVISE — Two BLOCKER gaps:\n1. Entity count mismatches (B1) will cause AC1 test assertions to fail.\n2. R5 procedural guidance bootstrap path (B2) is undefined — ProcedureStep cannot be populated without specifying where the data comes from.\n\nBoth are easily fixable with a targeted revision to AC1 counts and an explicit R5 scoping decision. No architectural rethink required.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-x32v","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"PROPOSAL-1-REVIEW-A-1: v2 schema-driven engine","updated_at":"2026-02-26T07:22:18Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:47Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer C (Elegance) — SLICE-5 MINOR severity group.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-x36","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-C-1 MINOR","updated_at":"2026-02-22T17:24:22Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-27T06:56:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8475b9c435e89391072a7edf100072ac2bb52421dddbaea2ba8db5eb72ca64ac","created_at":"2026-02-27T06:56:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-vf9l\n  review: aura-plugins-ta1k\n---\nMINOR findings for SLICE-3 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-x5gx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 MINOR","updated_at":"2026-02-27T06:56:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f3acad2eb14d29a8dede1929f72a3fa5e181f54d5e7c794f00801548b89d5e98","created_at":"2026-02-23T11:24:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  followup_epic: aura-plugins-z8ga\n  uat: aura-plugins-sm9c\n---\n## UAT Feedback (verbatim)\n'Step 2 might be underspecified, and should have bd show \u003ctask-id\u003e code backticks\nand id enclosed in tags. Are we currently mandating that the prompts and bd tasks\nhave a frontmatter section? We should be mandate this.'\n\n## Current state\n- bd task descriptions use YAML frontmatter by CONVENTION (references: block) — not enforced\n- Agent prompts (handoff .md files) are prose — no mandated frontmatter or schema\n- ProcedureStep descriptions are plain strings — no template or required fields\n\n## Required\n1. Machine-validate that bd task descriptions start with valid YAML frontmatter (---...---\n   block with at minimum a 'references:' key)\n2. Mandate and validate handoff document frontmatter schema\n3. Improve ProcedureStep step 2 description to include backtick-formatted commands:\n   'Run `bd show \u003ctask-id\u003e` to get RATIFIED_PLAN and URD IDs, then\n   `bd show \u003curd-id\u003e` and `bd show \u003cplan-id\u003e` to read full context'\n4. Consider: bd create hook / schema that rejects descriptions missing frontmatter","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-x6gb","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP: Mandate YAML frontmatter in bd task descriptions and handoff docs","updated_at":"2026-02-23T11:24:16Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a09a96c458f2e75f3dffb4075117f9b2582eda1bdbafefc85ce6e68d7d2c490e","created_at":"2026-02-25T22:37:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-oags\n  review_round: 1\n  severity: important\n---\n## Finding: check_integration_points not wired into check_structural()\n\n**File:** constraints.py\n**Location:** check_structural() method (lines 270-395), check_integration_points() method (line 1264)\n\n### Issue\ncheck_integration_points() exists as a standalone method and is tested standalone (test_constraints.py lines 1542-1556), but is NOT integrated into the aggregate check_structural() method. \n\nSpecifically:\n1. The has_integration_points parameter is missing from check_structural()'s signature (lines 270-314)\n2. The check_integration_points() call is missing from check_structural()'s body (lines 340-395)\n3. The check_structural docstring (lines 322-336) does not list C-integration-points\n\nAll other 3 new/renamed constraints ARE wired into check_structural:\n- check_supervisor_cartographers (line 373-374) ✓\n- check_slice_review_before_close (lines 376-379) ✓\n- check_max_review_cycles (lines 381-382) ✓\n\n### Impact\nAny caller using check_structural(has_integration_points=False) would get a TypeError (unknown kwarg). The aggregate entry point is incomplete.\n\n### Suggested Fix\nAdd has_integration_points to check_structural signature and body:\n1. Add parameter: has_integration_points: bool | None = None\n2. Add call: if has_integration_points is not None: violations.extend(self.check_integration_points(has_integration_points))\n3. Add to docstring: C-integration-points (has_integration_points)\n4. Add integration test in TestCheckStructural","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-x7k5","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1: check_integration_points missing from check_structural","updated_at":"2026-02-25T22:37:16Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6ef787bf0436e9a92701a5790a108b6ec825f31beadd5f87ed58bae844e84737","created_at":"2026-02-22T12:56:17Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: scripts/aura_protocol/constraints.py, lines 116-121\n\nThe RuntimeConstraintChecker class docstring Usage example shows:\n    checker = RuntimeConstraintChecker()\n    violations = checker.check_all(state)\n\nBut check_all() does not exist on RuntimeConstraintChecker. The UAT revision renamed this to check_state() (per ratified proposal). Any caller copying from this docstring example will get AttributeError at runtime.\n\nCorrection: update the Usage example to use checker.check_state(state).\n\nNote: this is a correctness issue because the public API documentation directly contradicts the implemented API — the class's own docstring is wrong about its own interface.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-x9if","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: RuntimeConstraintChecker class docstring example references check_all() which does not exist","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cb245e0b499d3519fbd5fc67e9f0fa5f88b4d42f639caf4a677a3ff6dae24b05","created_at":"2026-02-23T04:26:20Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"MINOR findings from Reviewer B (Test Quality) on SLICE-4 (Runtime Context Injection with ConstraintContext). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xbky","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 MINOR","updated_at":"2026-02-23T12:46:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a39cdd6818cb926f1eae9c79045c9670f8329e0e681ce23e5bfbc9f7b9a5aef6","created_at":"2026-02-22T12:56:42Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: scripts/aura_protocol/constraints.py\n\nSLICE-2 correctly moved _SAME_ACTOR frozenset to module level (adopted finding pxo). However two other similar constants remain defined locally inside their respective methods:\n\n1. _IMPL_ACTIONS frozenset (line 1045) inside check_supervisor_no_impl()\n2. _FOLLOWUP_PREFIXES tuple (line 1084) inside check_followup_lifecycle()\n\nBoth are reconstructed on every call. This is stylistically inconsistent with the now-module-level _SAME_ACTOR and creates minor unnecessary allocation overhead.\n\nCorrection: move _IMPL_ACTIONS and _FOLLOWUP_PREFIXES to module-level constants, following the same pattern as _SAME_ACTOR, _REVIEW_AXES, _REVIEW_PHASES, etc.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xdiu","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: _IMPL_ACTIONS and _FOLLOWUP_PREFIXES defined locally in methods, inconsistent with _SAME_ACTOR","updated_at":"2026-02-22T17:30:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-23T04:27:41Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c18976578ed65f4baada35878939ebc7570542ac01eb8b00a9d183ae8502cfa7","created_at":"2026-02-23T04:26:10Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer B (Test Quality) on SLICE-2 (Schema.xml Generator with Diff + role-ref/phase-ref). Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xdxp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 BLOCKER","updated_at":"2026-02-23T04:27:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:15Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"bb909ac05386f28bf0ceb6e40b519a63fc059581d24b0fca966387d8b6935060","created_at":"2026-02-26T03:30:58Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  reviewer: cartographer-b\n  round: 1\n---\nMINOR findings from Cartographer B (Test quality) on SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xe8q","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 MINOR","updated_at":"2026-02-26T03:31:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7a1399b567ca4539150e1058bf62840c96d9ca18662c23ed0125177436e0568f","created_at":"2026-02-26T20:50:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-q00q\n  followup_urd: aura-plugins-gox3\n---\n## Scope\nCreate YAML-driven test fixture infrastructure inspired by agentfilter PatternFixture.\n\n### tests/fixtures/protocol.yaml\nDefine combinatorial axes:\n- phase_specs: canonical PHASE_SPECS entries (phase_id, domain, owner_roles, transitions)\n- epoch_states: pre-built states at various phases (p1, p4_reviewing, p10_all_accept)\n- vote_combinations: all-accept, mixed, all-revise, partial (per ReviewAxis)\n- audit_events: sample AuditEvent objects (record, query test data)\n\n### tests/fixtures/fixture_loader.py\nProtocolFixture class:\n- Load protocol.yaml\n- Properties for each axis\n- Generators: generate_transition_test_cases(), generate_vote_test_cases()\n- TestCase dataclass with pytest.param-friendly id generation\n\n### tests/conftest.py\n- Module-level _FIXTURE singleton\n- @pytest.fixture for protocol_fixture\n- Optional: migrate existing hardcoded test data to use fixtures\n\n## Pattern Reference\nSee ~/codebases/dayvidpham/agentfilter/opencode-security-filter/tests/fixtures/\n\n## Files Owned\n- tests/fixtures/protocol.yaml (NEW)\n- tests/fixtures/fixture_loader.py (NEW)\n- tests/fixtures/__init__.py (NEW)\n- tests/conftest.py (update)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xehz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-3: Test fixtures.yaml + combinatorial testing","updated_at":"2026-02-26T23:56:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:41Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a7e63ddcbd5df4ca42f4729fdb4387a8f75d556cedf6847ffe7eb770cc85e702","created_at":"2026-02-26T03:31:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-kg25\n  reviewer: cartographer-c\n  round: 1\n---\nIMPORTANT findings from Cartographer C (Elegance) on SLICE-4.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xils","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-26T03:31:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T10:13:03Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"806e4a716a30fac7de9eaa50afd56af2229fb357e880a06471d07b260cedd9e3","created_at":"2026-02-23T09:49:24Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from impl UAT Round 2 (Component 4).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xivx","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"UAT-ROUND-2 BLOCKER: context_injection + gen_skills fixes","updated_at":"2026-02-23T10:13:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T04:30:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8639fe6878a8e5d1e40dc7890f172314e6d57c8562c39a3a4fab09efb1992e66","created_at":"2026-02-26T04:30:44Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xjhi","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-A-2 BLOCKER","updated_at":"2026-02-26T04:30:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"worker-2","await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:14:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4adfeda571f46391e09c45996c8f404157dcbc82afcfa33b5c6ee1dde215575e","created_at":"2026-02-26T08:05:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-147m\n  urd: aura-plugins-7oqz\n  proposal: aura-plugins-iw89\n  predecessor: aura-plugins-rien\n---\n## Scope\nFix the write() bug + add TestVersionFileWrites test class.\n\n## Files Owned\n- bin/aura-release (MarketplaceVersionFile.write() fix)\n- tests/test_aura_release.py (new TestVersionFileWrites class)\n\n## Bug Fix: MarketplaceVersionFile.write()\nCurrent (BUGGY): loops over plugins and updates plugins[*].version.\nFixed:\n```python\ndef write(self, version: str, *, dry_run: bool = False) -\u003e None:\n    data = json.loads(self.path.read_text(encoding='utf-8'))\n    data['metadata']['version'] = version\n    # plugins[*].version intentionally NOT updated\n    if not dry_run:\n        self.path.write_text(json.dumps(data, indent=2) + '\\n', encoding='utf-8')\n```\n\n## New Test Class: TestVersionFileWrites\n```python\nclass TestVersionFileWrites:\n    def test_marketplace_write_updates_only_metadata_version(self, tmp_path, aura_release_mod):\n        # marketplace with plugins, write bumps metadata only\n        # assert data['metadata']['version'] == '1.0.1'\n        # assert data['plugins'][0]['version'] == '1.0.0'  # unchanged\n\n    def test_marketplace_write_dry_run_does_not_write(self, tmp_path, aura_release_mod):\n        # write(dry_run=True) must not modify file\n        # assert data['metadata']['version'] == '1.0.0'  # unchanged\n```\n\n## Validation Checklist\n- [ ] write() has no loop over plugins[*].version\n- [ ] write() only sets data['metadata']['version']\n- [ ] dry_run=True skips file write\n- [ ] TestVersionFileWrites class present with 2 test methods\n- [ ] All tests pass: uv run pytest tests/test_aura_release.py -v","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xkuw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2: Fix MarketplaceVersionFile.write() + TestVersionFileWrites","updated_at":"2026-02-26T08:14:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7b1068538ae45c902785326e31c058bbf32e3375ceb06672c5bc05dd8fc61376","created_at":"2026-02-23T13:23:50Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  reviewer: B (Test Quality)\n  round: 1\n---\nIMPORTANT findings from Reviewer B on FOLLOWUP epic z8ga.\n\n## B-IMPORTANT-1: TestStrictUndefined false positive (DEDUP: also A-IMPORTANT-2, C-MINOR-3)\n- See A-IMPORTANT-2 for details\n\n## B-IMPORTANT-2: Round-trip procedure steps tests omit next_state field\n- File: tests/test_gen_schema.py L606-640, tests/test_schema_types_sync.py L644-648\n- Tests check description + order but skip next_state: PhaseId|None\n- If XML gen/parse drops next-state attribute, round-trip tests still pass\n- Fix: Add next_state assertion to round-trip loop\n\n## B-IMPORTANT-3: TestConstraintRolePhaseRefs is tautological after DRY refactor\n- File: tests/test_gen_schema.py L212-246\n- Both expected and actual derive from same module-level _ROLE_CONSTRAINTS dict\n- Semantic errors in _build_constraint_role_refs invisible to this test\n- Pre-refactor static dicts made this test meaningful; post-refactor it only checks internal consistency\n- Fix: test_known_role_specific_constraints (L296-336) is the real guard; tautological tests add noise","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xmu5","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-23T13:23:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:50:15Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"db422f89afb127d696a3dde0adffbd6762d5e27299903723914c940fe7e88b5e","created_at":"2026-02-23T17:56:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences: {}\n---\n## Verbatim User Request\n\nWe will need to update our supervisor, supervisor-plan-tasks, and supervisor-spawn-workers skills.\nThey should plan and implement according to this principle:\n\nThe vertical slices are good: now we should account for the horizontal layering, where the slices may have to inter-op, and create distinct Layer integration points for this so they merge sooner than later. Minimizing and delaying inter-op means divergence: we just need to have clear integration points.\n\nShould also introduce a phrase: Ride the Wave.\n\n1. Means to plan out any required tasks, using the supervisor:plan-tasks skill, according to the format we've described (in addition to existing criteria).\n2. Instead of searching and exploring the codebase yourself, create three parallel Cartographers using TeamCreate, they should run /aura:explore and do NOT shut them down when they're finished.\n3. Add to your team by launching the wave of parallel workers, each running /aura:worker, and do NOT shut them down when they're finished.\n4. When they are done, use /aura:review-impl. The Cartographers should review the work performed by the workers, along the reviewer criteria we've outlined, and also using /aura:reviewer. They should NOT be shutdown when finished.\n5. Workers should fix any BLOCKERs and IMPORTANT findings, and they should be re-reviewed by the Cartographers. This repeats until no more BLOCKERs and IMPORTANT findings remain. Make sure all IMPORTANT and MINOR reviewer findings are tracked in the FOLLOWUP Beads epic according to our process.\n6. Repeat to a MAXIMUM of three times.\n7. If we do three worker-reviewer cycles and IMPORTANT still remain, move onto the next phase (UAT), and leave for the FOLLOWUP.\n\nShould NOT close slices immediately upon workers finishing. Must be reviewed at least once.\n\n## Follow-up request\n\nUser also requested: update schema.xml, PROCESS.md, and Python code to reflect these changes (Ride the Wave, Cartographers, integration points).\n\n## Classification\n\n- Scope: Multi-file protocol update (skills + schema + process + Python codegen)\n- Complexity: Medium — extends existing patterns, no new modules\n- Risk: Low — additive changes to protocol documentation and codegen\n- Domain novelty: Low — builds on existing vertical slice / explore team / review cycle patterns","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xpf1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"REQUEST: Ride the Wave — supervisor workflow update with Cartographers, integration points, and review cycles","updated_at":"2026-02-25T22:50:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:57:26Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"143f995d535700f52ccb3eb450c636a2a33bd5dbf5f62d9567df31932c59d9f1","created_at":"2026-02-26T08:57:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-i08u\n  review_round: 1\n---\nIMPORTANT findings from Reviewer A (Correctness) on FOLLOWUP-SLICE-1.\n\nNo IMPORTANT findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xpr8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-1-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-26T08:57:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"61a98dd2d7159cfb4a2e20333b1550c716d7c2057784b62146006ea99f332d3f","created_at":"2026-02-27T06:59:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-wsys\n  review: aura-plugins-82gp\n---\nMINOR findings for SLICE-5 review round A-1","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xqed","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1 MINOR","updated_at":"2026-02-27T06:59:15Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"aaa916f6ca59f9f76e995fc593e7a269584eeae85075cd2418680ecf1f64b1ff","created_at":"2026-02-26T08:38:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xr0j","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 BLOCKER: Registry types and load/save implementation","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:22Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:24:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer A (Correctness) — SLICE-5 (workflow.py) — MINOR findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xui","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-A-1 MINOR","updated_at":"2026-02-22T17:24:22Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:20:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b8e8e80caf9e8826cbb865310243e84ba7ff379e561e7b5ee4e2a45ed81a3d0d","created_at":"2026-02-23T04:24:14Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer A on SLICE-1. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xwnj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-23T12:20:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:48:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b92df3c68a70569586399c7c817be0d0bf53d53f1d7ef256e7f66e38200d9568","created_at":"2026-02-25T22:48:27Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No BLOCKER findings. Elegance axis, round 3 (final).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-xztk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-3 BLOCKER","updated_at":"2026-02-25T22:48:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":"2026-02-26T08:38:35Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"79735a69042aedc3f4af641535d2d49d6a372f9f78a4f9927bf7cc017a0901b7","created_at":"2026-02-26T08:38:21Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-y2wg","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 MINOR: Code style review","updated_at":"2026-02-26T08:38:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"278a0c89ea239dd0f9eb30aa117ed0f80526c2567340573a331a4ffe88d7fc63","created_at":"2026-02-26T16:01:52Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Contract tests added to test_aura_types.py (SLICE-5) significantly overlap with test_serializable_phase_spec.py (SLICE-1). Both test:\n- SerializableTransition construction and frozen enforcement\n- SerializablePhaseSpec construction, frozen, field types\n- PhaseInput/PhaseResult construction and frozen enforcement\n- JSON roundtrip serialization\n\nFiles:\n- tests/test_aura_types.py: ~40 contract tests added (SLICE-5)\n- tests/test_serializable_phase_spec.py: 68 tests (SLICE-1)\n\nImpact: ~30% of contract tests in test_aura_types.py duplicate assertions already covered by test_serializable_phase_spec.py. This creates maintenance burden — changes to these types require updating tests in two places.\n\nRecommendation: Contract tests in test_aura_types.py should focus on cross-type integration or type existence/import verification only, deferring detailed behavioral testing to test_serializable_phase_spec.py.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ybvl","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: Significant test duplication between test_aura_types.py contract tests and test_serializable_phase_spec.py","updated_at":"2026-02-26T18:40:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T02:20:58Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:20:28Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-1 (types.py / __init__.py) blocker-level findings.\n\n## Finding Summary\n\nNO BLOCKER findings identified for SLICE-1.\n\nTests import correctly from production modules (aura_protocol package).\nSUT (types.py) is NOT mocked — tests exercise real enum and dataclass instances.\nObservable outcomes tested: enum membership, JSON serialization, FrozenInstanceError, dict contents.\nSchema integration test (test_schema_types_sync.py) parses the real schema.xml.\n\nThis group is empty and will be closed immediately.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ye3","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 BLOCKER","updated_at":"2026-02-22T02:20:58Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:57:53Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f7fd2cefa38cd1a687d7598c6db79a054d9aa0b740cbec739a4e456cbb4ac50b","created_at":"2026-02-22T12:55:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"BLOCKER findings from Reviewer B (Test Quality) on SLICE-4 (workflow.py, test_workflow.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-yef","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1 BLOCKER","updated_at":"2026-02-22T12:57:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:20:06Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4bdd40beb1e0680c2452c0c4302cf620368ec9623c14a66813820c447ab5630c","created_at":"2026-02-23T04:24:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer A on SLICE-3. Round 1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-yf1u","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-A-1 IMPORTANT","updated_at":"2026-02-23T12:20:06Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T13:29:26Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"fda6e8950b45039a17e9b70ac13caca0ff4357a0fa33e8c4df42c79685cb0c4d","created_at":"2026-02-23T13:26:07Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  epic: aura-plugins-z8ga\n  blocker_group: aura-plugins-ta5i\n  reviewer: C (Elegance)\n---\n## Problem\nschema.xml is stale after gen_schema.py DRY refactor. generate_schema() output differs from\ncommitted skills/protocol/schema.xml by ~52 lines including semantic changes.\n\n## Tasks\n1. Run gen_schema.py to regenerate skills/protocol/schema.xml\n2. Add a drift test in tests/test_gen_schema.py that asserts generate_schema() output\n   matches the committed canonical schema.xml\n3. Also fix the _build_constraint_phase_refs in_all check to filter PhaseId.COMPLETE\n   (Reviewer A IMPORTANT-1 — needed before regeneration to get correct output)\n4. Run full test suite to verify\n\n## Files to Modify\n- scripts/aura_protocol/gen_schema.py (in_all fix)\n- skills/protocol/schema.xml (regenerate)\n- tests/test_gen_schema.py (add drift test)\n\n## Acceptance Criteria\nGiven schema.xml is regenerated when gen_schema.py runs then the committed file matches output\nGiven a drift test exists when generate_schema() output changes then the test catches it\nGiven PhaseId.COMPLETE has empty constraints when in_all is checked then COMPLETE is excluded","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-yjpk","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FIX-BLOCKER: Regenerate schema.xml and add drift test","updated_at":"2026-02-23T13:29:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"49515e942a3aa410b1334809195f2317dee5359b5e746bd62f5029d098be8905","created_at":"2026-02-27T07:07:32Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6m2m\n  review_prior: aura-plugins-6m2m\n  urd: aura-plugins-7vtb\n---\nCycle 2 re-review of IMPORTANT aura-plugins-fdim.\n\nVOTE: ACCEPT — workflow.py:647-665 now wraps parent_handle.signal() in try/except Exception. On failure, logs a warning via workflow.logger.warning() with slice_id, parent_workflow_id, and the exception. Signal delivery failure correctly does not prevent SliceResult(success=True) from being returned. The noqa: BLE001 comment suppresses broad-exception lint appropriately. IMPORTANT resolved.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-yjwc","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-2: SliceWorkflow parent signal try/except fix","updated_at":"2026-02-27T07:07:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:24:11Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:21:55Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Reviewer B (Test Quality) — SLICE-3 (constraints.py) important-level findings.\n\n## Finding: check_all only aggregates 5 of the 22 C-* constraint checks — the 17 remaining utility checks are not reachable via check_all(state) alone — test coverage gap for the integrated aggregation path (IMPORTANT)\n\nconstraints.py check_all() aggregates:\n  check_review_consensus, check_severity_tree, check_blocker_gate, check_audit_trail, check_role_ownership\n\nThe other 17 constraint checkers (check_review_binary, check_dep_direction, check_blocker_dual_parent, check_proposal_naming, check_review_naming, check_slice_has_leaf_tasks, check_ure_verbatim, check_followup_timing, check_agent_commit, check_frontmatter_refs, check_supervisor_no_impl, check_followup_lifecycle, check_followup_leaf_adoption, check_worker_gates, check_supervisor_explore_team, check_vertical_slices, check_handoff_required) are NOT included in check_all.\n\nThis means check_all is only a partial aggregate. The test TestCrossConstraintIntegration validates that check_all aggregates correctly across what IS in it, but no test asserts that check_all(state) returns violations from the full set of 22 constraints.\n\nThis architectural decision may be intentional (some constraints require external parameters beyond EpochState), but the test suite has no test that:\n1. Documents which constraints ARE in check_all vs not.\n2. Verifies that check_all output + the individually callable checkers together cover all 22 C-* specs.\n\nThis gap means a caller who calls only check_all(state) would get a false sense of completeness. A follow-up epic should add either documentation or a cross-module integration test that validates the coverage contract.\n\nSeverity: IMPORTANT because it affects the semantic contract of the most important public method.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-yno","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-B-1 IMPORTANT","updated_at":"2026-02-22T17:24:11Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:41Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"01b12c65a4286610c8d9fdd56239775f431d2a0b651be6d03a900ac36b691189","created_at":"2026-02-26T03:31:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-kg25\n  reviewer: cartographer-c\n  round: 1\n---\nMINOR findings from Cartographer C (Elegance) on SLICE-4.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-yqk1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-C-1 MINOR","updated_at":"2026-02-26T03:31:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6bf01b011f5b7c0f0d166b1a8bae697f5c44ea1514fa07fd6d8400d2ae5598ea","created_at":"2026-02-26T08:54:31Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  review_round: 1\n---\nBLOCKER findings from Reviewer B (Test Quality) on FOLLOWUP-SLICE-2.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ysnd","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T08:55:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cfc2b8549cb1d816af4002e603cfb40c6d22ffd753327bde9db82d2168ade0e8","created_at":"2026-02-26T23:47:15Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-cz2t\n  review: aura-plugins-uvgb\n  files:\n    - tests/test_workflow.py (TestP9SliceFailFastPattern, lines 1160-1249)\n    - scripts/aura_protocol/workflow.py (EpochWorkflow._run_p9_slices, lines 454-514)\n---\n## Finding\n\nTestP9SliceFailFastPattern (test_workflow.py:1160) tests the raw asyncio.wait(FIRST_EXCEPTION) semantic directly using plain asyncio coroutines:\n\n```python\nclass TestP9SliceFailFastPattern:\n    \"\"\"Tests the asyncio pattern that the P9 supervisor uses to run parallel slices\n    and cancel remaining slices on first failure. This tests the PATTERN — not an\n    actual P9 Temporal workflow...\"\"\"\n\n    async def test_first_exception_returns_on_first_failure(self) -\u003e None:\n        async def fast_fail() -\u003e None:\n            raise RuntimeError(\"Slice 0 failed with BLOCKER\")\n\n        async def long_slice() -\u003e None:\n            await asyncio.sleep(100)\n\n        tasks = [\n            asyncio.create_task(fast_fail(), name=\"fast-fail\"),\n            asyncio.create_task(long_slice(), name=\"long-slice\"),\n        ]\n        done, pending = await asyncio.wait(tasks, return_when=asyncio.FIRST_EXCEPTION)\n        ...\n```\n\nThe test class docstring explicitly acknowledges it tests the \"PATTERN — not an actual P9 Temporal workflow\".\n\nThe production method EpochWorkflow._run_p9_slices() (workflow.py:454) wraps child workflow handles, not plain asyncio.Tasks. While ChildWorkflowHandle is awaitable, the actual integration (start_child_workflow, then asyncio.wait on handles) is untested.\n\n## Why It Matters\n\nThe fail-fast semantic is a correctness requirement from the URD (aura-plugins-cz2t description: \"asyncio.gather NEVER used — only workflow.wait()\"). Testing only the raw pattern misses a production code path: that start_child_workflow handles behave as asyncio-awaitable tasks when passed to asyncio.wait. A subtle Temporal SDK behavior change could break this without test failure.\n\nThe existing sandbox tests (TestWorkflowEnvironmentSandbox) are skipped because they require a running Temporal server (4 skipped). There is no path that exercises _run_p9_slices() end-to-end in CI.\n\n## What Would Be Better\n\nA structural test that calls _run_p9_slices() with SliceInput lists and verifies the fail-fast pattern via the actual method, using a DI-friendly stub for SliceWorkflow (per R12 docstring pattern), without requiring a Temporal server.\n\nAlternatively, the existing pattern tests are acceptable as a first-pass and the gap is documented. The tests that do exist (structural invariants, signal logic) are well-written.\n\n## Not a Blocker Because\n\n- The production code is correct per code inspection\n- The asyncio pattern tests verify the control-flow semantics\n- This is a test coverage gap, not a correctness failure","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-yz6c","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: TestP9SliceFailFastPattern tests the asyncio pattern, not the actual EpochWorkflow._run_p9_slices() production method","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a710d0db93642dd5920d79d66570c95c3403963f067c86cfd9fd7b39e5589fb8","created_at":"2026-02-26T23:46:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"File: scripts/aura_protocol/__init__.py, lines 85-89\n\nThe module docstring advertises four symbols as part of the public API:\n  Audit Activities (from audit_activities.py):\n    init_audit_trail(trail)\n    record_audit_event(event)\n    query_audit_events(epoch_id, phase)\n    InMemoryAuditTrail\n\nHowever, none of these are imported in __init__.py and none appear in __all__.\nAttempting 'from aura_protocol import init_audit_trail' raises ImportError.\n\nThe SLICE-1 task (aura-plugins-rpc4) added the docstring section but did not\nadd the corresponding 'from aura_protocol.audit_activities import ...' block\nand __all__ entries. This is a broken contract: the docstring claims a public\nAPI that doesn't exist.\n\nFix options:\n  A. Add 'from aura_protocol.audit_activities import (init_audit_trail,\n     record_audit_event, query_audit_events, InMemoryAuditTrail)' to __init__.py\n     and add all four to __all__.\n  B. Remove the 'Audit Activities' section from the docstring entirely.\n\nOption A is preferred (these ARE intended to be public — bin/worker.py imports\nthem, tests import them directly from audit_activities).\n\nSlice: aura-plugins-rpc4","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-z0i4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"IMPORTANT: __init__.py docstring claims audit_activities symbols are public but they cannot be imported","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:38:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"148b74fa0ba9f66f1c9067af5c6fe14d3fe6ae4250ad5e6d904860c5d0425e33","created_at":"2026-02-25T22:38:41Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings for SLICE-2 from Test Quality axis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-z3c2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-B-1 MINOR","updated_at":"2026-02-25T22:38:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T08:55:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f69e17d01b88723c7208441bbcfa16a8c8fb08eca30e9405fb9d0365e8f2c0ab","created_at":"2026-02-26T08:55:09Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-k85y\n  review_round: 1\n---\nMINOR findings from Reviewer C (Elegance) on FOLLOWUP-SLICE-2. No findings.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-z3gi","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"FOLLOWUP-SLICE-2-REVIEW-C-1 MINOR","updated_at":"2026-02-26T08:55:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:19:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:24:35Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"VOTE: ACCEPT\n\n## Review Summary (Reviewer C — Elegance and Complexity Proportionality)\n\nSLICE-5 (workflow.py) correctly wraps the state machine with Temporal without over-engineering the integration layer.\n\n### Strengths\n- Signal-driven state mutations (advance_phase, submit_vote) vs query-driven reads (current_state, available_transitions) is exactly the correct split for Temporal determinism. Signals for mutations, queries for reads — the design is idiomatic Temporal.\n- Pending-queue pattern (_pending_advance, _pending_votes) for signal delivery is clean: signals enqueue, run() loop drains. This correctly handles signal ordering and prevents activity scheduling inside signal handlers.\n- Activities at the right boundaries: check_constraints and record_transition are activities because they represent I/O boundaries (external constraint evaluation, external persistence). State machine advance is workflow code because it is deterministic. The boundary is drawn correctly.\n- One workflow per epoch (not per phase) is the correct v1 granularity. The comment correctly defers per-phase parallelism to v3.\n- Search attributes upserting on every transition is correct and complete: SA_EPOCH_ID, SA_PHASE, SA_ROLE, SA_STATUS, SA_DOMAIN all updated atomically after each successful advance.\n- record_transition as a stub activity that logs and returns — the extension point is defined now for v2 without adding fake behavior.\n- workflow.now() used for deterministic timestamps instead of datetime.now(). The comment and docstring both flag this invariant.\n\n### Important Finding\n- aura-plugins-i2g: Bare except Exception in run() loop silently discards TransitionError. The caller (whoever sent the advance_phase signal) gets no feedback that the transition was rejected. Failed transition attempts are not recorded in the audit trail.\n\n### Minor Finding\n- aura-plugins-3m4: Post-hoc mutation of TransitionRecord in transition_history list (replacing the last element with a deterministic-timestamp copy). Technically legal but subtle and unexpected, given TransitionRecord is documented as immutable. A cleaner fix is to pass the timestamp into advance().\n\n### Verdict\nNo BLOCKER findings. One IMPORTANT finding (silent failure on advance rejection), one MINOR finding (post-hoc mutation pattern). SLICE-5 ACCEPT — the IMPORTANT finding affects debuggability and auditability but does not break correctness for the v1 happy path.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-z3n","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-C-1: workflow.py — Temporal workflow wrapper","updated_at":"2026-02-22T04:19:55Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9c741c9db8941768d4e8e3fd9e02b13128ea5a09e945b5f32afd8a63764de57f","created_at":"2026-02-26T15:33:16Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Create scripts/aura_protocol/audit_activities.py with _AUDIT_TRAIL singleton, init_audit_trail(), @activity.defn record_audit_event, @activity.defn query_audit_events. ApplicationError on uninitialized.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-z4ot","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-3-L3: Impl — audit_activities.py module","updated_at":"2026-02-26T18:34:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"96099506acda94f15b7617760d990b4ba736c41b6a0b12cccc7275b1561f27b7","created_at":"2026-02-26T16:01:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-w5hi\n  review: aura-plugins-duzp\n---\nMINOR findings for SLICE-5 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-z4yp","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-5-REVIEW-B-1 MINOR","updated_at":"2026-02-26T18:40:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T16:02:08Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"56f9a728e22dee6156209693ec5f1c7c44b0b4265179f0fb116449fd702e642e","created_at":"2026-02-26T16:01:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-l6n8\n  review: aura-plugins-4rj7\n---\nBLOCKER findings for SLICE-1 test quality review","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-z6jm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-1 BLOCKER","updated_at":"2026-02-26T16:02:08Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7427f31fbeac5e121afa4ad777beb851baa4484a897e5cd4e0383dddf6e1650f","created_at":"2026-02-23T08:34:53Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  request: aura-plugins-94yc\n  urd: aura-plugins-w07o\n  ratified_proposal: aura-plugins-mg6h\n  review_round_c: SLICE-1-REVIEW-C-1 through SLICE-4-REVIEW-C-1\n  review_round_b: SLICE-1-REVIEW-B-1 through SLICE-4-REVIEW-B-1\n  review_round_a: SLICE-1-REVIEW-A-1 through SLICE-4-REVIEW-A-1\n---\n## Summary\nAggregated IMPORTANT and MINOR findings from code review Round 1 of epic aura-plugins-94yc (Schema-driven protocol engine v2).\n\n## IMPORTANT Severity Groups (25 findings across 4 slices)\nReviewer C IMPORTANT groups:\n- aura-plugins-d7ki: SLICE-1 — frozenset[str] not PhaseId, stale docstring\n- aura-plugins-hqzj: SLICE-2 — duplicated constraint dicts, gen_schema re-encodes static data\n- aura-plugins-m6w0: SLICE-3 — O(n*m) loop, constraints injected to ALL roles\n- aura-plugins-c07b: SLICE-4 — silent drops of unknown constraint IDs\n\nReviewer B IMPORTANT groups:\n- aura-plugins-4y9r: SLICE-1 — count-only sync test\n- aura-plugins-sjna: SLICE-2 — count-only tests, missing AC10 e2e\n- aura-plugins-kjtp: SLICE-3 — no negative path for StrictUndefined\n- aura-plugins-cmp4: SLICE-4 — no positive constraint inclusion tests\n\nReviewer A IMPORTANT groups:\n- aura-plugins-xwnj: SLICE-1 — constraints tuple vs ConstraintSpec (overlaps BLOCKER)\n- aura-plugins-yf1u: SLICE-3 — ALL 23 constraints injected per role\n- aura-plugins-wmp7: SLICE-1\n\n## MINOR Severity Groups\nReviewer C MINOR groups:\n- aura-plugins-kxt5: SLICE-1 — SubstepSpec.type bare str\n- aura-plugins-fpby: SLICE-2 — return type str | None when None never returned, deferred import\n- aura-plugins-pp3j: SLICE-3 — skill_header.j2 inline run-on constraint text\n- aura-plugins-o7xw: SLICE-4 — no PhaseId.COMPLETE in _PHASE_CONSTRAINTS\n\nReviewer B MINOR groups:\n- aura-plugins-ai8v: SLICE-1 — substring-only frozen check\n- aura-plugins-76ab: SLICE-2 — diff test checks header not content\n- aura-plugins-u1jl: SLICE-3 — no diff content line verification\n- aura-plugins-xbky: SLICE-4 — test asserts inclusion not exclusion\n\nReviewer A MINOR groups:\n- aura-plugins-wkp0: SLICE-1 — stale docstring count (22 vs 23)\n- aura-plugins-jb3m: SLICE-2 — constraint ordering mismatch\n- aura-plugins-vlxn: SLICE-4 — redundant C-dep-direction in EPOCH\n- aura-plugins-484m: SLICE-1\n\n## Next Steps\n1. FOLLOWUP_URE: User scopes which IMPORTANT/MINOR findings to address\n2. FOLLOWUP_URD: Requirements for the follow-up scope\n3. FOLLOWUP_PROPOSAL: Architecture proposal for selected fixes\n4. FOLLOWUP_IMPL_PLAN + SLICES: Implementation","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-z8ga","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":3,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"FOLLOWUP: Non-blocking improvements from code review (aura-plugins-94yc Round 1)","updated_at":"2026-02-23T08:34:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"1355c0c959603e49bb9dea503fbed3d7cf706f96a7dc7aac29d6ef08e88314a5","created_at":"2026-02-26T15:33:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"Update all references to FilePart.file_uri→file_with_uri, ToolCall old field names, _REVISE_DRIVES_BACK→_REVISE_DRIVES_BACK_PHASES across entire codebase. Update ReviewVoteSignal.axis type to ReviewAxis.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zab2","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"SLICE-2-L3: Impl — Update all call sites for breaking renames","updated_at":"2026-02-26T18:34:50Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T12:53:40Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b2e4c0b409a08d400d4f7801be0423c7fd8783929932d925f249d3ace281f069","created_at":"2026-02-22T12:52:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"IMPORTANT findings from Reviewer C (Elegance) on SLICE-2 (constraints.py, test_constraints.py).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zaz","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-2-REVIEW-C-1 IMPORTANT","updated_at":"2026-02-22T12:53:40Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-26T03:31:41Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"07f5e76a424218289e73f15fda1b7ecd7a025e8a348d01f2544444685362df06","created_at":"2026-02-26T03:31:01Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-9suu\n  reviewer: cartographer-c\n  round: 1\n---\nMINOR findings from Cartographer C (Elegance) on SLICE-1.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zbu4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-1 MINOR","updated_at":"2026-02-26T03:31:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T17:30:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"8371892d74a6303541466f29257df09c4962fb69a928ec7b509fb4f9073fb676","created_at":"2026-02-22T12:57:40Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"tests/test_constraints.py TestAC4CheckState.test_check_state_does_not_short_circuit (lines 239-248) uses a state at p10 with blocker_count=3 and empty severity_groups. The test comment says 'p10 with blockers AND no consensus AND no severity groups' but only asserts 2 constraints: C-review-consensus and C-worker-gates.\n\nActual violations produced by check_state() for this state include 4 constraint_ids:\n- C-review-consensus (no votes)\n- C-worker-gates (blocker_count=3)\n- C-severity-eager (empty severity_groups)\n- C-audit-never-delete (at p10, empty transition_history)\n\nThe test's purpose is to prove check_state does NOT short-circuit, but by only asserting 2 of 4 expected violations it would pass even if check_state stopped after the first 2. A test that asserts all 4 would give stronger non-short-circuit proof.\n\nFix: Update the test to assert all 4 constraint_ids that this specific state produces, strengthening the non-short-circuit guarantee.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zd45","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"test_check_state_does_not_short_circuit asserts only 2 of 4 expected violations — C-severity-eager and C-audit-never-delete not asserted","updated_at":"2026-02-22T17:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dce92e19d7030fc0daf2478063307aafab50ef6d311433af12b3297df5d80814","created_at":"2026-02-26T16:00:54Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-o8va\n  urd: aura-plugins-2ojv\n---\nVOTE: ACCEPT - test_worker.py covers file existence, executable flag, import, parse_args defaults, CLI overrides, env var fallbacks, CLI priority over env, --help output. Tests pass and cover the right behaviors. However, IMPORTANT finding: uses unittest.mock (mock.patch, mock.patch.dict), which is the first mock usage in a codebase with 799+ baseline tests using zero mocks.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zd9p","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-B-1: worker.py test quality","updated_at":"2026-02-26T16:00:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-25T22:48:55Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9f4b6f5fa9ef6bad99db2df26f0b7aebd432ae2349462dd4582a8e30e33457bf","created_at":"2026-02-25T22:48:51Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"No MINOR findings for SLICE-1 Round 3 (Test Quality axis).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zfxw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-B-3 MINOR","updated_at":"2026-02-25T22:48:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4716614cd5b04e37d1157a42f52b4cce891f78aac181510fc18972af5dba3ae7","created_at":"2026-02-26T20:50:22Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  impl_plan: aura-plugins-q00q\n  followup_urd: aura-plugins-gox3\n---\n## Scope\nCreate docs/worker.md — combined developer + operator guide for bin/worker.py.\n\n### Developer section\n- Architecture: EpochWorkflow -\u003e activities -\u003e audit trail\n- How activities register (module-level @activity.defn)\n- How to add new activities\n- Testing with ActivityEnvironment + DI pattern\n\n### Operator section\n- CLI args: --namespace, --task-queue, --server-address\n- Env var fallbacks: TEMPORAL_NAMESPACE, TEMPORAL_TASK_QUEUE, TEMPORAL_ADDRESS\n- systemd user service via nix/temporal-service.nix\n- home-manager module configuration\n\n## Files Owned\n- docs/worker.md (NEW)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zh0j","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"done","target":"","timeout_ns":0,"title":"FOLLOWUP_SLICE-2: docs/worker.md","updated_at":"2026-02-26T23:56:04Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"7d6314a97e0e550db7fad3d739e8471f46292887b513a2ca093fcc70e71fb359","created_at":"2026-02-27T07:07:23Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-6m2m\n  review_prior: aura-plugins-zldt\n  urd: aura-plugins-7vtb\n---\nCycle 2 re-review of BLOCKER aura-plugins-dzen.\n\nVOTE: ACCEPT — dbPath description at temporal-service.nix:86-90 now correctly states 'Empty string (default) auto-resolves to ${XDG_DATA_HOME:-$HOME/.local/share}/aura/plugin/temporal.db at service start via ExecStartPre (persistent across restarts). Set to an explicit path to override the XDG default.' This accurately describes the implementation. BLOCKER resolved.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zhre","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-2: temporal-service.nix dbPath description fix","updated_at":"2026-02-27T07:07:23Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No BLOCKER findings — elegance axis clean","closed_at":"2026-02-26T04:30:25Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"19e57ef990166b7a8b8b294c3008bd8cbca9f147afeb9e85654017c6fe2653e7","created_at":"2026-02-26T04:30:03Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zl8z","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-C-2 BLOCKER","updated_at":"2026-02-26T04:30:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"641915f3d06cb47112f412fa6b6861bfd37064f2cb51a6d415a70fd7b8c5f564","created_at":"2026-02-27T06:54:56Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-s7dj\n  urd: aura-plugins-7vtb\n---\nVOTE: REVISE — BLOCKER found in temporal-service.nix dbPath option description","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zldt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1: Rename worker→aurad + packaging + SQLite XDG","updated_at":"2026-02-27T06:54:56Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"83655e3b0b0367538e82e9b5414f70ee41ef08b95ed2759c120e146ffbb67c3b","created_at":"2026-02-26T04:02:26Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-82ya\n  uat: aura-plugins-6p9j\n---\nBLOCKER findings from Phase 11 UAT on SLICE-3.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zn6o","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-3-UAT-BLOCKER BLOCKER","updated_at":"2026-02-26T04:02:26Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-22T04:21:17Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":null,"created_at":"2026-02-22T02:24:17Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"## Finding\n\n### Location\n`scripts/aura_protocol/interfaces.py`, lines 33-38:\n\n```python\nif TYPE_CHECKING:\n    from aura_protocol.constraints import ConstraintViolation  # noqa: F401\n    from aura_protocol.state_machine import EpochState  # noqa: F401\n```\n\n### Description\nBoth `ConstraintViolation` and `EpochState` are imported only under `TYPE_CHECKING`. This means at RUNTIME these names are NOT available in the `interfaces` module scope.\n\nThe `ConstraintValidatorInterface.validate` method signature references `EpochState` and `list[ConstraintViolation]`:\n\n```python\ndef validate(self, state: EpochState) -\u003e list[ConstraintViolation]: ...\n`\\:\n\nAt RUNTIME, Python's `@runtime_checkable` Protocol uses structural subtyping based on method NAME presence only (not signature matching for isinstance). So `isinstance(obj, ConstraintValidatorInterface)` checks only that `obj` has a `validate` attribute — it does NOT verify the parameter types or return type.\n\nThis means:\n1. AC9 tests pass because isinstance() only checks method name existence\n2. The TYPE_CHECKING-only imports are CORRECT for avoiding circular imports at runtime\n3. However, this creates a documentation/clarity gap: the interface signature is checked only statically (mypy), not at runtime\n\n### Risk\nIMPORTANT (not BLOCKER) because: (1) this is the correct Python typing.Protocol pattern for avoiding circular imports — the code comment explicitly explains it; (2) AC9 is correctly met: isinstance() returns True for correct implementors; (3) type checking via mypy/pyright provides the signature enforcement. The implementation is correct per Python Protocol semantics.\n\nThe concern is that a future implementor might not realize the signature mismatch will not be caught at runtime, only at static analysis time. This should be clearly documented in the module docstring.\n\n### Suggestion\nAdd a comment in the module docstring noting: 'Note: EpochState and ConstraintViolation are TYPE_CHECKING-only imports to avoid circular imports. Runtime isinstance() checks only verify method name presence (as per Python typing.Protocol semantics); full signature enforcement requires static type checking.' This ensures future implementors understand the runtime vs. static checking distinction.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zpu","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":null,"status":"closed","target":"","timeout_ns":0,"title":"SLICE-4-REVIEW-A-1 IMPORTANT: ConstraintValidatorInterface uses TYPE_CHECKING import for EpochState causing isinstance() Protocol check to be structurally incomplete","updated_at":"2026-02-22T04:21:17Z","waiters":"","wisp_type":"","work_type":"mutex"}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-23T12:46:34Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a819f029e3e867678c5a461235f2c90c0f844f1988538bef20dd0c79e8a13ae1","created_at":"2026-02-23T04:26:34Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"In test_schema_types_sync.py::TestProcedureStepsMatchSchema::test_supervisor_steps_from_schema (line 620), the test only asserts len(steps) == len(startup_steps). This does not verify that the ProcedureStep descriptions match the schema.xml startup-sequence text values. A count match would pass even if all descriptions were wrong. Proposal AC3 requires field-by-field comparison, not count-only assertions. The test should also compare step.description or step.order values against the XML source.\n\nRemediation: Add assertions comparing each step.description against the corresponding step.text from the \u003cstartup-sequence\u003e in schema.xml. This mirrors the pattern used in test_roundtrip_constraint_fields_match (field-by-field) and test_roundtrip_handoff_fields_match.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zs04","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"S1-B1-IMPORTANT: PROCEDURE_STEPS sync test is count-only, not field-by-field","updated_at":"2026-02-23T12:46:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"No IMPORTANT findings — elegance axis clean","closed_at":"2026-02-26T04:30:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dbefdd2354e0f4f251cb1559556195435dc8289baf3203f91d7f97819215f741","created_at":"2026-02-26T04:30:11Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-ztp8","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"SLICE-3-REVIEW-C-2 IMPORTANT","updated_at":"2026-02-26T04:30:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ae1a825d4f0c799c4b75a8a48788d262c662c77f9efcee08c040f9d1f83610de","created_at":"2026-02-27T06:55:05Z","created_by":"David Huu Pham","crystallizes":0,"defer_until":null,"description":"---\nreferences:\n  slice: aura-plugins-s7dj\n  review: aura-plugins-zldt\n---\nMINOR findings for SLICE-1 round 1 (Reviewer A)","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"aura-plugins-zwty","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"dayvidpham@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"SLICE-1-REVIEW-A-1 MINOR","updated_at":"2026-02-27T06:55:05Z","waiters":"","wisp_type":"","work_type":""}
