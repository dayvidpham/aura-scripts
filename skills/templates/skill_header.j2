<!-- BEGIN GENERATED FROM aura schema -->
# {{ role.name }} Agent

**Role:** `{{ role.id.value }}` | **Phases owned:** {% for p in owned_phases %}{{ phase_slug[p] }}{% if not loop.last %}, {% endif %}{% endfor %}


## Protocol Context (generated from schema.xml)

### Owned Phases

{% if owned_phases %}
| Phase | Name | Domain | Transitions |
|-------|------|--------|-------------|
{% for phase in phases_detail %}
| `{{ phase_slug[phase.id] }}` | {{ phase.name }} | {{ phase.domain.value }} | {% for t in phase.transitions %}→ `{{ phase_slug[t.to_phase] }}` ({{ t.condition }}){% if not loop.last %}; {% endif %}{% endfor %} |
{% endfor %}
{% else %}
_(No phases owned)_
{% endif %}

### Commands

{% if commands %}
| Command | Description | Phases |
|---------|-------------|--------|
{% for cmd in commands %}
| `{{ cmd.name }}` | {{ cmd.description }} | {% if cmd.phases %}{% for p in cmd.phases %}{{ phase_slug[p] }}{% if not loop.last %}, {% endif %}{% endfor %}{% else %}—{% endif %} |
{% endfor %}
{% else %}
_(No commands assigned to this role)_
{% endif %}

### Constraints (Given/When/Then/Should Not)

{% if constraints %}
{% for c in constraints %}
**[{{ c.id }}]**
- Given: {{ c.given }}
- When: {{ c.when }}
- Then: {{ c.then }}
- Should not: {{ c.should_not }}

{% endfor %}
{% else %}
_(No constraints defined)_
{% endif %}

### Handoffs

{% if handoffs %}
| ID | Source | Target | Phase | Content Level | Required Fields |
|----|--------|--------|-------|---------------|-----------------|
{% for h in handoffs %}
| `{{ h.id }}` | `{{ h.source_role.value }}` | `{{ h.target_role.value }}` | `{{ phase_slug[h.at_phase] }}` | {{ h.content_level.value }} | {{ h.required_fields | join(", ") }} |
{% endfor %}
{% else %}
_(No handoffs for this role)_
{% endif %}

### Startup Sequence

{% if steps %}
{% for step in steps %}
**Step {{ step.order }}:** {{ step.instruction }}{{ " (`%s`)" % step.command if step.command else "" }}{{ " — _%s_" % step.context if step.context else "" }}{{ " → `%s`" % step.next_state.value if step.next_state else "" }}
{% endfor %}
{% else %}
_(No startup sequence defined for this role)_
{% endif %}
<!-- END GENERATED FROM aura schema -->
